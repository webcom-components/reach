/*!
 * The MIT License (MIT)
 * 
 * Copyright (c) 2015 Webcom
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */
(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["Reach"] = factory();
	else
		root["Reach"] = factory();
})(this, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId])
/******/ 			return installedModules[moduleId].exports;
/******/
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			exports: {},
/******/ 			id: moduleId,
/******/ 			loaded: false
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.loaded = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ function(module, exports, __webpack_require__) {

	/* WEBPACK VAR INJECTION */(function(global) {'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.Reach=undefined;var _classCallCheck2=__webpack_require__(1),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=__webpack_require__(2),_createClass3=_interopRequireDefault(_createClass2),_adapter=__webpack_require__(6),_adapter2=_interopRequireDefault(_adapter),_actions=__webpack_require__(7),_actions2=_interopRequireDefault(_actions),_datarefs=__webpack_require__(8),_datarefs2=_interopRequireDefault(_datarefs),_reach=__webpack_require__(9),_reach2=_interopRequireDefault(_reach),_room=__webpack_require__(25),_room2=_interopRequireDefault(_room),_webrtcmngr=__webpack_require__(27),_webrtcmngr2=_interopRequireDefault(_webrtcmngr);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var Reach=exports.Reach=function(){function Reach(){var url=arguments.length<=0||arguments[0]===undefined?'http://webcom.orange.com/base/webrtc':arguments[0];(0,_classCallCheck3.default)(this,Reach);this.datarefs=(0,_datarefs2.default)(url);this.webrtcmngr=(0,_webrtcmngr2.default)(this.datarefs);this.webrtcmngr.setWebrtcManger(this.webrtcmngr);}(0,_createClass3.default)(Reach,[{key:'Room',value:function Room(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return _room2.default.apply(undefined,args.concat([this.datarefs,this.webrtcmngr]));}},{key:'Reach',value:function Reach(){for(var _len2=arguments.length,args=Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2];}return _reach2.default.apply(undefined,args.concat([this.datarefs]));}}],[{key:'version',get:function get(){return ('0.0.0');}},{key:'actions',get:function get(){return _actions2.default;}}]);return Reach;}();global.ComSDK=Reach;module.exports=Reach;
	/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))

/***/ },
/* 1 */
/***/ function(module, exports) {

	"use strict";
	
	exports.__esModule = true;
	
	exports.default = function (instance, Constructor) {
	  if (!(instance instanceof Constructor)) {
	    throw new TypeError("Cannot call a class as a function");
	  }
	};

/***/ },
/* 2 */
/***/ function(module, exports, __webpack_require__) {

	"use strict";
	
	exports.__esModule = true;
	
	var _defineProperty = __webpack_require__(3);
	
	var _defineProperty2 = _interopRequireDefault(_defineProperty);
	
	function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }
	
	exports.default = function () {
	  function defineProperties(target, props) {
	    for (var i = 0; i < props.length; i++) {
	      var descriptor = props[i];
	      descriptor.enumerable = descriptor.enumerable || false;
	      descriptor.configurable = true;
	      if ("value" in descriptor) descriptor.writable = true;
	      (0, _defineProperty2.default)(target, descriptor.key, descriptor);
	    }
	  }
	
	  return function (Constructor, protoProps, staticProps) {
	    if (protoProps) defineProperties(Constructor.prototype, protoProps);
	    if (staticProps) defineProperties(Constructor, staticProps);
	    return Constructor;
	  };
	}();

/***/ },
/* 3 */
/***/ function(module, exports, __webpack_require__) {

	module.exports = { "default": __webpack_require__(4), __esModule: true };

/***/ },
/* 4 */
/***/ function(module, exports, __webpack_require__) {

	var $ = __webpack_require__(5);
	module.exports = function defineProperty(it, key, desc){
	  return $.setDesc(it, key, desc);
	};

/***/ },
/* 5 */
/***/ function(module, exports) {

	var $Object = Object;
	module.exports = {
	  create:     $Object.create,
	  getProto:   $Object.getPrototypeOf,
	  isEnum:     {}.propertyIsEnumerable,
	  getDesc:    $Object.getOwnPropertyDescriptor,
	  setDesc:    $Object.defineProperty,
	  setDescs:   $Object.defineProperties,
	  getKeys:    $Object.keys,
	  getNames:   $Object.getOwnPropertyNames,
	  getSymbols: $Object.getOwnPropertySymbols,
	  each:       [].forEach
	};

/***/ },
/* 6 */
/***/ function(module, exports) {

	'use strict';window.RTCPeerConnection=null;window.getUserMedia=null;window.attachMediaStream=null;window.reattachMediaStream=null;window.webrtcDetectedBrowser=null;window.webrtcDetectedVersion=null;function fixIceServer(iceServer){if(iceServer.hasOwnProperty('urls')){iceServer.url=iceServer.urls;delete iceServer.urls;}if(iceServer.hasOwnProperty('url')&&iceServer.url.toLowerCase().startsWith('turns')&&navigator.mozGetUserMedia){console.warn('(ReachSDK::maybeFixConfiguration) '+'turns detected on firefox -> ignore this entry');}}function maybeFixConfiguration(pcConfig){if(pcConfig===null){return;}if(pcConfig.iceServers&&pcConfig.iceServers.length>0){var mTempsServers=[];for(var i=pcConfig.iceServers.length-1;i>=0;i--){var iceServer=pcConfig.iceServers[i];fixIceServer(iceServer);mTempsServers.push(iceServer);}pcConfig.iceServers=mTempsServers;}}function createTurnServerConfig(url,username,password){var legacy=arguments.length<=3||arguments[3]===undefined?false:arguments[3],iceServer=undefined;if(legacy){var turn_url_parts=url.split('?');if(turn_url_parts.length===1||turn_url_parts[1].indexOf('transport=udp')===0){iceServer={url:turn_url_parts[0],credential:password,username:username};}}else {iceServer={url:url,credential:password,username:username};}return iceServer;}if(navigator.mozGetUserMedia){window.webrtcDetectedBrowser='firefox';window.webrtcDetectedVersion=parseInt(navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1],10);window.RTCPeerConnection=function(pcConfig,pcConstraints){maybeFixConfiguration(pcConfig);return new mozRTCPeerConnection(pcConfig,pcConstraints);};window.RTCSessionDescription=mozRTCSessionDescription;window.RTCIceCandidate=mozRTCIceCandidate;window.getUserMedia=navigator.mozGetUserMedia.bind(navigator);navigator.getUserMedia=getUserMedia;window.createIceServer=function(url,username,password){var iceServer=null,url_parts=url.split(':');if(url_parts[0].indexOf('stun')===0){iceServer={url:url};}else if(url_parts[0].indexOf('turn')===0){iceServer=createTurnServerConfig(url,username,password,window.webrtcDetectedVersion<27);}return iceServer;};window.createIceServers=function(urls,username,password){var iceServers=[];for(var i=0;i<urls.length;i++){var iceServer=window.createIceServer(urls[i],username,password);if(iceServer!==null){iceServers.push(iceServer);}}return iceServers;};window.detachMediaStream=function(element){if(element){element.mozSrcObject=null;element.pause();}};window.attachMediaStream=function(element,stream){try{if(element&&stream){element.mozSrcObject=stream;if(element.play&&typeof element.play=='function'){element.play();}else {console.warn('(ReachSDK::attachMediaStream)element.play not available');}}else {console.error('ReachSDK::attachMediaStream->parameters not valid');}}catch(e){console.error('(ReachSDK::attachMediaStream)Exception='+e);}};window.reattachMediaStream=function(to,from){if(to&&from){to.mozSrcObject=from.mozSrcObject;to.play();}else {console.error('ReachSDK::reattachMediaStream->parameters not valid');}};if(!MediaStream.prototype.getVideoTracks){MediaStream.prototype.getVideoTracks=function(){return [];};}if(!MediaStream.prototype.getAudioTracks){MediaStream.prototype.getAudioTracks=function(){return [];};}}else if(navigator.webkitGetUserMedia){window.webrtcDetectedBrowser='chrome';window.webrtcDetectedVersion=parseInt(navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./)[2],10);window.createIceServer=function(url,username,password){var iceServer=null,url_parts=url.split(':');if(url_parts[0].indexOf('stun')===0){iceServer={url:url};}else if(url_parts[0].indexOf('turn')===0){iceServer=createTurnServerConfig(url,password,username);}return iceServer;};window.createIceServers=function(urls,username,password){var iceServers=[];if(window.webrtcDetectedVersion>=34){iceServers={urls:urls,credential:password,username:username};}else {for(var i=0;i<urls.length;i++){var iceServer=window.createIceServer(urls[i],username,password);if(iceServer!==null){iceServers.push(iceServer);}}}return iceServers;};window.RTCPeerConnection=function(pcConfig,pcConstraints){if(window.webrtcDetectedVersion<34){maybeFixConfiguration(pcConfig);}return new webkitRTCPeerConnection(pcConfig,pcConstraints);};window.getUserMedia=navigator.webkitGetUserMedia.bind(navigator);navigator.getUserMedia=getUserMedia;window.attachMediaStream=function(element,stream){try{if(element&&stream){element.src=URL.createObjectURL(stream);element.autoplay=true;}else {console.error('ReachSDK::attachMediaStream ->parameters not valid');}}catch(e){console.error('(ReachSDK::attachMediaStream)Exception='+e);}};window.detachMediaStream=function(element){if(element){if(typeof element.srcObject!=='undefined'){element.srcObject='';}else if(typeof element.mozSrcObject!=='undefined'){element.mozSrcObject='';}else if(typeof element.src!=='undefined'){element.src='';}else {console.log('Error attaching stream to element.');}}};window.reattachMediaStream=function(to,from){if(to&&from){to.src=from.src;}else {console.error('ReachSDK::reattachMediaStream media stream->parameters not valid');}};}else {throw new Error('Browser does not appear to be WebRTC-capable');}

/***/ },
/* 7 */
/***/ function(module, exports) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default={ACTION_TYPE_AUDIO:'audio',ACTION_TYPE_VIDEO:'video',ACTION_TYPE_CHAT:'chat',ACTION_TYPE_AUDIO_VIDEO:'audio-video',ACTION_TYPE_SCREEN_SHARING:'screen-sharing',ACTION_TYPE_CALL:'call'};

/***/ },
/* 8 */
/***/ function(module, exports) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});exports.default=function(WEBCOMBASE_URL){var _datastore=null,_rooms=null,_reach=null,_webrtc=null,_sipPhoneNumbers=null;function _initChildren(){_rooms=_datastore.child('roomsList');_reach=_datastore.child('reach');_webrtc=_datastore.child('webrtc');_sipPhoneNumbers=_datastore.child('sipPhoneNumbers');}function _init(){_datastore=new Webcom(WEBCOMBASE_URL);_initChildren();}function _setWebcomBaseUrl(p_webcombase_url){_datastore=new Webcom(p_webcombase_url);_initChildren();}function _getWebcomBaseUrl(){if(_datastore){return _datastore.toString();}return undefined;}function _setDatastore(p_datastore){_datastore=p_datastore;_initChildren();}function _getDatastore(){return _datastore;}function _setRooms(p_rooms){_rooms=p_rooms;}function _getRooms(){return _rooms;}function _setReach(p_reach){_reach=p_reach;}function _getReach(){return _reach;}function _setWebrtc(p_webrtc){_webrtc=p_webrtc;}function _getWebrtc(){return _webrtc;}function _setSipPhoneNumbers(p_sipPhoneNumbers){_sipPhoneNumbers=p_sipPhoneNumbers;}function _getSipPhoneNumbers(){return _sipPhoneNumbers;}_init();return {setWebcomBaseUrl:_setWebcomBaseUrl,getWebcomBaseUrl:_getWebcomBaseUrl,setDatastore:_setDatastore,getDatastore:_getDatastore,setRooms:_setRooms,getRooms:_getRooms,setReach:_setReach,getReach:_getReach,setWebrtc:_setWebrtc,getWebrtc:_getWebrtc,setSipPhoneNumbers:_setSipPhoneNumbers,getSipPhoneNumbers:_getSipPhoneNumbers};};

/***/ },
/* 9 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _keys=__webpack_require__(10),_keys2=_interopRequireDefault(_keys),_stringify=__webpack_require__(22),_stringify2=_interopRequireDefault(_stringify),_utils=__webpack_require__(24),_utils2=_interopRequireDefault(_utils);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var INVITATION_ONGOING='ONGOING',INVITATION_ACCEPTED='ACCEPTED',INVITATION_REJECTED='REJECTED',INVITATION_CANCELED='CANCELED',DEVICE_STATUS_CONNECTED='CONNECTED',ROOM_STATUS_OPEN='OPEN',reach=function reach(p_me,datarefs){var me=p_me,dataref=datarefs.getReach(),onUserAddedCb=null,onUserChangedCb=null,onUserRemovedCb=null,newInviteCb=null,onRoomInviteChangedCb=null,mOutgoingInvites=[],mIncomingInvitation=[],automaticRejectTimeOut=null,automaticRejectReason=null,mDeviceId=null;function init(){mDeviceId=dataref.child('userList/'+me+'/connectedList/'+_utils2.default.appInstanceId);mDeviceId.onDisconnect().remove();mDeviceId.child('status').set(DEVICE_STATUS_CONNECTED);try{(function(){var description=mDeviceId.child('description');if(_utils2.default.appInstanceId){description.child('appInstanceId').set(_utils2.default.appInstanceId);}var navigatorData={},properties=['appCodeName','appName','appVersion','buildID','cookieEnabled','language','onLine','oscpu','platform','product','productSub','securityPolicy','userAgent','vendor','vendorSub'];properties.forEach(function(property){if(navigator[property]){navigatorData[property]=navigator[property];}});description.child('navigator').set(navigatorData);})();}catch(e){console.error('(ReachSDK::reach::init)failed to get information about device. error='+e);}dataref.child('userList/'+me+'/wasInsideReach').set(true);}function _isConnected(p_userId,p_cb){console.log('(ReachSDK::reach::_isConnected)userId: '+p_userId);dataref.child('userList/'+p_userId+'/connectedList').once('value',function(snapshot){if(p_cb&&typeof p_cb=='function'){p_cb(snapshot.val()!==null);}});}function _isRegistered(p_userId,p_cb){console.log('(ReachSDK::reach::_isRegistered)userId: '+p_userId);dataref.child('userList/'+p_userId+'/wasInsideReach').once('value',function(snapshot){if(p_cb&&typeof p_cb=='function'){p_cb(snapshot.val()!==null);}});}function _setConnectedStatus(p_status){if(mDeviceId){mDeviceId.child('status').set(p_status);}}function _setOnUserAdded(p_cb){if(onUserAddedCb){dataref.child('userList').off('child_added',onUserAddedCb);onUserAddedCb=null;}if(p_cb&&typeof p_cb=='function'){onUserAddedCb=function onUserAddedCb(snapshot){console.log('(ReachSDK::reach::onUserAddedCb) '+snapshot.name()+'='+(0,_stringify2.default)(snapshot.val()));var obj={};obj[snapshot.name()]=snapshot.val();p_cb(obj);};dataref.child('userList').on('child_added',onUserAddedCb);}}function _setOnUserChanged(p_cb){if(onUserChangedCb){dataref.child('userList').off('child_changed',onUserChangedCb);onUserChangedCb=null;}if(p_cb&&typeof p_cb=='function'){onUserChangedCb=function onUserChangedCb(snapshot){console.log('(ReachSDK::reach::onUserChangedCb) '+snapshot.name()+'='+(0,_stringify2.default)(snapshot.val()));var obj={};obj[snapshot.name()]=snapshot.val();p_cb(obj);};dataref.child('userList').on('child_changed',onUserChangedCb);}}function _setOnUserRemoved(p_cb){if(onUserRemovedCb){dataref.child('userList').off('child_removed',onUserRemovedCb);onUserRemovedCb=null;}if(p_cb&&typeof p_cb=='function'){onUserRemovedCb=function onUserRemovedCb(snapshot){console.log('(ReachSDK::reach::onUserRemovedCb) '+snapshot.name()+'='+(0,_stringify2.default)(snapshot.val()));var obj={};obj[snapshot.name()]=snapshot.val();p_cb(obj);};dataref.child('userList').on('child_removed',onUserRemovedCb);}}function _setOnNewRoomInvitation(p_onNewRoomInviteCb){if(newInviteCb){dataref.child('invitationList/'+me).off('child_added',newInviteCb);newInviteCb=null;}if(p_onNewRoomInviteCb&&typeof p_onNewRoomInviteCb=='function'){newInviteCb=function newInviteCb(snapshot){if(snapshot.val().status===INVITATION_ONGOING){(function(){console.log('(ReachSDK::reach::_setOnNewRoomInvitation)new Invite received,id) '+snapshot.name()+',content='+(0,_stringify2.default)(snapshot.val()));var invitationId=snapshot.name();if(!mIncomingInvitation){mIncomingInvitation=[];}if(mIncomingInvitation[invitationId]){if(mIncomingInvitation[invitationId].timeout){clearTimeout(mIncomingInvitation[invitationId].timeout);}delete mIncomingInvitation[invitationId];}mIncomingInvitation[invitationId]={};var obj={};obj[invitationId]=snapshot.val();p_onNewRoomInviteCb(obj);var invitationRef=dataref.child('invitationList/'+me+'/'+invitationId);if(automaticRejectTimeOut){mIncomingInvitation[invitationId].timeout=setTimeout(function(){if(automaticRejectTimeOut){console.log('(ReachSDK::reach::_setOnNewRoomInvitation)automatic reject of Invite received='+(0,_stringify2.default)(snapshot.val()));invitationRef.onDisconnect().cancel();if(automaticRejectReason){invitationRef.update({timestamp_end:Webcom.ServerValue.TIMESTAMP,status:INVITATION_REJECTED,status_info:automaticRejectReason});}else {invitationRef.update({timestamp_end:Webcom.ServerValue.TIMESTAMP,status:INVITATION_REJECTED});}}},automaticRejectTimeOut);}invitationRef.once('child_changed',function(snapshot){if(snapshot&&snapshot.name()==='status'){snapshot.ref().parent().once('value',function(snapshot2){var cb_invitationId=undefined,cb_obj_content=undefined;if(snapshot2){cb_invitationId=snapshot.ref().parent().name();cb_obj_content=snapshot2.val();var cb_obj={};cb_obj[cb_invitationId]=cb_obj_content;if(mIncomingInvitation&&mIncomingInvitation[cb_invitationId]&&mIncomingInvitation[cb_invitationId].timeout){clearTimeout(mIncomingInvitation[cb_invitationId].timeout);}console.log('(ReachSDK::reach::_setOnNewRoomInvitation)Invite changed,id=) '+cb_invitationId+', new content='+(0,_stringify2.default)(cb_obj_content));if(cb_obj&&onRoomInviteChangedCb){onRoomInviteChangedCb(cb_obj);}delete mIncomingInvitation[cb_invitationId];}});}});})();}};dataref.child('invitationList/'+me).on('child_added',newInviteCb);}}function _setOnRoomInvitationChanged(p_onRoomInviteChangedCb){if(onRoomInviteChangedCb){onRoomInviteChangedCb=null;}if(p_onRoomInviteChangedCb&&typeof p_onRoomInviteChangedCb=='function'){onRoomInviteChangedCb=p_onRoomInviteChangedCb;}}function _setNewRoomInvitationTimeout(p_timeout,p_reason){if(automaticRejectTimeOut){automaticRejectTimeOut=null;}if(automaticRejectReason){automaticRejectReason=null;}if(p_timeout&&p_timeout===parseInt(p_timeout,10)&&p_timeout>0){console.log('(ReachSDK::reach::_setNewRoomInvitationTimeout)timeout='+p_timeout);automaticRejectTimeOut=p_timeout;}if(p_reason){automaticRejectReason=p_reason;}}function _isUserPresentInRoom(p_roomId,p_user,p_cb){console.log('(ReachSDK::reach::_isUserPresentInRoom)p_roomId='+p_roomId+' p_user='+p_user);if(!(p_roomId&&typeof p_roomId=='string')){console.error('(ReachSDK::reach::_isUserPresentInRoom)parameter p_roomid is incorrect. Expecting non empty string');return;}if(!(p_user&&typeof p_user=='string')){console.error('(ReachSDK::reach::_isUserPresentInRoom)parameter p_user is incorrect. Expecting non empty string');return;}if(!(p_cb&&typeof p_cb=='function')){console.error('(ReachSDK::reach::_isUserPresentInRoom)parameter p_cb is incorrect. if defined, expecting a function');return;}datarefs.getRooms().child(p_roomId+'/participantList/'+p_user+'/wasInsideRoom').once('value',function(snapshot){var wasPresent=snapshot.val()!==null;console.log('(ReachSDK::reach::_isUserPresentInRoom)p_roomId='+p_roomId+',p_user='+p_user+',result='+wasPresent);p_cb(wasPresent,p_roomId,p_user);});}function _cancelInvitation(p_roomId,p_guestIds,p_cb){if(!(p_roomId&&typeof p_roomId=='string')){console.error('(ReachSDK::reach::_cancelInvitation)parameter p_roomid is incorrect. Expecting non empty string');return;}if(p_guestIds&&!p_guestIds instanceof Array){console.error('(ReachSDK::reach::_cancelInvitation)parameter p_guestIds is incorrect. Expecting an Array');return;}console.log(' (ReachSDK::reach::_cancelInvitation)p_roomId='+p_roomId+', p_guestIds='+(0,_stringify2.default)(p_guestIds));if(mOutgoingInvites&&mOutgoingInvites[p_roomId]){if(p_guestIds){p_guestIds.forEach(function(guestId,i){if(!(guestId&&typeof guestId=='string')){console.error('(ReachSDK::reach::inviteToRoom)parameter p_guestIds['+i+'] is incorrect. Expecting non empty string');}else if(mOutgoingInvites[p_roomId][guestId]){if(mOutgoingInvites[p_roomId][guestId].InviteDataref){mOutgoingInvites[p_roomId][guestId].InviteDataref.onDisconnect().cancel();if(mOutgoingInvites[p_roomId][guestId].InviteChangedCb&&typeof mOutgoingInvites[p_roomId][guestId].InviteChangedCb=='function'){mOutgoingInvites[p_roomId][guestId].InviteDataref.off('child_changed',mOutgoingInvites[p_roomId][guestId].InviteChangedCb);}mOutgoingInvites[p_roomId][guestId].InviteDataref.once('value',function(dataSnapshot){var cb_status=undefined,cb_guestId=undefined,cb_roomId=undefined;if(dataSnapshot&&dataSnapshot.val()){cb_status=dataSnapshot.val().status;cb_roomId=dataSnapshot.val().room;cb_guestId=dataSnapshot.ref().parent().name();if(cb_status&&cb_status===INVITATION_ONGOING){mOutgoingInvites[cb_roomId][cb_guestId].InviteDataref.update({timestamp_end:Webcom.ServerValue.TIMESTAMP,status:INVITATION_CANCELED});if(mOutgoingInvites[cb_roomId][cb_guestId].statusChangedCb&&typeof mOutgoingInvites[cb_roomId][cb_guestId].statusChangedCb=='function'){mOutgoingInvites[cb_roomId][cb_guestId].statusChangedCb(cb_roomId,cb_guestId,INVITATION_CANCELED);}console.log('(ReachSDK::reach::_cancelInvitation)deleting Invite to room '+cb_roomId+' for invitee '+cb_guestId);}else {console.warn('(ReachSDK::reach::_cancelInvitation)cannot delete intivation to room '+cb_roomId+' for guest '+cb_guestId+' Invitation has been removed/rejected/accepted');}}delete mOutgoingInvites[p_roomId][guestId];if(p_cb&&typeof p_cb=='function'){p_cb(guestId);}});}else {delete mOutgoingInvites[p_roomId][guestId];if(p_cb&&typeof p_cb=='function'){p_cb(guestId);}}}else {if(p_cb&&typeof p_cb=='function'){p_cb(guestId);}}});}else {(0,_keys2.default)(mOutgoingInvites[p_roomId]).forEach(function(invitee){_cancelInvitation(p_roomId,[invitee],p_cb);});}}else {console.warn('(ReachSDK::reach::_cancelInvitation) Invite to room '+p_roomId+' not found');}}function _inviteToRoom(p_roomId,p_guestIds,p_topic,p_statusChangedCb){if(!(p_roomId&&typeof p_roomId=='string')){console.error('(ReachSDK::reach::inviteToRoom)parameter p_roomid is incorrect. Expecting non empty string');return;}if(!(p_topic&&typeof p_topic=='string')){console.error('(ReachSDK::reach::inviteToRoom)parameter p_topic is incorrect. Expecting non empty string');return;}if(p_statusChangedCb&&typeof p_statusChangedCb!='function'){console.warn('(ReachSDK::reach::inviteToRoom)parameter p_statusChangedCb is incorrect. if defined, expecting a function');}if(!(p_guestIds&&p_guestIds instanceof Array)){console.error('(ReachSDK::reach::inviteToRoom)parameter p_guestIds is incorrect. Expecting an Array');return;}datarefs.getRooms().child(p_roomId).child('commonDataList').update({status:ROOM_STATUS_OPEN,owner:me});var _isUserPresentInRoomCb=function _isUserPresentInRoomCb(isAlreadyPresent,p_roomId2,p_guestId2){if(!isAlreadyPresent){datarefs.getRooms().child(p_roomId2+'/participantList/'+p_guestId2).update({connected:false,wasInsideRoom:false});}},_InviteChangedCb=function _InviteChangedCb(snapshot){console.log('(ReachSDK::reach::inviteToRoom::_InviteChangedCb)');if(snapshot&&snapshot.name()==='status'){var cb_guestId2=snapshot.ref().parent().parent().name();console.log('(ReachSDK::reach::inviteToRoom::_InviteChangedCb)cb_guestId2='+cb_guestId2);if(mOutgoingInvites&&mOutgoingInvites[p_roomId]&&mOutgoingInvites[p_roomId][cb_guestId2]&&mOutgoingInvites[p_roomId][cb_guestId2].InviteChangedCb){mOutgoingInvites[p_roomId][cb_guestId2].InviteDataref.off('child_changed',mOutgoingInvites[p_roomId][cb_guestId2].InviteChangedCb);}snapshot.ref().parent().once('value',function(snapshot2){var cb_status=undefined,cb_guestId=undefined,cb_roomId=undefined,cb_status_info=undefined;if(snapshot2){cb_status=snapshot2.val().status;cb_roomId=snapshot2.val().room;cb_status_info=snapshot2.val().status_info;cb_guestId=snapshot2.ref().parent().name();console.log('(ReachSDK::reach::inviteToRoom::_InviteChangedCb)roomId='+cb_roomId+' invitee='+cb_guestId+' new invitation status='+cb_status+' status info='+cb_status_info);if(mOutgoingInvites&&mOutgoingInvites[cb_roomId]&&mOutgoingInvites[cb_roomId][cb_guestId]&&mOutgoingInvites[cb_roomId][cb_guestId].InviteDataref){mOutgoingInvites[cb_roomId][cb_guestId].InviteDataref.onDisconnect().cancel();if(mOutgoingInvites[cb_roomId][cb_guestId].statusChangedCb&&typeof mOutgoingInvites[cb_roomId][cb_guestId].statusChangedCb=='function'){mOutgoingInvites[cb_roomId][cb_guestId].statusChangedCb(cb_roomId,cb_guestId,cb_status,cb_status_info);}else {console.warn('(ReachSDK::reach::inviteToRoom::_InviteChangedCb)cannot retrieve mathing p_statusChangedCb');}delete mOutgoingInvites[cb_roomId][cb_guestId];}else {console.warn('(ReachSDK::reach::inviteToRoom::_InviteChangedCb)cannot retrieve mathing mOutgoingInvite');}}else {console.warn('(ReachSDK::reach::inviteToRoom::_InviteChangedCb)cannot retrieve invitation');}});}};p_guestIds.forEach(function(mGuestId,i){if(!(mGuestId&&typeof mGuestId=='string')){console.error('(ReachSDK::reach::inviteToRoom)parameter p_guestIds['+i+'] is incorrect. Expecting non empty string');}else {console.log('(ReachSDK::reach::inviteToRoom)roomId='+p_roomId+' invitee='+mGuestId.toString());if(mOutgoingInvites[p_roomId]&&mOutgoingInvites[p_roomId][mGuestId]){_cancelInvitation(p_roomId,[mGuestId],function(p_guestId){if(p_guestId&&p_guestId===mGuestId){_inviteToRoom(p_roomId,[p_guestId],p_topic,p_statusChangedCb);}});return;}if(!mOutgoingInvites[p_roomId]){mOutgoingInvites[p_roomId]=[];}mOutgoingInvites[p_roomId][mGuestId]={};_isUserPresentInRoom(p_roomId,mGuestId,_isUserPresentInRoomCb);mOutgoingInvites[p_roomId][mGuestId].InviteDataref=dataref.child('invitationList').child(mGuestId).push({from:me,room:p_roomId,timestamp_creation:Webcom.ServerValue.TIMESTAMP,topic:p_topic,status:INVITATION_ONGOING});console.log('(ReachSDK::reach::inviteToRoom)InviteDataref='+mOutgoingInvites[p_roomId][mGuestId].InviteDataref.toString());mOutgoingInvites[p_roomId][mGuestId].InviteChangedCb=_InviteChangedCb;mOutgoingInvites[p_roomId][mGuestId].InviteDataref.on('child_changed',mOutgoingInvites[p_roomId][mGuestId].InviteChangedCb);mOutgoingInvites[p_roomId][mGuestId].statusChangedCb=p_statusChangedCb;mOutgoingInvites[p_roomId][mGuestId].InviteDataref.onDisconnect().update({timestamp_end:Webcom.ServerValue.TIMESTAMP,status:INVITATION_CANCELED});}});}function _acceptInvitation(p_invitation){var inviteId=(0,_keys2.default)(p_invitation)[0];if(!inviteId){console.error('(ReachSDK::reach::_acceptInvitation)parameter p_invitation is incorrect. cannot get invitation Id');return;}if(!p_invitation[inviteId]){console.error('(ReachSDK::reach::_acceptInvitation)parameter p_invitation is incorrect. cannot get invitation data');return;}dataref.child('invitationList/'+me+'/'+inviteId).once('value',function(dataSnapshot){var cb_status=undefined,cb_guestId=undefined,cb_invitationId=undefined;if(dataSnapshot&&dataSnapshot.val()){cb_invitationId=dataSnapshot.name();cb_status=dataSnapshot.val().status;cb_guestId=dataSnapshot.ref().parent().name();if(cb_status&&cb_status===INVITATION_ONGOING){console.log('(ReachSDK::reach::_acceptInvitation)inviteId='+inviteId+',data='+(0,_stringify2.default)(p_invitation[inviteId]));dataref.child('invitationList/'+cb_guestId+'/'+cb_invitationId).update({timestamp_end:Webcom.ServerValue.TIMESTAMP,status:INVITATION_ACCEPTED});}else {console.warn('(ReachSDK::reach::_acceptInvitation)inviteId='+cb_invitationId+',data='+(0,_stringify2.default)(p_invitation[inviteId])+', cannot be accepted. It has been removed or canceled');}}});}function _rejectInvitation(p_invitation,p_reason){var inviteId=(0,_keys2.default)(p_invitation)[0];if(!inviteId){console.error('(ReachSDK::reach::_rejectInvitation)parameter p_invitation is incorrect. cannot get invitation Id');return;}if(!p_invitation[inviteId]){console.error('(ReachSDK::reach::_rejectInvitation)parameter p_invitation is incorrect. cannot get invitation data');return;}dataref.child('invitationList/'+me+'/'+inviteId).once('value',function(dataSnapshot){var cb_status=undefined,cb_guestId=undefined,cb_invitationId=undefined;if(dataSnapshot&&dataSnapshot.val()){cb_invitationId=dataSnapshot.name();cb_status=dataSnapshot.val().status;cb_guestId=dataSnapshot.ref().parent().name();if(cb_status&&cb_status===INVITATION_ONGOING){console.log('(ReachSDK::reach::_rejectInvitation)inviteId='+inviteId+',data='+(0,_stringify2.default)(p_invitation[inviteId]));if(p_reason){dataref.child('invitationList/'+cb_guestId+'/'+cb_invitationId).update({timestamp_end:Webcom.ServerValue.TIMESTAMP,status_info:p_reason,status:INVITATION_REJECTED});}else {dataref.child('invitationList/'+cb_guestId+'/'+cb_invitationId).update({timestamp_end:Webcom.ServerValue.TIMESTAMP,status:INVITATION_REJECTED});}}else {console.warn('(ReachSDK::reach::_rejectInvitation)inviteId='+cb_invitationId+',data='+(0,_stringify2.default)(p_invitation[inviteId])+', cannot be rejected. It has been removed or canceled');}}});}function _isRoomActive(p_invitation,p_cb){if(p_invitation&&p_cb&&typeof p_cb=='function'){(function(){var inviteId=(0,_keys2.default)(p_invitation)[0];console.log('(ReachSDK::reach::_isRoomActive)inviteId='+inviteId);var roomId=p_invitation[inviteId].room;datarefs.getRooms().child(roomId+'/commonDataList/status').once('value',function(snapshot){var opened=snapshot&&snapshot.val()&&snapshot.val()===ROOM_STATUS_OPEN;console.log('(ReachSDK::reach::_isRoomActive)inviteId='+inviteId+' result='+opened);p_cb(opened);});})();}}function _archiveInvitations(p_userId,p_cb){console.log('(ReachSDK::reach::_archiveInvitations)userId='+p_userId);dataref.child('invitationList/'+me).once('value',function(snapshot){if(snapshot&&snapshot.hasChildren()){(function(){var nbChildren=snapshot.numChildren(),nbChildrenProcessed=0;snapshot.forEach(function(childSnapshot){if(childSnapshot&&childSnapshot.val()){console.log('(ReachSDK::reach::_archiveInvitations)userId='+p_userId+' inviteId='+childSnapshot.name());if(childSnapshot.val().status===INVITATION_REJECTED||childSnapshot.val().status===INVITATION_CANCELED){dataref.child('invitationListHistory/'+p_userId+'/'+childSnapshot.name()).update(childSnapshot.val());childSnapshot.ref().remove();nbChildrenProcessed++;if(nbChildrenProcessed>=nbChildren&&p_cb&&typeof p_cb=='function'){p_cb();}}else {var inviteData={};inviteData[childSnapshot.name()]=childSnapshot.val();_isRoomActive(inviteData,function(isActive){if(isActive){nbChildrenProcessed++;if(nbChildrenProcessed>=nbChildren&&p_cb&&typeof p_cb=='function'){p_cb();}}else {if(childSnapshot.val().status===INVITATION_ONGOING){var newValue=childSnapshot.val();newValue.status=INVITATION_CANCELED;dataref.child('invitationListHistory/'+p_userId+'/'+childSnapshot.name()).set(newValue);}else {dataref.child('invitationListHistory/'+p_userId+'/'+childSnapshot.name()).set(childSnapshot.val());}childSnapshot.ref().remove();nbChildrenProcessed++;if(nbChildrenProcessed>=nbChildren&&p_cb&&typeof p_cb=='function'){p_cb();}}});}}else {if(p_cb&&typeof p_cb=='function'){p_cb();}}});})();}else {if(p_cb&&typeof p_cb=='function'){p_cb();}}});}function _close(){console.log('(ReachSDK::reach::_close)');if(newInviteCb){dataref.child('invitationList').child(me).off('child_added',newInviteCb);newInviteCb=null;}if(onUserAddedCb){dataref.child('userList').off('child_added',onUserAddedCb);onUserAddedCb=null;}if(onUserChangedCb){dataref.child('userList').off('child_changed',onUserChangedCb);onUserChangedCb=null;}if(onUserRemovedCb){dataref.child('userList').off('child_removed',onUserRemovedCb);onUserRemovedCb=null;}if(mOutgoingInvites){mOutgoingInvites.forEach(function(roomId){mOutgoingInvites[roomId].forEach(function(invitee){if(invitee.InviteDataref){invitee.InviteDataref.onDisconnect().cancel();invitee.InviteDataref.update({status:INVITATION_CANCELED,timestamp_end:Webcom.ServerValue.TIMESTAMP});}});});mOutgoingInvites=[];}if(automaticRejectTimeOut){automaticRejectTimeOut=null;}if(automaticRejectReason){automaticRejectReason=null;}if(mDeviceId){mDeviceId.remove();mDeviceId=null;}}init();return {getMe:function getMe(){return me;},isConnected:_isConnected,isRegistered:_isRegistered,setConnectedStatus:_setConnectedStatus,setOnUserAdded:_setOnUserAdded,setOnUserChanged:_setOnUserChanged,setOnUserRemoved:_setOnUserRemoved,inviteToRoom:_inviteToRoom,cancelInvitation:_cancelInvitation,setOnNewRoomInvitation:_setOnNewRoomInvitation,setOnRoomInvitationChanged:_setOnRoomInvitationChanged,setNewRoomInvitationTimeout:_setNewRoomInvitationTimeout,archiveMyInvitations:function archiveMyInvitations(p_cb){return _archiveInvitations(me,p_cb);},acceptInvitation:_acceptInvitation,rejectInvitation:_rejectInvitation,on:function on(p_evt,p_cb){switch(p_evt){case 'newRoomInvitation':_setOnNewRoomInvitation(p_cb);break;case 'roomInvitationChanged':_setOnRoomInvitationChanged(p_cb);break;case 'userAdded':_setOnUserAdded(p_cb);break;case 'userChanged':_setOnUserChanged(p_cb);break;case 'userRemoved':_setOnUserRemoved(p_cb);break;default:console.error('reach.set: no such event');return -1;}},close:_close};};exports.default=reach;

/***/ },
/* 10 */
/***/ function(module, exports, __webpack_require__) {

	module.exports = { "default": __webpack_require__(11), __esModule: true };

/***/ },
/* 11 */
/***/ function(module, exports, __webpack_require__) {

	__webpack_require__(12);
	module.exports = __webpack_require__(18).Object.keys;

/***/ },
/* 12 */
/***/ function(module, exports, __webpack_require__) {

	// 19.1.2.14 Object.keys(O)
	var toObject = __webpack_require__(13);
	
	__webpack_require__(15)('keys', function($keys){
	  return function keys(it){
	    return $keys(toObject(it));
	  };
	});

/***/ },
/* 13 */
/***/ function(module, exports, __webpack_require__) {

	// 7.1.13 ToObject(argument)
	var defined = __webpack_require__(14);
	module.exports = function(it){
	  return Object(defined(it));
	};

/***/ },
/* 14 */
/***/ function(module, exports) {

	// 7.2.1 RequireObjectCoercible(argument)
	module.exports = function(it){
	  if(it == undefined)throw TypeError("Can't call method on  " + it);
	  return it;
	};

/***/ },
/* 15 */
/***/ function(module, exports, __webpack_require__) {

	// most Object methods by ES6 should accept primitives
	var $export = __webpack_require__(16)
	  , core    = __webpack_require__(18)
	  , fails   = __webpack_require__(21);
	module.exports = function(KEY, exec){
	  var fn  = (core.Object || {})[KEY] || Object[KEY]
	    , exp = {};
	  exp[KEY] = exec(fn);
	  $export($export.S + $export.F * fails(function(){ fn(1); }), 'Object', exp);
	};

/***/ },
/* 16 */
/***/ function(module, exports, __webpack_require__) {

	var global    = __webpack_require__(17)
	  , core      = __webpack_require__(18)
	  , ctx       = __webpack_require__(19)
	  , PROTOTYPE = 'prototype';
	
	var $export = function(type, name, source){
	  var IS_FORCED = type & $export.F
	    , IS_GLOBAL = type & $export.G
	    , IS_STATIC = type & $export.S
	    , IS_PROTO  = type & $export.P
	    , IS_BIND   = type & $export.B
	    , IS_WRAP   = type & $export.W
	    , exports   = IS_GLOBAL ? core : core[name] || (core[name] = {})
	    , target    = IS_GLOBAL ? global : IS_STATIC ? global[name] : (global[name] || {})[PROTOTYPE]
	    , key, own, out;
	  if(IS_GLOBAL)source = name;
	  for(key in source){
	    // contains in native
	    own = !IS_FORCED && target && key in target;
	    if(own && key in exports)continue;
	    // export native or passed
	    out = own ? target[key] : source[key];
	    // prevent global pollution for namespaces
	    exports[key] = IS_GLOBAL && typeof target[key] != 'function' ? source[key]
	    // bind timers to global for call from export context
	    : IS_BIND && own ? ctx(out, global)
	    // wrap global constructors for prevent change them in library
	    : IS_WRAP && target[key] == out ? (function(C){
	      var F = function(param){
	        return this instanceof C ? new C(param) : C(param);
	      };
	      F[PROTOTYPE] = C[PROTOTYPE];
	      return F;
	    // make static versions for prototype methods
	    })(out) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;
	    if(IS_PROTO)(exports[PROTOTYPE] || (exports[PROTOTYPE] = {}))[key] = out;
	  }
	};
	// type bitmap
	$export.F = 1;  // forced
	$export.G = 2;  // global
	$export.S = 4;  // static
	$export.P = 8;  // proto
	$export.B = 16; // bind
	$export.W = 32; // wrap
	module.exports = $export;

/***/ },
/* 17 */
/***/ function(module, exports) {

	// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028
	var global = module.exports = typeof window != 'undefined' && window.Math == Math
	  ? window : typeof self != 'undefined' && self.Math == Math ? self : Function('return this')();
	if(typeof __g == 'number')__g = global; // eslint-disable-line no-undef

/***/ },
/* 18 */
/***/ function(module, exports) {

	var core = module.exports = {version: '1.2.6'};
	if(typeof __e == 'number')__e = core; // eslint-disable-line no-undef

/***/ },
/* 19 */
/***/ function(module, exports, __webpack_require__) {

	// optional / simple context binding
	var aFunction = __webpack_require__(20);
	module.exports = function(fn, that, length){
	  aFunction(fn);
	  if(that === undefined)return fn;
	  switch(length){
	    case 1: return function(a){
	      return fn.call(that, a);
	    };
	    case 2: return function(a, b){
	      return fn.call(that, a, b);
	    };
	    case 3: return function(a, b, c){
	      return fn.call(that, a, b, c);
	    };
	  }
	  return function(/* ...args */){
	    return fn.apply(that, arguments);
	  };
	};

/***/ },
/* 20 */
/***/ function(module, exports) {

	module.exports = function(it){
	  if(typeof it != 'function')throw TypeError(it + ' is not a function!');
	  return it;
	};

/***/ },
/* 21 */
/***/ function(module, exports) {

	module.exports = function(exec){
	  try {
	    return !!exec();
	  } catch(e){
	    return true;
	  }
	};

/***/ },
/* 22 */
/***/ function(module, exports, __webpack_require__) {

	module.exports = { "default": __webpack_require__(23), __esModule: true };

/***/ },
/* 23 */
/***/ function(module, exports, __webpack_require__) {

	var core = __webpack_require__(18);
	module.exports = function stringify(it){ // eslint-disable-line no-unused-vars
	  return (core.JSON && core.JSON.stringify || JSON.stringify).apply(JSON, arguments);
	};

/***/ },
/* 24 */
/***/ function(module, exports) {

	"use strict";Object.defineProperty(exports,"__esModule",{value:true});var utils=function(){function s4(){return Math.floor((1+Math.random())*0x10000).toString(16).substring(1);}function _guid(){return ""+s4()+s4()+"-"+s4()+"-"+s4()+"-"+s4()+"-"+s4()+s4()+s4();}var _appInstanceId=_guid();return {appInstanceId:_appInstanceId};}();exports.default=utils;

/***/ },
/* 25 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _keys=__webpack_require__(10),_keys2=_interopRequireDefault(_keys),_stringify=__webpack_require__(22),_stringify2=_interopRequireDefault(_stringify);exports.default=function(p_me,p_roomId,datarefs,webrtcmngr){var roomId=p_roomId,me=p_me,dataref=datarefs.getRooms().child(roomId),roomWebrtcStacks={},mAvailableStreams=[],mStreams=[],mMutedStreams=[],remoteUnpublishedCb=null,instantMessageListCb=null,publishedMediaListCb=null,publishedMediaListCbForAvailableStream=null,unPublishedMediaListCb=null,unPublishedMediaListCbForAvailableStream=null,participantListJoinAddedCb=null,participantListJoinChangedCb=null,participantListLeaveCb=null;function _addAvailableStream(data){console.log('(ReachSDK::room['+roomId+']::_addAvailableStream)data='+(0,_stringify2.default)(data));mAvailableStreams.push(data);}function _removeAvailableStream(streamId){console.log('(ReachSDK::room['+roomId+']::_removeAvailableStream)streamId='+streamId);if(mAvailableStreams&&streamId){for(var i=mAvailableStreams.length-1;i>=0;i--){if(mAvailableStreams[i]&&(0,_keys2.default)(mAvailableStreams[i])[0]&&(0,_keys2.default)(mAvailableStreams[i])[0]===streamId){delete mAvailableStreams[i];}}}}function initWebcomListener(){if(!publishedMediaListCbForAvailableStream){publishedMediaListCbForAvailableStream=function publishedMediaListCbForAvailableStream(snapshot){var obj={},name=snapshot.name(),value=snapshot.val();console.log('(ReachSDK::room['+roomId+']::onPublishedStreamForAvailableStream)stream='+(0,_stringify2.default)(value));obj[name]=value;obj[name].roomId=roomId;_addAvailableStream(obj);};dataref.child('publishedMediaList').on('child_added',publishedMediaListCbForAvailableStream);}if(!unPublishedMediaListCbForAvailableStream){unPublishedMediaListCbForAvailableStream=function unPublishedMediaListCbForAvailableStream(snapshot){var streamId=snapshot.name();console.log('(ReachSDK::room['+roomId+']::onUnPublishedStreamForAvailableStream)stream='+streamId);_removeAvailableStream(streamId);};dataref.child('publishedMediaList').on('child_removed',unPublishedMediaListCbForAvailableStream);}}function init(){dataref.child('participantList/'+me).update({connected:true,wasInsideRoom:true});dataref.child('participantList/'+me+'/connected').onDisconnect().set(false);initWebcomListener();}function _getRoomId(){return roomId;}function _getMe(){return me;}function _setOnParticipantJoin(p_cb){var participantListRef=dataref.child('participantList');if(participantListJoinAddedCb){participantListRef.off('child_added',participantListJoinAddedCb);participantListJoinAddedCb=null;}if(participantListJoinChangedCb){participantListRef.off('child_changed',participantListJoinChangedCb);participantListJoinChangedCb=null;}if(p_cb&&typeof p_cb=='function'){participantListJoinAddedCb=function participantListJoinAddedCb(snapshot){var user=snapshot.name();if(snapshot.val()&&snapshot.val().connected&&snapshot.val().wasInsideRoom){console.log('(ReachSDK::room['+roomId+']::_setOnParticipantJoin) user has joined: '+user);p_cb(user);}};participantListRef.on('child_added',participantListJoinAddedCb);participantListJoinChangedCb=function participantListJoinChangedCb(snapshot){var user=snapshot.name();if(snapshot.val()&&snapshot.val().connected&&snapshot.val().wasInsideRoom){console.log('(ReachSDK::room['+roomId+']::_setOnParticipantJoin) user has joined: '+user);p_cb(user);}};participantListRef.on('child_changed',participantListJoinChangedCb);}else {console.error('(ReachSDK::room['+roomId+']::_setOnParticipantJoin)parameter incorrect. Expected function');}}function _setOnParticipantLeave(p_cb){if(participantListLeaveCb){dataref.child('participantList').off('child_changed',participantListLeaveCb);participantListLeaveCb=null;}if(p_cb&&typeof p_cb=='function'){participantListLeaveCb=function participantListLeaveCb(snapshot){var user=snapshot.name();if(snapshot.val()&&!snapshot.val().connected&&snapshot.val().wasInsideRoom){console.log('(ReachSDK::room['+roomId+']::_setOnParticipantLeave) user has left: '+user);p_cb(user);}};dataref.child('participantList').on('child_changed',participantListLeaveCb);}else {console.error('(ReachSDK::room['+roomId+']::_setOnParticipantLeave)parameter incorrect. Expected function');}}function _sendInstantMessage(p_message){if(p_message!==''){console.log('(ReachSDK::room['+roomId+']::sendInstantMessage)message='+p_message);dataref.child('instantMessageList').push({from:me,message:p_message,timestamp:Webcom.ServerValue.TIMESTAMP});}}function _setOnInstantMessage(p_cb){if(instantMessageListCb){dataref.child('instantMessageList').off('child_added',instantMessageListCb);instantMessageListCb=null;}if(p_cb&&typeof p_cb=='function'){instantMessageListCb=function instantMessageListCb(snapshot){var obj=snapshot.val();console.log('(ReachSDK::room['+roomId+']::_setOnInstantMessage)receive InstantMessage='+(0,_stringify2.default)(obj));p_cb(obj);};dataref.child('instantMessageList').on('child_added',instantMessageListCb);}else {console.error('(ReachSDK::room['+roomId+']::_setOnInstantMessage)parameter incorrect. Expected function');}}function _publishStream(streamId,localVid,p_actionType,getLocalStreamCb){console.log('(ReachSDK::room['+roomId+']::publishStream)roomId='+roomId+',streamId='+streamId+',me='+me+',actionType='+p_actionType);if(!(streamId&&typeof streamId=='string')){console.error('(ReachSDK::reach::inviteToRoom)parameter streamId is incorrect. Expecting non empty string');return;}var localDataRef=dataref.child('publishedMediaList').child(streamId),remoteDataRef=localDataRef.child('subscribersList'),pubAndSubscribe=function pubAndSubscribe(){localDataRef.set({from:me,appInstanceId:_utils2.default.appInstanceId,actionType:p_actionType});localDataRef.onDisconnect().remove();var addSubscribersListCb=function addSubscribersListCb(snapshot){var remoteAppInstanceId=snapshot.name(),data=snapshot.val(),_subscriberId=data.userId,_peercoId=data.peercoId,_peercoRef=data.peercoRef,isAudioMute=mMutedStreams[streamId]&&mMutedStreams[streamId].audio,isVideoMute=mMutedStreams[streamId]&&mMutedStreams[streamId].video,streamStackId=streamId+'_pub';console.log('(ReachSDK::room['+roomId+']::publishStream::addSubscribersListCb)subscriber '+_subscriberId+' to stream '+streamId+' added '+(0,_stringify2.default)(data));if(!roomWebrtcStacks[streamStackId]){roomWebrtcStacks[streamStackId]=[];}var mStackId=webrtcmngr.createWebrtc(localVid,remoteAppInstanceId,function(){console.log('(ReachSDK::room['+roomId+']::publishStream::addSubscribersListCb)subscriber '+_subscriberId+' to stream '+streamId+' connection lost');},true,p_actionType,_peercoId,_peercoRef,isAudioMute,isVideoMute);roomWebrtcStacks[streamStackId].push({stackId:mStackId,subscriberId:_subscriberId,isPublish:true,peercoId:_peercoId,peercoRef:_peercoRef,streamId:streamId});},removeSubscribersListCb=function removeSubscribersListCb(snapshot){var subscriberId=snapshot.val().userId,streamStacks=roomWebrtcStacks[streamId+'_pub'];if(subscriberId&&streamStacks){console.log('(ReachSDK::room['+roomId+']::publishStream::removeSubscribersListCb)subscriber '+subscriberId+' to stream '+streamId+' removed');console.log(streamStacks);for(var i=streamStacks.length-1;i>=0;i--){if(streamStacks[i].subscriberId===subscriberId){webrtcmngr.closeWebrtc(streamStacks[i].stackId,true);roomWebrtcStacks[streamId+'_pub'].splice(i,1);}}console.log(roomWebrtcStacks[streamId+'_pub']);}};mStreams[streamId]={addSubscribersListCb:addSubscribersListCb,removeSubscribersListCb:removeSubscribersListCb};remoteDataRef.on('child_added',addSubscribersListCb);remoteDataRef.on('child_removed',removeSubscribersListCb);};if(p_actionType){if(p_actionType===_actions2.default.ACTION_TYPE_VIDEO){_localstream2.default.connectLocalVideoStream(localVid,pubAndSubscribe,getLocalStreamCb);}else if(p_actionType===_actions2.default.ACTION_TYPE_AUDIO){_localstream2.default.connectLocalAudioStream(localVid,pubAndSubscribe,getLocalStreamCb);}else if(p_actionType===_actions2.default.ACTION_TYPE_AUDIO_VIDEO){_localstream2.default.connectLocalAudioVideoStream(localVid,pubAndSubscribe,getLocalStreamCb);}}}function _setOnPublishedStream(p_cb){if(publishedMediaListCb){dataref.child('publishedMediaList').off('child_added',publishedMediaListCb);publishedMediaListCb=null;}if(p_cb&&typeof p_cb=='function'){publishedMediaListCb=function publishedMediaListCb(snapshot){var obj={},name=snapshot.name();obj[name]=snapshot.val();obj[name].roomId=roomId;p_cb(obj);};dataref.child('publishedMediaList').on('child_added',publishedMediaListCb);}else {console.error('(ReachSDK::room['+roomId+']::_setOnPublishedStream)parameter incorrect. Expected function');}}function _unPublishStream(streamId,callback){console.log('(ReachSDK::room['+roomId+']::unPublishStream)streamId '+streamId);var localDataRef=dataref.child('publishedMediaList/'+streamId),remoteDataRef=localDataRef.child('subscribersList'),streamStacksId=streamId+'_pub';if(mStreams[streamId]&&mStreams[streamId].addSubscribersListCb){remoteDataRef.off('child_added',mStreams[streamId].addSubscribersListCb);}if(mStreams[streamId]&&mStreams[streamId].removeSubscribersListCb){remoteDataRef.off('child_removed',mStreams[streamId].removeSubscribersListCb);}delete mStreams[streamId];delete mMutedStreams[streamId];localDataRef.onDisconnect().cancel();localDataRef.remove();if(roomWebrtcStacks[streamStacksId]&&roomWebrtcStacks[streamStacksId].length>0){(function(){var nbStack=roomWebrtcStacks[streamStacksId].length,closeCb=function closeCb(){nbStack--;if(nbStack<1){delete roomWebrtcStacks[streamStacksId];if(callback&&typeof callback=='function'){callback();}}};for(var i=nbStack-1;i>=0;i--){webrtcmngr.closeWebrtc(roomWebrtcStacks[streamStacksId][i].stackId,true,closeCb);}})();}else {delete roomWebrtcStacks[streamStacksId];if(callback&&typeof callback=='function'){callback();}}}function _setOnUnPublishedStream(p_cb){if(unPublishedMediaListCb){dataref.child('publishedMediaList').off('child_removed',unPublishedMediaListCb);unPublishedMediaListCb=null;}if(p_cb&&typeof p_cb=='function'){unPublishedMediaListCb=function unPublishedMediaListCb(snapshot){p_cb(snapshot.name());};dataref.child('publishedMediaList').on('child_removed',unPublishedMediaListCb);}else {console.error('(ReachSDK::room['+roomId+']::_setOnUnPublishedStream)parameter incorrect. Expected function');}}function _subscribeToStream(streamData,remoteVid,getRemoteStreamCb){var streamId=(0,_keys2.default)(streamData)[0],actionType=streamData[streamId].actionType;console.log('(ReachSDK::room['+roomId+']::subscribeToStream)streamId '+streamId);if(mStreams&&mStreams[streamId]){if(actionType){if(actionType===_actions2.default.ACTION_TYPE_VIDEO){_localstream2.default.connectLocalVideoStream(remoteVid,getRemoteStreamCb);}else if(actionType===_actions2.default.ACTION_TYPE_AUDIO){_localstream2.default.connectLocalAudioStream(remoteVid,getRemoteStreamCb);}else if(actionType===_actions2.default.ACTION_TYPE_AUDIO_VIDEO){_localstream2.default.connectLocalAudioVideoStream(remoteVid,getRemoteStreamCb);}}return streamId;}var appInstanceId=streamData[streamId].appInstanceId,localDataRef=dataref.child('publishedMediaList').child(streamId),remoteDataRef=localDataRef.child('subscribersList'),streamStacksId=streamId+'_sub',_peercoId=undefined,_peercoRef=undefined;if(!roomWebrtcStacks[streamStacksId]){roomWebrtcStacks[streamStacksId]=[];}else if(roomWebrtcStacks[streamStacksId]&&roomWebrtcStacks[streamStacksId][0]&&roomWebrtcStacks[streamStacksId][0].peercoId){_peercoId=roomWebrtcStacks[streamStacksId][0].peercoId;}var getRandomIntInclusive=function getRandomIntInclusive(min,max){return Math.floor(Math.random()*(max-min+1))+min;};if(!_peercoId){_peercoId=Math.floor(Date.now()).toString()+getRandomIntInclusive(0,1000000);}_peercoRef=datarefs.getWebrtc().push().name();remoteDataRef.child(_utils2.default.appInstanceId).set({ts:Webcom.ServerValue.TIMESTAMP,userId:me,peercoId:_peercoId,peercoRef:_peercoRef});var isAudioMute=mMutedStreams[streamId]&&mMutedStreams[streamId].audio,isVideoMute=mMutedStreams[streamId]&&mMutedStreams[streamId].video,mStackId=webrtcmngr.createWebrtc(remoteVid,appInstanceId,function(){},false,actionType,_peercoId,_peercoRef,isAudioMute,isVideoMute,getRemoteStreamCb);if(!remoteUnpublishedCb){remoteUnpublishedCb=function remoteUnpublishedCb(snapshot){var removedStreamId=(0,_keys2.default)(snapshot)[0]+'_sub';if(roomWebrtcStacks[removedStreamId]){var i=0;while(i<roomWebrtcStacks[removedStreamId].length){webrtcmngr.closeWebrtc(roomWebrtcStacks[removedStreamId][i].stackId,false);i++;}delete roomWebrtcStacks[removedStreamId];}};dataref.child('publishedMediaList').on('child_removed',remoteUnpublishedCb);}roomWebrtcStacks[streamStacksId].push({stackId:mStackId,isPublish:false,peercoId:_peercoId,peercoRef:_peercoRef,streamId:streamId});return streamId;}function _unSubscribeFromStream(streamId){console.log('(ReachSDK::room['+roomId+']::unSubscribeFromStream)streamId '+streamId);var localDataRef=dataref.child('publishedMediaList').child(streamId),remoteDataRef=localDataRef.child('subscribersList'),streamStacksId=streamId+'_sub';remoteDataRef.child(_utils2.default.appInstanceId).remove();if(roomWebrtcStacks[streamStacksId]){var i=0;while(i<roomWebrtcStacks[streamStacksId].length){if(roomWebrtcStacks[streamStacksId][i]){webrtcmngr.closeWebrtc(roomWebrtcStacks[streamStacksId][i].stackId,false);}i++;}delete roomWebrtcStacks[streamStacksId];}delete mMutedStreams[streamId];}function _getAvailableStreams(){console.log('(ReachSDK::room['+roomId+']::_getAvailableStreams)');return mAvailableStreams;}function _getAvailableStream(streamId){console.log('(ReachSDK::room['+roomId+']::_getAvailableStream)streamId='+streamId);if(mAvailableStreams&&streamId){for(var i=mAvailableStreams.length-1;i>=0;i--){if(mAvailableStreams[i]&&(0,_keys2.default)(mAvailableStreams[i])[0]&&(0,_keys2.default)(mAvailableStreams[i])[0]===streamId){return mAvailableStreams[i];}}}return null;}function _removeAllAvailableStreams(){console.log('(ReachSDK::room['+roomId+']::_removeAllAvailableStreams');mAvailableStreams=[];}function _muteAudioStream(streamId){if(!(streamId&&typeof streamId=='string')){console.error('(ReachSDK::room['+roomId+']::_muteAudioStream)parameter streamId is incorrect. Expecting non empty string');return;}console.log('(ReachSDK::room['+roomId+']::_muteAudioStream)streamId='+streamId);if(!mMutedStreams[streamId]){mMutedStreams[streamId]={};}mMutedStreams[streamId].audio=true;if(roomWebrtcStacks){[roomWebrtcStacks[streamId+'_pub'],roomWebrtcStacks[streamId+'_sub']].forEach(function(stacks){if(stacks&&stacks.length>0){for(var i=stacks.length-1;i>=0;i--){webrtcmngr.muteAudioWebrtcStack(stacks[i].stackId);}}});}}function _unmuteAudioStream(streamId){if(!(streamId&&typeof streamId=='string')){console.error('(ReachSDK::room['+roomId+']::_unmuteAudioStream)parameter streamId is incorrect. Expecting non empty string');return;}if(mMutedStreams[streamId]&&mMutedStreams[streamId].audio){mMutedStreams[streamId].audio=false;}console.log('(ReachSDK::room['+roomId+']::_unmuteAudioStream)streamId='+streamId);if(roomWebrtcStacks){[roomWebrtcStacks[streamId+'_pub'],roomWebrtcStacks[streamId+'_sub']].forEach(function(stacks){if(stacks&&stacks.length>0){for(var i=stacks.length-1;i>=0;i--){webrtcmngr.unmuteAudioWebrtcStack(stacks[i].stackId);}}});}}function _muteVideoStream(streamId){if(!(streamId&&typeof streamId=='string')){console.error('(ReachSDK::room['+roomId+']::_muteVideoStream)parameter streamId is incorrect. Expecting non empty string');return;}console.log('(ReachSDK::room['+roomId+']::_muteVideoStream)streamId='+streamId);if(!mMutedStreams[streamId]){mMutedStreams[streamId]={};}mMutedStreams[streamId].video=true;if(roomWebrtcStacks){console.log(roomWebrtcStacks[streamId+'_pub']);[roomWebrtcStacks[streamId+'_pub'],roomWebrtcStacks[streamId+'_sub']].forEach(function(stacks){if(stacks&&stacks.length>0){for(var i=stacks.length-1;i>=0;i--){webrtcmngr.muteVideoWebrtcStack(stacks[i].stackId);}}});}}function _unmuteVideoStream(streamId){if(!(streamId&&typeof streamId=='string')){console.error('(ReachSDK::room['+roomId+']::_unmuteVideoStream)parameter streamId is incorrect. Expecting non empty string');return;}if(mMutedStreams[streamId]&&mMutedStreams[streamId].video){mMutedStreams[streamId].video=false;}console.log('(ReachSDK::room['+roomId+']::_unmuteVideoStream)streamId='+streamId);if(roomWebrtcStacks){[roomWebrtcStacks[streamId+'_pub'],roomWebrtcStacks[streamId+'_sub']].forEach(function(stacks){if(stacks&&stacks.length>0){for(var i=stacks.length-1;i>=0;i--){webrtcmngr.unmuteVideoWebrtcStack(stacks[i].stackId);}}});}}function _close(updateRoomStatusToClose){console.log('(ReachSDK::room['+roomId+']::_close)room '+roomId+', detroyRoom='+updateRoomStatusToClose);var participantListRef=dataref.child('participantList'),publishedMediaListRef=dataref.child('publishedMediaList');participantListRef.child(me+'/connected').set(false);(0,_keys2.default)(mStreams).forEach(_unPublishStream);mStreams=[];if(instantMessageListCb){dataref.child('instantMessageList').off('child_added',instantMessageListCb);instantMessageListCb=null;}if(publishedMediaListCb){publishedMediaListRef.off('child_added',publishedMediaListCb);publishedMediaListCb=null;}if(publishedMediaListCbForAvailableStream){publishedMediaListRef.off('child_added',publishedMediaListCbForAvailableStream);publishedMediaListCbForAvailableStream=null;}if(unPublishedMediaListCb){publishedMediaListRef.off('child_removed',unPublishedMediaListCb);unPublishedMediaListCb=null;}if(unPublishedMediaListCbForAvailableStream){publishedMediaListRef.off('child_removed',unPublishedMediaListCbForAvailableStream);unPublishedMediaListCbForAvailableStream=null;}if(participantListJoinAddedCb){participantListRef.off('child_added',participantListJoinAddedCb);participantListJoinAddedCb=null;}if(participantListJoinChangedCb){participantListRef.off('child_changed',participantListJoinChangedCb);participantListJoinChangedCb=null;}if(participantListLeaveCb){participantListRef.off('child_changed',participantListLeaveCb);participantListLeaveCb=null;}if(remoteUnpublishedCb){publishedMediaListRef.off('child_removed',remoteUnpublishedCb);remoteUnpublishedCb=null;}(0,_keys2.default)(roomWebrtcStacks).forEach(function(streamStacksId){roomWebrtcStacks[streamStacksId].forEach(function(stack){if(streamStacksId&&stack){(function(){var _streamId=stack.streamId,_stackId=stack.stackId,_isPublish=stack.isPublish;if(_isPublish){_unPublishStream(_streamId);}else {_unSubscribeFromStream(_streamId);}setTimeout(function(){webrtcmngr.clearWebrtcStacks(_stackId);},1000);})();}});});setTimeout(function(){roomWebrtcStacks={};mMutedStreams=[];_removeAllAvailableStreams();},1100);if(updateRoomStatusToClose&&updateRoomStatusToClose===true){dataref.child('commonDataList/status').set(ROOM_STATUS_CLOSE);}_localstream2.default.close();}function _switchCamera(streamId,actionType,localVideoStream){_localstream2.default.setVideoNumber(_localstream2.default.getVideoNumber()===1?2:1);_localstream2.default.close();_unPublishStream(streamId,function(){return console.log('unpublishedStream');});_publishStream(streamId,localVideoStream,actionType,function(res){return console.log(res);});}init();return {getRoomId:_getRoomId,getMe:_getMe,setOnParticipantJoin:_setOnParticipantJoin,setOnParticipantLeave:_setOnParticipantLeave,sendInstantMessage:_sendInstantMessage,setOnInstantMessage:_setOnInstantMessage,publishStream:_publishStream,setOnPublishedStream:_setOnPublishedStream,unPublishStream:_unPublishStream,setOnUnPublishedStream:_setOnUnPublishedStream,subscribeToStream:_subscribeToStream,unSubscribeFromStream:_unSubscribeFromStream,getAvailableStreams:_getAvailableStreams,getAvailableStream:_getAvailableStream,muteAudioStream:_muteAudioStream,unmuteAudioStream:_unmuteAudioStream,muteVideoStream:_muteVideoStream,unmuteVideoStream:_unmuteVideoStream,close:_close,on:function on(evt,p_cb){switch(evt){case 'instantMessage':_setOnInstantMessage(p_cb);break;case 'publishedStream':_setOnPublishedStream(p_cb);break;case 'unPublishedStream':_setOnUnPublishedStream(p_cb);break;case 'participantJoin':_setOnParticipantJoin(p_cb);break;case 'participantLeave':_setOnParticipantLeave(p_cb);break;default:console.err('(ReachSDK::room['+roomId+']::on)unsupported '+evt+' event');break;}},switchCamera:_switchCamera};};var _actions=__webpack_require__(7),_actions2=_interopRequireDefault(_actions),_localstream=__webpack_require__(26),_localstream2=_interopRequireDefault(_localstream),_utils=__webpack_require__(24),_utils2=_interopRequireDefault(_utils);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var ROOM_STATUS_CLOSE='CLOSE';

/***/ },
/* 26 */
/***/ function(module, exports) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});var localstream=function(){var localVideoStreams=[],localAudioStreams=[],localAudioVideoStreams=[],streamVideo=null,streamAudio=null,streamAudioVideo=null,listenersVideo=[],listenersAudio=[],listenersAudioVideo=[],mLocalStreamVideo=null,mLocalStreamAudio=null,mLocalStreamAudioVideo=null,initVideoProgress=false,initAudioProgress=false,initAudioVideoProgress=false;function _initVideo(callback){console.log('(ReachSDK::localstream::initVideo)');if(!initVideoProgress){initVideoProgress=true;navigator.getMedia=getUserMedia;mLocalStreamVideo=document.createElement('VIDEO');mLocalStreamVideo.muted=true;localVideoStreams.push(mLocalStreamVideo);if(streamVideo===null){navigator.getMedia({audio:false,video:true},function(s){streamVideo=s;localVideoStreams.forEach(function(localVideoStream){attachMediaStream(localVideoStream,streamVideo);});localVideoStreams=[];listenersVideo.forEach(function(listenerVideo){listenerVideo(streamVideo);});listenersVideo=[];initVideoProgress=false;if(callback){callback();}},function(error){console.error('Error on webrtcLocalStream - webkitGetUserMedia : error=');console.dir(error);initVideoProgress=false;if(callback){callback(error);}});}else {localVideoStreams.forEach(function(localVideoStream){attachMediaStream(localVideoStream,streamVideo);});localVideoStreams=[];listenersVideo.forEach(function(listenerVideo){listenerVideo(streamVideo);});listenersVideo=[];initVideoProgress=false;}}}function _initAudio(callback){console.log('(ReachSDK::localstream::initAudio)');if(!initAudioProgress){initAudioProgress=true;navigator.getMedia=getUserMedia;mLocalStreamAudio=document.createElement('AUDIO');mLocalStreamAudio.muted=true;localAudioStreams.push(mLocalStreamAudio);if(streamAudio===null){navigator.getMedia({audio:true,video:false},function(s){streamAudio=s;localAudioStreams.forEach(function(localAudioStream){attachMediaStream(localAudioStream,streamAudio);});localAudioStreams=[];listenersAudio.forEach(function(listenerAudio){listenerAudio(streamAudio);});listenersAudio=[];initAudioProgress=false;if(callback){callback();}},function(error){console.error('Error on webrtcLocalStream - webkitGetUserMedia :error=');console.dir(error);initAudioProgress=false;if(callback){callback(error);}});}else {localAudioStreams.forEach(function(localAudioStream){attachMediaStream(localAudioStream,streamAudio);});localAudioStreams=[];listenersAudio.forEach(function(listenerAudio){listenerAudio(streamAudio);});listenersAudio=[];initAudioProgress=false;}}}function _initAudioVideo(callback){console.log('(ReachSDK::localstream::initAudioVideo)');if(!initAudioVideoProgress){initAudioVideoProgress=true;navigator.getMedia=getUserMedia;mLocalStreamAudioVideo=document.createElement('AUDIOVIDEO');mLocalStreamAudioVideo.muted=true;localAudioVideoStreams.push(mLocalStreamAudioVideo);if(streamAudioVideo===null){navigator.getMedia({audio:true,video:true},function(s){streamAudioVideo=s;localAudioVideoStreams.forEach(function(localAudioVideoStream){attachMediaStream(localAudioVideoStream,streamAudioVideo);});localAudioVideoStreams=[];listenersAudioVideo.forEach(function(listenerAudioVideo){listenerAudioVideo(streamAudioVideo);});listenersAudioVideo=[];initAudioVideoProgress=false;if(callback){callback();}},function(error){console.error('(ReachSDK::localstream::initAudioVideo::Error on webrtcLocalStream - webkitGetUserMedia : error=');console.dir(error);initAudioVideoProgress=false;if(callback){callback(error);}});}else {localAudioVideoStreams.forEach(function(localAudioVideoStream){attachMediaStream(localAudioVideoStream,streamAudioVideo);});localAudioVideoStreams=[];listenersAudioVideo.forEach(function(listenerAudioVideo){listenerAudioVideo(streamAudioVideo);});listenersAudioVideo=[];initAudioVideoProgress=false;}}}function _close(){console.log('(ReachSDK::localstream::close)');if(mLocalStreamVideo){detachMediaStream(mLocalStreamVideo);mLocalStreamVideo=null;}if(streamAudioVideo){streamAudioVideo.getTracks().forEach(function(track){track.stop();});streamAudioVideo=null;}if(streamVideo){streamVideo.stop();streamVideo=null;}initVideoProgress=false;if(mLocalStreamAudio){detachMediaStream(mLocalStreamAudio);mLocalStreamAudio=null;}if(streamAudio){streamAudio.stop();streamAudio=null;}initAudioProgress=false;if(mLocalStreamAudioVideo){detachMediaStream(mLocalStreamAudioVideo);mLocalStreamAudioVideo=null;}if(streamAudioVideo){streamAudioVideo.stop();streamAudioVideo=null;}initAudioVideoProgress=false;}return {getVideoStream:function getVideoStream(){return streamVideo;},addVideoListener:function addVideoListener(cb){listenersVideo.push(cb);},initVideo:function initVideo(){_initVideo();},connectLocalVideoStream:function connectLocalVideoStream(videoElt,publishStreamCb,getLocalStreamCb){if(videoElt){videoElt.muted=true;if(streamVideo){console.log('(ReachSDK::localstream::connectLocalVideoStream)use existing streamVideo');attachMediaStream(videoElt,streamVideo);if(getLocalStreamCb&&typeof getLocalStreamCb=='function'){getLocalStreamCb(streamVideo);}}else {localVideoStreams.push(videoElt);if(getLocalStreamCb&&typeof getLocalStreamCb=='function'){listenersVideo.push(getLocalStreamCb);}_initVideo(publishStreamCb);}}else {if(!streamVideo){if(getLocalStreamCb&&typeof getLocalStreamCb=='function'){listenersVideo.push(getLocalStreamCb);}_initVideo(publishStreamCb);}else {if(getLocalStreamCb&&typeof getLocalStreamCb=='function'){getLocalStreamCb(streamVideo);}}}},getAudioStream:function getAudioStream(){return streamAudio;},addAudioListener:function addAudioListener(cb){listenersAudio.push(cb);},initAudio:function initAudio(){_initAudio();},connectLocalAudioStream:function connectLocalAudioStream(AudioElt,publishStreamCb,getLocalStreamCb){if(AudioElt){AudioElt.muted=true;if(streamAudio){console.log('(ReachSDK::localstream::connectLocalAudioStream)use existing streamAudio');attachMediaStream(AudioElt,streamAudio);if(getLocalStreamCb&&typeof getLocalStreamCb=='function'){getLocalStreamCb(streamAudio);}}else {localAudioStreams.push(AudioElt);if(getLocalStreamCb&&typeof getLocalStreamCb=='function'){listenersAudio.push(getLocalStreamCb);}_initAudio(publishStreamCb);}}else {if(!streamAudio){if(getLocalStreamCb&&typeof getLocalStreamCb=='function'){listenersAudio.push(getLocalStreamCb);}_initAudio(publishStreamCb);}else {if(getLocalStreamCb&&typeof getLocalStreamCb=='function'){getLocalStreamCb(streamAudio);}}}},getAudioVideoStream:function getAudioVideoStream(){return streamAudioVideo;},addAudioVideoListener:function addAudioVideoListener(cb){listenersAudioVideo.push(cb);},initAudioVideo:function initAudioVideo(){_initAudioVideo();},connectLocalAudioVideoStream:function connectLocalAudioVideoStream(AudioVideoElt,publishStreamCb,getLocalStreamCb){if(AudioVideoElt){AudioVideoElt.muted=true;if(streamAudioVideo){console.log('(ReachSDK::localstream::connectLocalAudioVideoStream)use existing streamAudioVideo');attachMediaStream(AudioVideoElt,streamAudioVideo);if(getLocalStreamCb){getLocalStreamCb(streamAudioVideo);}}else {localAudioVideoStreams.push(AudioVideoElt);if(getLocalStreamCb&&typeof getLocalStreamCb=='function'){listenersAudioVideo.push(getLocalStreamCb);}_initAudioVideo(publishStreamCb);}}else {if(!streamAudioVideo){if(getLocalStreamCb&&typeof getLocalStreamCb=='function'){listenersAudioVideo.push(getLocalStreamCb);}_initAudioVideo(publishStreamCb);}else {if(getLocalStreamCb){getLocalStreamCb(streamAudioVideo);}}}},close:function close(){_close();}};}();exports.default=localstream;

/***/ },
/* 27 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _utils=__webpack_require__(24),_utils2=_interopRequireDefault(_utils),_webrtc=__webpack_require__(28),_webrtc2=_interopRequireDefault(_webrtc),_localstream=__webpack_require__(26),_localstream2=_interopRequireDefault(_localstream);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var webrtcmngr=function webrtcmngr(datarefs){var _this=this,webrtcStacks=[],virtualWebrtcStacks=[],mwebrtcmngr_reference=undefined;function _createWebrtc(p_Vid,p_remoteAppInstId,p_onCloseCb,p_isPublish,p_actionType,p_peercoId,p_peercoRef,p_mutedAudio,p_muteVideo,p_getStreamCb){var webrtcStackId=p_peercoId,localDataRef=datarefs.getWebrtc().child(p_peercoRef+'/'+_utils2.default.appInstanceId),remoteDataRef=datarefs.getWebrtc().child(p_peercoRef+'/'+p_remoteAppInstId),virtualWebrtcStack=undefined;if(p_isPublish){virtualWebrtcStack={webRtcStackId:webrtcStackId,localVid:p_Vid};}else {virtualWebrtcStack={webRtcStackId:webrtcStackId,remoteVid:p_Vid};}var id=virtualWebrtcStacks.push(virtualWebrtcStack)-1;if(!webrtcStacks[webrtcStackId]){console.debug('ReachSDK::webrtcmngr::createWebrtc->create a new real webrtcStack');var webRtcStack=(0,_webrtc2.default)(mwebrtcmngr_reference,p_isPublish,localDataRef,remoteDataRef,webrtcStackId,p_actionType,p_mutedAudio,p_muteVideo);webRtcStack.setOnClose(p_onCloseCb);if(p_isPublish){webrtcStacks[webrtcStackId]={stack:webRtcStack,isPublished:1,isSubscribed:0};webRtcStack.connectLocalStream(p_Vid,p_getStreamCb);}else {webrtcStacks[webrtcStackId]={stack:webRtcStack,isPublished:0,isSubscribed:1};webRtcStack.connectRemoteStream(p_Vid,p_getStreamCb);}}else {console.debug('ReachSDK::webrtcmngr::createWebrtc->use existing real webrtcStack');if(p_isPublish){webrtcStacks[webrtcStackId].isPublished++;webrtcStacks[webrtcStackId].stack.connectLocalStream(p_Vid,p_getStreamCb);}else {webrtcStacks[webrtcStackId].isSubscribed++;webrtcStacks[webrtcStackId].stack.connectRemoteStream(p_Vid,p_getStreamCb);}}console.debug('ReachSDK::webrtcmngr::createWebrtc->webrtcStack:'+webrtcStackId+' new isPublished count ='+webrtcStacks[webrtcStackId].isPublished+' new isSubscribed count ='+webrtcStacks[webrtcStackId].isSubscribed);return id;}function _closeWebrtc(id,p_isUnPublish,callback){console.debug('ReachSDK::webrtcmngr::closeWebrtc->id='+id);if(!virtualWebrtcStacks[id]){console.warn('ReachSDK::webrtcmngr::closeWebrtc: virtualstack '+id+' not found');if(callback&&typeof callback=='function'){callback();}return false;}var webrtcStackId=virtualWebrtcStacks[id].webRtcStackId;if(webrtcStackId&&webrtcStacks[webrtcStackId]){if(p_isUnPublish&&webrtcStacks[webrtcStackId].isPublished>0){webrtcStacks[webrtcStackId].isPublished--;}else if(!p_isUnPublish&&webrtcStacks[webrtcStackId].isSubscribed>0){webrtcStacks[webrtcStackId].isSubscribed--;}if(webrtcStacks[webrtcStackId].isPublished<1&&webrtcStacks[webrtcStackId].isSubscribed<1){console.debug('ReachSDK::webrtcmngr::closeWebrtc->destroy  real webrtcStack:'+webrtcStackId);webrtcStacks[webrtcStackId].stack.close(callback);webrtcStacks[webrtcStackId]=null;}else {console.debug('ReachSDK::webrtcmngr::closeWebrtc->decrement  real webrtcStack:'+webrtcStackId+' new isPublished count ='+webrtcStacks[webrtcStackId].isPublished+' new isSubscribed count ='+webrtcStacks[webrtcStackId].isSubscribed);if(callback&&typeof callback=='function'){callback();}}}else {if(callback&&typeof callback=='function'){callback();}console.warn('ReachSDK::webrtcmngr::closeWebrtc cannot found real stack');}if(virtualWebrtcStacks[id].localVid){_localstream2.default.close();detachMediaStream(virtualWebrtcStacks[id].localVid);}if(virtualWebrtcStacks[id].remoteVid){detachMediaStream(virtualWebrtcStacks[id].remoteVid);}return true;}function _clearWebrtcStacks(webrtcStackId){console.debug('ReachSDK::webrtcmngr::clearWebrtcStacks id='+webrtcStackId);if(webrtcStackId&&webrtcStacks&&webrtcStacks[webrtcStackId]){webrtcStacks[webrtcStackId]=null;}return true;}function _muteAudioWebrtcStack(virtualWebrtcStackId){console.log('(ReachSDK::webrtcmngr::muteAudioWebrtcStack) virtualWebrtcStackId='+virtualWebrtcStackId);if(virtualWebrtcStacks&&virtualWebrtcStacks[virtualWebrtcStackId]&&virtualWebrtcStacks[virtualWebrtcStackId].webRtcStackId){var webRtcStackId=virtualWebrtcStacks[virtualWebrtcStackId].webRtcStackId;console.log('(ReachSDK::webrtcmngr::muteAudioWebrtcStack) virtualWebrtcStackId='+virtualWebrtcStackId+' webRtcStackId='+webRtcStackId);if(webrtcStacks&&webrtcStacks[webRtcStackId]&&webrtcStacks[webRtcStackId].stack){webrtcStacks[webRtcStackId].stack.muteAudio();}else {console.warn('(ReachSDK::webrtcmngr::muteAudioWebrtcStack) webrtcStack='+webRtcStackId+' not found');}}else {console.warn('(ReachSDK::webrtcmngr::muteAudioWebrtcStack) virtualWebrtcStackId='+virtualWebrtcStackId+' not found');}}function _unmuteAudioWebrtcStack(virtualWebrtcStackId){console.log('(ReachSDK::webrtcmngr::_unmuteAudioWebrtcStack) virtualWebrtcStackId='+virtualWebrtcStackId);if(virtualWebrtcStacks&&virtualWebrtcStacks[virtualWebrtcStackId]&&virtualWebrtcStacks[virtualWebrtcStackId].webRtcStackId){var webRtcStackId=virtualWebrtcStacks[virtualWebrtcStackId].webRtcStackId;console.log('(ReachSDK::webrtcmngr::_unmuteAudioWebrtcStack) virtualWebrtcStackId='+virtualWebrtcStackId+',webRtcStackId='+webRtcStackId);if(webrtcStacks&&webrtcStacks[webRtcStackId]&&webrtcStacks[webRtcStackId].stack){webrtcStacks[webRtcStackId].stack.unmuteAudio();}else {console.warn('(ReachSDK::webrtcmngr::_unmuteAudioWebrtcStack) webrtcStack='+webRtcStackId+' not found');}}else {console.warn('(ReachSDK::webrtcmngr::_unmuteAudioWebrtcStack) virtualWebrtcStackId='+virtualWebrtcStackId+' not found');}}function _muteVideoWebrtcStack(virtualWebrtcStackId){console.log('(ReachSDK::webrtcmngr::muteAudioWebrtcStack) virtualWebrtcStackId='+virtualWebrtcStackId);if(virtualWebrtcStacks&&virtualWebrtcStacks[virtualWebrtcStackId]&&virtualWebrtcStacks[virtualWebrtcStackId].webRtcStackId){var webRtcStackId=virtualWebrtcStacks[virtualWebrtcStackId].webRtcStackId;console.log('(ReachSDK::webrtcmngr::muteAudioWebrtcStack) virtualWebrtcStackId='+virtualWebrtcStackId+' webRtcStackId='+webRtcStackId);if(webrtcStacks&&webrtcStacks[webRtcStackId]&&webrtcStacks[webRtcStackId].stack){webrtcStacks[webRtcStackId].stack.muteVideo();}else {console.warn('(ReachSDK::webrtcmngr::muteAudioWebrtcStack) webrtcStack='+webRtcStackId+' not found');}}else {console.warn('(ReachSDK::webrtcmngr::muteAudioWebrtcStack) virtualWebrtcStackId='+virtualWebrtcStackId+' not found');}}function _unmuteVideoWebrtcStack(virtualWebrtcStackId){console.log('(ReachSDK::webrtcmngr::_unmuteAudioWebrtcStack) virtualWebrtcStackId='+virtualWebrtcStackId);if(virtualWebrtcStacks&&virtualWebrtcStacks[virtualWebrtcStackId]&&virtualWebrtcStacks[virtualWebrtcStackId].webRtcStackId){var webRtcStackId=virtualWebrtcStacks[virtualWebrtcStackId].webRtcStackId;console.log('(ReachSDK::webrtcmngr::_unmuteAudioWebrtcStack) virtualWebrtcStackId='+virtualWebrtcStackId+', webRtcStackId='+webRtcStackId);if(webrtcStacks&&webrtcStacks[webRtcStackId]&&webrtcStacks[webRtcStackId].stack){webrtcStacks[webRtcStackId].stack.unmuteVideo();}else {console.warn('(ReachSDK::webrtcmngr::_unmuteAudioWebrtcStack) webrtcStack='+webRtcStackId+' not found');}}else {console.warn('(ReachSDK::webrtcmngr::_unmuteAudioWebrtcStack) virtualWebrtcStackId='+virtualWebrtcStackId+' not found');}}function _setWebrtcManger(webrtcmngr){mwebrtcmngr_reference=webrtcmngr;}return {createWebrtc:function createWebrtc(p_Vid,p_remoteAppInstId,p_onCloseCb,p_isPublish,p_actionType,p_peercoId,p_peercoRef,p_mutedAudio,p_muteVideo,p_getStreamCb){return _createWebrtc.bind(_this)(p_Vid,p_remoteAppInstId,p_onCloseCb,p_isPublish,p_actionType,p_peercoId,p_peercoRef,p_mutedAudio,p_muteVideo,p_getStreamCb);},closeWebrtc:_closeWebrtc,clearWebrtcStacks:_clearWebrtcStacks,muteAudioWebrtcStack:_muteAudioWebrtcStack,unmuteAudioWebrtcStack:_unmuteAudioWebrtcStack,muteVideoWebrtcStack:_muteVideoWebrtcStack,unmuteVideoWebrtcStack:_unmuteVideoWebrtcStack,setWebrtcManger:_setWebrtcManger};};exports.default=webrtcmngr;

/***/ },
/* 28 */
/***/ function(module, exports, __webpack_require__) {

	'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _stringify=__webpack_require__(22),_stringify2=_interopRequireDefault(_stringify),_actions=__webpack_require__(7),_actions2=_interopRequireDefault(_actions),_localstream=__webpack_require__(26),_localstream2=_interopRequireDefault(_localstream);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var ICE_CONNECTION_STATE_DISCONNECTED='disconnected',ICE_CONNECTION_STATE_CONNECTED='connected',ICE_CONNECTION_STATE_COMPLETED='completed',ICE_CONNECTION_STATE_CHECKING='checking',ICE_CONNECTION_STATE_CLOSED='closed',ICE_CONNECTION_STATE_FAILED='failed',ICE_CONNECTION_STATE_OTHER='other',DEFAULT_ICE_CONFIG={iceServers:[{url:'turns:turn1.webcom.orange.com:443',username:'admin',credential:'webcom1234'},{url:'turn:turn2.webcom.orange.com:443',username:'admin',credential:'webcom1234'},{url:'turns:turn3.webcom.orange.com:443',username:'admin',credential:'webcom1234'}]},webrtc=function webrtc(p_webrtcmngr,p_isPublish,p_localDataRef,p_remoteDataRef,p_webrtcStackId,p_actionType,p_muteAudio,p_muteVideo){var webrtcmngr=p_webrtcmngr,stackId=new Date().getTime(),isPublish=p_isPublish,pc=null,localDataRef=p_localDataRef,remoteDataRef=p_remoteDataRef,iceCandidatesListCb=null,_sdpOfferCb=null,_sdpAnswerCb=null,remotedatarefCb=null,onCloseCb=null,webrtcStackId=p_webrtcStackId,actionType=p_actionType,config=null,myPeerConnection=null,myRTCSessionDescription=null,myRTCIceCandidate=null,localStreams=[],remoteStreams=[],remoteStreamsCb=[],receivedStream=null,sentStream=null,isClosed=false,closeInProgress=false,iceConnectionState=null,onCloseCb2=null,isAudioMute=false,isVideoMute=false;console.log('(ReachSDK::webrtc::)stackId=${stackId} isPublish=${isPublish},localDataRef=${localDataRef},remoteDataRef=${remoteDataRef})');var DtlsSrtpKeyAgreement={DtlsSrtpKeyAgreement:true},optional={optional:[DtlsSrtpKeyAgreement]},publisherMediaConstraints={mandatory:{OfferToReceiveAudio:false,OfferToReceiveVideo:false}},subscriberMediaConstraints={mandatory:{OfferToReceiveAudio:true,OfferToReceiveVideo:true}};function onError(e){console.log('(ReachSDK::webrtc::)stackId='+stackId+'error='+e);console.dir(e);}function getIceServersConfigFromServer(callbackOk,callbackKo){console.log('ReachSDK::webrtc::getIceServersConfigFromServer');if(localDataRef){localDataRef.root().child('config').once('value',function(snapshot){var _config=snapshot?snapshot.val():null;if(_config){if(typeof callbackOk=='function'){callbackOk(_config);}}else if(typeof callbackKo=='function'){callbackKo();}},function(error){if(typeof callbackKo=='function'){callbackKo(error);}});}else if(typeof callbackKo=='function'){callbackKo();}}function startListeningToRemoteIceCandidate(){remoteDataRef.child('iceCandidatesList').on('child_added',iceCandidatesListCb);}function stopListeningToRemoteIceCandidate(){remoteDataRef.child('iceCandidatesList').off('child_added',iceCandidatesListCb);}function _muteTracks(enabled,tracks){if(tracks){tracks.forEach(function(track){if(track){track.enabled=enabled;}});}}function _muteAudioTracks(mute){isAudioMute=mute;var stream=isPublish&&sentStream?sentStream:!isPublish&&receivedStream?receivedStream:null;if(stream){_muteTracks(!isAudioMute,stream.getAudioTracks());}}function _muteAudio(){console.log('(ReachSDK::webrtc::_muteAudio)stackId='+stackId);_muteAudioTracks(true);}function _unmuteAudio(){console.log('(ReachSDK::webrtc::_unmuteAudio)stackId='+stackId);_muteAudioTracks(false);}function _muteVideoTracks(mute){isVideoMute=mute;var stream=isPublish&&sentStream?sentStream:!isPublish&&receivedStream?receivedStream:null;if(stream){_muteTracks(!isVideoMute,stream.getVideoTracks());}}function _muteVideo(){console.log('(ReachSDK::webrtc::_muteVideo)stackId='+stackId);_muteVideoTracks(true);}function _unmuteVideo(){console.log('(ReachSDK::webrtc::_unmuteVideo)stackId='+stackId);_muteVideoTracks(false);}function _initlocalStream(callback){console.log('(ReachSDK::webrtc::_initlocalStream)stackId='+stackId+' get local video stream and renders to local video');if(actionType){var initlocalStream=undefined;if(actionType===_actions2.default.ACTION_TYPE_VIDEO){initlocalStream=function initlocalStream(){console.log('(ReachSDK::webrtc::_initlocalStream)initlocalStream_video');if(_localstream2.default.getVideoStream()&&_localstream2.default.getVideoStream().clone&&typeof _localstream2.default.getVideoStream().clone=='function'){sentStream=_localstream2.default.getVideoStream().clone();}else {sentStream=_localstream2.default.getVideoStream();}if(isAudioMute){_muteAudio();}if(isVideoMute){_muteVideo();}pc.addStream(sentStream);for(var i=0;i<localStreams.length;i++){console.log('(ReachSDK::webrtc::_initlocalStream)stackId='+stackId+' rendering local video to '+localStreams[i].id);attachMediaStream(localStreams[i],_localstream2.default.getVideoStream());}if(callback&&typeof callback=='function'){callback();}};if(_localstream2.default.getVideoStream()){initlocalStream();}else {_localstream2.default.addVideoListener(initlocalStream);_localstream2.default.initVideo();}}else if(actionType===_actions2.default.ACTION_TYPE_AUDIO){initlocalStream=function initlocalStream(){console.log('(ReachSDK::webrtc::_initlocalStream)initlocalStream_audio');if(_localstream2.default.getAudioStream()&&_localstream2.default.getAudioStream().clone&&typeof _localstream2.default.getAudioStream().clone=='function'){sentStream=_localstream2.default.getAudioStream().clone();}else {sentStream=_localstream2.default.getAudioStream();}if(isAudioMute){_muteAudio();}if(isVideoMute){_muteVideo();}pc.addStream(sentStream);for(var i=0;i<localStreams.length;i++){console.log('(ReachSDK::webrtc::_initlocalStream)stackId='+stackId+' rendering local Audio to '+localStreams[i].id);attachMediaStream(localStreams[i],_localstream2.default.getAudioStream());}if(callback&&typeof callback=='function'){callback();}};if(_localstream2.default.getAudioStream()){initlocalStream();}else {_localstream2.default.addAudioListener(initlocalStream);_localstream2.default.initAudio();}}else if(actionType===_actions2.default.ACTION_TYPE_AUDIO_VIDEO){initlocalStream=function initlocalStream(){console.log('(ReachSDK::webrtc::_initlocalStream)initlocalStream_audio_video');if(_localstream2.default.getAudioVideoStream()&&_localstream2.default.getAudioVideoStream().clone&&typeof _localstream2.default.getAudioVideoStream().clone=='function'){sentStream=_localstream2.default.getAudioVideoStream().clone();}else {sentStream=_localstream2.default.getAudioVideoStream();}if(isAudioMute){_muteAudio();}if(isVideoMute){_muteVideo();}pc.addStream(sentStream);for(var i=0;i<localStreams.length;i++){console.log('(ReachSDK::webrtc::_initlocalStream)stackId='+stackId+' rendering local AudioVideo to '+localStreams[i].id);attachMediaStream(localStreams[i],_localstream2.default.getAudioVideoStream());}if(callback&&typeof callback=='function'){callback();}};if(_localstream2.default.getAudioVideoStream()){initlocalStream();}else {_localstream2.default.addAudioVideoListener(initlocalStream);_localstream2.default.initAudioVideo();}}}else {console.warn('(ReachSDK::webrtc::_initlocalStream)no actionType specified');}}function _initSdpCallbacks(){console.debug('(ReachSDK::webrtc::_initSdpCallbacks)stackId='+stackId);if(isPublish){if(_sdpOfferCb){remoteDataRef.off('child_added',_sdpOfferCb);}_sdpAnswerCb=function sdpAnswerCb(snapshot){if(!isClosed&&snapshot.name()==='sdpAnswer'){var data=snapshot.val();console.debug('(ReachSDK::webrtc::sdpAnswerCb)stackId='+stackId+'-received sdpAnswer: '+(0,_stringify2.default)(data));pc.setRemoteDescription(new myRTCSessionDescription(data),function(){console.debug('(ReachSDK::webrtc::sdpAnswerCb)stackId='+stackId+'-remote description set');startListeningToRemoteIceCandidate();},onError);remoteDataRef.off('child_added',_sdpAnswerCb);}};remoteDataRef.on('child_added',_sdpAnswerCb);}else {if(_sdpAnswerCb){remoteDataRef.off('child_added',_sdpAnswerCb);}_sdpOfferCb=function sdpOfferCb(snapshot){if(!isClosed&&snapshot.name()==='sdpOffer'){var data=snapshot.val();console.debug('(ReachSDK::webrtc::sdpOfferCb)stackId='+stackId+'-received sdpOffer: '+(0,_stringify2.default)(data));pc.setRemoteDescription(new myRTCSessionDescription(data),function(){pc.createAnswer(function(description){console.log('(ReachSDK::webrtc::sdpOfferCb)stackId='+stackId+'-sending answer');pc.setLocalDescription(description,function(){console.debug('(ReachSDK::webrtc::sdpOfferCb)stackId='+stackId+'-set sdpAnswer in base : '+(0,_stringify2.default)(description));localDataRef.child('sdpAnswer').set(JSON.parse((0,_stringify2.default)(description)));startListeningToRemoteIceCandidate();},onError);},onError,subscriberMediaConstraints);},onError);remoteDataRef.off('child_added',_sdpOfferCb);}};remoteDataRef.on('child_added',_sdpOfferCb);}}function _closeSdpCallbacks(){if(_sdpAnswerCb){remoteDataRef.off('child_added',_sdpAnswerCb);_sdpAnswerCb=null;}if(_sdpOfferCb){remoteDataRef.off('child_added',_sdpOfferCb);_sdpOfferCb=null;}}function sendOffer(){console.log('(webrtc::sendOffer)stackid='+stackId+'-creating sdpOffer');pc.createOffer(function(description){pc.setLocalDescription(description,function(){console.debug('(ReachSDK::webrtc::createOffer)stackId='+stackId+'-set sdpOffer in base : '+(0,_stringify2.default)(description));localDataRef.child('sdpOffer').set(JSON.parse((0,_stringify2.default)(description)));},onError);},onError,publisherMediaConstraints);}function _close(callback){if(!closeInProgress&&!isClosed){closeInProgress=true;onCloseCb2=callback;console.debug('(ReachSDK::webrtc::_close)stackId='+stackId+'-closing webrtc stack');if(pc){pc.close();}if(remotedatarefCb){remoteDataRef.off('child_added',remotedatarefCb);remotedatarefCb=null;}if(iceCandidatesListCb){stopListeningToRemoteIceCandidate();iceCandidatesListCb=null;}_closeSdpCallbacks();for(var i=0;i<localStreams.length;i++){if(localStreams[i]){detachMediaStream(localStreams[i]);console.debug('(ReachSDK::webrtc::_close)stackId='+stackId+'-stopping local video to '+localStreams[i].id);}}for(var j=0;j<remoteStreams.length;j++){if(remoteStreams[j]){detachMediaStream(remoteStreams[j]);console.debug('(ReachSDK::webrtc::_close)stackId='+stackId+'-stopping remote vid to '+remoteStreams[j].id);}}isClosed=true;console.debug('(ReachSDK::webrtc::_close)stackId='+stackId+'-closing webrtc stack -> waiting for ICE_CONNECTION_STATE_DISCONNECTED');if(isClosed&&(iceConnectionState===ICE_CONNECTION_STATE_DISCONNECTED||iceConnectionState===ICE_CONNECTION_STATE_CLOSED||iceConnectionState===ICE_CONNECTION_STATE_FAILED)){console.debug('(ReachSDK::webrtc::_close)stackId='+stackId+'-closed webrtc stack complete');pc=null;closeInProgress=false;webrtcmngr.clearWebrtcStacks(webrtcStackId);console.log(onCloseCb);if(onCloseCb2&&typeof onCloseCb2=='function'){onCloseCb2();}}}else {console.debug('(ReachSDK::webrtc::_close)stackId='+stackId+'-closing webrtc stack already in progress');}}function _connectLocalStream(videoElt,getStreamCb){if(actionType){if(actionType===_actions2.default.ACTION_TYPE_VIDEO){_localstream2.default.connectLocalVideoStream(videoElt,getStreamCb);}else if(actionType===_actions2.default.ACTION_TYPE_AUDIO){_localstream2.default.connectLocalAudioStream(videoElt,getStreamCb);}else if(actionType===_actions2.default.ACTION_TYPE_AUDIO_VIDEO){_localstream2.default.connectLocalAudioVideoStream(videoElt,getStreamCb);}}}function _connectRemoteStream(videoElt,getStreamCb){if(videoElt){if(receivedStream){attachMediaStream(videoElt,receivedStream);if(getStreamCb&&typeof getStreamCb=='function'){getStreamCb(receivedStream);}}else {remoteStreams.push(videoElt);if(getStreamCb&&typeof getStreamCb=='function'){remoteStreamsCb.push(getStreamCb);}}}else {if(receivedStream){if(getStreamCb&&typeof getStreamCb=='function'){getStreamCb(receivedStream);}}else {if(getStreamCb&&typeof getStreamCb=='function'){remoteStreamsCb.push(getStreamCb);}}}}function init_pc(){console.log('(ReachSDK::webrtc::init_pc)stackId='+stackId+'_config=',(0,_stringify2.default)(config));pc=new myPeerConnection(config,optional);pc.onicecandidate=function(e){if(e.candidate){console.log('(ReachSDK::webrtc::pc.onicecandidate)stackId='+stackId+' send ice candidate='+(0,_stringify2.default)(e.candidate));localDataRef.child('iceCandidatesList').push({label:e.candidate.sdpMLineIndex,id:e.candidate.sdpMid,candidate:e.candidate.candidate});}};pc.onaddstream=function(e){console.debug('(ReachSDK::webrtc::onaddstream)stackId='+stackId+'-stream:'+(0,_stringify2.default)(e.stream));if(e&&e.stream){receivedStream=e.stream;if(isAudioMute){_muteAudio();}if(isVideoMute){_muteVideo();}}};pc.oniceconnectionstatechange=function(){if(!!pc&&pc.iceConnectionState===ICE_CONNECTION_STATE_CHECKING){console.debug('(ReachSDK::webrtc::oniceconnectionstatechange)stackId='+stackId+'-checking');iceConnectionState=ICE_CONNECTION_STATE_CHECKING;}else if(!!pc&&pc.iceConnectionState===ICE_CONNECTION_STATE_CONNECTED){iceConnectionState=ICE_CONNECTION_STATE_CONNECTED;console.debug('(ReachSDK::webrtc::oniceconnectionstatechange)stackId='+stackId+'-connected');if(receivedStream){remoteStreams.forEach(function(remoteStream){if(remoteStream){console.debug('(ReachSDK::webrtc::onaddstream)pc.onaddstream stackId='+stackId+'-rendering remote vid to '+remoteStream.id);attachMediaStream(remoteStream,receivedStream);}});remoteStreamsCb.forEach(function(remoteStreamCb){if(remoteStreamCb){remoteStreamCb(receivedStream);}});remoteStreamsCb=[];}stopListeningToRemoteIceCandidate();}else if(!!pc&&pc.iceConnectionState===ICE_CONNECTION_STATE_COMPLETED){iceConnectionState=ICE_CONNECTION_STATE_COMPLETED;console.debug('(ReachSDK::webrtc::oniceconnectionstatechange)stackId='+stackId+'-'+ICE_CONNECTION_STATE_COMPLETED);stopListeningToRemoteIceCandidate();}if(!!pc&&pc.iceConnectionState===ICE_CONNECTION_STATE_DISCONNECTED){iceConnectionState=ICE_CONNECTION_STATE_DISCONNECTED;console.log('(ReachSDK::webrtc::oniceconnectionstatechange)stackId='+stackId+'-remote disconnection, closing peer connection');}else if(!!pc&&pc.iceConnectionState===ICE_CONNECTION_STATE_CLOSED){console.debug('(ReachSDK::webrtc::oniceconnectionstatechange)stackId='+stackId+'-closed');iceConnectionState=ICE_CONNECTION_STATE_CLOSED;_close();}else if(!!pc&&pc.iceConnectionState===ICE_CONNECTION_STATE_FAILED){console.debug('(ReachSDK::webrtc::oniceconnectionstatechange)stackId='+stackId+'-failed');iceConnectionState=ICE_CONNECTION_STATE_FAILED;}else {if(pc){console.debug('(ReachSDK::webrtc::oniceconnectionstatechange)stackId='+stackId+'-'+pc.iceConnectionState);}else {console.debug('(ReachSDK::webrtc::oniceconnectionstatechange)stackId='+stackId+'-pc = null');}iceConnectionState=ICE_CONNECTION_STATE_OTHER;}if(isClosed&&(iceConnectionState===ICE_CONNECTION_STATE_DISCONNECTED||iceConnectionState===ICE_CONNECTION_STATE_CLOSED||iceConnectionState===ICE_CONNECTION_STATE_FAILED)){console.debug('(ReachSDK::webrtc::_close)stackId='+stackId+'-closed webrtc stack complete');pc=null;closeInProgress=false;webrtcmngr.clearWebrtcStacks(webrtcStackId);if(onCloseCb&&typeof onCloseCb=='function'){onCloseCb();}if(onCloseCb2&&typeof onCloseCb2=='function'){onCloseCb2();}}};iceCandidatesListCb=function iceCandidatesListCb(snapshot){var data=snapshot.val(),candidate=new myRTCIceCandidate({sdpMLineIndex:data.label,candidate:data.candidate,sdpMid:data.id});console.log('(ReachSDK::webrtc::iceCandidatesListCb)stackId='+stackId+'received ice candidate='+(0,_stringify2.default)(candidate));pc.addIceCandidate(candidate);};if(isPublish){_initlocalStream(function(){_initSdpCallbacks();sendOffer();});}else {_initSdpCallbacks();}}(function(){console.log('(ReachSDK::webrtc::init)stackId='+stackId);if(typeof RTCPeerConnection==='function'){myPeerConnection=RTCPeerConnection;}else {console.error('(ReachSDK::webrtc::init)stackId='+stackId+' error=Webrtc is not supported on this browser !');throw new Error('Webrtc is not supported on this browser !');}if(typeof RTCSessionDescription==='function'){myRTCSessionDescription=RTCSessionDescription;}else {console.error('(ReachSDK::webrtc::init)stackId='+stackId+' error2=Webrtc is not supported on this browser !');throw new Error('Webrtc is not supported on this browser !');}if(typeof RTCIceCandidate==='function'){myRTCIceCandidate=RTCIceCandidate;}else {console.error('(ReachSDK::webrtc::init)stackId='+stackId+' error3=Webrtc is not supported on this browser !');throw new Error('Webrtc is not supported on this browser !');}if(p_muteAudio){isAudioMute=true;}if(p_muteVideo){isVideoMute=true;}getIceServersConfigFromServer(function(_config){config=_config;console.log('(ReachSDK::webrtc::) use server config=',(0,_stringify2.default)(config));init_pc();},function(){if(typeof DEFAULT_ICE_CONFIG!=='undefined'){config=DEFAULT_ICE_CONFIG;console.log('(ReachSDK::webrtc::) use DEFAULT_ICE_CONFIG config=',(0,_stringify2.default)(config));}else {console.log('(ReachSDK::webrtc::) no ice  config');}init_pc();});})();return {setOnClose:function setOnClose(cb){onCloseCb=cb;},close:function close(cb){console.debug('(ReachSDK::webrtc::_close)stackId='+stackId+'-close requested');_close(cb);},connectLocalStream:_connectLocalStream,connectRemoteStream:_connectRemoteStream,muteAudio:_muteAudio,unmuteAudio:_unmuteAudio,muteVideo:_muteVideo,unmuteVideo:_unmuteVideo};};exports.default=webrtc;

/***/ }
/******/ ])
});
;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovLy93ZWJwYWNrL2Jvb3RzdHJhcCBlZTliMjA0MTI4NTg0YmNmOTM2NSIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vLy4vfi9iYWJlbC1ydW50aW1lL2hlbHBlcnMvY2xhc3NDYWxsQ2hlY2suanMiLCJ3ZWJwYWNrOi8vLy4vfi9iYWJlbC1ydW50aW1lL2hlbHBlcnMvY3JlYXRlQ2xhc3MuanMiLCJ3ZWJwYWNrOi8vLy4vfi9iYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2RlZmluZS1wcm9wZXJ0eS5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbGlicmFyeS9mbi9vYmplY3QvZGVmaW5lLXByb3BlcnR5LmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYWRhcHRlci5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvYWN0aW9ucy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZGF0YXJlZnMuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3JlYWNoLmpzIiwid2VicGFjazovLy8uL34vYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9rZXlzLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC50by1vYmplY3QuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLmRlZmluZWQuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLm9iamVjdC1zYXAuanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLmV4cG9ydC5qcyIsIndlYnBhY2s6Ly8vLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuZ2xvYmFsLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5jb3JlLmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5jdHguanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLmEtZnVuY3Rpb24uanMiLCJ3ZWJwYWNrOi8vLy4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLmZhaWxzLmpzIiwid2VicGFjazovLy8uL34vYmFiZWwtcnVudGltZS9jb3JlLWpzL2pzb24vc3RyaW5naWZ5LmpzIiwid2VicGFjazovLy8uL34vY29yZS1qcy9saWJyYXJ5L2ZuL2pzb24vc3RyaW5naWZ5LmpzIiwid2VicGFjazovLy8uL3NyYy91dGlscy5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvcm9vbS5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvbG9jYWxzdHJlYW0uanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3dlYnJ0Y21uZ3IuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3dlYnJ0Yy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxPO0FDVkE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsdUJBQWU7QUFDZjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7Ozs7OztvMkJDekJhLCtCQUNaLFNBRFksS0FDWixFQUF5RCxLQUE3QyxrREFBSyxvREFBd0Msa0NBRDdDLE9BQzZDLElB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YyxDQUFSLENBVVAsbUJBQW9CLG1CQUFwQixDQU1BLG9CQUFxQixvQkFBckIsQ0FJQSxVQUFXLFVBQVgsQ0FJQSxZQUFhLFlBQWIsQ0FJQSxVQUFXLFVBQVgsQ0FJQSxZQUFhLFlBQWIsQ0E3Q0QsQ0F4d0I2SSxDQUEvSCxpQkF5ekJBLE8iLCJmaWxlIjoicmVhY2gtZGVidWcuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJSZWFjaFwiXSA9IGZhY3RvcnkoKTtcblx0ZWxzZVxuXHRcdHJvb3RbXCJSZWFjaFwiXSA9IGZhY3RvcnkoKTtcbn0pKHRoaXMsIGZ1bmN0aW9uKCkge1xucmV0dXJuIFxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIHdlYnBhY2svdW5pdmVyc2FsTW9kdWxlRGVmaW5pdGlvblxuICoqLyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogd2VicGFjay9ib290c3RyYXAgZWU5YjIwNDEyODU4NGJjZjkzNjVcbiAqKi8iLCIvLyBQb2x5ZmlsbHMgZm9yIFdlYlJUQ1xuXG5cbi8vIFRPRE8gMTlrIG1pbmlmaWVkLCB3ZSBjYW4gZG8gbGVzcyBtYXliZVxuLyogZXNsaW50IG5vLXVudXNlZC12YXJzOjAgKi9cbmltcG9ydCBhZGFwdGVyanMgZnJvbSAnLi9hZGFwdGVyJztcblxuaW1wb3J0IGFjdGlvbnMgZnJvbSAnLi9hY3Rpb25zJztcbmltcG9ydCBkYXRhcmVmcyBmcm9tICcuL2RhdGFyZWZzJztcbmltcG9ydCByZWFjaCBmcm9tICcuL3JlYWNoJztcbmltcG9ydCByb29tIGZyb20gJy4vcm9vbSc7XG5pbXBvcnQgd2VicnRjbW5nciBmcm9tICcuL3dlYnJ0Y21uZ3InO1xuXG5leHBvcnQgY2xhc3MgUmVhY2gge1xuXHRjb25zdHJ1Y3Rvcih1cmw9ICdodHRwOi8vd2ViY29tLm9yYW5nZS5jb20vYmFzZS93ZWJydGMnKSB7XG5cdFx0dGhpcy5kYXRhcmVmcyA9IGRhdGFyZWZzKHVybCk7XG5cdFx0dGhpcy53ZWJydGNtbmdyID0gd2VicnRjbW5ncih0aGlzLmRhdGFyZWZzKTtcblx0XHR0aGlzLndlYnJ0Y21uZ3Iuc2V0V2VicnRjTWFuZ2VyKHRoaXMud2VicnRjbW5ncik7XG5cdH1cblxuXHRSb29tKC4uLmFyZ3MpIHtcblx0XHRyZXR1cm4gcm9vbSguLi5hcmdzLCB0aGlzLmRhdGFyZWZzLCB0aGlzLndlYnJ0Y21uZ3IpO1xuXHR9XG5cblx0UmVhY2goLi4uYXJncykge1xuXHRcdHJldHVybiByZWFjaCguLi5hcmdzLCB0aGlzLmRhdGFyZWZzKTtcblx0fVxuXG5cdHN0YXRpYyBnZXQgdmVyc2lvbigpIHtcblx0XHRyZXR1cm4gU0RLX1ZFUlNJT047IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW5kZWZcblx0fVxuXHRzdGF0aWMgZ2V0IGFjdGlvbnMoKSB7XG5cdFx0cmV0dXJuIGFjdGlvbnM7XG5cdH1cbn1cblxuZ2xvYmFsLkNvbVNESyA9IFJlYWNoO1xuXG5tb2R1bGUuZXhwb3J0cyA9IFJlYWNoO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvaW5kZXguanNcbiAqKi8iLCJcInVzZSBzdHJpY3RcIjtcblxuZXhwb3J0cy5fX2VzTW9kdWxlID0gdHJ1ZTtcblxuZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKGluc3RhbmNlLCBDb25zdHJ1Y3Rvcikge1xuICBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7XG4gIH1cbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vYmFiZWwtcnVudGltZS9oZWxwZXJzL2NsYXNzQ2FsbENoZWNrLmpzXG4gKiogbW9kdWxlIGlkID0gMVxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbmV4cG9ydHMuX19lc01vZHVsZSA9IHRydWU7XG5cbnZhciBfZGVmaW5lUHJvcGVydHkgPSByZXF1aXJlKFwiLi4vY29yZS1qcy9vYmplY3QvZGVmaW5lLXByb3BlcnR5XCIpO1xuXG52YXIgX2RlZmluZVByb3BlcnR5MiA9IF9pbnRlcm9wUmVxdWlyZURlZmF1bHQoX2RlZmluZVByb3BlcnR5KTtcblxuZnVuY3Rpb24gX2ludGVyb3BSZXF1aXJlRGVmYXVsdChvYmopIHsgcmV0dXJuIG9iaiAmJiBvYmouX19lc01vZHVsZSA/IG9iaiA6IHsgZGVmYXVsdDogb2JqIH07IH1cblxuZXhwb3J0cy5kZWZhdWx0ID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldO1xuICAgICAgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlO1xuICAgICAgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlO1xuICAgICAgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTtcbiAgICAgICgwLCBfZGVmaW5lUHJvcGVydHkyLmRlZmF1bHQpKHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG4gICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcbiAgICBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtcbiAgICByZXR1cm4gQ29uc3RydWN0b3I7XG4gIH07XG59KCk7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vYmFiZWwtcnVudGltZS9oZWxwZXJzL2NyZWF0ZUNsYXNzLmpzXG4gKiogbW9kdWxlIGlkID0gMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSB7IFwiZGVmYXVsdFwiOiByZXF1aXJlKFwiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9kZWZpbmUtcHJvcGVydHlcIiksIF9fZXNNb2R1bGU6IHRydWUgfTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9iYWJlbC1ydW50aW1lL2NvcmUtanMvb2JqZWN0L2RlZmluZS1wcm9wZXJ0eS5qc1xuICoqIG1vZHVsZSBpZCA9IDNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciAkID0gcmVxdWlyZSgnLi4vLi4vbW9kdWxlcy8kJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGRlZmluZVByb3BlcnR5KGl0LCBrZXksIGRlc2Mpe1xuICByZXR1cm4gJC5zZXREZXNjKGl0LCBrZXksIGRlc2MpO1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL2xpYnJhcnkvZm4vb2JqZWN0L2RlZmluZS1wcm9wZXJ0eS5qc1xuICoqIG1vZHVsZSBpZCA9IDRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciAkT2JqZWN0ID0gT2JqZWN0O1xubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNyZWF0ZTogICAgICRPYmplY3QuY3JlYXRlLFxuICBnZXRQcm90bzogICAkT2JqZWN0LmdldFByb3RvdHlwZU9mLFxuICBpc0VudW06ICAgICB7fS5wcm9wZXJ0eUlzRW51bWVyYWJsZSxcbiAgZ2V0RGVzYzogICAgJE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IsXG4gIHNldERlc2M6ICAgICRPYmplY3QuZGVmaW5lUHJvcGVydHksXG4gIHNldERlc2NzOiAgICRPYmplY3QuZGVmaW5lUHJvcGVydGllcyxcbiAgZ2V0S2V5czogICAgJE9iamVjdC5rZXlzLFxuICBnZXROYW1lczogICAkT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMsXG4gIGdldFN5bWJvbHM6ICRPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzLFxuICBlYWNoOiAgICAgICBbXS5mb3JFYWNoXG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuanNcbiAqKiBtb2R1bGUgaWQgPSA1XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvKlxuICogIyVMXG4gKiBXZWJjb20gc2VydmljZVxuICpcbiAqIE1vZHVsZSBuYW1lOiBjb20ub3JhbmdlLndlYnJ0Yzp3ZWJjb20tc2VydmljZVxuICogVmVyc2lvbjogICAgIDAuMC4xLVNOQVBTSE9UXG4gKiBDcmVhdGVkOiAgICAgMjAxNC0wNC0wMVxuICogJSVcbiAqIENvcHlyaWdodCAoQykgMjAxMyAtIDIwMTUgT3JhbmdlIExhYnNcbiAqICUlXG4gKiBUaGlzIHNvZnR3YXJlIGlzIGNvbmZpZGVudGlhbCBhbmQgcHJvcHJpZXRhcnkgaW5mb3JtYXRpb24gb2YgT3JhbmdlLlxuICogWW91IHNoYWxsIG5vdCBkaXNjbG9zZSBzdWNoIENvbmZpZGVudGlhbCBJbmZvcm1hdGlvbiBhbmQgc2hhbGwgdXNlIGl0IG9ubHkgaW5cbiAqIGFjY29yZGFuY2Ugd2l0aCB0aGUgdGVybXMgb2YgdGhlIGFncmVlbWVudCB5b3UgZW50ZXJlZCBpbnRvLlxuICogVW5hdXRob3JpemVkIGNvcHlpbmcgb2YgdGhpcyBmaWxlLCB2aWEgYW55IG1lZGl1bSBpcyBzdHJpY3RseSBwcm9oaWJpdGVkLlxuICpcbiAqIElmIHlvdSBhcmUgT3JhbmdlIGVtcGxveWVlIHlvdSBzaGFsbCB1c2UgdGhpcyBzb2Z0d2FyZSBpbiBhY2NvcmRhbmNlIHdpdGhcbiAqIHRoZSBPcmFuZ2UgU291cmNlIENoYXJ0ZXIgKGh0dHA6Ly9vcGVuc291cmNlLml0bi5mdGdyb3VwL2luZGV4LnBocC9PcmFuZ2VfU291cmNlKS5cbiAqICNMJVxuICovXG5cblxuLyogZ2xvYmFsIE1lZGlhU3RyZWFtLCB3ZWJraXRSVENQZWVyQ29ubmVjdGlvbiwgbW96UlRDUGVlckNvbm5lY3Rpb24sIG1velJUQ0ljZUNhbmRpZGF0ZSwgbW96UlRDU2Vzc2lvbkRlc2NyaXB0aW9uICovXG5cbi8qKlxuICogQGZpbGUgYWRhcHQuanMgLSBKUyBmaWxlIHRvIHVzZSBzbyBhcyB0byBnZXQgc29tZSBhZGFwdGVkIG1ldGhvZHNcbiAqIEBkZXNjcmlwdGlvbiBUaGlzIGZpbGUgcHJvdmlkZXMgbWV0aG9kcyB0byBoYW5kbGUgSUNFIHNlcnZlcnMsIHVzZXIgbWVkaWFzIG9yIFJUQyBQZWVyIENvbm5lY3Rpb24gZm9yIGV4YW1wbGUuIE1lZGlhIHN0cmVhbVxuICogbWV0aG9kcyBhcmUgYWxzbyBwcm92aWRlZCBzbyBhcyB0byBhdHRhY2gsIHJyZWF0dGFjaCBvciByZW1vdmUgZXhpc3Rpbmcgc3RyZWFtcy5cbiAqIEBhdXRob3IgV2ViY29tXG4gKiBAY29weXJpZ2h0IE9yYW5nZSBMYWJzIChDKSAyMDEzIC0gMjAxNFxuICogQGxpY2VuY2UgT3JhbmdlXG4gKlxuICogVmVyc2lvbiBkb2MgOiAxLjMuMFxuICovXG5cblxuLyogKioqKioqKioqICpcbiAqIFZhcmlhYmxlcyAqXG4gKiAqKioqKioqKiogKi9cblxuLyoqXG4gKiBAZGVzY3JpcHRpb24gVGhlIFJUQyBQZWVyIENvbm5lY3Rpb24gdG8gdXNlLiBUaGlzIG9iamVjdCBwcm92aWRlcyB0aGUgY2hhbm5lbHMgdG8gdXNlXG4gKiB0byBlc3RhYmxpc2ggdGhlIGNvbW11bmljYXRpb24gYW5kIHNlbmQgZGF0YSBiZXR3ZWVuIHBhcnRpY2lwYW50cy4gVGhpcyBvYmplY3RcbiAqIGlzIGF2YWlsYWJsZSBvbmx5IG9uIHVwIHRvIGRhdGUgd2ViIGJyb3dzZXJzIChDaHJvbWUgMzEsIEZpcmVmb3ggMzUsIE9wZXJhIDI3KS5cbiAqL1xud2luZG93LlJUQ1BlZXJDb25uZWN0aW9uID0gbnVsbDtcbi8qKlxuICogQGRlc2NyaXB0aW9uIFRoZSB1c2VyIG1lZGlhIHBpY2tlZCBmcm9tIHRoZSB3ZWIgYnJvd3NlciBjb250YWluaW5nIHRoZSB2aWRlbyBhbmQgYXVkaW8gc3RyZWFtcyBnb3R0ZW4gZnJvbSB0aGVcbiAqIHdlYmNhbXMgYW5kIG1pY3JvcGhvbmVzLiBUaGlzIG1lZGlhIHJldHJpZXZtZW50IGlzIGF2YWlsYWJsZSBvbmx5IGZvciBtb2Rlcm4gd2ViIGJyb3dzZXJzIHNpbmNlIEZpcmVmb3ggMTcsIENocm9tZSAyMSBvciBPcGVyYSAxOC5cbiAqL1xud2luZG93LmdldFVzZXJNZWRpYSA9IG51bGw7XG4vKlxuICogQGRlc2NyaXB0aW9uIEZ1bmN0aW9uIHRvIHVzZSB0byBhdHRhY2ggdGhlIG1lZGlhIHN0cmVhbSB3aGljaCB3aWxsIGJlIGludGVncmF0ZWQgdG8gYW4gSFRNTCBvYmplY3QgYXMgYSB2aWRlby5cbiAqL1xud2luZG93LmF0dGFjaE1lZGlhU3RyZWFtID0gbnVsbDtcbi8qXG4gKiBAZGVzY3JpcHRpb24gRnVuY3Rpb24gdG8gdXNlIHRvIHJlYXR0YWNoIHRoZSBtZWRpYSBzdHJlYW1cbiAqL1xud2luZG93LnJlYXR0YWNoTWVkaWFTdHJlYW0gPSBudWxsO1xuLyoqXG4gKiBAZGVzY3JpcHRpb24gVGhlIGRldGVjdGVkIGJyb3dzZXIgc3Vwb3J0aW5nIFdlYlJUQyAoRmlyZWZveCBvciBDaHJvbWUpXG4gKi9cbndpbmRvdy53ZWJydGNEZXRlY3RlZEJyb3dzZXIgPSBudWxsO1xuLyoqXG4gKiBAZGVzY3JpcHRpb24gVGhlIGRldGVjdGVkIHZlcnNpb24gb2YgdGhlIFdlYlJUQyBjYXBhYmxlIGRldGVjdGVkIGJyb3dlci4gVGhpcyB2ZXJzaW9uIHdpbGwgYmUgdXNlZCB0byBtYW5hZ2UgbmV0d29ya3MgYXNwZWN0cyBsaWtlIFRVUk4uXG4gKi9cbndpbmRvdy53ZWJydGNEZXRlY3RlZFZlcnNpb24gPSBudWxsO1xuXG4vKipcbiAqIEZpeCBpY2Ugc2VydmVyIGNvbmZpZyBvYmplY3RcbiAqIEBwYXJhbSBpY2VTZXJ2ZXJcbiAqL1xuZnVuY3Rpb24gZml4SWNlU2VydmVyKGljZVNlcnZlcikge1xuXHRpZiAoaWNlU2VydmVyLmhhc093blByb3BlcnR5KCd1cmxzJykpIHtcblx0XHRpY2VTZXJ2ZXIudXJsID0gaWNlU2VydmVyLnVybHM7XG5cdFx0ZGVsZXRlIGljZVNlcnZlci51cmxzO1xuXHR9XG5cdGlmIChpY2VTZXJ2ZXIuaGFzT3duUHJvcGVydHkoJ3VybCcpICYmXG5cdFx0aWNlU2VydmVyLnVybC50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgoJ3R1cm5zJykgJiZcblx0XHRuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhKSB7XG5cdFx0Y29uc29sZS53YXJuKCcoUmVhY2hTREs6Om1heWJlRml4Q29uZmlndXJhdGlvbikgJyArXG5cdFx0J3R1cm5zIGRldGVjdGVkIG9uIGZpcmVmb3ggLT4gaWdub3JlIHRoaXMgZW50cnknKTtcblx0fVxufVxuXG4vKipcbiAqIEZpeCBwZWVyIGNvbm5lY3Rpb24gY29uZmlndXJhdGlvbiBpc3N1ZXMgaWYgbmVlZGVkLCBzcGVjaWFsbHkgYWJvdXQgSUNFIHNlcnZlcnNcbiAqIEBwYXJhbSBwY0NvbmZpZyAtIFRoZSBwZWVyIGNvbm5lY3Rpb24gY29uZmlndXJhdGlvbiB0byBmaXggaWYgbm90IG51bGxcbiAqL1xuZnVuY3Rpb24gbWF5YmVGaXhDb25maWd1cmF0aW9uKHBjQ29uZmlnKSB7XG5cdGlmIChwY0NvbmZpZyA9PT0gbnVsbCkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGlmIChwY0NvbmZpZy5pY2VTZXJ2ZXJzICYmIHBjQ29uZmlnLmljZVNlcnZlcnMubGVuZ3RoID4gMCkge1xuXHRcdGNvbnN0IG1UZW1wc1NlcnZlcnMgPSBbXTtcblx0XHRmb3IgKGxldCBpID0gcGNDb25maWcuaWNlU2VydmVycy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHRcdFx0Y29uc3QgaWNlU2VydmVyID0gcGNDb25maWcuaWNlU2VydmVyc1tpXTtcblx0XHRcdGZpeEljZVNlcnZlcihpY2VTZXJ2ZXIpO1xuXHRcdFx0bVRlbXBzU2VydmVycy5wdXNoKGljZVNlcnZlcik7XG5cdFx0fVxuXHRcdHBjQ29uZmlnLmljZVNlcnZlcnMgPSBtVGVtcHNTZXJ2ZXJzO1xuXHR9XG59XG5cbi8qKlxuICogUmV0dXJucyB0dXJuIGNvbmZpZyBvYmplY3RcbiAqIEBwYXJhbSB7U3RyaW5nfSB1cmxcbiAqIEBwYXJhbSB7U3RyaW5nfSB1c2VybmFtZVxuICogQHBhcmFtIHtTdHJpbmd9IHBhc3N3b3JkXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGxlZ2FjeVxuICogQHJldHVybnMge09iamVjdH1cbiAqL1xuZnVuY3Rpb24gY3JlYXRlVHVyblNlcnZlckNvbmZpZyh1cmwsIHVzZXJuYW1lLCBwYXNzd29yZCwgbGVnYWN5PSBmYWxzZSkge1xuXHRsZXQgaWNlU2VydmVyO1xuXG5cdGlmIChsZWdhY3kpIHtcblx0XHQvLyBDcmVhdGUgaWNlU2VydmVyIHdpdGggdHVybiB1cmwuXG5cdFx0Ly8gSWdub3JlIHRoZSB0cmFuc3BvcnQgcGFyYW1ldGVyIGZyb20gVFVSTiB1cmwgZm9yIEZGIHZlcnNpb24gPD0yNy5cblx0XHRjb25zdCB0dXJuX3VybF9wYXJ0cyA9IHVybC5zcGxpdCgnPycpO1xuXHRcdC8vIFJldHVybiBudWxsIGZvciBjcmVhdGVJY2VTZXJ2ZXIgaWYgdHJhbnNwb3J0PXRjcC5cblx0XHRpZiAodHVybl91cmxfcGFydHMubGVuZ3RoID09PSAxIHx8XG5cdFx0XHR0dXJuX3VybF9wYXJ0c1sxXS5pbmRleE9mKCd0cmFuc3BvcnQ9dWRwJykgPT09IDApIHtcblx0XHRcdGljZVNlcnZlciA9IHtcblx0XHRcdFx0dXJsOiB0dXJuX3VybF9wYXJ0c1swXSxcblx0XHRcdFx0J2NyZWRlbnRpYWwnOiBwYXNzd29yZCxcblx0XHRcdFx0dXNlcm5hbWVcblx0XHRcdH07XG5cdFx0fVxuXHR9IGVsc2Uge1xuXHRcdC8vIEZGIDI3IGFuZCBhYm92ZSBzdXBwb3J0cyB0cmFuc3BvcnQgcGFyYW1ldGVycyBpbiBUVVJOIHVybCxcblx0XHQvLyBTbyBwYXNzaW5nIGluIHRoZSBmdWxsIHVybCB0byBjcmVhdGUgaWNlU2VydmVyLlxuXHRcdGljZVNlcnZlciA9IHtcblx0XHRcdHVybCxcblx0XHRcdGNyZWRlbnRpYWw6IHBhc3N3b3JkLFxuXHRcdFx0dXNlcm5hbWVcblx0XHR9O1xuXHR9XG5cblx0cmV0dXJuIGljZVNlcnZlcjtcbn1cblxuXG4vKiAqKioqKioqKiogKlxuICogU2NyaXB0aW5nICpcbiAqICoqKioqKioqKiAqL1xuXG4vKlxuICogSWYgdGhlIHdlYiBicm93c2VyIGluIHVzZSBpcyBGaXJlZm94XG4gKi9cbmlmIChuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhKSB7XG5cdHdpbmRvdy53ZWJydGNEZXRlY3RlZEJyb3dzZXIgPSAnZmlyZWZveCc7XG5cblx0d2luZG93LndlYnJ0Y0RldGVjdGVkVmVyc2lvbiA9XG5cdFx0cGFyc2VJbnQobmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvRmlyZWZveFxcLyhbMC05XSspXFwuLylbMV0sIDEwKTtcblxuXHQvKipcblx0ICogVGhlIFJUQ1BlZXJDb25uZWN0aW9uIG9iamV0IGJhc2VkIG9uIG1vemtpdC5cblx0ICogSWYgbmVlZGVkLCB0aGUgY29uZmlndXJhdGlvbiBvZiB0aGUgcGVlciBjb25uZWN0aW9uIHdpbGwgYmUgZml4ZWQuXG5cdCAqIEBwYXJhbSBwY0NvbmZpZyAtIFRoZSBwZWVyIGNvbm5lY3Rpb24gY29uZmlnXG5cdCAqIEBwYXJhbSBwY0NvbnN0cmFpbnRzIC0gVGhlIHBlZXIgY29ubmVjdGlvbiBjb25zdHJhaW50c1xuXHQgKi9cblx0d2luZG93LlJUQ1BlZXJDb25uZWN0aW9uID0gZnVuY3Rpb24gKHBjQ29uZmlnLCBwY0NvbnN0cmFpbnRzKSB7XG5cdFx0Ly8gLnVybHMgaXMgbm90IHN1cHBvcnRlZCBpbiBGRiB5ZXQuXG5cdFx0bWF5YmVGaXhDb25maWd1cmF0aW9uKHBjQ29uZmlnKTtcblx0XHRyZXR1cm4gbmV3IG1velJUQ1BlZXJDb25uZWN0aW9uKHBjQ29uZmlnLCBwY0NvbnN0cmFpbnRzKTtcblx0fTtcblxuXHQvLyBUaGUgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uIG9iamVjdC5cblx0d2luZG93LlJUQ1Nlc3Npb25EZXNjcmlwdGlvbiA9IG1velJUQ1Nlc3Npb25EZXNjcmlwdGlvbjtcblxuXHQvLyBUaGUgUlRDSWNlQ2FuZGlkYXRlIG9iamVjdC5cblx0d2luZG93LlJUQ0ljZUNhbmRpZGF0ZSA9IG1velJUQ0ljZUNhbmRpZGF0ZTtcblxuXHQvLyBHZXQgVXNlck1lZGlhIChvbmx5IGRpZmZlcmVuY2UgaXMgdGhlIHByZWZpeCkuXG5cdHdpbmRvdy5nZXRVc2VyTWVkaWEgPSBuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhLmJpbmQobmF2aWdhdG9yKTtcblx0bmF2aWdhdG9yLmdldFVzZXJNZWRpYSA9IGdldFVzZXJNZWRpYTtcblxuXG5cblx0LyoqXG5cdCAqIENyZWF0ZXMgdGhlIElDRSBzZXJ2ZXIgZm9yIHRoZSBVUkwgZm9yIEZpcmVmb3guXG5cdCAqIFRoZSBTVFVOIGFuZCBUVVJOIHNlcnZlcnMgd2lsbCBiZSBjb25zaWRlcmVkLiBJbiBjYXNlIG9mIGEgVFVSTiBzZXJ2ZXIgaXMgaW4gdXNlLCBjcmVkZW50aWFscyBhbmQgdXNlcm5hbWVzIHdpbGwgYmUgZ290LlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gdXJsIC0gVGhlIHVybCB0byB1c2UgdG8gZ2V0IHRoZSBJQ0Ugc2VydmVyXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSB1c2VybmFtZSAtIFRoZSB1c2VybmFtZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30gcGFzc3dvcmQgLSBUaGUgcGFzc3dvcmRcblx0ICovXG5cdHdpbmRvdy5jcmVhdGVJY2VTZXJ2ZXIgPSAodXJsLCB1c2VybmFtZSwgcGFzc3dvcmQpID0+IHtcblx0XHRsZXQgaWNlU2VydmVyID0gbnVsbDtcblx0XHRjb25zdCB1cmxfcGFydHMgPSB1cmwuc3BsaXQoJzonKTtcblx0XHRpZiAodXJsX3BhcnRzWzBdLmluZGV4T2YoJ3N0dW4nKSA9PT0gMCkge1xuXHRcdFx0Ly8gQ3JlYXRlIGljZVNlcnZlciB3aXRoIHN0dW4gdXJsLlxuXHRcdFx0aWNlU2VydmVyID0ge1xuXHRcdFx0XHR1cmxcblx0XHRcdH07XG5cdFx0fSBlbHNlIGlmICh1cmxfcGFydHNbMF0uaW5kZXhPZigndHVybicpID09PSAwKSB7XG5cdFx0XHRpY2VTZXJ2ZXIgPSBjcmVhdGVUdXJuU2VydmVyQ29uZmlnKFx0dXJsLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dXNlcm5hbWUsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRwYXNzd29yZCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHdpbmRvdy53ZWJydGNEZXRlY3RlZFZlcnNpb24gPCAyNyk7XG5cdFx0fVxuXHRcdHJldHVybiBpY2VTZXJ2ZXI7XG5cdH07XG5cblx0LyoqXG5cdCAqIENyZWF0ZXMgdGhlIElDRSBzZXJ2ZXJzIGZyb20gc29tZSBVUkxzLiBUaGUgU1RVTiBhbmQgVFVSTiBzZXZlcnMgY29uc3RyYWludHMgd2lsbCBiZSBoYW5kbGVkLlxuXHQgKiBAcGFyYW0ge2FycmF5fSB1cmxzIC0gVGhlIHVybHMgdG8gdXNlIHRvIGdldCB0aGUgSUNFIHNlcnZlclxuXHQgKiBAcGFyYW0ge3N0cmluZ30gdXNlcm5hbWUgLSBUaGUgdXNlcm5hbWVcblx0ICogQHBhcmFtIHtzdHJpbmd9IHBhc3N3b3JkIC0gVGhlIHBhc3N3b3JkXG5cdCAqL1xuXHR3aW5kb3cuY3JlYXRlSWNlU2VydmVycyA9IGZ1bmN0aW9uICh1cmxzLCB1c2VybmFtZSwgcGFzc3dvcmQpIHtcblx0XHRjb25zdCBpY2VTZXJ2ZXJzID0gW107XG5cdFx0Ly8gVXNlIC51cmwgZm9yIEZpcmVGb3guXG5cdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCB1cmxzLmxlbmd0aDsgaSsrKSB7XG5cdFx0XHRjb25zdCBpY2VTZXJ2ZXIgPSB3aW5kb3cuY3JlYXRlSWNlU2VydmVyKHVybHNbaV0sXG5cdFx0XHRcdHVzZXJuYW1lLFxuXHRcdFx0XHRwYXNzd29yZCk7XG5cdFx0XHRpZiAoaWNlU2VydmVyICE9PSBudWxsKSB7XG5cdFx0XHRcdGljZVNlcnZlcnMucHVzaChpY2VTZXJ2ZXIpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gaWNlU2VydmVycztcblx0fTtcblxuXHQvKipcblx0ICogRGV0YWNoIHRoZSBtZWRpYSBzdHJlYW0gZnJvbSB0aGUgZWxlbWVudC5cblx0ICogVGhlIGVsZW1lbnQgd2lsbCBoYXZlIGl0cyBzcmMgY29udGVudCBjaGFuZ2VkIHRvIG51bGwgYW5kIHdpbGwgYmUgcGF1c2VkLlxuXHQgKiBAcGFyYW0ge3ZpZGVvIHRhZ30gZWxlbWVudCAtIFRoZSB2aWRlbyB0YWcgd2hlcmUgdGhlIHN0cmVhbSBpcyBkaXNwbGF5ZWRcblx0ICovXG5cdHdpbmRvdy5kZXRhY2hNZWRpYVN0cmVhbSA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG5cdFx0aWYgKGVsZW1lbnQpIHtcblx0XHRcdGVsZW1lbnQubW96U3JjT2JqZWN0ID0gbnVsbDtcblx0XHRcdGVsZW1lbnQucGF1c2UoKTtcblx0XHR9XG5cdH07XG5cblx0LyoqXG5cdCAqIEF0dGFjaCBhIG1lZGlhIHN0cmVhbSB0byBhbiBlbGVtZW50LlxuXHQgKiBUaGUgc3JjIGF0dHJpYnV0ZSBvZiB0aGUgZWxlbWVudCB3aWxsIGJlIGRlZmluZWQgd2l0aCB0aGUgc3RyZWFtIGFuZCB3aWxsIGJlIHBsYXllZC5cblx0ICogQHBhcmFtIHt2aWRlbyB0YWd9IGVsZW1lbnQgLSBUaGUgdmlkZW8gdGFnIHdoZXJlIHRoZSBzdHJlYW0gaXMgZGlzcGxheWVkXG5cdCAqIEBwYXJhbSBzdHJlYW0gLSBUaGUgc3RyZWFtIHRvIGF0dGFjaCB0byB0aGUgZWxlbWVudFxuXHQgKi9cblx0d2luZG93LmF0dGFjaE1lZGlhU3RyZWFtID0gZnVuY3Rpb24gKGVsZW1lbnQsIHN0cmVhbSkge1xuXHRcdHRyeSB7XG5cdFx0XHRpZiAoZWxlbWVudCAmJiBzdHJlYW0pIHtcblx0XHRcdFx0ZWxlbWVudC5tb3pTcmNPYmplY3QgPSBzdHJlYW07XG5cdFx0XHRcdGlmIChlbGVtZW50LnBsYXkgJiYgdHlwZW9mIGVsZW1lbnQucGxheSA9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0ZWxlbWVudC5wbGF5KCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y29uc29sZS53YXJuKCcoUmVhY2hTREs6OmF0dGFjaE1lZGlhU3RyZWFtKWVsZW1lbnQucGxheSBub3QgYXZhaWxhYmxlJyk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ1JlYWNoU0RLOjphdHRhY2hNZWRpYVN0cmVhbS0+cGFyYW1ldGVycyBub3QgdmFsaWQnKTtcblx0XHRcdH1cblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKGAoUmVhY2hTREs6OmF0dGFjaE1lZGlhU3RyZWFtKUV4Y2VwdGlvbj0ke2V9YCk7XG5cdFx0fVxuXG5cblx0fTtcblxuXHQvKipcblx0ICogQXR0YWNoIGFnYWluIGEgbWVkaWEgc3RyZWFtIHRvIGFuIGVsZW1lbnQuXG5cdCAqIFRoZSBcImZyb21cIiBlbGVtZW50IHdpbGwgaGF2ZSBpdHMgc3JjIHZhbHVlIGNvcGllZCB0byB0aGUgXCJ0b1wiIG9iamVjdCBiZWZvcmUgcGxheWluZyBpdC5cblx0ICogQHBhcmFtIHt2aWRlbyB0YWd9IHRvIC0gVGhlIHZpZGVvIHRhZyB3aGVyZSB0aGUgc3RyZWFtIHNob3VsZCBiZSBwdXRcblx0ICogQHBhcmFtIHt2aWRlbyB0YWd9IGZyb20gLSBUaGUgdmlkZW8gdGFnIHdoZXJlIHRoZSBzdHJlYW0gc2hvdWxkIGJlIHRha2VuXG5cdCAqL1xuXHR3aW5kb3cucmVhdHRhY2hNZWRpYVN0cmVhbSA9IGZ1bmN0aW9uICh0bywgZnJvbSkge1xuXHRcdGlmICh0byAmJiBmcm9tKSB7XG5cdFx0XHR0by5tb3pTcmNPYmplY3QgPSBmcm9tLm1velNyY09iamVjdDtcblx0XHRcdHRvLnBsYXkoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc29sZS5lcnJvcignUmVhY2hTREs6OnJlYXR0YWNoTWVkaWFTdHJlYW0tPnBhcmFtZXRlcnMgbm90IHZhbGlkJyk7XG5cdFx0fVxuXHR9O1xuXG5cdC8vIEZha2UgZ2V0e1ZpZGVvLEF1ZGlvfVRyYWNrc1xuXHRpZiAoIU1lZGlhU3RyZWFtLnByb3RvdHlwZS5nZXRWaWRlb1RyYWNrcykge1xuXHRcdE1lZGlhU3RyZWFtLnByb3RvdHlwZS5nZXRWaWRlb1RyYWNrcyA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHJldHVybiBbXTtcblx0XHR9O1xuXHR9XG5cblx0aWYgKCFNZWRpYVN0cmVhbS5wcm90b3R5cGUuZ2V0QXVkaW9UcmFja3MpIHtcblx0XHRNZWRpYVN0cmVhbS5wcm90b3R5cGUuZ2V0QXVkaW9UcmFja3MgPSBmdW5jdGlvbiAoKSB7XG5cdFx0XHRyZXR1cm4gW107XG5cdFx0fTtcblx0fVxuXG5cdC8qXG5cdCAqIElmIHRoZSB3ZWIgYnJvd3NlciBpbiB1c2UgaXMgQ2hyb21lXG5cdCAqL1xufSBlbHNlIGlmIChuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhKSB7XG5cdHdpbmRvdy53ZWJydGNEZXRlY3RlZEJyb3dzZXIgPSAnY2hyb21lJztcblx0d2luZG93LndlYnJ0Y0RldGVjdGVkVmVyc2lvbiA9XG5cdFx0cGFyc2VJbnQobmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvQ2hyb20oZXxpdW0pXFwvKFswLTldKylcXC4vKVsyXSwgMTApO1xuXG5cdC8qKlxuXHQgKiBDcmVhdGVzIHRoZSBJQ0Ugc2VydmVyIGZyb20gdGhlIFVSTCBhbmQgaGFuZGxlcyBTVFVOIC8gVFVSTiBzZXJ2ZXJzIGNvbnN0cmFpbnRzIGJ5IHJldHJpZXZpbmcgY3JlZGVudGlhbHMgYW5kIHVzZXJuYW1lcyBpZiBuZWVkZWQuXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSB1cmwgLSBUaGUgdXJsIHRvIHVzZSB0byBnZXQgdGhlIElDRSBzZXJ2ZXJcblx0ICogQHBhcmFtIHtzdHJpbmd9IHVzZXJuYW1lIC0gVGhlIHVzZXJuYW1lXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBwYXNzd29yZCAtIFRoZSBwYXNzd29yZFxuXHQgKi9cblx0d2luZG93LmNyZWF0ZUljZVNlcnZlciA9IGZ1bmN0aW9uICh1cmwsIHVzZXJuYW1lLCBwYXNzd29yZCkge1xuXHRcdGxldCBpY2VTZXJ2ZXIgPSBudWxsO1xuXHRcdGNvbnN0IHVybF9wYXJ0cyA9IHVybC5zcGxpdCgnOicpO1xuXHRcdGlmICh1cmxfcGFydHNbMF0uaW5kZXhPZignc3R1bicpID09PSAwKSB7XG5cdFx0XHQvLyBDcmVhdGUgaWNlU2VydmVyIHdpdGggc3R1biB1cmwuXG5cdFx0XHRpY2VTZXJ2ZXIgPSB7XG5cdFx0XHRcdHVybFxuXHRcdFx0fTtcblx0XHR9IGVsc2UgaWYgKHVybF9wYXJ0c1swXS5pbmRleE9mKCd0dXJuJykgPT09IDApIHtcblx0XHRcdC8vIENocm9tZSBNMjggJiBhYm92ZSB1c2VzIGJlbG93IFRVUk4gZm9ybWF0LlxuXHRcdFx0aWNlU2VydmVyID0gY3JlYXRlVHVyblNlcnZlckNvbmZpZyh1cmwsIHBhc3N3b3JkLCB1c2VybmFtZSk7XG5cdFx0fVxuXHRcdHJldHVybiBpY2VTZXJ2ZXI7XG5cdH07XG5cblx0LyoqXG5cdCAqIENyZWF0ZXMgdGhlIElDRSBzZXJ2ZXJzIGZyb20gdGhlIFVSTCBmb3IgQ2hyb21lIE0zNCBhbmQgYWJvdmVcblx0ICogQHBhcmFtIHthcnJheX0gdXJscyAtIFRoZSB1cmxzIHRvIHVzZSB0byBnZXQgdGhlIElDRSBzZXJ2ZXJcblx0ICogQHBhcmFtIHtzdHJpbmd9IHVzZXJuYW1lIC0gVGhlIHVzZXJuYW1lXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBwYXNzd29yZCAtIFRoZSBwYXNzd29yZFxuXHQgKi9cblx0d2luZG93LmNyZWF0ZUljZVNlcnZlcnMgPSBmdW5jdGlvbiAodXJscywgdXNlcm5hbWUsIHBhc3N3b3JkKSB7XG5cdFx0bGV0IGljZVNlcnZlcnMgPSBbXTtcblx0XHRpZiAod2luZG93LndlYnJ0Y0RldGVjdGVkVmVyc2lvbiA+PSAzNCkge1xuXHRcdFx0Ly8gLnVybHMgaXMgc3VwcG9ydGVkIHNpbmNlIENocm9tZSBNMzQuXG5cdFx0XHRpY2VTZXJ2ZXJzID0ge1xuXHRcdFx0XHR1cmxzLFxuXHRcdFx0XHRjcmVkZW50aWFsOiBwYXNzd29yZCxcblx0XHRcdFx0dXNlcm5hbWVcblx0XHRcdH07XG5cdFx0fSBlbHNlIHtcblx0XHRcdGZvciAobGV0IGkgPSAwOyBpIDwgdXJscy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRjb25zdCBpY2VTZXJ2ZXIgPSB3aW5kb3cuY3JlYXRlSWNlU2VydmVyKHVybHNbaV0sXG5cdFx0XHRcdFx0dXNlcm5hbWUsXG5cdFx0XHRcdFx0cGFzc3dvcmQpO1xuXHRcdFx0XHRpZiAoaWNlU2VydmVyICE9PSBudWxsKSB7XG5cdFx0XHRcdFx0aWNlU2VydmVycy5wdXNoKGljZVNlcnZlcik7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGljZVNlcnZlcnM7XG5cdH07XG5cblx0LyoqXG5cdCAqIFRoZSBSVEMgUGVlciBDb25uZWN0aW9uIG9iamVjdC4gSWYgbmVlZGVkLCBpdHMgcGVlciBjb25uZWN0aW9uIGNvbmZpZ3VyYXRpb24gd2lsbCBiZSBmaXhlZFxuXHQgKiBAcGFyYW0gcGNDb25maWcgLSBUaGUgcGVlciBjb25uZWN0aW9uIGNvbmZpZ1xuXHQgKiBAcGFyYW0gcGNDb25zdHJhaW50cyAtIFRoZSBwZWVyIGNvbm5lY3Rpb24gY29uc3RyYWludHNcblx0ICovXG5cdHdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbiA9IGZ1bmN0aW9uIChwY0NvbmZpZywgcGNDb25zdHJhaW50cykge1xuXHRcdC8vIC51cmxzIGlzIHN1cHBvcnRlZCBzaW5jZSBDaHJvbWUgTTM0LlxuXHRcdGlmICh3aW5kb3cud2VicnRjRGV0ZWN0ZWRWZXJzaW9uIDwgMzQpIHtcblx0XHRcdG1heWJlRml4Q29uZmlndXJhdGlvbihwY0NvbmZpZyk7XG5cdFx0fVxuXHRcdHJldHVybiBuZXcgd2Via2l0UlRDUGVlckNvbm5lY3Rpb24ocGNDb25maWcsIHBjQ29uc3RyYWludHMpO1xuXHR9O1xuXG5cdC8vIEdldCBVc2VyTWVkaWEgKG9ubHkgZGlmZmVyZW5jZSBpcyB0aGUgcHJlZml4KS5cblx0Ly8gQ29kZSBmcm9tIEFkYW0gQmFydGguXG5cdHdpbmRvdy5nZXRVc2VyTWVkaWEgPSBuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhLmJpbmQobmF2aWdhdG9yKTtcblx0bmF2aWdhdG9yLmdldFVzZXJNZWRpYSA9IGdldFVzZXJNZWRpYTtcblxuLy8gIC8vIEF0dGFjaCBhIG1lZGlhIHN0cmVhbSB0byBhbiBlbGVtZW50LlxuLy8gIGF0dGFjaE1lZGlhU3RyZWFtID0gZnVuY3Rpb24oZWxlbWVudCwgc3RyZWFtKSB7XG4vLyAgICBpZiAodHlwZW9mIGVsZW1lbnQuc3JjT2JqZWN0ICE9PSAndW5kZWZpbmVkJykge1xuLy8gICAgICBlbGVtZW50LnNyY09iamVjdCA9IHN0cmVhbTtcbi8vICAgIH0gZWxzZSBpZiAodHlwZW9mIGVsZW1lbnQubW96U3JjT2JqZWN0ICE9PSAndW5kZWZpbmVkJykge1xuLy8gICAgICBlbGVtZW50Lm1velNyY09iamVjdCA9IHN0cmVhbTtcbi8vICAgIH0gZWxzZSBpZiAodHlwZW9mIGVsZW1lbnQuc3JjICE9PSAndW5kZWZpbmVkJykge1xuLy8gICAgICBlbGVtZW50LnNyYyA9IFVSTC5jcmVhdGVPYmplY3RVUkwoc3RyZWFtKTtcbi8vICAgIH0gZWxzZSB7XG4vLyAgICAgIGNvbnNvbGUubG9nKCdFcnJvciBhdHRhY2hpbmcgc3RyZWFtIHRvIGVsZW1lbnQuJyk7XG4vLyAgICB9XG4vLyAgfTtcblxuXHQvKipcblx0ICogQXR0YWNoIGEgbWVkaWEgc3RyZWFtIHRvIGFuIGVsZW1lbnQuXG5cdCAqIFRoZSBzcmMgYXR0cmlidXRlIG9mIHRoZSBlbGVtZW50IHdpbGwgYmUgZGVmaW5lZCB3aXRoIHRoZSBzdHJlYW0gYW5kIHdpbGwgYmUgcGxheWVkLlxuXHQgKiBAcGFyYW0ge3ZpZGVvIHRhZ30gZWxlbWVudCAtIFRoZSB2aWRlbyB0YWcgd2hlcmUgdGhlIHN0cmVhbSBpcyBkaXNwbGF5ZWRcblx0ICogQHBhcmFtIHN0cmVhbSAtIFRoZSBzdHJlYW0gdG8gYXR0YWNoIHRvIHRoZSBlbGVtZW50XG5cdCAqL1xuXHR3aW5kb3cuYXR0YWNoTWVkaWFTdHJlYW0gPSBmdW5jdGlvbiAoZWxlbWVudCwgc3RyZWFtKSB7XG5cdFx0dHJ5IHtcblx0XHRcdGlmIChlbGVtZW50ICYmIHN0cmVhbSkge1xuXHRcdFx0XHQvLyBlbGVtZW50LnNyYyA9IHdlYmtpdFVSTC5jcmVhdGVPYmplY3RVUkwoc3RyZWFtKTtcblx0XHRcdFx0ZWxlbWVudC5zcmMgPSBVUkwuY3JlYXRlT2JqZWN0VVJMKHN0cmVhbSk7XG5cdFx0XHRcdGVsZW1lbnQuYXV0b3BsYXkgPSB0cnVlO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29uc29sZS5lcnJvcignUmVhY2hTREs6OmF0dGFjaE1lZGlhU3RyZWFtIC0+cGFyYW1ldGVycyBub3QgdmFsaWQnKTtcblx0XHRcdH1cblx0XHR9IGNhdGNoIChlKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKGAoUmVhY2hTREs6OmF0dGFjaE1lZGlhU3RyZWFtKUV4Y2VwdGlvbj0ke2V9YCk7XG5cdFx0fVxuXHR9O1xuXG5cdC8qKlxuXHQgKiBEZXRhY2ggdGhlIG1lZGlhIHN0cmVhbSBmcm9tIHRoZSBlbGVtZW50IGJ5IGFzc2luZ2VkIG51bGwgdmFsdWUgdG8gaXRzIHNyYyBhdHRyaWJ1dGUuXG5cdCAqIEBwYXJhbSB7dmlkZW8gdGFnfSBlbGVtZW50IC0gVGhlIHZpZGVvIHRhZyB3aGVyZSB0aGUgc3RyZWFtIGlzIGRpc3BsYXllZFxuXHQgKi9cblx0d2luZG93LmRldGFjaE1lZGlhU3RyZWFtID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcblx0XHRpZiAoZWxlbWVudCkge1xuXHRcdFx0aWYgKHR5cGVvZiBlbGVtZW50LnNyY09iamVjdCAhPT0gJ3VuZGVmaW5lZCcpIHtcblx0XHRcdFx0ZWxlbWVudC5zcmNPYmplY3QgPSAnJztcblx0XHRcdH0gZWxzZSBpZiAodHlwZW9mIGVsZW1lbnQubW96U3JjT2JqZWN0ICE9PSAndW5kZWZpbmVkJykge1xuXHRcdFx0XHRlbGVtZW50Lm1velNyY09iamVjdCA9ICcnO1xuXHRcdFx0fSBlbHNlIGlmICh0eXBlb2YgZWxlbWVudC5zcmMgIT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRcdGVsZW1lbnQuc3JjID0gJyc7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRjb25zb2xlLmxvZygnRXJyb3IgYXR0YWNoaW5nIHN0cmVhbSB0byBlbGVtZW50LicpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHR9O1xuXG5cdC8qKlxuXHQgKiBBdHRhY2ggYWdhaW4gYSBtZWRpYSBzdHJlYW0gdG8gYW4gZWxlbWVudC5cblx0ICogVGhlIFwiZnJvbVwiIGVsZW1lbnQgd2lsbCBoYXZlIGl0cyBzcmMgdmFsdWUgY29waWVkIHRvIHRoZSBcInRvXCIgb2JqZWN0IGJlZm9yZSBwbGF5aW5nIGl0LlxuXHQgKiBAcGFyYW0ge3ZpZGVvIHRhZ30gdG8gLSBUaGUgdmlkZW8gdGFnIHdoZXJlIHRoZSBzdHJlYW0gc2hvdWxkIGJlIHB1dFxuXHQgKiBAcGFyYW0ge3ZpZGVvIHRhZ30gZnJvbSAtIFRoZSB2aWRlbyB0YWcgd2hlcmUgdGhlIHN0cmVhbSBzaG91bGQgYmUgdGFrZW5cblx0ICovXG5cdHdpbmRvdy5yZWF0dGFjaE1lZGlhU3RyZWFtID0gZnVuY3Rpb24gKHRvLCBmcm9tKSB7XG5cdFx0aWYgKHRvICYmIGZyb20pIHtcblx0XHRcdHRvLnNyYyA9IGZyb20uc3JjO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKCdSZWFjaFNESzo6cmVhdHRhY2hNZWRpYVN0cmVhbSBtZWRpYSBzdHJlYW0tPnBhcmFtZXRlcnMgbm90IHZhbGlkJyk7XG5cdFx0fVxuXHR9O1xuXG59IGVsc2Uge1xuXHR0aHJvdyBuZXcgRXJyb3IoJ0Jyb3dzZXIgZG9lcyBub3QgYXBwZWFyIHRvIGJlIFdlYlJUQy1jYXBhYmxlJyk7XG59XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9hZGFwdGVyLmpzXG4gKiovIiwiZXhwb3J0IGRlZmF1bHQge1xuXG5cdC8qKlxuXHQgKiBBdWRpbyBjb21tdW5pY2F0aW9uIHNlcnZpY2Vcblx0ICogQGNvbnN0YW50XG5cdCAqIEB0eXBlIHtzdHJpbmd9XG5cdCAqL1xuXHRBQ1RJT05fVFlQRV9BVURJTzogJ2F1ZGlvJyxcblx0LyoqXG5cdCAqIFZpZGVvIGNvbW11bmljYXRpb24gc2VydmljZVxuXHQgKiBAY29uc3RhbnRcblx0ICogQHR5cGUge3N0cmluZ31cblx0ICovXG5cdEFDVElPTl9UWVBFX1ZJREVPOiAndmlkZW8nLFxuXHQvKipcblx0ICogQ2hhdCBjb21tdW5pY2F0aW9uIHNlcnZpY2Vcblx0ICogQGNvbnN0YW50XG5cdCAqIEB0eXBlIHtzdHJpbmd9XG5cdCAqL1xuXHRBQ1RJT05fVFlQRV9DSEFUOiAnY2hhdCcsXG5cdC8qKlxuXHQgKiBBdWRpbyBhbmQgdmlkZW8gY29tbXVuaWNhdGlvbiBzZXJ2aWNlXG5cdCAqIEBjb25zdGFudFxuXHQgKiBAdHlwZSB7c3RyaW5nfVxuXHQgKi9cblx0QUNUSU9OX1RZUEVfQVVESU9fVklERU86ICdhdWRpby12aWRlbycsXG5cdC8qKlxuXHQgKiBTY3JlZW4tc2hhcmluZyBzZXJ2aWNlXG5cdCAqIEBjb25zdGFudFxuXHQgKiBAdHlwZSB7c3RyaW5nfVxuXHQgKi9cblx0QUNUSU9OX1RZUEVfU0NSRUVOX1NIQVJJTkc6ICdzY3JlZW4tc2hhcmluZycsXG5cdC8qKlxuXHQgKiBDYWxsIGNvbW11bmljYXRpb24gc2VydmljZVxuXHQgKiBAY29uc3RhbnRcblx0ICogQHR5cGUge3N0cmluZ31cblx0ICovXG5cdEFDVElPTl9UWVBFX0NBTEw6ICdjYWxsJ1xufTtcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9hY3Rpb25zLmpzXG4gKiovIiwiLyoqXG4gKiBAZmlsZSBkYXRhcmVmcy5qcyAtIEpTIGZpbGUgbW9kZWxpemluZyBhIGRhdGFyZWYsIGkuZS4gYSBwb2ludGVyIHRvIHRoZSBXZWJjb20geHdpdGggZGVkaWNhdGVkIG5vZGVzIGZvciByb29tcywgcmVhY2ggc2VydmljZSBhbmQgV2ViUlRDIGNvbW11bmljYXRpb25zLlxuICogQGF1dGhvciBXZWJjb21cbiAqL1xuXG4vKmVzbGludCBjb21wbGV4aXR5OjEsIG1heC1zdGF0ZW1lbnRzOiAxLCBtYXgtbGVuOiAxKi9cblxuLyoqXG4gKiBSZXByZXNlbnRzIGEgZGF0YXJlZiB3aXRoIHNldmVyYWwgbm9kZXMgaW4gaXQgd2hpY2ggYXJlIHBvaW50aW5nIHRvIHNvbWUgbG9jYXRpb25zIGluIHRoZSBkYXRhYmFzZS5cbiAqIFRoZSBkYXRhcmVmcyBjYW4gYmUgY29uc2lkZXJlZCBhcyBhIFdlYmNvbSBvYmplY3QgcG9pbnRpbmcgdG8gYSBiYXNlIFVSTC4gVGhpcyBub2RlIGNvbnRhaW5zIGNoaWxkcmVuIG5vZGVzIGZvclxuICogcmVhY2ggc2VydmljZSwgcm9vbXMgYW5kIFdlYlJUQyBjb21tdW5pY2F0aW9ucy5cbiAqXG4gKiBXYXJuaW5nIDogd2hlbiB1c2VkIHdpdGggZGVtbyBVSSwgdGhpcyBmaWxlIGlzIG5vdCBpbXBvcnRlZDogIGRlbW8gVUkgaGFzZSBpdHMgb3duIGNvbmZpZ3VyYXRpb24gc3lzdGVtIChpbXBvcnQganNvbiBjb25maWcgd2l0aCBhIHBocCBzZXJ2ZXIgbW9kdWxlKVxuICogVGhlc2Ugbm9kZXMgYXJlIDpcbiAqICAgICAgIC0gcm9vbXNcbiAqICAgICAgIC0gcmVhY2hcbiAqICAgICAgIC0gd2VicnRjXG4gKiAgICAgICAtIHNpcFBob25lTnVtYmVyc1xuICogICAgICAgLSBkYXRhc3RvcmUsIGkuZS4gdGhlIFdlYmNvbSBvYmplY3RcbiAqIEBjb25zdHJ1Y3RvclxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbihXRUJDT01CQVNFX1VSTCkge1xuXG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gVGhlIGRhdGFzdG9yZSBpbiB0aGUgbWFpbiBvYmplY3Qgd2hpY2ggY2FuIGJlIGNvbnNpZGVyZWQgaGFzIHRoZSByb290IG5vZGUgb2YgdGhlIGJhc2UuXG5cdCAqIEl0IGNvbnRhaW5zIHRoZSBpbnN0YW5jaWF0ZWQgV2ViY29tIGRlZmluZWQgYnkgYSBXRUJDT01CQVNFX1VSTFxuXHQgKiBUaGUgbWFpbiBub2RlcyBjb250YWluaW5nIHRoZSByb29tcywgdGhlIFNJUCBwaG9uZSBudW1iZXJzIGFuZCB0aGUgcmVhY2ggYW5kIFdlYlJUQyBkYXRhIGFyZSBjaGlsZHJlbiBvZiB0aGlzIG5vZGUuXG5cdCAqL1xuXHRsZXQgX2RhdGFzdG9yZSA9IG51bGw7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gQSBub2RlIGNvbnRhaW5pbmcgYWxsIHRoZSByb29tcyBvZiB0aGUgY29tbXVuaWNhdGlvbiBzeXN0ZW0uXG5cdCAqIEVhY2ggXCJyb29tXCIgbm9kZSBwb3NzZXNzZXMgdGhlIHBhcnRpY2lwYW50cyBhbmQgdGhlIGV4Y2hhbmdlZCBpbnN0YW50IG1lc3NhZ2VzIGZvciBleGFtcGxlLlxuXHQgKiBJbiB0aGUgZGF0YWJhc2UsIHRoaXMgbm9kZSBpcyBpZGVudGlmaWVkIGJ5IFwicm9vbXNMaXN0XCIuXG5cdCAqL1xuXHRsZXQgX3Jvb21zID0gbnVsbDtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBBIG5vZGUgY29udGFpbmluZyBhbGwgdGhlIGRhdGEgYWJvdXQgdGhlIHJlYWNoIHNlcnZpY2UgdXNlZCB0byBwdXQgaW4gcmVsYXRpb24gdXNlcnMuXG5cdCAqIEluIHRoZSBkYXRhYmFzZSwgdGhpcyBub2RlIGlzIGlkZW50aWZpZWQgYnkgXCJyZWFjaFwiLlxuXHQgKi9cblx0bGV0IF9yZWFjaCA9IG51bGw7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gQSBub2RlIGNvbnRhaW5pbmcgYWxsIHRoZSBkYXRhIGFib3V0IHRoZSBXZWJSVEMgZmVhdHVyZS5cblx0ICogSW4gdGhlIGRhdGFiYXNlLCB0aGlzIG5vZGUgaXMgaWRlbnRpZmllZCBieSBcIndlYnJ0Y1wiLlxuXHQgKi9cblx0bGV0IF93ZWJydGMgPSBudWxsO1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIEEgbm9kZSBjb250YWluaW5nIGFsbCB0aGUgZGF0YSBhYm91dCB0aGUgU0lQIHBob25lIG51bWJlcnMuXG5cdCAqIEluIHRoZSBkYXRhYmFzZSwgdGhpcyBub2RlIGlzIGlkZW50aWZpZWQgYnkgXCJzaXBQaG9uZU51bWJlcnNcIi5cblx0ICovXG5cdGxldCBfc2lwUGhvbmVOdW1iZXJzID0gbnVsbDtcblxuXHQvKipcblx0ICogRGVmaW5lcyB0aGUgY2hpbGRyZW4gbm9kZXMsIGkuZS4gY3JlYXRlcyBmb3IgZWFjaCBvZiB0aGVtIGEgZGVkaWNhdGVkIG5vZGUgaW4gdGhlIGRhdGFiYXNlXG5cdCAqIHVuZGVyIHRoZSBtYWluIG5vZGUgKGRhdGEgc3RvcmUpLiBDcmVhdGVkIG5vZGVzIGFyZSBcInJvb21zTGlzdFwiLCBcInJlYWNoXCIsIFwid2VicnRjXCIsIFwic2lwUGhvbmVOdW1iZXJzXCIuXG5cdCAqL1xuXHRmdW5jdGlvbiBfaW5pdENoaWxkcmVuKCkge1xuXHRcdF9yb29tcyA9IF9kYXRhc3RvcmUuY2hpbGQoJ3Jvb21zTGlzdCcpO1xuXHRcdF9yZWFjaCA9IF9kYXRhc3RvcmUuY2hpbGQoJ3JlYWNoJyk7XG5cdFx0X3dlYnJ0YyA9IF9kYXRhc3RvcmUuY2hpbGQoJ3dlYnJ0YycpO1xuXHRcdF9zaXBQaG9uZU51bWJlcnMgPSBfZGF0YXN0b3JlLmNoaWxkKCdzaXBQaG9uZU51bWJlcnMnKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBUaGUgaW5pdGlhbGl6YXRpb24gZnVuY3Rpb24gd2hpY2ggaW5zdGFudGlhdGVzIHRoZSBXZWJjb20gc3RvcmVkIGluIHRoZSBkYXRhIHN0b3JlLlxuXHQgKiBBbGwgdGhlIGNoaWxkcmVuIG5vZGVzbmFyZSBkZWZpbmVzIGhlcmUuXG5cdCAqL1xuXHRmdW5jdGlvbiBfaW5pdCgpIHtcblx0XHRfZGF0YXN0b3JlID0gbmV3IFdlYmNvbShXRUJDT01CQVNFX1VSTCk7XG5cdFx0X2luaXRDaGlsZHJlbigpO1xuXHR9XG5cblx0LyoqXG5cdCAqIERlZmluZXMgdGhlIFdlYmNvbSBVUkwgYW5kIHJlaW5pdCB0aGUgY2hpbGRyZW4uXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBwX3dlYmNvbWJhc2VfdXJsIC0gVGhlIFVSTCBvZiB0aGUgV2ViY29tXG5cdCAqL1xuXHRmdW5jdGlvbiBfc2V0V2ViY29tQmFzZVVybChwX3dlYmNvbWJhc2VfdXJsKSB7XG5cdFx0X2RhdGFzdG9yZSA9IG5ldyBXZWJjb20ocF93ZWJjb21iYXNlX3VybCk7XG5cdFx0X2luaXRDaGlsZHJlbigpO1xuXHR9XG5cblx0LyoqXG5cdCAqIHJldHVybiB0aGUgV2ViY29tIFVSTC5cblx0ICovXG5cdGZ1bmN0aW9uIF9nZXRXZWJjb21CYXNlVXJsKCkge1xuXHRcdGlmIChfZGF0YXN0b3JlKSB7XG5cdFx0XHRyZXR1cm4gX2RhdGFzdG9yZS50b1N0cmluZygpO1xuXHRcdH1cblx0XHRyZXR1cm4gdW5kZWZpbmVkO1xuXHR9XG5cblx0LyoqXG5cdCAqIERlZmluZXMgdGhlIGRhdGFzdG9yZSBhbmQgcmVpbml0IHRoZSBjaGlsZHJlbi5cblx0ICogQHBhcmFtIHtXZWJjb219IHBfZGF0YXN0b3JlIC0gQSBXZWJjb20gb2JqZWN0IHdoaWNoIGlzIHRoZSBuZXcgZGF0YSBzdG9yZVxuXHQgKi9cblx0ZnVuY3Rpb24gX3NldERhdGFzdG9yZShwX2RhdGFzdG9yZSkge1xuXHRcdF9kYXRhc3RvcmU9cF9kYXRhc3RvcmU7XG5cdFx0X2luaXRDaGlsZHJlbigpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJldHVybnMgdGhlIGRhdGFzdG9yZVxuXHQgKiBAcmV0dXJuIHtXZWJjb219IC0gVGhlIGRhdGEgc3RvcmUgYXMgYSBXZWJjb21cblx0ICovXG5cdGZ1bmN0aW9uIF9nZXREYXRhc3RvcmUoKSB7XG5cdFx0cmV0dXJuIF9kYXRhc3RvcmU7XG5cdH1cblxuXG5cdC8qKlxuXHQgKiBEZWZpbmVzIGEgbmV3IHJvb21zIG5vZGVcblx0ICogQHBhcmFtIHBfcm9vbXMgLSBBIG5vZGUgY29udGFpbmluZyBhbGwgdGhlIHJvb21zXG5cdCAqL1xuXHRmdW5jdGlvbiBfc2V0Um9vbXMocF9yb29tcykge1xuXHRcdF9yb29tcz1wX3Jvb21zO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJldHVybnMgdGhlIHJvb3Qgbm9kZSBvZiB0aGUgcm9vbXMuXG5cdCAqIEByZXR1cm4gLSBUaGUgbm9kZSBjb250YWluaW5nIGFsbCB0aGUgcm9vbXMgbGlzdFxuXHQgKi9cblx0ZnVuY3Rpb24gX2dldFJvb21zKCkge1xuXHRcdHJldHVybiBfcm9vbXM7XG5cdH1cblxuXHQvKipcblx0ICogRGVmaW5lcyBhIG5ldyByZWFjaCBub2RlXG5cdCAqIEBwYXJhbSBwX3JlYWNoIC0gQSBub2RlIGNvbnRhaW5pbmcgYWxsIHRoZSBkYXRhIGFib3V0IHRoZSByZWFjaCBzZXJ2aWNlXG5cdCAqL1xuXHRmdW5jdGlvbiBfc2V0UmVhY2gocF9yZWFjaCkge1xuXHRcdF9yZWFjaD1wX3JlYWNoO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJldHVybnMgdGhlIHJlYWNoIG5vZGUgb2YgdGhlIHJvb21zLlxuXHQgKiBAcmV0dXJuIC0gVGhlIG5vZGUgY29udGFpbmluZyBhbGwgdGhlIGluZm9ybWF0aW9uIGFib3V0IHRoZSByZWFjaCBzZXJ2aWNlXG5cdCAqL1xuXHRmdW5jdGlvbiBfZ2V0UmVhY2goKSB7XG5cdFx0cmV0dXJuIF9yZWFjaDtcblx0fVxuXG5cdC8qKlxuXHQgKiBEZWZpbmVzIGEgbmV3IHdlYnJ0YyBub2RlXG5cdCAqIEBwYXJhbSBwX3dlYnJ0YyAtIEEgbm9kZSBjb250YWluaW5nIGFsbCB0aGUgZGF0YSBhYm91dCB0aGUgV2ViUlRDIGZlYXR1cmVcblx0ICovXG5cdGZ1bmN0aW9uIF9zZXRXZWJydGMocF93ZWJydGMpIHtcblx0XHRfd2VicnRjPXBfd2VicnRjO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJldHVybnMgdGhlIFdlYlJUQyBub2RlXG5cdCAqIEByZXR1cm4gLSBUaGUgbm9kZSBjb250YWluaWcgYWxsIHRoZSBkYXRhIGFib3V0IHRoZSBXZWJSVEMgZmVhdHVyZVxuXHQgKi9cblx0ZnVuY3Rpb24gX2dldFdlYnJ0YygpIHtcblx0XHRyZXR1cm4gX3dlYnJ0Yztcblx0fVxuXG5cdC8qKlxuXHQgKiBEZWZpbmVzIGEgbm9kZSBjb250YWluaW5nIHRoZSBTSVAgcGhvbmUgbnVtYmVyc1xuXHQgKiBAcGFyYW0gcF9zaXBQaG9uZU51bWJlcnMgLSBUaGUgcm9vdCBub2RlIGNvbnRhaW5pbmcgdGhlIFNJUCBwaG9uZSBudW1iZXJzXG5cdCAqL1xuXHRmdW5jdGlvbiBfc2V0U2lwUGhvbmVOdW1iZXJzKHBfc2lwUGhvbmVOdW1iZXJzKSB7XG5cdFx0X3NpcFBob25lTnVtYmVycz1wX3NpcFBob25lTnVtYmVycztcblx0fVxuXG5cdC8qKlxuXHQgKiBSZXR1cm5zIHRoZSByb290IG5vZGUgY29udGFpbmluZyB0aGUgU0lQIHBob25lIG51bWJlcnNcblx0ICogQHJldHVybiAtIFRoZSByb290IG5vZGUgd2l0aCB0aGUgU0lQIG51bWJlcnNcblx0ICovXG5cdGZ1bmN0aW9uIF9nZXRTaXBQaG9uZU51bWJlcnMoKSB7XG5cdFx0cmV0dXJuIF9zaXBQaG9uZU51bWJlcnM7XG5cdH1cblxuXHRfaW5pdCgpO1xuXG5cdHJldHVybiB7XG5cdFx0LyoqXG5cdFx0ICogRGVmaW5lcyB0aGUgV2ViY29tIFVSTCBhbmQgcmVpbml0IHRoZSBjaGlsZHJlbi5cblx0XHQgKiBAcGFyYW0ge3N0cmluZ30gcF93ZWJjb21iYXNlX3VybCAtIFRoZSBVUkwgb2YgdGhlIFdlYmNvbVxuXHRcdCAqL1xuXHRcdHNldFdlYmNvbUJhc2VVcmwgOiBfc2V0V2ViY29tQmFzZVVybCxcblx0XHQvKipcblx0XHQgKiByZXR1cm4gdGhlIFdlYmNvbSBVUkwuXG5cblx0XHQgKi9cblx0XHRnZXRXZWJjb21CYXNlVXJsIDogX2dldFdlYmNvbUJhc2VVcmwsXG5cdFx0LyoqXG5cdFx0ICogRGVmaW5lcyB0aGUgZGF0YXN0b3JlIGFuZCByZWluaXQgdGhlIGNoaWxkcmVuLlxuXHRcdCAqIEBwYXJhbSB7V2ViY29tfSBwX2RhdGFzdG9yZSAtIEEgV2ViY29tIG9iamVjdCB3aGljaCBpcyB0aGUgbmV3IGRhdGEgc3RvcmVcblx0XHQgKi9cblx0XHRzZXREYXRhc3RvcmUgOiBfc2V0RGF0YXN0b3JlLFxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgdGhlIGRhdGFzdG9yZVxuXHRcdCAqIEByZXR1cm4ge1dlYmNvbX0gLSBUaGUgZGF0YSBzdG9yZSBhcyBhIFdlYmNvbVxuXHRcdCAqL1xuXHRcdGdldERhdGFzdG9yZSA6IF9nZXREYXRhc3RvcmUsXG5cdFx0LyoqXG5cdFx0ICogRGVmaW5lcyBhIG5ldyByb29tcyBub2RlXG5cdFx0ICogQHBhcmFtIHBfcm9vbXMgLSBBIG5vZGUgY29udGFpbmluZyBhbGwgdGhlIHJvb21zXG5cdFx0ICovXG5cdFx0c2V0Um9vbXMgOiBfc2V0Um9vbXMsXG5cdFx0LyoqXG5cdFx0ICogUmV0dXJucyB0aGUgcm9vdCBub2RlIG9mIHRoZSByb29tcy5cblx0XHQgKiBAcmV0dXJuIC0gVGhlIG5vZGUgY29udGFpbmluZyBhbGwgdGhlIHJvb21zIGxpc3Rcblx0XHQgKi9cblx0XHRnZXRSb29tcyA6IF9nZXRSb29tcyxcblx0XHQvKipcblx0XHQgKiBEZWZpbmVzIGEgbmV3IHJlYWNoIG5vZGVcblx0XHQgKiBAcGFyYW0gcF9yZWFjaCAtIEEgbm9kZSBjb250YWluaW5nIGFsbCB0aGUgZGF0YSBhYm91dCB0aGUgcmVhY2ggc2VydmljZVxuXHRcdCAqL1xuXHRcdHNldFJlYWNoIDogX3NldFJlYWNoLFxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgdGhlIHJlYWNoIG5vZGUgb2YgdGhlIHJvb21zLlxuXHRcdCAqIEByZXR1cm4gLSBUaGUgbm9kZSBjb250YWluaW5nIGFsbCB0aGUgaW5mb3JtYXRpb24gYWJvdXQgdGhlIHJlYWNoIHNlcnZpY2Vcblx0XHQgKi9cblx0XHRnZXRSZWFjaCA6IF9nZXRSZWFjaCxcblx0XHQvKipcblx0XHQgKiBEZWZpbmVzIGEgbmV3IHdlYnJ0YyBub2RlXG5cdFx0ICogQHBhcmFtIHBfd2VicnRjIC0gQSBub2RlIGNvbnRhaW5pbmcgYWxsIHRoZSBkYXRhIGFib3V0IHRoZSBXZWJSVEMgZmVhdHVyZVxuXHRcdCAqL1xuXHRcdHNldFdlYnJ0YyA6IF9zZXRXZWJydGMsXG5cdFx0LyoqXG5cdFx0ICogUmV0dXJucyB0aGUgV2ViUlRDIG5vZGVcblx0XHQgKiBAcmV0dXJuIC0gVGhlIG5vZGUgY29udGFpbmlnIGFsbCB0aGUgZGF0YSBhYm91dCB0aGUgV2ViUlRDIGZlYXR1cmVcblx0XHQgKi9cblx0XHRnZXRXZWJydGMgOiBfZ2V0V2VicnRjLFxuXHRcdC8qKlxuXHRcdCAqIERlZmluZXMgYSBub2RlIGNvbnRhaW5pbmcgdGhlIFNJUCBwaG9uZSBudW1iZXJzXG5cdFx0ICogQHBhcmFtIHBfc2lwUGhvbmVOdW1iZXJzIC0gVGhlIHJvb3Qgbm9kZSBjb250YWluaW5nIHRoZSBTSVAgcGhvbmUgbnVtYmVyc1xuXHRcdCAqL1xuXHRcdHNldFNpcFBob25lTnVtYmVycyA6IF9zZXRTaXBQaG9uZU51bWJlcnMsXG5cdFx0LyoqXG5cdFx0ICogUmV0dXJucyB0aGUgcm9vdCBub2RlIGNvbnRhaW5pbmcgdGhlIFNJUCBwaG9uZSBudW1iZXJzXG5cdFx0ICogQHJldHVybiAtIFRoZSByb290IG5vZGUgd2l0aCB0aGUgU0lQIG51bWJlcnNcblx0XHQgKi9cblx0XHRnZXRTaXBQaG9uZU51bWJlcnMgOiBfZ2V0U2lwUGhvbmVOdW1iZXJzXG5cdH07XG59XG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvZGF0YXJlZnMuanNcbiAqKi8iLCIvKipcbiAqIEBmaWxlIHJlYWNoLmpzIC0gSlMgZmlsZSB0byB1c2UgZm9yIHRoZSByZWFjaCBzZXJ2aWNlLiBUaGlzIHNlcnZpY2UgYWxsb3dzIHRvIGNyZWF0ZSBhIGRlZGljYXRlZCByb29tIGZvciB1c2VycyBzbyBhcyB0byBwcm92aWRlIHRoZW0gYSBjb21tdW5pY2F0aW9uIHN1aXRlLlxuICogQGF1dGhvciBXZWJjb21cbiAqL1xuXG4vKmVzbGludCBjb21wbGV4aXR5OjEsIG1heC1zdGF0ZW1lbnRzOiAxLCBtYXgtbGVuOiAxKi9cblxuaW1wb3J0IHV0aWxzIGZyb20gJy4vdXRpbHMnO1xuXG4vKipcbiAqIElOVklURSBzdGF0dXMgOiBvbmdvaW5nIHN0YXR1c1xuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5jb25zdCBJTlZJVEFUSU9OX09OR09JTkcgPSAnT05HT0lORyc7XG5cbi8qKlxuICogSU5WSVRFIHN0YXR1cyA6IGFjY2VwdGVkIHN0YXR1c1xuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5jb25zdCBJTlZJVEFUSU9OX0FDQ0VQVEVEID0gJ0FDQ0VQVEVEJztcblxuLyoqXG4gKiBJTlZJVEUgc3RhdHVzIDogcmVmdXNlZCBzdGF0dXNcbiAqIEBjb25zdGFudFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuY29uc3QgSU5WSVRBVElPTl9SRUpFQ1RFRCA9ICdSRUpFQ1RFRCc7XG5cbi8qKlxuICogSU5WSVRFIHN0YXR1cyA6IGNhbmNlbGVkIHN0YXR1c1xuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5jb25zdCBJTlZJVEFUSU9OX0NBTkNFTEVEID0gJ0NBTkNFTEVEJztcblxuLyoqXG4gKiBERVZJQ0VfU1RBVFVTX0NPTk5FVEVEIHN0YXR1cyA6IGNvbm5lY3RlZCBzdGF0dXNcbiAqIEBjb25zdGFudFxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuY29uc3QgREVWSUNFX1NUQVRVU19DT05ORUNURUQgPSAnQ09OTkVDVEVEJztcblxuLyoqXG4gKiBST09NX1NUQVRVU19PUEVOIHN0YXR1cyA6IHJvb20gaXMgb3BlbiAvIGFjdGl2ZVxuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5jb25zdCBST09NX1NUQVRVU19PUEVOID0gJ09QRU4nO1xuXG5cblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBkZXNjcmlwdGlvbiBUaGUgcmVhY2ggb2JqZWN0IHdpdGggaXRzIHN0cmVhbXMsIGZsYWdzIGFuZCBjYWxsYmFja3MuXG4gKiBUaGlzIG9iamVjdCBpcyB1c2VkIHNvIGFzIHRvIG1ha2UgaW4gY29ubmVjdGlvbiBzZXZlcmFsIHVzZXJzLiBUaGUgcm9vbSBJbnZpdGVzIG1hbmFnZW1lbnQgKGFjY2VwdCAvIHJlZnVzZSAvIGNhbmNlbCksIHRoZSB1c2VyIG1hbmFnZW1lbnQgKGFkZCAvIHJlbW92ZSkgYW5kXG4gKiB0aGUgSW52aXRlIGFyZSBoYW5kbGVkIGhlcmUuXG4gKiBAcGFyYW0ge3N0cmluZ30gcF9tZSAtIFRoZSB1c2VyIGlkZW50aWZpZXJcbiAqL1xuY29uc3QgcmVhY2ggPSBmdW5jdGlvbiAocF9tZSwgZGF0YXJlZnMpIHtcblxuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIFRoZSB1c2VyIGlkZW50aWZpZXIuIFRoaXMgaWRlbnRpZmllciB3aWxsIGJlIHVzZSB0byBjcmVhdGUgYSBkZWRpY2F0ZWQgbm9kZSBpbiB0aGUgZGF0YWJhc2UgZm9yIHRoaXMgdXNlci5cblx0ICovXG5cdGNvbnN0IG1lID0gcF9tZTtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBUaGUgZGF0YSByZWYgcG9pbnRlciBmb3IgdGhlIHJlYWNoIHBhcnQuIEl0IGNhbiBiZSBjb25zaWRlcmVkIGFzIGEgcG9pbnRlciB0byB0aGUgZGF0YWJhc2UgdG8gdXNlIHRvIG5hdmlnYXRlIGludG8gaXQgYW5kIG1vZGlmeSBpdHMgY29udGVudC5cblx0ICovXG5cdGNvbnN0IGRhdGFyZWYgPSBkYXRhcmVmcy5nZXRSZWFjaCgpO1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIENhbGxiYWNrIGhhbmRsaW5nIHRoZSB1c2VyIGFkZGluZ1xuXHQgKi9cblx0bGV0IG9uVXNlckFkZGVkQ2IgPSBudWxsO1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIENhbGxiYWNrIGhhbmRsaW5nIHRoZSB1c2VyIGNoYW5nZXNcblx0ICovXG5cdGxldCBvblVzZXJDaGFuZ2VkQ2IgPSBudWxsO1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIENhbGxiYWNrIGhhbmRsaW5nIHRoZSB1c2VyIHJlbW92YWxcblx0ICovXG5cdGxldCBvblVzZXJSZW1vdmVkQ2IgPSBudWxsO1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIENhbGxiYWNrIGZvciBuZXcgSW52aXRlIHJlY2VpdmVkXG5cdCAqL1xuXHRsZXQgbmV3SW52aXRlQ2IgPSBudWxsO1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIENhbGxiYWNrIGZvciBJbnZpdGUgcmVjZWl2ZWQgY2hhbmdlc1xuXHQgKi9cblx0bGV0IG9uUm9vbUludml0ZUNoYW5nZWRDYiA9IG51bGw7XG5cblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBBbiBhcnJheSBjb250YWluaW5nIGFsbCBvdXRnb2luZyBJbnZpdGVcblx0ICovXG5cdGxldCBtT3V0Z29pbmdJbnZpdGVzID0gW107XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gQW4gYXJyYXkgY29udGFpbmluZyBhbGwgaW5jb21pbmcgSW52aXRhdGlvblxuXHQgKi9cblx0bGV0IG1JbmNvbWluZ0ludml0YXRpb24gPSBbXTtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiB0aGUgdGltZW91dCB0byByZWplY3QgYXV0b21hdGljYWxseSB0aGUgSW52aXRlXG5cdCAqL1xuXHRsZXQgYXV0b21hdGljUmVqZWN0VGltZU91dCA9IG51bGw7XG5cblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiB0aGUgcmVhc29uIHRvIHJlamVjdCBhdXRvbWF0aWNhbGx5IHRoZSBJbnZpdGVcblx0ICovXG5cdGxldCBhdXRvbWF0aWNSZWplY3RSZWFzb24gPSBudWxsO1xuXG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gdGhlIGN1cnJlbnQgZGV2aWNlIElkXG5cdCAqL1xuXHRsZXQgbURldmljZUlkID0gbnVsbDtcblxuXHQvKipcblx0KiBJbml0aWFsaXNhdGlvbiBmdW5jdGlvbi4gVXBkYXRlcyB0aGUgZGF0YXJlZiBhYm91dCB0aGUgdXNlciBpZGVudGlmaWVyIGluIHRoZSB1c2VyIGxpc3QgOlxuXHQqIGl0IHdpbGwgZGlzY29ubmVjdCBhbmQgcmVjb25uZWN0IGl0LlxuXHQqL1xuXHRmdW5jdGlvbiBpbml0KCkge1xuXHRcdG1EZXZpY2VJZCA9IGRhdGFyZWYuY2hpbGQoYHVzZXJMaXN0LyR7bWV9L2Nvbm5lY3RlZExpc3QvJHt1dGlscy5hcHBJbnN0YW5jZUlkfWApO1xuXHRcdG1EZXZpY2VJZC5vbkRpc2Nvbm5lY3QoKS5yZW1vdmUoKTtcblx0XHRtRGV2aWNlSWQuY2hpbGQoJ3N0YXR1cycpLnNldChERVZJQ0VfU1RBVFVTX0NPTk5FQ1RFRCk7XG5cdFx0dHJ5IHtcblx0XHRcdGNvbnN0IGRlc2NyaXB0aW9uID0gbURldmljZUlkLmNoaWxkKCdkZXNjcmlwdGlvbicpO1xuXHRcdFx0aWYgKHV0aWxzLmFwcEluc3RhbmNlSWQpIHtcblx0XHRcdFx0ZGVzY3JpcHRpb24uY2hpbGQoJ2FwcEluc3RhbmNlSWQnKS5zZXQodXRpbHMuYXBwSW5zdGFuY2VJZCk7XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0XG5cdFx0XHRcdG5hdmlnYXRvckRhdGEgPSB7fSxcblx0XHRcdFx0cHJvcGVydGllcyA9IFtcblx0XHRcdFx0XHQnYXBwQ29kZU5hbWUnLFxuXHRcdFx0XHRcdCdhcHBOYW1lJyxcblx0XHRcdFx0XHQnYXBwVmVyc2lvbicsXG5cdFx0XHRcdFx0J2J1aWxkSUQnLFxuXHRcdFx0XHRcdCdjb29raWVFbmFibGVkJyxcblx0XHRcdFx0XHQnbGFuZ3VhZ2UnLFxuXHRcdFx0XHRcdCdvbkxpbmUnLFxuXHRcdFx0XHRcdCdvc2NwdScsXG5cdFx0XHRcdFx0J3BsYXRmb3JtJyxcblx0XHRcdFx0XHQncHJvZHVjdCcsXG5cdFx0XHRcdFx0J3Byb2R1Y3RTdWInLFxuXHRcdFx0XHRcdCdzZWN1cml0eVBvbGljeScsXG5cdFx0XHRcdFx0J3VzZXJBZ2VudCcsXG5cdFx0XHRcdFx0J3ZlbmRvcicsXG5cdFx0XHRcdFx0J3ZlbmRvclN1Yidcblx0XHRcdFx0XTtcblx0XHRcdHByb3BlcnRpZXMuZm9yRWFjaCgocHJvcGVydHkpID0+IHtcblx0XHRcdFx0aWYobmF2aWdhdG9yW3Byb3BlcnR5XSkge1xuXHRcdFx0XHRcdG5hdmlnYXRvckRhdGFbcHJvcGVydHldID0gbmF2aWdhdG9yW3Byb3BlcnR5XTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRkZXNjcmlwdGlvbi5jaGlsZCgnbmF2aWdhdG9yJykuc2V0KG5hdmlnYXRvckRhdGEpO1xuXG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0Y29uc29sZS5lcnJvcihgKFJlYWNoU0RLOjpyZWFjaDo6aW5pdClmYWlsZWQgdG8gZ2V0IGluZm9ybWF0aW9uIGFib3V0IGRldmljZS4gZXJyb3I9JHtlfWApO1xuXHRcdH1cblx0XHRkYXRhcmVmLmNoaWxkKGB1c2VyTGlzdC8ke21lfS93YXNJbnNpZGVSZWFjaGApLnNldCh0cnVlKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBjaGVjayBpZiBhIHVzZXIgaXMgY29ubmVjdGVkXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBwX3VzZXJJZCAtIHRoZSB1c2VyIElkXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb259IHBfY2IgLSB0aGUgY2FsbGJhY2sgdHJpZ2dlcnMgdG8gcmV0dXJuIHRoZSByZXN1bHQuIFRoZSByZXN1bHQgd2lsbCBiZSBwYXNzZWQgaW4gcGFyYW1ldGVyIGFzIGJvb2xlYW4gOiB0cnVlID0gY29ubmVjdGVkIC8gZmFsc2UgPSBub3QgY29ubmVjdGVkXG5cdCAqL1xuXHRmdW5jdGlvbiBfaXNDb25uZWN0ZWQocF91c2VySWQscF9jYikge1xuXHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OnJlYWNoOjpfaXNDb25uZWN0ZWQpdXNlcklkOiAke3BfdXNlcklkfWApO1xuXHRcdGRhdGFyZWYuY2hpbGQoYHVzZXJMaXN0LyR7cF91c2VySWR9L2Nvbm5lY3RlZExpc3RgKS5vbmNlKCd2YWx1ZScsIChzbmFwc2hvdCkgPT4ge1xuXHRcdFx0Ly8gb25Vc2VyQ29ubmVjdGVkQ2IuIFVzZXIgaXMgY29ubmVjdGVkIGlmIHNuYXBzaG90IHZhbHVlIGlzIG5vdCBudWxsXG5cdFx0XHRpZiAocF9jYiAmJiB0eXBlb2YgcF9jYiA9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdHBfY2Ioc25hcHNob3QudmFsKCkgIT09IG51bGwpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIGNoZWNrIGlmIGEgdXNlciBpcyByZWdpc3RlclxuXHQgKiBAcGFyYW0ge3N0cmluZ30gcF91c2VySWQgLSB0aGUgdXNlciBJZFxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBwX2NiIC0gdGhlIGNhbGxiYWNrIHRyaWdnZXJzIHRvIHJldHVybiB0aGUgcmVzdWx0LiBUaGUgcmVzdWx0IHdpbGwgYmUgcGFzc2VkIGluIHBhcmFtZXRlciBhcyBib29sZWFuIDogdHJ1ZSA9IHJlZ2lzdGVyZWQgLyBmYWxzZSA9IG5vdCByZWdpc3RlcmVkXG5cdCAqL1xuXHRmdW5jdGlvbiBfaXNSZWdpc3RlcmVkKHBfdXNlcklkLHBfY2IpIHtcblx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjpyZWFjaDo6X2lzUmVnaXN0ZXJlZCl1c2VySWQ6ICR7cF91c2VySWR9YCk7XG5cdFx0ZGF0YXJlZi5jaGlsZChgdXNlckxpc3QvJHtwX3VzZXJJZH0vd2FzSW5zaWRlUmVhY2hgKS5vbmNlKCd2YWx1ZScsIChzbmFwc2hvdCkgPT4ge1xuXHRcdFx0Ly8gb25Vc2VyUmVnaXN0ZXJlZENiLiBVc2VyIGlzIHJlZ2lzdGVyZWQgaWYgc25hcHNob3QgdmFsdWUgaXMgbm90IG51bGxcblx0XHRcdGlmIChwX2NiICYmIHR5cGVvZiBwX2NiID09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0cF9jYihzbmFwc2hvdC52YWwoKSAhPT0gbnVsbCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHQvKipcblx0ICogc2V0IHRoZSBkZXZpY2Ugc3RhdHVzIChERVZJQ0VfU1RBVFVTX0NPTk5FQ1RFRClcblx0ICogQHBhcmFtIHtzdHJpbmd9IHBfc3RhdHVzIC0gdGhlIG5ldyBzdGF0dXNcblx0ICovXG5cdGZ1bmN0aW9uIF9zZXRDb25uZWN0ZWRTdGF0dXMocF9zdGF0dXMpIHtcblx0XHRpZiAobURldmljZUlkKSB7XG5cdFx0XHRtRGV2aWNlSWQuY2hpbGQoJ3N0YXR1cycpLnNldChwX3N0YXR1cyk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIERlZmluZXMgdGhlIGNhbGxiYWNrIHRvIHRyaWdnZXIgd2hlbiBhIG5ldyB1c2VyIGlzIGFkZGVkXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb259IHBfY2IgLSBUaGUgY2FsbGJhY2sgdG8gdXNlXG5cdCAqL1xuXHRmdW5jdGlvbiBfc2V0T25Vc2VyQWRkZWQocF9jYikge1xuXHRcdGlmIChvblVzZXJBZGRlZENiKSB7XG5cdFx0XHRkYXRhcmVmLmNoaWxkKCd1c2VyTGlzdCcpLm9mZignY2hpbGRfYWRkZWQnLCBvblVzZXJBZGRlZENiKTtcblx0XHRcdG9uVXNlckFkZGVkQ2IgPSBudWxsO1xuXHRcdH1cblx0XHRpZiAocF9jYiAmJiB0eXBlb2YgcF9jYiA9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRvblVzZXJBZGRlZENiID0gZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6cmVhY2g6Om9uVXNlckFkZGVkQ2IpICR7c25hcHNob3QubmFtZSgpfT0ke0pTT04uc3RyaW5naWZ5KHNuYXBzaG90LnZhbCgpKX1gKTtcblx0XHRcdFx0Y29uc3Qgb2JqID0ge307XG5cdFx0XHRcdG9ialtzbmFwc2hvdC5uYW1lKCldID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHRcdHBfY2Iob2JqKTtcblx0XHRcdH07XG5cdFx0XHRkYXRhcmVmLmNoaWxkKCd1c2VyTGlzdCcpLm9uKCdjaGlsZF9hZGRlZCcsIG9uVXNlckFkZGVkQ2IpO1xuXHRcdH1cblx0fVxuXHQvKipcblx0ICogRGVmaW5lcyB0aGUgY2FsbGJhY2sgdG8gdHJpZ2dlciB3aGVuIHRoZSB1c2VyIGhhcyBjaGFuZ2VkXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb259IHBfY2IgLSBUaGUgY2FsbGJhY2sgdG8gdXNlXG5cdCAqL1xuXHRmdW5jdGlvbiBfc2V0T25Vc2VyQ2hhbmdlZChwX2NiKSB7XG5cdFx0aWYgKG9uVXNlckNoYW5nZWRDYikge1xuXHRcdFx0ZGF0YXJlZi5jaGlsZCgndXNlckxpc3QnKS5vZmYoJ2NoaWxkX2NoYW5nZWQnLCBvblVzZXJDaGFuZ2VkQ2IpO1xuXHRcdFx0b25Vc2VyQ2hhbmdlZENiID0gbnVsbDtcblx0XHR9XG5cdFx0aWYgKHBfY2IgJiYgdHlwZW9mIHBfY2IgPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0b25Vc2VyQ2hhbmdlZENiID0gZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6cmVhY2g6Om9uVXNlckNoYW5nZWRDYikgJHtzbmFwc2hvdC5uYW1lKCl9PSR7SlNPTi5zdHJpbmdpZnkoc25hcHNob3QudmFsKCkpfWApO1xuXHRcdFx0XHRjb25zdCBvYmogPSB7fTtcblx0XHRcdFx0b2JqW3NuYXBzaG90Lm5hbWUoKV09c25hcHNob3QudmFsKCk7XG5cdFx0XHRcdHBfY2Iob2JqKTtcblx0XHRcdH07XG5cdFx0XHRkYXRhcmVmLmNoaWxkKCd1c2VyTGlzdCcpLm9uKCdjaGlsZF9jaGFuZ2VkJywgb25Vc2VyQ2hhbmdlZENiKTtcblx0XHR9XG5cblx0fVxuXHQvKipcblx0ICogRGVmaW5lcyB0aGUgY2FsbGJhY2sgdG8gdHJpZ2dlciB3aGVuIGEgdXNlciBoYXMgYmVlbiByZW1vdmVkLlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBwX2NiIC0gVGhlIGNhbGxiYWNrIHRvIHVzZVxuXHQgKi9cblx0ZnVuY3Rpb24gX3NldE9uVXNlclJlbW92ZWQocF9jYikge1xuXHRcdGlmIChvblVzZXJSZW1vdmVkQ2IpIHtcblx0XHRcdGRhdGFyZWYuY2hpbGQoJ3VzZXJMaXN0Jykub2ZmKCdjaGlsZF9yZW1vdmVkJyxvblVzZXJSZW1vdmVkQ2IpO1xuXHRcdFx0b25Vc2VyUmVtb3ZlZENiID0gbnVsbDtcblx0XHR9XG5cdFx0aWYgKHBfY2IgJiYgdHlwZW9mIHBfY2IgPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0b25Vc2VyUmVtb3ZlZENiID0gZnVuY3Rpb24oc25hcHNob3QpIHtcblx0XHRcdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6cmVhY2g6Om9uVXNlclJlbW92ZWRDYikgJHtzbmFwc2hvdC5uYW1lKCl9PSR7SlNPTi5zdHJpbmdpZnkoc25hcHNob3QudmFsKCkpfWApO1xuXHRcdFx0XHRjb25zdCBvYmogPSB7fTtcblx0XHRcdFx0b2JqW3NuYXBzaG90Lm5hbWUoKV09c25hcHNob3QudmFsKCk7XG5cdFx0XHRcdHBfY2Iob2JqKTtcblx0XHRcdH07XG5cdFx0XHRkYXRhcmVmLmNoaWxkKCd1c2VyTGlzdCcpLm9uKCdjaGlsZF9yZW1vdmVkJyxvblVzZXJSZW1vdmVkQ2IpO1xuXHRcdH1cblxuXHR9XG5cblx0LyoqXG5cdCAqIERlZmluZXMgdGhlIGNhbGxiYWNrIHRvIHRyaWdnZXIgd2hlbiBhIHJvb20gSW52aXRlIGhhcyBiZWVuIHJlY2VpdmVkLlxuXHQgKiBPdGhlciBjYWxsYmFja3Mgd2lsbCBiZSB0cmlnZ2VyZWQgYWJvdXQgSW52aXRlIGxpc3RzLlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBwX29uTmV3Um9vbUludml0ZUNiIC0gVGhlIGNhbGxiYWNrIHRyaWdnZXJzIHdoZW4gYSBJbnZpdGUgaXMgcmVjZWl2ZWQgKHN0YXR1cyA9IG9uIGdvaW5nKVxuXHQgKi9cblx0ZnVuY3Rpb24gX3NldE9uTmV3Um9vbUludml0YXRpb24ocF9vbk5ld1Jvb21JbnZpdGVDYikge1xuXG5cdFx0aWYgKG5ld0ludml0ZUNiKSB7XG5cdFx0XHRkYXRhcmVmLmNoaWxkKGBpbnZpdGF0aW9uTGlzdC8ke21lfWApLm9mZignY2hpbGRfYWRkZWQnLG5ld0ludml0ZUNiKTtcblx0XHRcdG5ld0ludml0ZUNiID0gbnVsbDtcblx0XHR9XG5cblx0XHRpZiAocF9vbk5ld1Jvb21JbnZpdGVDYiAmJiB0eXBlb2YgcF9vbk5ld1Jvb21JbnZpdGVDYiA9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRuZXdJbnZpdGVDYiA9IChzbmFwc2hvdCkgPT4ge1xuXHRcdFx0XHRpZiAoc25hcHNob3QudmFsKCkuc3RhdHVzPT09IElOVklUQVRJT05fT05HT0lORykge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OnJlYWNoOjpfc2V0T25OZXdSb29tSW52aXRhdGlvbiluZXcgSW52aXRlIHJlY2VpdmVkLGlkKSAke3NuYXBzaG90Lm5hbWUoKX0sY29udGVudD0ke0pTT04uc3RyaW5naWZ5KHNuYXBzaG90LnZhbCgpKX1gKTtcblx0XHRcdFx0XHRjb25zdCBpbnZpdGF0aW9uSWQgPSBzbmFwc2hvdC5uYW1lKCk7XG5cdFx0XHRcdFx0aWYgKCFtSW5jb21pbmdJbnZpdGF0aW9uKSB7XG5cdFx0XHRcdFx0XHRtSW5jb21pbmdJbnZpdGF0aW9uID0gW107XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChtSW5jb21pbmdJbnZpdGF0aW9uW2ludml0YXRpb25JZF0pIHtcblx0XHRcdFx0XHRcdGlmIChtSW5jb21pbmdJbnZpdGF0aW9uW2ludml0YXRpb25JZF0udGltZW91dCkge1xuXHRcdFx0XHRcdFx0XHRjbGVhclRpbWVvdXQobUluY29taW5nSW52aXRhdGlvbltpbnZpdGF0aW9uSWRdLnRpbWVvdXQpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0ZGVsZXRlIG1JbmNvbWluZ0ludml0YXRpb25baW52aXRhdGlvbklkXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0bUluY29taW5nSW52aXRhdGlvbltpbnZpdGF0aW9uSWRdPXt9O1xuXG5cdFx0XHRcdFx0Y29uc3Qgb2JqID0ge307XG5cdFx0XHRcdFx0b2JqW2ludml0YXRpb25JZF0gPSBzbmFwc2hvdC52YWwoKTtcblx0XHRcdFx0XHRwX29uTmV3Um9vbUludml0ZUNiKG9iaik7XG5cblx0XHRcdFx0XHRjb25zdCBpbnZpdGF0aW9uUmVmID0gZGF0YXJlZi5jaGlsZChgaW52aXRhdGlvbkxpc3QvJHttZX0vJHtpbnZpdGF0aW9uSWR9YCk7XG5cblx0XHRcdFx0XHRpZiAoYXV0b21hdGljUmVqZWN0VGltZU91dCkge1xuXHRcdFx0XHRcdFx0bUluY29taW5nSW52aXRhdGlvbltpbnZpdGF0aW9uSWRdLnRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHRcdFx0aWYgKGF1dG9tYXRpY1JlamVjdFRpbWVPdXQpIHtcblx0XHRcdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjpyZWFjaDo6X3NldE9uTmV3Um9vbUludml0YXRpb24pYXV0b21hdGljIHJlamVjdCBvZiBJbnZpdGUgcmVjZWl2ZWQ9JHtKU09OLnN0cmluZ2lmeShzbmFwc2hvdC52YWwoKSl9YCk7XG5cdFx0XHRcdFx0XHRcdFx0aW52aXRhdGlvblJlZi5vbkRpc2Nvbm5lY3QoKS5jYW5jZWwoKTtcblx0XHRcdFx0XHRcdFx0XHRpZiAoYXV0b21hdGljUmVqZWN0UmVhc29uKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpbnZpdGF0aW9uUmVmLnVwZGF0ZSh7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRpbWVzdGFtcF9lbmQ6IFdlYmNvbS5TZXJ2ZXJWYWx1ZS5USU1FU1RBTVAsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHN0YXR1czogSU5WSVRBVElPTl9SRUpFQ1RFRCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0c3RhdHVzX2luZm86IGF1dG9tYXRpY1JlamVjdFJlYXNvblxuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdGludml0YXRpb25SZWYudXBkYXRlKHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGltZXN0YW1wX2VuZDogV2ViY29tLlNlcnZlclZhbHVlLlRJTUVTVEFNUCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0c3RhdHVzOiBJTlZJVEFUSU9OX1JFSkVDVEVEXG5cdFx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0sIGF1dG9tYXRpY1JlamVjdFRpbWVPdXQpO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGludml0YXRpb25SZWYub25jZSgnY2hpbGRfY2hhbmdlZCcsIChzbmFwc2hvdCkgPT4ge1xuXHRcdFx0XHRcdFx0aWYoc25hcHNob3QgJiYgc25hcHNob3QubmFtZSgpID09PSAnc3RhdHVzJykge1xuXHRcdFx0XHRcdFx0XHRzbmFwc2hvdC5yZWYoKS5wYXJlbnQoKS5vbmNlKCd2YWx1ZScsIChzbmFwc2hvdDIpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRsZXQgY2JfaW52aXRhdGlvbklkLGNiX29ial9jb250ZW50O1xuXHRcdFx0XHRcdFx0XHRcdGlmIChzbmFwc2hvdDIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdGNiX2ludml0YXRpb25JZCA9IHNuYXBzaG90LnJlZigpLnBhcmVudCgpLm5hbWUoKTtcblx0XHRcdFx0XHRcdFx0XHRcdGNiX29ial9jb250ZW50PSBzbmFwc2hvdDIudmFsKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb25zdCBjYl9vYmogPSB7fTtcblx0XHRcdFx0XHRcdFx0XHRcdGNiX29ialtjYl9pbnZpdGF0aW9uSWRdID0gY2Jfb2JqX2NvbnRlbnQ7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAobUluY29taW5nSW52aXRhdGlvbiAmJiBtSW5jb21pbmdJbnZpdGF0aW9uW2NiX2ludml0YXRpb25JZF0gJiYgbUluY29taW5nSW52aXRhdGlvbltjYl9pbnZpdGF0aW9uSWRdLnRpbWVvdXQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KG1JbmNvbWluZ0ludml0YXRpb25bY2JfaW52aXRhdGlvbklkXS50aW1lb3V0KTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OnJlYWNoOjpfc2V0T25OZXdSb29tSW52aXRhdGlvbilJbnZpdGUgY2hhbmdlZCxpZD0pICR7Y2JfaW52aXRhdGlvbklkfSwgbmV3IGNvbnRlbnQ9JHtKU09OLnN0cmluZ2lmeShjYl9vYmpfY29udGVudCl9YCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoY2Jfb2JqICYmIG9uUm9vbUludml0ZUNoYW5nZWRDYiApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0b25Sb29tSW52aXRlQ2hhbmdlZENiKGNiX29iaik7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRkZWxldGUgbUluY29taW5nSW52aXRhdGlvbltjYl9pbnZpdGF0aW9uSWRdO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdGRhdGFyZWYuY2hpbGQoYGludml0YXRpb25MaXN0LyR7bWV9YCkub24oJ2NoaWxkX2FkZGVkJywgbmV3SW52aXRlQ2IpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBEZWZpbmVzIHRoZSBjYWxsYmFjayB0byB0cmlnZ2VyIHdoZW4gYSByb29tIEludml0ZSBoYXMgYmVlbiBjaGFuZ2VkLlxuXHQgKiBPdGhlciBjYWxsYmFja3Mgd2lsbCBiZSB0cmlnZ2VyZWQgYWJvdXQgSW52aXRlIGxpc3RzLlxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBwX29uUm9vbUludml0ZUNoYW5nZWRDYiAtIFRoZSBjYWxsYmFjayB0cmlnZ2VycyB3aGVuIHRoZSBzYXR1cyBvbiB0aGUgSW52aXRlIHJlY2VpdmVkIGhhcyBjaGFuZ2VkIChzdGF0dXMgPSBhY2NlcHRlZC9yZWplY3RlZC9jYW5jZWxlZClcblx0ICovXG5cdGZ1bmN0aW9uIF9zZXRPblJvb21JbnZpdGF0aW9uQ2hhbmdlZChwX29uUm9vbUludml0ZUNoYW5nZWRDYikge1xuXG5cdFx0aWYgKG9uUm9vbUludml0ZUNoYW5nZWRDYikge1xuXHRcdFx0b25Sb29tSW52aXRlQ2hhbmdlZENiID0gbnVsbDtcblx0XHR9XG5cblx0XHRpZiAocF9vblJvb21JbnZpdGVDaGFuZ2VkQ2IgJiYgdHlwZW9mIHBfb25Sb29tSW52aXRlQ2hhbmdlZENiID09ICdmdW5jdGlvbicpIHtcblx0XHRcdG9uUm9vbUludml0ZUNoYW5nZWRDYiA9IHBfb25Sb29tSW52aXRlQ2hhbmdlZENiO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBEZWZpbmVzIGEgdGltZW91dCB0byByZWplY3QgYXV0b21hdGljYWxseSB0aGUgaW5jb21pbmcgSW52aXRlXG5cdCAqIEBwYXJhbSB7aW50ZWdlcn0gcF90aW1lb3V0IC0gVGhlIGRlbGF5XG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBwX3JlYXNvbiAtIG9wdGlvbmFsIGluZm8gYWJvdXQgdGhlIHJlamVjdFxuXHQgKi9cblx0ZnVuY3Rpb24gX3NldE5ld1Jvb21JbnZpdGF0aW9uVGltZW91dChwX3RpbWVvdXQscF9yZWFzb24pIHtcblx0XHRpZiAoYXV0b21hdGljUmVqZWN0VGltZU91dCkge1xuXHRcdFx0YXV0b21hdGljUmVqZWN0VGltZU91dCA9IG51bGw7XG5cdFx0fVxuXHRcdGlmIChhdXRvbWF0aWNSZWplY3RSZWFzb24pIHtcblx0XHRcdGF1dG9tYXRpY1JlamVjdFJlYXNvbiA9IG51bGw7XG5cdFx0fVxuXG5cdFx0aWYgKHBfdGltZW91dFx0JiYgcF90aW1lb3V0ID09PSBwYXJzZUludChwX3RpbWVvdXQsIDEwKSAmJiBwX3RpbWVvdXQ+MCkge1xuXHRcdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6cmVhY2g6Ol9zZXROZXdSb29tSW52aXRhdGlvblRpbWVvdXQpdGltZW91dD0ke3BfdGltZW91dH1gKTtcblx0XHRcdGF1dG9tYXRpY1JlamVjdFRpbWVPdXQ9cF90aW1lb3V0O1xuXHRcdH1cblx0XHRpZiAocF9yZWFzb24pIHtcblx0XHRcdGF1dG9tYXRpY1JlamVjdFJlYXNvbj1wX3JlYXNvbjtcblx0XHR9XG5cdH1cblxuXG5cdC8qKlxuXHQgKiB0ZXN0IGlmIHBfdXNlciAgaXMgYWxyZWFkeSBwcmVzZW50IGluIHRoZSBwYXJ0aWNpcGFudCBsaXN0IG9mIHRoZSByb29tIHBfcm9vbUlkXG5cdCAqXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBwX3Jvb21JZCAtIFRoZSByb29tIHVzZWQgYXMgdGhlIG5hbWUgb2YgYSBicmFuY2ggaXMgdGhlIGRhdGFiYXNlXG5cdCAqIEBwYXJhbSB7c3RyaW5nfSBwX3VzZXIgLSBUaGUgdXNlciBJZFxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBwX2NiIC0gdGhlIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIHRpZ2dlciB0byBnZXQgdGhlIHJlc3VsdC4gSXQgd2lsbCBjb250YWludHMgYSBwYXJhbWV0ZXIgPSB0cnVlIGlzIGFscmVhZHkgcHJlc2VudCwgZmFsc2UgZWl0aGVyLlxuXHQgKi9cblx0ZnVuY3Rpb24gX2lzVXNlclByZXNlbnRJblJvb20ocF9yb29tSWQscF91c2VyLHBfY2IpIHtcblx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjpyZWFjaDo6X2lzVXNlclByZXNlbnRJblJvb20pcF9yb29tSWQ9JHtwX3Jvb21JZH0gcF91c2VyPSR7cF91c2VyfWApO1xuXHRcdGlmICghKHBfcm9vbUlkICYmIHR5cGVvZiBwX3Jvb21JZCA9PSAnc3RyaW5nJykpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoJyhSZWFjaFNESzo6cmVhY2g6Ol9pc1VzZXJQcmVzZW50SW5Sb29tKXBhcmFtZXRlciBwX3Jvb21pZCBpcyBpbmNvcnJlY3QuIEV4cGVjdGluZyBub24gZW1wdHkgc3RyaW5nJyk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGlmICghKHBfdXNlciAmJiB0eXBlb2YgcF91c2VyID09ICdzdHJpbmcnKSkge1xuXHRcdFx0Y29uc29sZS5lcnJvcignKFJlYWNoU0RLOjpyZWFjaDo6X2lzVXNlclByZXNlbnRJblJvb20pcGFyYW1ldGVyIHBfdXNlciBpcyBpbmNvcnJlY3QuIEV4cGVjdGluZyBub24gZW1wdHkgc3RyaW5nJyk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGlmICghKHBfY2IgJiYgdHlwZW9mIHBfY2IgPT0gJ2Z1bmN0aW9uJykpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoJyhSZWFjaFNESzo6cmVhY2g6Ol9pc1VzZXJQcmVzZW50SW5Sb29tKXBhcmFtZXRlciBwX2NiIGlzIGluY29ycmVjdC4gaWYgZGVmaW5lZCwgZXhwZWN0aW5nIGEgZnVuY3Rpb24nKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0ZGF0YXJlZnMuZ2V0Um9vbXMoKS5jaGlsZChgJHtwX3Jvb21JZH0vcGFydGljaXBhbnRMaXN0LyR7cF91c2VyfS93YXNJbnNpZGVSb29tYCkub25jZSgndmFsdWUnLCAoc25hcHNob3QpID0+IHtcblx0XHRcdGNvbnN0IHdhc1ByZXNlbnQgPSAoc25hcHNob3QudmFsKCkgIT09IG51bGwpO1xuXHRcdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6cmVhY2g6Ol9pc1VzZXJQcmVzZW50SW5Sb29tKXBfcm9vbUlkPSR7cF9yb29tSWR9LHBfdXNlcj0ke3BfdXNlcn0scmVzdWx0PSR7d2FzUHJlc2VudH1gKTtcblx0XHRcdHBfY2Iod2FzUHJlc2VudCwgcF9yb29tSWQsIHBfdXNlcik7XG5cdFx0fSk7XG5cblx0fVxuXG5cblx0LyoqXG5cdCAqIENhbmNlbHMgdGhlIEludml0ZVxuXHQgKiBAcGFyYW0ge3N0cmluZ30gcF9yb29tSWQgLSBUaGUgcm9vbSBJZCBvZiB0aGUgSW52aXRlXG5cdCAqIEBwYXJhbSB7YXJyYXlbc3RpbmddfSBwX2d1ZXN0SWRzIC0gb3B0aW9uYWwgOiBBbiBhcnJheSBwb3NzZXNzaW5nIHRoZSBpZGVudGlmaWVycyBvZiB0aGUgaW52aXRlZXMuIChpZiB1bmRlZmluZWQgLCAgYWxsIGludml0ZWUgd2lsbCBoYXZlIHRoZWlyIEludml0ZSBjYW5jZWxlZClcblx0ICogQHBhcmFtIHtzdHJpbmd9IGludml0ZUlkIC0gVGhlIGludml0ZSBpZGVudGlmaWVyXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb259IHBfY2IgLSBUaGUgY2FsbGJhY2sgdHJpZ2dlcmVkIHdoZW4gdGhlIG9wZXJhdGlvbiBpcyBjb21wbGV0ZSAuIHRoaXMgY2FsbGJhY2sgd2lsbCBjb250YWludCBhcyBwYXJhbWV0ZXIgdGhlIHJlbGF0ZWQgZ3Vlc3RJZFxuXHQgKi9cblx0ZnVuY3Rpb24gX2NhbmNlbEludml0YXRpb24ocF9yb29tSWQsIHBfZ3Vlc3RJZHMsIHBfY2IpIHtcblx0XHRpZiAoIShwX3Jvb21JZCAmJiB0eXBlb2YgcF9yb29tSWQgPT0gJ3N0cmluZycpKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKCcoUmVhY2hTREs6OnJlYWNoOjpfY2FuY2VsSW52aXRhdGlvbilwYXJhbWV0ZXIgcF9yb29taWQgaXMgaW5jb3JyZWN0LiBFeHBlY3Rpbmcgbm9uIGVtcHR5IHN0cmluZycpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRpZiAocF9ndWVzdElkcyAmJiAhIHBfZ3Vlc3RJZHMgaW5zdGFuY2VvZiBBcnJheSApIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoJyhSZWFjaFNESzo6cmVhY2g6Ol9jYW5jZWxJbnZpdGF0aW9uKXBhcmFtZXRlciBwX2d1ZXN0SWRzIGlzIGluY29ycmVjdC4gRXhwZWN0aW5nIGFuIEFycmF5Jyk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGNvbnNvbGUubG9nKGAgKFJlYWNoU0RLOjpyZWFjaDo6X2NhbmNlbEludml0YXRpb24pcF9yb29tSWQ9JHtwX3Jvb21JZH0sIHBfZ3Vlc3RJZHM9JHtKU09OLnN0cmluZ2lmeShwX2d1ZXN0SWRzKX1gKTtcblx0XHRpZiAobU91dGdvaW5nSW52aXRlcyAmJiBtT3V0Z29pbmdJbnZpdGVzW3Bfcm9vbUlkXSkge1xuXHRcdFx0aWYgKHBfZ3Vlc3RJZHMpIHtcblx0XHRcdFx0cF9ndWVzdElkcy5mb3JFYWNoKChndWVzdElkLCBpKSA9PiB7XG5cdFx0XHRcdFx0aWYgKCEoZ3Vlc3RJZCAmJiB0eXBlb2YgZ3Vlc3RJZCA9PSAnc3RyaW5nJykpIHtcblx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoYChSZWFjaFNESzo6cmVhY2g6Omludml0ZVRvUm9vbSlwYXJhbWV0ZXIgcF9ndWVzdElkc1ske2l9XSBpcyBpbmNvcnJlY3QuIEV4cGVjdGluZyBub24gZW1wdHkgc3RyaW5nYCk7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChtT3V0Z29pbmdJbnZpdGVzW3Bfcm9vbUlkXVtndWVzdElkXSkge1xuXHRcdFx0XHRcdFx0aWYgKG1PdXRnb2luZ0ludml0ZXNbcF9yb29tSWRdW2d1ZXN0SWRdLkludml0ZURhdGFyZWYpIHtcblx0XHRcdFx0XHRcdFx0bU91dGdvaW5nSW52aXRlc1twX3Jvb21JZF1bZ3Vlc3RJZF0uSW52aXRlRGF0YXJlZi5vbkRpc2Nvbm5lY3QoKS5jYW5jZWwoKTtcblx0XHRcdFx0XHRcdFx0aWYgKG1PdXRnb2luZ0ludml0ZXNbcF9yb29tSWRdW2d1ZXN0SWRdLkludml0ZUNoYW5nZWRDYiAmJiB0eXBlb2YgbU91dGdvaW5nSW52aXRlc1twX3Jvb21JZF1bZ3Vlc3RJZF0uSW52aXRlQ2hhbmdlZENiID09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRcdFx0XHRtT3V0Z29pbmdJbnZpdGVzW3Bfcm9vbUlkXVtndWVzdElkXS5JbnZpdGVEYXRhcmVmLm9mZignY2hpbGRfY2hhbmdlZCcsIG1PdXRnb2luZ0ludml0ZXNbcF9yb29tSWRdW2d1ZXN0SWRdLkludml0ZUNoYW5nZWRDYik7XG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRtT3V0Z29pbmdJbnZpdGVzW3Bfcm9vbUlkXVtndWVzdElkXS5JbnZpdGVEYXRhcmVmLm9uY2UoJ3ZhbHVlJywgKGRhdGFTbmFwc2hvdCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGxldCBjYl9zdGF0dXMsIGNiX2d1ZXN0SWQsIGNiX3Jvb21JZDtcblx0XHRcdFx0XHRcdFx0XHRpZiAoZGF0YVNuYXBzaG90ICYmIGRhdGFTbmFwc2hvdC52YWwoKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y2Jfc3RhdHVzPSBkYXRhU25hcHNob3QudmFsKCkuc3RhdHVzO1xuXHRcdFx0XHRcdFx0XHRcdFx0Y2Jfcm9vbUlkPSBkYXRhU25hcHNob3QudmFsKCkucm9vbTtcblx0XHRcdFx0XHRcdFx0XHRcdGNiX2d1ZXN0SWQ9IGRhdGFTbmFwc2hvdC5yZWYoKS5wYXJlbnQoKS5uYW1lKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoY2Jfc3RhdHVzICYmIGNiX3N0YXR1cz09PUlOVklUQVRJT05fT05HT0lORykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRtT3V0Z29pbmdJbnZpdGVzW2NiX3Jvb21JZF1bY2JfZ3Vlc3RJZF0uSW52aXRlRGF0YXJlZi51cGRhdGUoe1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRpbWVzdGFtcF9lbmQ6IFdlYmNvbS5TZXJ2ZXJWYWx1ZS5USU1FU1RBTVAsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0c3RhdHVzOiBJTlZJVEFUSU9OX0NBTkNFTEVEXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAobU91dGdvaW5nSW52aXRlc1tjYl9yb29tSWRdW2NiX2d1ZXN0SWRdLnN0YXR1c0NoYW5nZWRDYiAmJiB0eXBlb2YgbU91dGdvaW5nSW52aXRlc1tjYl9yb29tSWRdW2NiX2d1ZXN0SWRdLnN0YXR1c0NoYW5nZWRDYiA9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bU91dGdvaW5nSW52aXRlc1tjYl9yb29tSWRdW2NiX2d1ZXN0SWRdLnN0YXR1c0NoYW5nZWRDYihjYl9yb29tSWQsIGNiX2d1ZXN0SWQsIElOVklUQVRJT05fQ0FOQ0VMRUQpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OnJlYWNoOjpfY2FuY2VsSW52aXRhdGlvbilkZWxldGluZyBJbnZpdGUgdG8gcm9vbSAke2NiX3Jvb21JZH0gZm9yIGludml0ZWUgJHtjYl9ndWVzdElkfWApO1xuXHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc29sZS53YXJuKGAoUmVhY2hTREs6OnJlYWNoOjpfY2FuY2VsSW52aXRhdGlvbiljYW5ub3QgZGVsZXRlIGludGl2YXRpb24gdG8gcm9vbSAke2NiX3Jvb21JZH0gZm9yIGd1ZXN0ICR7Y2JfZ3Vlc3RJZH0gSW52aXRhdGlvbiBoYXMgYmVlbiByZW1vdmVkL3JlamVjdGVkL2FjY2VwdGVkYCk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdGRlbGV0ZSBtT3V0Z29pbmdJbnZpdGVzW3Bfcm9vbUlkXVtndWVzdElkXTtcblx0XHRcdFx0XHRcdFx0XHRpZiAocF9jYiAmJiB0eXBlb2YgcF9jYj09J2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdFx0XHRcdFx0cF9jYihndWVzdElkKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0pO1xuXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRkZWxldGUgbU91dGdvaW5nSW52aXRlc1twX3Jvb21JZF1bZ3Vlc3RJZF07XG5cdFx0XHRcdFx0XHRcdGlmIChwX2NiICYmIHR5cGVvZiBwX2NiPT0nZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0XHRcdFx0cF9jYihndWVzdElkKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGlmIChwX2NiICYmIHR5cGVvZiBwX2NiPT0nZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0XHRcdHBfY2IoZ3Vlc3RJZCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0T2JqZWN0LmtleXMobU91dGdvaW5nSW52aXRlc1twX3Jvb21JZF0pLmZvckVhY2goKGludml0ZWUpID0+IHtcblx0XHRcdFx0XHRfY2FuY2VsSW52aXRhdGlvbihwX3Jvb21JZCwgW2ludml0ZWVdLCBwX2NiKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnNvbGUud2FybihgKFJlYWNoU0RLOjpyZWFjaDo6X2NhbmNlbEludml0YXRpb24pIEludml0ZSB0byByb29tICR7cF9yb29tSWR9IG5vdCBmb3VuZGApO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBHYXRoZXIgdGhlIGludml0ZWVzIHRvIHRoZSByb29tLlxuXHQgKiBEZWZpbmVzIGEgY2FsbGJhY2sgdG8gdHJpZ2dlciBmb3IgSW52aXRlIGNoYW5nZXMsIGFuZCBjYWxscyBjYWxsYmFja3MgZm9yIHJvb20gaW52aXRlIGFjY2VwdGF0aW9uIG9yIHJlZnVzZS5cblx0ICogRm9yIGVhY2ggaW52aXRlZSBhIG5vZGUgaXMgY3JlYXRlZCBpbiB0aGUgZGF0YWJhc2UgYWJvdXQgdGhlIEludml0ZSBsaXN0LlxuXHQgKiBJbiBhZGR0aW9uLCBhIG5vZGUgaXMgY3JlYXRlZCB0b28gZm9yIGVhY2ggaW52aXRlZSBhYm91dCB0aGUgcGFydGljaXBhbnRMaXN0LlxuXHQgKiBAcGFyYW0ge3N0cmluZ30gcF9yb29tSWQgLSBUaGUgcm9vbSB1c2VkIGFzIHRoZSBuYW1lIG9mIGEgYnJhbmNoIGlzIHRoZSBkYXRhYmFzZVxuXHQgKiBAcGFyYW0ge2FycmF5W3N0aW5nXX0gcF9ndWVzdElkcyAtIEFuIGFycmF5IHBvc3Nlc3NpbmcgdGhlIGlkZW50aWZpZXJzIG9mIHRoZSBpbnZpdGVlc1xuXHQgKiBAcGFyYW0ge3N0cmluZ30gcF90b3BpYyAtIGN1c3RvbSBtZXNzYWdlIGZvciBpbnZpdGF0aW9uXG5cdCAqIEBwYXJhbSB7ZnVuY3Rpb259IHBfc3RhdHVzQ2hhbmdlZENiIC0gb3B0aW9uYWwgOiBjYWxsYmFjayBmdW5jdGlvbiB3aGVuIGFuIGludml0ZWUgYWNjZXB0cy9yZWplY3RlZC9jYW5jZWxlZCB0aGUgSW52aXRlXG5cdCAqL1xuXHRmdW5jdGlvbiBfaW52aXRlVG9Sb29tKHBfcm9vbUlkLCBwX2d1ZXN0SWRzLCBwX3RvcGljLHBfc3RhdHVzQ2hhbmdlZENiKSB7XG5cdFx0aWYgKCEocF9yb29tSWQgJiYgdHlwZW9mIHBfcm9vbUlkID09ICdzdHJpbmcnKSkge1xuXHRcdFx0Y29uc29sZS5lcnJvcignKFJlYWNoU0RLOjpyZWFjaDo6aW52aXRlVG9Sb29tKXBhcmFtZXRlciBwX3Jvb21pZCBpcyBpbmNvcnJlY3QuIEV4cGVjdGluZyBub24gZW1wdHkgc3RyaW5nJyk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGlmICghKHBfdG9waWMgJiYgdHlwZW9mIHBfdG9waWMgPT0gJ3N0cmluZycpKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKCcoUmVhY2hTREs6OnJlYWNoOjppbnZpdGVUb1Jvb20pcGFyYW1ldGVyIHBfdG9waWMgaXMgaW5jb3JyZWN0LiBFeHBlY3Rpbmcgbm9uIGVtcHR5IHN0cmluZycpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRpZiAocF9zdGF0dXNDaGFuZ2VkQ2IgJiYgdHlwZW9mIHBfc3RhdHVzQ2hhbmdlZENiICE9ICdmdW5jdGlvbicpIHtcblx0XHRcdGNvbnNvbGUud2FybignKFJlYWNoU0RLOjpyZWFjaDo6aW52aXRlVG9Sb29tKXBhcmFtZXRlciBwX3N0YXR1c0NoYW5nZWRDYiBpcyBpbmNvcnJlY3QuIGlmIGRlZmluZWQsIGV4cGVjdGluZyBhIGZ1bmN0aW9uJyk7XG5cdFx0fVxuXHRcdGlmICghKHBfZ3Vlc3RJZHMgJiYgcF9ndWVzdElkcyBpbnN0YW5jZW9mIEFycmF5ICkpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoJyhSZWFjaFNESzo6cmVhY2g6Omludml0ZVRvUm9vbSlwYXJhbWV0ZXIgcF9ndWVzdElkcyBpcyBpbmNvcnJlY3QuIEV4cGVjdGluZyBhbiBBcnJheScpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRkYXRhcmVmcy5nZXRSb29tcygpLmNoaWxkKHBfcm9vbUlkKS5jaGlsZCgnY29tbW9uRGF0YUxpc3QnKS51cGRhdGUoe1xuXHRcdFx0c3RhdHVzOlJPT01fU1RBVFVTX09QRU4sXG5cdFx0XHRvd25lcjptZVxuXHRcdH0pO1xuXG5cblx0XHRjb25zdCBfaXNVc2VyUHJlc2VudEluUm9vbUNiID0gKGlzQWxyZWFkeVByZXNlbnQsIHBfcm9vbUlkMiwgcF9ndWVzdElkMikgPT4ge1xuXHRcdFx0aWYgKCFpc0FscmVhZHlQcmVzZW50KSB7XG5cdFx0XHRcdGRhdGFyZWZzLmdldFJvb21zKCkuY2hpbGQoYCR7cF9yb29tSWQyfS9wYXJ0aWNpcGFudExpc3QvJHtwX2d1ZXN0SWQyfWApLnVwZGF0ZSh7XG5cdFx0XHRcdFx0Y29ubmVjdGVkOiBmYWxzZSxcblx0XHRcdFx0XHR3YXNJbnNpZGVSb29tOiBmYWxzZVxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Y29uc3QgX0ludml0ZUNoYW5nZWRDYiA9IChzbmFwc2hvdCkgPT4ge1xuXHRcdFx0Y29uc29sZS5sb2coJyhSZWFjaFNESzo6cmVhY2g6Omludml0ZVRvUm9vbTo6X0ludml0ZUNoYW5nZWRDYiknKTtcblx0XHRcdGlmKHNuYXBzaG90ICYmIHNuYXBzaG90Lm5hbWUoKT09PSdzdGF0dXMnKSB7XG5cdFx0XHRcdGNvbnN0IGNiX2d1ZXN0SWQyID0gc25hcHNob3QucmVmKCkucGFyZW50KCkucGFyZW50KCkubmFtZSgpO1xuXHRcdFx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjpyZWFjaDo6aW52aXRlVG9Sb29tOjpfSW52aXRlQ2hhbmdlZENiKWNiX2d1ZXN0SWQyPSR7Y2JfZ3Vlc3RJZDJ9YCk7XG5cdFx0XHRcdGlmIChtT3V0Z29pbmdJbnZpdGVzICYmIG1PdXRnb2luZ0ludml0ZXNbcF9yb29tSWRdICYmIG1PdXRnb2luZ0ludml0ZXNbcF9yb29tSWRdW2NiX2d1ZXN0SWQyXSAmJiBtT3V0Z29pbmdJbnZpdGVzW3Bfcm9vbUlkXVtjYl9ndWVzdElkMl0uSW52aXRlQ2hhbmdlZENiICkge1xuXHRcdFx0XHRcdG1PdXRnb2luZ0ludml0ZXNbcF9yb29tSWRdW2NiX2d1ZXN0SWQyXS5JbnZpdGVEYXRhcmVmLm9mZignY2hpbGRfY2hhbmdlZCcsIG1PdXRnb2luZ0ludml0ZXNbcF9yb29tSWRdW2NiX2d1ZXN0SWQyXS5JbnZpdGVDaGFuZ2VkQ2IpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHNuYXBzaG90LnJlZigpLnBhcmVudCgpLm9uY2UoJ3ZhbHVlJywoc25hcHNob3QyKSA9PiB7XG5cdFx0XHRcdFx0bGV0IGNiX3N0YXR1cywgY2JfZ3Vlc3RJZCwgY2Jfcm9vbUlkLCBjYl9zdGF0dXNfaW5mbztcblx0XHRcdFx0XHRpZiAoc25hcHNob3QyKSB7XG5cdFx0XHRcdFx0XHRjYl9zdGF0dXM9IHNuYXBzaG90Mi52YWwoKS5zdGF0dXM7XG5cdFx0XHRcdFx0XHRjYl9yb29tSWQ9IHNuYXBzaG90Mi52YWwoKS5yb29tO1xuXHRcdFx0XHRcdFx0Y2Jfc3RhdHVzX2luZm89IHNuYXBzaG90Mi52YWwoKS5zdGF0dXNfaW5mbztcblx0XHRcdFx0XHRcdGNiX2d1ZXN0SWQ9IHNuYXBzaG90Mi5yZWYoKS5wYXJlbnQoKS5uYW1lKCk7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjpyZWFjaDo6aW52aXRlVG9Sb29tOjpfSW52aXRlQ2hhbmdlZENiKXJvb21JZD0ke2NiX3Jvb21JZH0gaW52aXRlZT0ke2NiX2d1ZXN0SWR9IG5ldyBpbnZpdGF0aW9uIHN0YXR1cz0ke2NiX3N0YXR1c30gc3RhdHVzIGluZm89JHtjYl9zdGF0dXNfaW5mb31gKTtcblx0XHRcdFx0XHRcdGlmIChtT3V0Z29pbmdJbnZpdGVzICYmIG1PdXRnb2luZ0ludml0ZXNbY2Jfcm9vbUlkXSAmJiBtT3V0Z29pbmdJbnZpdGVzW2NiX3Jvb21JZF1bY2JfZ3Vlc3RJZF0gJiYgbU91dGdvaW5nSW52aXRlc1tjYl9yb29tSWRdW2NiX2d1ZXN0SWRdLkludml0ZURhdGFyZWYpIHtcblx0XHRcdFx0XHRcdFx0bU91dGdvaW5nSW52aXRlc1tjYl9yb29tSWRdW2NiX2d1ZXN0SWRdLkludml0ZURhdGFyZWYub25EaXNjb25uZWN0KCkuY2FuY2VsKCk7XG5cdFx0XHRcdFx0XHRcdC8vaWYgKG1PdXRnb2luZ0ludml0ZXNbY2Jfcm9vbUlkXVtjYl9ndWVzdElkXS5JbnZpdGVSZW1vdmVDYilcblx0XHRcdFx0XHRcdFx0Ly9cdG1PdXRnb2luZ0ludml0ZXNbY2Jfcm9vbUlkXVtjYl9ndWVzdElkXS5JbnZpdGVEYXRhcmVmLnBhcmVudCgpLm9mZihcImNoaWxkX3JlbW92ZWRcIixtT3V0Z29pbmdJbnZpdGVzW2NiX3Jvb21JZF1bY2JfZ3Vlc3RJZF0uSW52aXRlUmVtb3ZlQ2IpO1xuXHRcdFx0XHRcdFx0XHRpZiAobU91dGdvaW5nSW52aXRlc1tjYl9yb29tSWRdW2NiX2d1ZXN0SWRdLnN0YXR1c0NoYW5nZWRDYiAmJiB0eXBlb2YgbU91dGdvaW5nSW52aXRlc1tjYl9yb29tSWRdW2NiX2d1ZXN0SWRdLnN0YXR1c0NoYW5nZWRDYiA9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0XHRcdFx0bU91dGdvaW5nSW52aXRlc1tjYl9yb29tSWRdW2NiX2d1ZXN0SWRdLnN0YXR1c0NoYW5nZWRDYihjYl9yb29tSWQsY2JfZ3Vlc3RJZCxjYl9zdGF0dXMsY2Jfc3RhdHVzX2luZm8pO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnNvbGUud2FybignKFJlYWNoU0RLOjpyZWFjaDo6aW52aXRlVG9Sb29tOjpfSW52aXRlQ2hhbmdlZENiKWNhbm5vdCByZXRyaWV2ZSBtYXRoaW5nIHBfc3RhdHVzQ2hhbmdlZENiJyk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0ZGVsZXRlIG1PdXRnb2luZ0ludml0ZXNbY2Jfcm9vbUlkXVtjYl9ndWVzdElkXTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdGNvbnNvbGUud2FybignKFJlYWNoU0RLOjpyZWFjaDo6aW52aXRlVG9Sb29tOjpfSW52aXRlQ2hhbmdlZENiKWNhbm5vdCByZXRyaWV2ZSBtYXRoaW5nIG1PdXRnb2luZ0ludml0ZScpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRjb25zb2xlLndhcm4oJyhSZWFjaFNESzo6cmVhY2g6Omludml0ZVRvUm9vbTo6X0ludml0ZUNoYW5nZWRDYiljYW5ub3QgcmV0cmlldmUgaW52aXRhdGlvbicpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRcdHBfZ3Vlc3RJZHMuZm9yRWFjaCgobUd1ZXN0SWQsIGkpID0+IHtcblx0XHRcdGlmICghKG1HdWVzdElkICYmIHR5cGVvZiBtR3Vlc3RJZCA9PSAnc3RyaW5nJykpIHtcblx0XHRcdFx0Y29uc29sZS5lcnJvcihgKFJlYWNoU0RLOjpyZWFjaDo6aW52aXRlVG9Sb29tKXBhcmFtZXRlciBwX2d1ZXN0SWRzWyR7aX1dIGlzIGluY29ycmVjdC4gRXhwZWN0aW5nIG5vbiBlbXB0eSBzdHJpbmdgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OnJlYWNoOjppbnZpdGVUb1Jvb20pcm9vbUlkPSR7cF9yb29tSWR9IGludml0ZWU9JHttR3Vlc3RJZC50b1N0cmluZygpfWApO1xuXG5cdFx0XHRcdGlmIChtT3V0Z29pbmdJbnZpdGVzW3Bfcm9vbUlkXSAmJiBtT3V0Z29pbmdJbnZpdGVzW3Bfcm9vbUlkXVttR3Vlc3RJZF0pIHtcblx0XHRcdFx0XHQvL2ludml0YXRpb24gaXMgYWxyZWFkeSBleGlzdGluZyAtPiBjYW5jZWwgaXRcblx0XHRcdFx0XHQvL2lmIChtT3V0Z29pbmdJbnZpdGVzW3Bfcm9vbUlkXVttR3Vlc3RJZF0uSW52aXRlRGF0YXJlZiAmJiBtT3V0Z29pbmdJbnZpdGVzW3Bfcm9vbUlkXVttR3Vlc3RJZF0uSW52aXRlUmVtb3ZlQ2IpICBtT3V0Z29pbmdJbnZpdGVzW3Bfcm9vbUlkXVttR3Vlc3RJZF0uSW52aXRlRGF0YXJlZi5vZmYoXCJjaGlsZF9yZW1vdmVkXCIsbU91dGdvaW5nSW52aXRlc1twX3Jvb21JZF1bbUd1ZXN0SWRdLkludml0ZVJlbW92ZUNiKTtcblx0XHRcdFx0XHQvL2lmIChtT3V0Z29pbmdJbnZpdGVzW3Bfcm9vbUlkXVttR3Vlc3RJZF0uSW52aXRlRGF0YXJlZiAmJiBtT3V0Z29pbmdJbnZpdGVzW3Bfcm9vbUlkXVttR3Vlc3RJZF0uSW52aXRlQ2hhbmdlZENiKSBtT3V0Z29pbmdJbnZpdGVzW3Bfcm9vbUlkXVttR3Vlc3RJZF0uSW52aXRlRGF0YXJlZi5vZmYoXCJjaGlsZF9jaGFuZ2VkXCIsbU91dGdvaW5nSW52aXRlc1twX3Jvb21JZF1bbUd1ZXN0SWRdLkludml0ZUNoYW5nZWRDYik7XG5cdFx0XHRcdFx0X2NhbmNlbEludml0YXRpb24ocF9yb29tSWQsIFttR3Vlc3RJZF0sIChwX2d1ZXN0SWQpID0+IHtcblx0XHRcdFx0XHRcdGlmIChwX2d1ZXN0SWQgJiYgcF9ndWVzdElkID09PSBtR3Vlc3RJZCkge1xuXHRcdFx0XHRcdFx0XHRfaW52aXRlVG9Sb29tKHBfcm9vbUlkLCBbcF9ndWVzdElkXSwgcF90b3BpYyxwX3N0YXR1c0NoYW5nZWRDYik7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCFtT3V0Z29pbmdJbnZpdGVzW3Bfcm9vbUlkXSkge1xuXHRcdFx0XHRcdG1PdXRnb2luZ0ludml0ZXNbcF9yb29tSWRdID0gW107XG5cdFx0XHRcdH1cblx0XHRcdFx0Ly9pZiAoIW1PdXRnb2luZ0ludml0ZXNbcF9yb29tSWRdW21HdWVzdElkXSkge1xuXHRcdFx0XHRtT3V0Z29pbmdJbnZpdGVzW3Bfcm9vbUlkXVttR3Vlc3RJZF0gPSB7fTtcblx0XHRcdFx0Ly99XG5cblx0XHRcdFx0X2lzVXNlclByZXNlbnRJblJvb20ocF9yb29tSWQsIG1HdWVzdElkLCBfaXNVc2VyUHJlc2VudEluUm9vbUNiKTtcblxuXHRcdFx0XHRtT3V0Z29pbmdJbnZpdGVzW3Bfcm9vbUlkXVttR3Vlc3RJZF0uSW52aXRlRGF0YXJlZiA9IGRhdGFyZWYuY2hpbGQoJ2ludml0YXRpb25MaXN0JykuY2hpbGQobUd1ZXN0SWQpLnB1c2goe1xuXHRcdFx0XHRcdGZyb206bWUsXG5cdFx0XHRcdFx0cm9vbTpwX3Jvb21JZCxcblx0XHRcdFx0XHR0aW1lc3RhbXBfY3JlYXRpb246V2ViY29tLlNlcnZlclZhbHVlLlRJTUVTVEFNUCxcblx0XHRcdFx0XHR0b3BpYzpwX3RvcGljLFxuXHRcdFx0XHRcdHN0YXR1czpJTlZJVEFUSU9OX09OR09JTkdcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OnJlYWNoOjppbnZpdGVUb1Jvb20pSW52aXRlRGF0YXJlZj0ke21PdXRnb2luZ0ludml0ZXNbcF9yb29tSWRdW21HdWVzdElkXS5JbnZpdGVEYXRhcmVmLnRvU3RyaW5nKCl9YCk7XG5cblx0XHRcdFx0Ly9tT3V0Z29pbmdJbnZpdGVzW3Bfcm9vbUlkXVttR3Vlc3RJZF0uSW52aXRlUmVtb3ZlQ2IgPSBfSW52aXRhdGlvblJlbW92ZUNiO1xuXHRcdFx0XHRtT3V0Z29pbmdJbnZpdGVzW3Bfcm9vbUlkXVttR3Vlc3RJZF0uSW52aXRlQ2hhbmdlZENiID0gX0ludml0ZUNoYW5nZWRDYjtcblx0XHRcdFx0bU91dGdvaW5nSW52aXRlc1twX3Jvb21JZF1bbUd1ZXN0SWRdLkludml0ZURhdGFyZWYub24oJ2NoaWxkX2NoYW5nZWQnLCBtT3V0Z29pbmdJbnZpdGVzW3Bfcm9vbUlkXVttR3Vlc3RJZF0uSW52aXRlQ2hhbmdlZENiKTtcblx0XHRcdFx0Ly9tT3V0Z29pbmdJbnZpdGVzW3Bfcm9vbUlkXVttR3Vlc3RJZF0uSW52aXRlRGF0YXJlZi5wYXJlbnQoKS5vbihcImNoaWxkX3JlbW92ZWRcIixtT3V0Z29pbmdJbnZpdGVzW3Bfcm9vbUlkXVttR3Vlc3RJZF0uSW52aXRlUmVtb3ZlQ2IpO1xuXHRcdFx0XHRtT3V0Z29pbmdJbnZpdGVzW3Bfcm9vbUlkXVttR3Vlc3RJZF0uc3RhdHVzQ2hhbmdlZENiID0gcF9zdGF0dXNDaGFuZ2VkQ2I7XG5cblx0XHRcdFx0Ly8gY2FuY2VsZWQgSW52aXRlIG9uIGRpc2Nvbm5lY3Rpb25cblx0XHRcdFx0bU91dGdvaW5nSW52aXRlc1twX3Jvb21JZF1bbUd1ZXN0SWRdLkludml0ZURhdGFyZWYub25EaXNjb25uZWN0KCkudXBkYXRlKHtcblx0XHRcdFx0XHR0aW1lc3RhbXBfZW5kOiBXZWJjb20uU2VydmVyVmFsdWUuVElNRVNUQU1QLFxuXHRcdFx0XHRcdHN0YXR1czogSU5WSVRBVElPTl9DQU5DRUxFRFxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cblx0LyoqXG5cdCAqIE1ha2VzIGFuIGludml0ZSBhY2NlcHRlZCwgYW5kIGRlZmluZXMgdGhlIFwiYWNjZXB0ZWRcIiBmbGFnIG9mIHRoaXMgaW52aXRlIGF0IHRydWUgaW4gdGhlIGRhdGFiYXNlLlxuXHQgKiBAcGFyYW0gcF9pbnZpdGF0aW9uIC1cblx0ICovXG5cdGZ1bmN0aW9uIF9hY2NlcHRJbnZpdGF0aW9uKHBfaW52aXRhdGlvbikge1xuXHRcdGNvbnN0IGludml0ZUlkID0gT2JqZWN0LmtleXMocF9pbnZpdGF0aW9uKVswXTtcblx0XHRpZiAoIWludml0ZUlkKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKCcoUmVhY2hTREs6OnJlYWNoOjpfYWNjZXB0SW52aXRhdGlvbilwYXJhbWV0ZXIgcF9pbnZpdGF0aW9uIGlzIGluY29ycmVjdC4gY2Fubm90IGdldCBpbnZpdGF0aW9uIElkJyk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGlmICghcF9pbnZpdGF0aW9uW2ludml0ZUlkXSkge1xuXHRcdFx0Y29uc29sZS5lcnJvcignKFJlYWNoU0RLOjpyZWFjaDo6X2FjY2VwdEludml0YXRpb24pcGFyYW1ldGVyIHBfaW52aXRhdGlvbiBpcyBpbmNvcnJlY3QuIGNhbm5vdCBnZXQgaW52aXRhdGlvbiBkYXRhJyk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0ZGF0YXJlZi5jaGlsZChgaW52aXRhdGlvbkxpc3QvJHttZX0vJHtpbnZpdGVJZH1gKS5vbmNlKCd2YWx1ZScsIChkYXRhU25hcHNob3QpID0+IHtcblx0XHRcdGxldCBjYl9zdGF0dXMsXG5cdFx0XHRcdGNiX2d1ZXN0SWQsXG5cdFx0XHRcdGNiX2ludml0YXRpb25JZDtcblxuXHRcdFx0aWYgKGRhdGFTbmFwc2hvdCAmJiBkYXRhU25hcHNob3QudmFsKCkpIHtcblx0XHRcdFx0Y2JfaW52aXRhdGlvbklkID0gZGF0YVNuYXBzaG90Lm5hbWUoKTtcblx0XHRcdFx0Y2Jfc3RhdHVzID0gZGF0YVNuYXBzaG90LnZhbCgpLnN0YXR1cztcblx0XHRcdFx0Y2JfZ3Vlc3RJZCA9IGRhdGFTbmFwc2hvdC5yZWYoKS5wYXJlbnQoKS5uYW1lKCk7XG5cdFx0XHRcdGlmIChjYl9zdGF0dXMgJiYgY2Jfc3RhdHVzPT09SU5WSVRBVElPTl9PTkdPSU5HKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6cmVhY2g6Ol9hY2NlcHRJbnZpdGF0aW9uKWludml0ZUlkPSR7aW52aXRlSWR9LGRhdGE9JHtKU09OLnN0cmluZ2lmeShwX2ludml0YXRpb25baW52aXRlSWRdKX1gKTtcblx0XHRcdFx0XHRkYXRhcmVmLmNoaWxkKGBpbnZpdGF0aW9uTGlzdC8ke2NiX2d1ZXN0SWR9LyR7Y2JfaW52aXRhdGlvbklkfWApLnVwZGF0ZSh7XG5cdFx0XHRcdFx0XHR0aW1lc3RhbXBfZW5kOiBXZWJjb20uU2VydmVyVmFsdWUuVElNRVNUQU1QLFxuXHRcdFx0XHRcdFx0c3RhdHVzOiBJTlZJVEFUSU9OX0FDQ0VQVEVEXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y29uc29sZS53YXJuKGAoUmVhY2hTREs6OnJlYWNoOjpfYWNjZXB0SW52aXRhdGlvbilpbnZpdGVJZD0ke2NiX2ludml0YXRpb25JZH0sZGF0YT0ke0pTT04uc3RyaW5naWZ5KHBfaW52aXRhdGlvbltpbnZpdGVJZF0pfSwgY2Fubm90IGJlIGFjY2VwdGVkLiBJdCBoYXMgYmVlbiByZW1vdmVkIG9yIGNhbmNlbGVkYCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZWZ1c2VzIHRoZSBpbnZpdGUgYW5kIHNldCB0aGUgXCJhY2NlcHRlZFwiIGZsYWcgb2YgdGhpcyBpbnZpdGUgaW4gdGhlIGRhdGFiYXNlIHRvIGZhbHNlXG5cdCAqIEBwYXJhbSBwX2ludml0YXRpb24gLSBUaGUgaW52aXRlIGRhdGFcblx0ICogQHBhcmFtIHtzdHJpbmd9IHBfcmVhc29uIC0gb3B0aW9uYWwgaW5mbyBhYm91dCB0aGUgcmVqZWN0XG5cdCAqL1xuXHRmdW5jdGlvbiBfcmVqZWN0SW52aXRhdGlvbihwX2ludml0YXRpb24scF9yZWFzb24pIHtcblx0XHRjb25zdCBpbnZpdGVJZCA9IE9iamVjdC5rZXlzKHBfaW52aXRhdGlvbilbMF07XG5cdFx0aWYgKCFpbnZpdGVJZCkge1xuXHRcdFx0Y29uc29sZS5lcnJvcignKFJlYWNoU0RLOjpyZWFjaDo6X3JlamVjdEludml0YXRpb24pcGFyYW1ldGVyIHBfaW52aXRhdGlvbiBpcyBpbmNvcnJlY3QuIGNhbm5vdCBnZXQgaW52aXRhdGlvbiBJZCcpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRpZiAoIXBfaW52aXRhdGlvbltpbnZpdGVJZF0pIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoJyhSZWFjaFNESzo6cmVhY2g6Ol9yZWplY3RJbnZpdGF0aW9uKXBhcmFtZXRlciBwX2ludml0YXRpb24gaXMgaW5jb3JyZWN0LiBjYW5ub3QgZ2V0IGludml0YXRpb24gZGF0YScpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRkYXRhcmVmLmNoaWxkKGBpbnZpdGF0aW9uTGlzdC8ke21lfS8ke2ludml0ZUlkfWApLm9uY2UoJ3ZhbHVlJywgKGRhdGFTbmFwc2hvdCkgPT4ge1xuXHRcdFx0bGV0IGNiX3N0YXR1cyxjYl9ndWVzdElkLGNiX2ludml0YXRpb25JZDtcblx0XHRcdGlmIChkYXRhU25hcHNob3QgJiYgZGF0YVNuYXBzaG90LnZhbCgpKSB7XG5cdFx0XHRcdGNiX2ludml0YXRpb25JZCA9IGRhdGFTbmFwc2hvdC5uYW1lKCk7XG5cdFx0XHRcdGNiX3N0YXR1cyA9IGRhdGFTbmFwc2hvdC52YWwoKS5zdGF0dXM7XG5cdFx0XHRcdGNiX2d1ZXN0SWQgPSBkYXRhU25hcHNob3QucmVmKCkucGFyZW50KCkubmFtZSgpO1xuXHRcdFx0XHRpZiAoY2Jfc3RhdHVzICYmIGNiX3N0YXR1cyA9PT0gSU5WSVRBVElPTl9PTkdPSU5HKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6cmVhY2g6Ol9yZWplY3RJbnZpdGF0aW9uKWludml0ZUlkPSR7aW52aXRlSWR9LGRhdGE9JHtKU09OLnN0cmluZ2lmeShwX2ludml0YXRpb25baW52aXRlSWRdKX1gKTtcblx0XHRcdFx0XHRpZiAocF9yZWFzb24pIHtcblx0XHRcdFx0XHRcdGRhdGFyZWYuY2hpbGQoYGludml0YXRpb25MaXN0LyR7Y2JfZ3Vlc3RJZH0vJHtjYl9pbnZpdGF0aW9uSWR9YCkudXBkYXRlKHtcblx0XHRcdFx0XHRcdFx0dGltZXN0YW1wX2VuZDogV2ViY29tLlNlcnZlclZhbHVlLlRJTUVTVEFNUCxcblx0XHRcdFx0XHRcdFx0c3RhdHVzX2luZm86IHBfcmVhc29uLFxuXHRcdFx0XHRcdFx0XHRzdGF0dXM6IElOVklUQVRJT05fUkVKRUNURURcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRkYXRhcmVmLmNoaWxkKGBpbnZpdGF0aW9uTGlzdC8ke2NiX2d1ZXN0SWR9LyR7Y2JfaW52aXRhdGlvbklkfWApLnVwZGF0ZSh7XG5cdFx0XHRcdFx0XHRcdHRpbWVzdGFtcF9lbmQ6IFdlYmNvbS5TZXJ2ZXJWYWx1ZS5USU1FU1RBTVAsXG5cdFx0XHRcdFx0XHRcdHN0YXR1czogSU5WSVRBVElPTl9SRUpFQ1RFRFxuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNvbnNvbGUud2FybihgKFJlYWNoU0RLOjpyZWFjaDo6X3JlamVjdEludml0YXRpb24paW52aXRlSWQ9JHtjYl9pbnZpdGF0aW9uSWR9LGRhdGE9JHtKU09OLnN0cmluZ2lmeShwX2ludml0YXRpb25baW52aXRlSWRdKX0sIGNhbm5vdCBiZSByZWplY3RlZC4gSXQgaGFzIGJlZW4gcmVtb3ZlZCBvciBjYW5jZWxlZGApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdH1cblxuXHQvKipcblx0ICogY2hlY2sgaWYgdGhlIHJvb20gY29ycmVzcG9uZGluZyB0byB0aGUgaW52aXRhdGlvbiBpcyBhY3RpdmVcblx0ICogQHBhcmFtIHBfaW52aXRhdGlvbiAtIFRoZSBpbnZpdGF0aW9uIERhdGFcblx0ICogQHBhcmFtIHBfY2IgLSBUaGUgY2FsbGJhY2sgdG8gdHJpZ2dlciB0byBnZXQgdGhlIHJlc3VsdC4gdGhpcyBjYWxsYmFjayB3aWxsIGNvbnRhaW5zIHRoZSBwYXJhbWV0ZXIgdHJ1ZSBpcyB0aGUgcm9vbSBpcyBhY3RpdmVcblx0ICovXG5cdGZ1bmN0aW9uIF9pc1Jvb21BY3RpdmUocF9pbnZpdGF0aW9uLHBfY2IpIHtcblx0XHRpZiAocF9pbnZpdGF0aW9uICYmIHBfY2IgJiYgdHlwZW9mIHBfY2IgPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0Y29uc3QgaW52aXRlSWQgPSBPYmplY3Qua2V5cyhwX2ludml0YXRpb24pWzBdO1xuXHRcdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6cmVhY2g6Ol9pc1Jvb21BY3RpdmUpaW52aXRlSWQ9JHtpbnZpdGVJZH1gKTtcblx0XHRcdGNvbnN0IHJvb21JZCA9IHBfaW52aXRhdGlvbltpbnZpdGVJZF0ucm9vbTtcblxuXHRcdFx0ZGF0YXJlZnMuZ2V0Um9vbXMoKS5jaGlsZChgJHtyb29tSWR9L2NvbW1vbkRhdGFMaXN0L3N0YXR1c2ApLm9uY2UoJ3ZhbHVlJywgKHNuYXBzaG90KSA9PiB7XG5cdFx0XHRcdGNvbnN0IG9wZW5lZCA9IHNuYXBzaG90ICYmIHNuYXBzaG90LnZhbCgpICYmIHNuYXBzaG90LnZhbCgpID09PSBST09NX1NUQVRVU19PUEVOO1xuXHRcdFx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjpyZWFjaDo6X2lzUm9vbUFjdGl2ZSlpbnZpdGVJZD0ke2ludml0ZUlkfSByZXN1bHQ9JHtvcGVuZWR9YCk7XG5cdFx0XHRcdHBfY2Iob3BlbmVkKTtcblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBtb3ZlIGFsbCB0aGUgbm9uIGFjdGl2ZSBpbnZpdGF0aW9ucyBwcm9jZXNzZWQgb2YgYW4gdXNlciB0byB0aGUgaW52aXRhdGlvbiBMaXN0IEhpc3Rvcnk6XG5cdCAqIEFsbCBpbnZpdGF0aW9ucyB3aXRoIHN0YXR1cyBDYW5jZWxlZCBvciBSZWplY3RlZCB3aWxsIGJlIGFyY2hpdmVkXG5cdCAqIEFsbCBpbnZpdGF0aW9uIHdpdGggc3RhdHVzIE9uZ29pbmcgb3IgQWNjZXB0ZWQgV2lsbCBiZSBhcmNoaXZlZCBpZiB0aGUgY29ycmVzcG9uZGluZyByb29tIGlzIGNsb3NlZFxuXHQgKiBJZiBhbiBpbnZpdGF0aW9uIHdpdGggc3RhdHVzIFwiT25nb2luZ1wiIGlzIGFyY2hpdmVkLCBpdHMgc3RhdHVzIHdpbGwgYmUgc2V0IHRvIGNhbmNlbGVkXG5cdCAqIEBwYXJhbSBwX3VzZXJJZCAtIFRoZSB1c2VyIElkXG5cdCAqIEBwYXJhbSBwX2NiIC0gVGhpcyBjYWxsYmFjayBpcyB0cmlnZ2VyIHdoZW4gYXJjaGl2ZSBpcyBjb21wbGV0ZVxuXHQgKi9cblx0ZnVuY3Rpb24gX2FyY2hpdmVJbnZpdGF0aW9ucyhwX3VzZXJJZCwgcF9jYikge1xuXHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OnJlYWNoOjpfYXJjaGl2ZUludml0YXRpb25zKXVzZXJJZD0ke3BfdXNlcklkfWApO1xuXHRcdGRhdGFyZWYuY2hpbGQoYGludml0YXRpb25MaXN0LyR7bWV9YCkub25jZSgndmFsdWUnLCAoc25hcHNob3QpID0+IHtcblx0XHRcdGlmIChzbmFwc2hvdCAmJiBzbmFwc2hvdC5oYXNDaGlsZHJlbigpKSB7XG5cdFx0XHRcdGNvbnN0IG5iQ2hpbGRyZW4gPSBzbmFwc2hvdC5udW1DaGlsZHJlbigpO1xuXHRcdFx0XHRsZXQgbmJDaGlsZHJlblByb2Nlc3NlZCA9IDA7XG5cdFx0XHRcdHNuYXBzaG90LmZvckVhY2goKGNoaWxkU25hcHNob3QpID0+IHtcblx0XHRcdFx0XHRpZiAoY2hpbGRTbmFwc2hvdCAmJiBjaGlsZFNuYXBzaG90LnZhbCgpKSB7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjpyZWFjaDo6X2FyY2hpdmVJbnZpdGF0aW9ucyl1c2VySWQ9JHtwX3VzZXJJZH0gaW52aXRlSWQ9JHtjaGlsZFNuYXBzaG90Lm5hbWUoKX1gKTtcblx0XHRcdFx0XHRcdGlmIChjaGlsZFNuYXBzaG90LnZhbCgpLnN0YXR1cyA9PT0gSU5WSVRBVElPTl9SRUpFQ1RFRCB8fCBjaGlsZFNuYXBzaG90LnZhbCgpLnN0YXR1cyA9PT0gSU5WSVRBVElPTl9DQU5DRUxFRCApIHtcblx0XHRcdFx0XHRcdFx0ZGF0YXJlZi5jaGlsZChgaW52aXRhdGlvbkxpc3RIaXN0b3J5LyR7cF91c2VySWR9LyR7Y2hpbGRTbmFwc2hvdC5uYW1lKCl9YCkudXBkYXRlKGNoaWxkU25hcHNob3QudmFsKCkpO1xuXHRcdFx0XHRcdFx0XHRjaGlsZFNuYXBzaG90LnJlZigpLnJlbW92ZSgpO1xuXHRcdFx0XHRcdFx0XHRuYkNoaWxkcmVuUHJvY2Vzc2VkKys7XG5cdFx0XHRcdFx0XHRcdGlmIChuYkNoaWxkcmVuUHJvY2Vzc2VkPj1uYkNoaWxkcmVuICYmIHBfY2IgJiYgdHlwZW9mIHBfY2IgPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdFx0XHRcdHBfY2IoKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Y29uc3QgaW52aXRlRGF0YSA9IHt9O1xuXHRcdFx0XHRcdFx0XHRpbnZpdGVEYXRhW2NoaWxkU25hcHNob3QubmFtZSgpXSA9IGNoaWxkU25hcHNob3QudmFsKCk7XG5cdFx0XHRcdFx0XHRcdF9pc1Jvb21BY3RpdmUoaW52aXRlRGF0YSwgKGlzQWN0aXZlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGlzQWN0aXZlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRuYkNoaWxkcmVuUHJvY2Vzc2VkKys7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAobmJDaGlsZHJlblByb2Nlc3NlZD49bmJDaGlsZHJlbiAmJiBwX2NiICYmIHR5cGVvZiBwX2NiID09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0cF9jYigpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoY2hpbGRTbmFwc2hvdC52YWwoKS5zdGF0dXM9PT1JTlZJVEFUSU9OX09OR09JTkcpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y29uc3QgbmV3VmFsdWUgPSBjaGlsZFNuYXBzaG90LnZhbCgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRuZXdWYWx1ZS5zdGF0dXMgPSBJTlZJVEFUSU9OX0NBTkNFTEVEO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRkYXRhcmVmLmNoaWxkKGBpbnZpdGF0aW9uTGlzdEhpc3RvcnkvJHtwX3VzZXJJZH0vJHtjaGlsZFNuYXBzaG90Lm5hbWUoKX1gKS5zZXQobmV3VmFsdWUpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZGF0YXJlZi5jaGlsZChgaW52aXRhdGlvbkxpc3RIaXN0b3J5LyR7cF91c2VySWR9LyR7Y2hpbGRTbmFwc2hvdC5uYW1lKCl9YCkuc2V0KGNoaWxkU25hcHNob3QudmFsKCkpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0Y2hpbGRTbmFwc2hvdC5yZWYoKS5yZW1vdmUoKTtcblx0XHRcdFx0XHRcdFx0XHRcdG5iQ2hpbGRyZW5Qcm9jZXNzZWQrKztcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChuYkNoaWxkcmVuUHJvY2Vzc2VkPj1uYkNoaWxkcmVuICYmIHBfY2IgJiYgdHlwZW9mIHBfY2IgPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRwX2NiKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0aWYgKHBfY2IgJiYgdHlwZW9mIHBfY2IgPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdFx0XHRwX2NiKCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYgKHBfY2IgJiYgdHlwZW9mIHBfY2IgPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdHBfY2IoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0fSk7XG5cdH1cblxuXG5cblxuXG5cdC8qKlxuXHQgKiBDbG9zZSB0aGUgcmVhY2ggc2VydmljZSxcblx0ICogZGlzYWJsZXMgYW5kIGRlbGV0ZXMgYW55IGxpc3RlbmVycy9jYWxsYmFjayBkZWZpbmVkLlxuXHQgKiBjYW5jZWwgYWxsIG91dGdvaW5nIGludml0ZSBub3QgYWxyZWFkeSBwcm9jZXNzZWRcblx0ICogZG8gbm90IGltcGFjdCBpbmNvbWluZyBpbnZpdGVcblx0ICovXG5cdGZ1bmN0aW9uIF9jbG9zZSgpIHtcblx0XHRjb25zb2xlLmxvZygnKFJlYWNoU0RLOjpyZWFjaDo6X2Nsb3NlKScpO1xuXG5cdFx0aWYgKG5ld0ludml0ZUNiKSB7XG5cdFx0XHRkYXRhcmVmLmNoaWxkKCdpbnZpdGF0aW9uTGlzdCcpLmNoaWxkKG1lKS5vZmYoJ2NoaWxkX2FkZGVkJyxuZXdJbnZpdGVDYik7XG5cdFx0XHRuZXdJbnZpdGVDYiA9IG51bGw7XG5cdFx0fVxuLy9cdFx0aWYgKG9uUm9vbUludml0ZUNoYW5nZWRDYikge1xuLy9cdFx0XHRkYXRhcmVmLmNoaWxkKFwiaW52aXRhdGlvbkxpc3RcIikuY2hpbGQobWUpLm9mZihcImNoaWxkX2NoYW5nZWRcIixJbnZpdGVDaGFuZ2VkQ2IpO1xuLy9cdFx0XHRvblJvb21JbnZpdGVDaGFuZ2VkQ2IgPSBudWxsO1xuLy9cdFx0fVxuLy9cbi8vXHRcdGlmIChtVGltZW91dE9uTmV3SW52aXRlQ2IpIHtcbi8vXHRcdFx0ZGF0YXJlZi5jaGlsZChcImludml0YXRpb25MaXN0XCIpLmNoaWxkKG1lKS5vZmYoXCJjaGlsZF9hZGRlZFwiLG1UaW1lb3V0T25OZXdJbnZpdGVDYik7XG4vL1x0XHRcdG1UaW1lb3V0T25OZXdJbnZpdGVDYiA9IG51bGw7XG4vL1x0XHR9XG4vL1x0XHRpZiAobVRpbWVvdXRPbkludml0ZUNoYW5nZWRDYikge1xuLy9cdFx0XHRkYXRhcmVmLmNoaWxkKFwiaW52aXRhdGlvbkxpc3RcIikuY2hpbGQobWUpLm9mZihcImNoaWxkX2NoYW5nZWRcIixtVGltZW91dE9uSW52aXRlQ2hhbmdlZENiKTtcbi8vXHRcdFx0bVRpbWVvdXRPbkludml0ZUNoYW5nZWRDYiA9IG51bGw7XG4vL1x0XHR9XG5cblx0XHRpZiAob25Vc2VyQWRkZWRDYikge1xuXHRcdFx0ZGF0YXJlZi5jaGlsZCgndXNlckxpc3QnKS5vZmYoJ2NoaWxkX2FkZGVkJywgb25Vc2VyQWRkZWRDYik7XG5cdFx0XHRvblVzZXJBZGRlZENiID0gbnVsbDtcblx0XHR9XG5cdFx0aWYgKG9uVXNlckNoYW5nZWRDYikge1xuXHRcdFx0ZGF0YXJlZi5jaGlsZCgndXNlckxpc3QnKS5vZmYoJ2NoaWxkX2NoYW5nZWQnLCBvblVzZXJDaGFuZ2VkQ2IpO1xuXHRcdFx0b25Vc2VyQ2hhbmdlZENiID0gbnVsbDtcblx0XHR9XG5cdFx0aWYgKG9uVXNlclJlbW92ZWRDYikge1xuXHRcdFx0ZGF0YXJlZi5jaGlsZCgndXNlckxpc3QnKS5vZmYoJ2NoaWxkX3JlbW92ZWQnLCBvblVzZXJSZW1vdmVkQ2IpO1xuXHRcdFx0b25Vc2VyUmVtb3ZlZENiID0gbnVsbDtcblx0XHR9XG5cblx0XHRpZiAobU91dGdvaW5nSW52aXRlcykge1xuXHRcdFx0bU91dGdvaW5nSW52aXRlcy5mb3JFYWNoKChyb29tSWQpID0+IHtcblx0XHRcdFx0bU91dGdvaW5nSW52aXRlc1tyb29tSWRdLmZvckVhY2goKGludml0ZWUpID0+IHtcblx0XHRcdFx0XHRpZiAoaW52aXRlZS5JbnZpdGVEYXRhcmVmKSB7XG5cdFx0XHRcdFx0XHRpbnZpdGVlLkludml0ZURhdGFyZWYub25EaXNjb25uZWN0KCkuY2FuY2VsKCk7XG5cdFx0XHRcdFx0XHRpbnZpdGVlLkludml0ZURhdGFyZWYudXBkYXRlKHtcblx0XHRcdFx0XHRcdFx0c3RhdHVzOiBJTlZJVEFUSU9OX0NBTkNFTEVELFxuXHRcdFx0XHRcdFx0XHR0aW1lc3RhbXBfZW5kOiBXZWJjb20uU2VydmVyVmFsdWUuVElNRVNUQU1QXG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0XHRtT3V0Z29pbmdJbnZpdGVzID0gW107XG5cdFx0fVxuXG5cdFx0aWYgKGF1dG9tYXRpY1JlamVjdFRpbWVPdXQpIHtcblx0XHRcdGF1dG9tYXRpY1JlamVjdFRpbWVPdXQgPSBudWxsO1xuXHRcdH1cblx0XHRpZiAoYXV0b21hdGljUmVqZWN0UmVhc29uKSB7XG5cdFx0XHRhdXRvbWF0aWNSZWplY3RSZWFzb24gPSBudWxsO1xuXHRcdH1cblxuXHRcdGlmIChtRGV2aWNlSWQpIHtcblx0XHRcdG1EZXZpY2VJZC5yZW1vdmUoKTtcblx0XHRcdG1EZXZpY2VJZCA9IG51bGw7XG5cdFx0fVxuXG5cdH1cblxuXHRpbml0KCk7XG5cdHJldHVybiB7XG5cdFx0LyoqXG5cdFx0ICogUmV0dXJucyB0aGUgdXNlciBpZGVudGlmaWVyIHVzZWQgaW4gdGhlIGRhdGFiYXNlLiBUaGlzIHZhbHVlXG5cdFx0ICogaWRlbnRpZmllcyB0aGUgdXNlciBpZiB0aGUgV2ViY29tYmFzZS5cblx0XHQgKiBAcmV0dXJuIHtzdHJpbmd9IC0gVGhlIHVzZXIgSURcblx0XHQgKi9cblx0XHRnZXRNZTogKCkgPT4ge1xuXHRcdFx0cmV0dXJuIG1lO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogY2hlY2sgaWYgYSB1c2VyIGlzIGNvbm5lY3RlZFxuXHRcdCAqIEBwYXJhbSB7c3RyaW5nfSBwX3VzZXJJZCAtIHRoZSB1c2VyIElkXG5cdFx0ICogQHBhcmFtIHtmdW5jdGlvbn0gcF9jYiAtIHRoZSBjYWxsYmFjayB0cmlnZ2VycyB0byByZXR1cm4gdGhlIHJlc3VsdC4gVGhlIHJlc3VsdCB3aWxsIGJlIHBhc3NlZCBpbiBwYXJhbWV0ZXIgYXMgYm9vbGVhbiA6IHRydWUgPSBjb25uZWN0ZWQgLyBmYWxzZSA9IG5vdCBjb25uZWN0ZWRcblx0XHQgKi9cblx0XHRpc0Nvbm5lY3RlZDogX2lzQ29ubmVjdGVkLFxuXHRcdC8qKlxuXHRcdCAqIGNoZWNrIGlmIGEgdXNlciBpcyByZWdpc3RlclxuXHRcdCAqIEBwYXJhbSB7c3RyaW5nfSBwX3VzZXJJZCAtIHRoZSB1c2VyIElkXG5cdFx0ICogQHBhcmFtIHtmdW5jdGlvbn0gcF9jYiAtIHRoZSBjYWxsYmFjayB0cmlnZ2VycyB0byByZXR1cm4gdGhlIHJlc3VsdC4gVGhlIHJlc3VsdCB3aWxsIGJlIHBhc3NlZCBpbiBwYXJhbWV0ZXIgYXMgYm9vbGVhbiA6IHRydWUgPSByZWdpc3RlcmVkIC8gZmFsc2UgPSBub3QgcmVnaXN0ZXJlZFxuXHRcdCAqL1xuXHRcdGlzUmVnaXN0ZXJlZDogX2lzUmVnaXN0ZXJlZCxcblx0XHQvKipcblx0XHQgKiBzZXQgdGhlIGRldmljZSBzdGF0dXMgKERFVklDRV9TVEFUVVNfQ09OTkVDVEVEKVxuXHRcdCAqIEBwYXJhbSB7c3RyaW5nfSBzdGF0dXMgLSB0aGUgbmV3IHN0YXR1c1xuXHRcdCAqL1xuXHRcdHNldENvbm5lY3RlZFN0YXR1czogX3NldENvbm5lY3RlZFN0YXR1cyxcblx0XHQvKipcblx0XHQgKiBEZWZpbmVzIHRoZSBjYWxsYmFjayB0byB0cmlnZ2VyIHdoZW4gYSBuZXcgdXNlciBpcyBhZGRlZFxuXHRcdCAqIEBwYXJhbSB7ZnVuY3Rpb259IHBfY2IgLSBUaGUgY2FsbGJhY2sgdG8gdXNlXG5cdFx0ICovXG5cdFx0c2V0T25Vc2VyQWRkZWQ6IF9zZXRPblVzZXJBZGRlZCxcblx0XHQvKipcblx0XHQgKiBEZWZpbmVzIHRoZSBjYWxsYmFjayB0byB0cmlnZ2VyIHdoZW4gdGhlIHVzZXIgaGFzIGNoYW5nZWRcblx0XHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBwX2NiIC0gVGhlIGNhbGxiYWNrIHRvIHVzZVxuXHRcdCAqL1xuXHRcdHNldE9uVXNlckNoYW5nZWQ6IF9zZXRPblVzZXJDaGFuZ2VkLFxuXHRcdC8qKlxuXHRcdCAqIERlZmluZXMgdGhlIGNhbGxiYWNrIHRvIHRyaWdnZXIgd2hlbiBhIHVzZXIgaGFzIGJlZW4gcmVtb3ZlZC5cblx0XHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBwX2NiIC0gVGhlIGNhbGxiYWNrIHRvIHVzZVxuXHRcdCAqL1xuXHRcdHNldE9uVXNlclJlbW92ZWQ6IF9zZXRPblVzZXJSZW1vdmVkLFxuXHRcdC8qKlxuXHRcdCAqIEdhdGhlciB0aGUgaW52aXRlZXMgdG8gdGhlIHJvb20uXG5cdFx0ICogRGVmaW5lcyBhIGNhbGxiYWNrIHRvIHRyaWdnZXIgZm9yIEludml0ZSBjaGFuZ2VzLCBhbmQgY2FsbHMgY2FsbGJhY2tzIGZvciByb29tIGludml0ZSBhY2NlcHRhdGlvbiBvciByZWZ1c2UuXG5cdFx0ICogRm9yIGVhY2ggaW52aXRlZSBhIG5vZGUgaXMgY3JlYXRlZCBpbiB0aGUgZGF0YWJhc2UgYWJvdXQgdGhlIEludml0ZSBsaXN0LlxuXHRcdCAqIEluIGFkZHRpb24sIGEgbm9kZSBpcyBjcmVhdGVkIHRvbyBmb3IgZWFjaCBpbnZpdGVlIGFib3V0IHRoZSBwYXJ0aWNpcGFudExpc3QuXG5cdFx0ICogQHBhcmFtIHtzdHJpbmd9IHBfcm9vbUlkIC0gVGhlIHJvb20gdXNlZCBhcyB0aGUgbmFtZSBvZiBhIGJyYW5jaCBpcyB0aGUgZGF0YWJhc2Vcblx0XHQgKiBAcGFyYW0ge2FycmF5fSBwX2d1ZXN0SWRzIC0gQW4gYXJyYXkgcG9zc2Vzc2luZyB0aGUgaWRlbnRpZmllcnMgb2YgdGhlIGludml0ZWVzXG5cdFx0ICogQHBhcmFtIHtzdHJpbmd9IHBfdG9waWMgLSBjdXN0b20gbWVzc2FnZSBmb3IgdGhlIGludml0YXRpb25cblx0XHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBwX3N0YXR1c0NoYW5nZWRDYiAtIG9wdGlvbmFsIDogY2FsbGJhY2sgZnVuY3Rpb24gd2hlbiBhbiBpbnZpdGVlIGFjY2VwdHMvcmVqZWN0ZWQvY2FuY2VsZWQgdGhlIEludml0ZVxuXHRcdCAqL1xuXHRcdGludml0ZVRvUm9vbTogX2ludml0ZVRvUm9vbSxcblx0XHQvKipcblx0XHQgKiBDYW5jZWxzIHRoZSBJbnZpdGVcblx0XHQgKiBAcGFyYW0ge3N0cmluZ30gcF9yb29tSWQgLSBUaGUgcm9vbSBJZCBvZiB0aGUgSW52aXRlXG5cdFx0ICogQHBhcmFtIHtzdHJpbmd9IHBfZ3Vlc3RJZHMgLSBvcHRpb25hbCA6IEFuIGFycmF5IHBvc3Nlc3NpbmcgdGhlIGlkZW50aWZpZXJzIG9mIHRoZSBpbnZpdGVlcy4gKGlmIHVuZGVmaW5lZCAsICBhbGwgaW52aXRlZSB3aWxsIGhhdmUgdGhlaXIgSW52aXRlIGNhbmNlbGVkKVxuXHRcdCAqIEBwYXJhbSB7c3RyaW5nfSBpbnZpdGVJZCAtIFRoZSBpbnZpdGUgaWRlbnRpZmllclxuXHRcdCAqL1xuXHRcdGNhbmNlbEludml0YXRpb246IF9jYW5jZWxJbnZpdGF0aW9uLFxuXHRcdC8qKlxuXHRcdCAqIERlZmluZXMgdGhlIGNhbGxiYWNrIHRvIHRyaWdnZXIgd2hlbiBhIHJvb20gaW52aXRlIGhhcyBiZWVuIHJlY2VpdmVkLlxuXHRcdCAqIE90aGVyIGNhbGxiYWNrcyB3aWxsIGJlIHRyaWdnZXJlZCBhYm91dCBJbnZpdGUgbGlzdHMuXG5cdFx0ICogQHBhcmFtIHtmdW5jdGlvbn0gb25OZXdSb29tSW52aXRhdGlvbkNiIC0gVGhlIGNhbGxiYWNrIHRyaWdnZXJzIHdoZW4gYSBJbnZpdGUgaXMgcmVjZWl2ZWQgKHN0YXR1cyA9IG9uIGdvaW5nKVxuXHRcdCAqL1xuXHRcdHNldE9uTmV3Um9vbUludml0YXRpb246IF9zZXRPbk5ld1Jvb21JbnZpdGF0aW9uLFxuXHRcdC8qKlxuXHRcdCAqIERlZmluZXMgdGhlIGNhbGxiYWNrIHRvIHRyaWdnZXIgd2hlbiBhIHJvb20gaW52aXRlIGhhcyBiZWVuIHJlY2VpdmVkLlxuXHRcdCAqIE90aGVyIGNhbGxiYWNrcyB3aWxsIGJlIHRyaWdnZXJlZCBhYm91dCBJbnZpdGUgbGlzdHMuXG5cdFx0ICogQHBhcmFtIHtmdW5jdGlvbn0gb25Sb29tSW52aXRhdGlvbkNoYW5nZWRDYiAtIFRoZSBjYWxsYmFjayB0cmlnZ2VycyB3aGVuIHRoZSBzYXR1cyBvbiB0aGUgSW52aXRlIHJlY2VpdmVkIGhhcyBjaGFuZ2VkIChzdGF0dXMgPSBhY2NlcHRlZC9yZWplY3RlZC9jYW5jZWxlZClcblx0XHQgKi9cblx0XHRzZXRPblJvb21JbnZpdGF0aW9uQ2hhbmdlZDogX3NldE9uUm9vbUludml0YXRpb25DaGFuZ2VkLFxuXHRcdC8qKlxuXHRcdCAqIERlZmluZXMgYSB0aW1lb3V0IHRvIHJlamVjdCBhdXRvbWF0aWNhbGx5IHRoZSBJbnZpdGVcblx0XHQgKiBPdGhlciBjYWxsYmFja3Mgd2lsbCBiZSB0cmlnZ2VyZWQgYWJvdXQgSW52aXRlIGxpc3RzLlxuXHRcdCAqIEBwYXJhbSB7aW50ZWdlcn0gcF90aW1lb3V0IC0gVGhlIGRlbGF5XG5cdFx0ICogQHBhcmFtIHtzdHJpbmd9IHBfcmVhc29uIC0gb3B0aW9uYWwgaW5mbyBhYm91dCB0aGUgcmVqZWN0XG5cdFx0ICovXG5cdFx0c2V0TmV3Um9vbUludml0YXRpb25UaW1lb3V0OiBfc2V0TmV3Um9vbUludml0YXRpb25UaW1lb3V0LFxuXG5cdFx0LyoqXG5cdFx0ICogbW92ZSBhbGwgdGhlIG5vbiBhY3RpdmUgaW52aXRhdGlvbnMgcHJvY2Vzc2VkIG9mIGFuIHVzZXIgdG8gdGhlIGludml0YXRpb24gTGlzdCBIaXN0b3J5OlxuXHRcdCAqIEFsbCBpbnZpdGF0aW9ucyB3aXRoIHN0YXR1cyBDYW5jZWxlZCBvciBSZWplY3RlZCB3aWxsIGJlIGFyY2hpdmVkXG5cdFx0ICogQWxsIGludml0YXRpb24gd2l0aCBzdGF0dXMgT25nb2luZyBvciBBY2NlcHRlZCBXaWxsIGJlIGFyY2hpdmVkIGlmIHRoZSBjb3JyZXNwb25kaW5nIHJvb20gaXMgY2xvc2VkXG5cdFx0ICogSWYgYW4gaW52aXRhdGlvbiB3aXRoIHN0YXR1cyBcIk9uZ29pbmdcIiBpcyBhcmNoaXZlZCwgaXRzIHN0YXR1cyB3aWxsIGJlIHNldCB0byBjYW5jZWxlZFxuXHRcdCAqIEBwYXJhbSBwX2NiIC0gVGhpcyBjYWxsYmFjayBpcyB0cmlnZ2VyIHdoZW4gYXJjaGl2ZSBpcyBjb21wbGV0ZVxuXHRcdCAqL1xuXHRcdGFyY2hpdmVNeUludml0YXRpb25zOiAocF9jYikgPT4ge1xuXHRcdFx0cmV0dXJuIF9hcmNoaXZlSW52aXRhdGlvbnMobWUsIHBfY2IpO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogTWFrZXMgYW4gaW52aXRlIGFjY2VwdGVkLCBhbmQgZGVmaW5lcyB0aGUgXCJhY2NlcHRlZFwiIGZsYWcgb2YgdGhpcyBpbnZpdGUgYXQgdHJ1ZSBpbiB0aGUgZGF0YWJhc2UuXG5cdFx0ICogQHBhcmFtIHBfaW52aXRhdGlvbkRhdGEgLVxuXHRcdCAqL1xuXHRcdGFjY2VwdEludml0YXRpb246IF9hY2NlcHRJbnZpdGF0aW9uLFxuXG5cdFx0LyoqXG5cdFx0ICogUmVmdXNlcyB0aGUgaW52aXRlIGFuZCBzZXQgdGhlIFwiYWNjZXB0ZWRcIiBmbGFnIG9mIHRoaXMgaW52aXRlIGluIHRoZSBkYXRhYmFzZSB0byBmYWxzZVxuXHRcdCAqIEBwYXJhbSBwX2ludml0YXRpb25EYXRhIC0gVGhlIGludml0ZSBkYXRhXG5cdFx0ICogQHBhcmFtIHtzdHJpbmd9IHBfcmVhc29uIC0gb3B0aW9uYWwgaW5mbyBhYm91dCB0aGUgcmVqZWN0XG5cdFx0ICovXG5cdFx0cmVqZWN0SW52aXRhdGlvbjogX3JlamVjdEludml0YXRpb24sXG5cblx0XHQvKipcblx0XHQgKiBEZWZpbmVzIGEgY2FsbGJhY2sgZm9yIGEgcGFydGljdWxhciBldmVudFxuXHRcdCAqIEBwYXJhbSB7c3RyaW5nfSBwX2V2dCAtIFRvIGNob29zZSBiZXR3ZWVuIFwicm9vbUludml0ZVwiLCBcInJvb21JbnZpdGVBY2NlcHRlZFwiLCBcInJvb21JbnZpdGVDYW5jZWxlZFwiLCBcInVzZXJcIiBhbmQgXCJ1c2VyUmVtb3ZhbFwiXG5cdFx0ICogQHBhcmFtIHtmdW5jdGlvbn0gcF9jYiAtIFRoZSBjYWxsYmFjayB0byByaXNlXG5cdFx0ICovXG5cdFx0b246IChwX2V2dCwgcF9jYikgPT4ge1xuXHRcdFx0c3dpdGNoIChwX2V2dCkge1xuXHRcdFx0Y2FzZSAnbmV3Um9vbUludml0YXRpb24nOlxuXHRcdFx0XHRfc2V0T25OZXdSb29tSW52aXRhdGlvbihwX2NiKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdyb29tSW52aXRhdGlvbkNoYW5nZWQnOlxuXHRcdFx0XHRfc2V0T25Sb29tSW52aXRhdGlvbkNoYW5nZWQocF9jYik7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAndXNlckFkZGVkJzpcblx0XHRcdFx0X3NldE9uVXNlckFkZGVkKHBfY2IpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ3VzZXJDaGFuZ2VkJzpcblx0XHRcdFx0X3NldE9uVXNlckNoYW5nZWQocF9jYik7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSAndXNlclJlbW92ZWQnOlxuXHRcdFx0XHRfc2V0T25Vc2VyUmVtb3ZlZChwX2NiKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRjb25zb2xlLmVycm9yKCdyZWFjaC5zZXQ6IG5vIHN1Y2ggZXZlbnQnKTtcblx0XHRcdFx0cmV0dXJuIC0xO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogQ2xvc2VzIGFuZCByZW1vdmVzIGNhbGxiYWNrc1xuXHRcdCAqL1xuXHRcdGNsb3NlOiBfY2xvc2Vcblx0fTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHJlYWNoO1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL3JlYWNoLmpzXG4gKiovIiwibW9kdWxlLmV4cG9ydHMgPSB7IFwiZGVmYXVsdFwiOiByZXF1aXJlKFwiY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9rZXlzXCIpLCBfX2VzTW9kdWxlOiB0cnVlIH07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vYmFiZWwtcnVudGltZS9jb3JlLWpzL29iamVjdC9rZXlzLmpzXG4gKiogbW9kdWxlIGlkID0gMTBcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInJlcXVpcmUoJy4uLy4uL21vZHVsZXMvZXM2Lm9iamVjdC5rZXlzJyk7XG5tb2R1bGUuZXhwb3J0cyA9IHJlcXVpcmUoJy4uLy4uL21vZHVsZXMvJC5jb3JlJykuT2JqZWN0LmtleXM7XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9saWJyYXJ5L2ZuL29iamVjdC9rZXlzLmpzXG4gKiogbW9kdWxlIGlkID0gMTFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIDE5LjEuMi4xNCBPYmplY3Qua2V5cyhPKVxudmFyIHRvT2JqZWN0ID0gcmVxdWlyZSgnLi8kLnRvLW9iamVjdCcpO1xuXG5yZXF1aXJlKCcuLyQub2JqZWN0LXNhcCcpKCdrZXlzJywgZnVuY3Rpb24oJGtleXMpe1xuICByZXR1cm4gZnVuY3Rpb24ga2V5cyhpdCl7XG4gICAgcmV0dXJuICRrZXlzKHRvT2JqZWN0KGl0KSk7XG4gIH07XG59KTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy9lczYub2JqZWN0LmtleXMuanNcbiAqKiBtb2R1bGUgaWQgPSAxMlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIiwiLy8gNy4xLjEzIFRvT2JqZWN0KGFyZ3VtZW50KVxudmFyIGRlZmluZWQgPSByZXF1aXJlKCcuLyQuZGVmaW5lZCcpO1xubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG4gIHJldHVybiBPYmplY3QoZGVmaW5lZChpdCkpO1xufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLnRvLW9iamVjdC5qc1xuICoqIG1vZHVsZSBpZCA9IDEzXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCIvLyA3LjIuMSBSZXF1aXJlT2JqZWN0Q29lcmNpYmxlKGFyZ3VtZW50KVxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihpdCl7XG4gIGlmKGl0ID09IHVuZGVmaW5lZCl0aHJvdyBUeXBlRXJyb3IoXCJDYW4ndCBjYWxsIG1ldGhvZCBvbiAgXCIgKyBpdCk7XG4gIHJldHVybiBpdDtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5kZWZpbmVkLmpzXG4gKiogbW9kdWxlIGlkID0gMTRcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIG1vc3QgT2JqZWN0IG1ldGhvZHMgYnkgRVM2IHNob3VsZCBhY2NlcHQgcHJpbWl0aXZlc1xudmFyICRleHBvcnQgPSByZXF1aXJlKCcuLyQuZXhwb3J0JylcbiAgLCBjb3JlICAgID0gcmVxdWlyZSgnLi8kLmNvcmUnKVxuICAsIGZhaWxzICAgPSByZXF1aXJlKCcuLyQuZmFpbHMnKTtcbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oS0VZLCBleGVjKXtcbiAgdmFyIGZuICA9IChjb3JlLk9iamVjdCB8fCB7fSlbS0VZXSB8fCBPYmplY3RbS0VZXVxuICAgICwgZXhwID0ge307XG4gIGV4cFtLRVldID0gZXhlYyhmbik7XG4gICRleHBvcnQoJGV4cG9ydC5TICsgJGV4cG9ydC5GICogZmFpbHMoZnVuY3Rpb24oKXsgZm4oMSk7IH0pLCAnT2JqZWN0JywgZXhwKTtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5vYmplY3Qtc2FwLmpzXG4gKiogbW9kdWxlIGlkID0gMTVcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsInZhciBnbG9iYWwgICAgPSByZXF1aXJlKCcuLyQuZ2xvYmFsJylcbiAgLCBjb3JlICAgICAgPSByZXF1aXJlKCcuLyQuY29yZScpXG4gICwgY3R4ICAgICAgID0gcmVxdWlyZSgnLi8kLmN0eCcpXG4gICwgUFJPVE9UWVBFID0gJ3Byb3RvdHlwZSc7XG5cbnZhciAkZXhwb3J0ID0gZnVuY3Rpb24odHlwZSwgbmFtZSwgc291cmNlKXtcbiAgdmFyIElTX0ZPUkNFRCA9IHR5cGUgJiAkZXhwb3J0LkZcbiAgICAsIElTX0dMT0JBTCA9IHR5cGUgJiAkZXhwb3J0LkdcbiAgICAsIElTX1NUQVRJQyA9IHR5cGUgJiAkZXhwb3J0LlNcbiAgICAsIElTX1BST1RPICA9IHR5cGUgJiAkZXhwb3J0LlBcbiAgICAsIElTX0JJTkQgICA9IHR5cGUgJiAkZXhwb3J0LkJcbiAgICAsIElTX1dSQVAgICA9IHR5cGUgJiAkZXhwb3J0LldcbiAgICAsIGV4cG9ydHMgICA9IElTX0dMT0JBTCA/IGNvcmUgOiBjb3JlW25hbWVdIHx8IChjb3JlW25hbWVdID0ge30pXG4gICAgLCB0YXJnZXQgICAgPSBJU19HTE9CQUwgPyBnbG9iYWwgOiBJU19TVEFUSUMgPyBnbG9iYWxbbmFtZV0gOiAoZ2xvYmFsW25hbWVdIHx8IHt9KVtQUk9UT1RZUEVdXG4gICAgLCBrZXksIG93biwgb3V0O1xuICBpZihJU19HTE9CQUwpc291cmNlID0gbmFtZTtcbiAgZm9yKGtleSBpbiBzb3VyY2Upe1xuICAgIC8vIGNvbnRhaW5zIGluIG5hdGl2ZVxuICAgIG93biA9ICFJU19GT1JDRUQgJiYgdGFyZ2V0ICYmIGtleSBpbiB0YXJnZXQ7XG4gICAgaWYob3duICYmIGtleSBpbiBleHBvcnRzKWNvbnRpbnVlO1xuICAgIC8vIGV4cG9ydCBuYXRpdmUgb3IgcGFzc2VkXG4gICAgb3V0ID0gb3duID8gdGFyZ2V0W2tleV0gOiBzb3VyY2Vba2V5XTtcbiAgICAvLyBwcmV2ZW50IGdsb2JhbCBwb2xsdXRpb24gZm9yIG5hbWVzcGFjZXNcbiAgICBleHBvcnRzW2tleV0gPSBJU19HTE9CQUwgJiYgdHlwZW9mIHRhcmdldFtrZXldICE9ICdmdW5jdGlvbicgPyBzb3VyY2Vba2V5XVxuICAgIC8vIGJpbmQgdGltZXJzIHRvIGdsb2JhbCBmb3IgY2FsbCBmcm9tIGV4cG9ydCBjb250ZXh0XG4gICAgOiBJU19CSU5EICYmIG93biA/IGN0eChvdXQsIGdsb2JhbClcbiAgICAvLyB3cmFwIGdsb2JhbCBjb25zdHJ1Y3RvcnMgZm9yIHByZXZlbnQgY2hhbmdlIHRoZW0gaW4gbGlicmFyeVxuICAgIDogSVNfV1JBUCAmJiB0YXJnZXRba2V5XSA9PSBvdXQgPyAoZnVuY3Rpb24oQyl7XG4gICAgICB2YXIgRiA9IGZ1bmN0aW9uKHBhcmFtKXtcbiAgICAgICAgcmV0dXJuIHRoaXMgaW5zdGFuY2VvZiBDID8gbmV3IEMocGFyYW0pIDogQyhwYXJhbSk7XG4gICAgICB9O1xuICAgICAgRltQUk9UT1RZUEVdID0gQ1tQUk9UT1RZUEVdO1xuICAgICAgcmV0dXJuIEY7XG4gICAgLy8gbWFrZSBzdGF0aWMgdmVyc2lvbnMgZm9yIHByb3RvdHlwZSBtZXRob2RzXG4gICAgfSkob3V0KSA6IElTX1BST1RPICYmIHR5cGVvZiBvdXQgPT0gJ2Z1bmN0aW9uJyA/IGN0eChGdW5jdGlvbi5jYWxsLCBvdXQpIDogb3V0O1xuICAgIGlmKElTX1BST1RPKShleHBvcnRzW1BST1RPVFlQRV0gfHwgKGV4cG9ydHNbUFJPVE9UWVBFXSA9IHt9KSlba2V5XSA9IG91dDtcbiAgfVxufTtcbi8vIHR5cGUgYml0bWFwXG4kZXhwb3J0LkYgPSAxOyAgLy8gZm9yY2VkXG4kZXhwb3J0LkcgPSAyOyAgLy8gZ2xvYmFsXG4kZXhwb3J0LlMgPSA0OyAgLy8gc3RhdGljXG4kZXhwb3J0LlAgPSA4OyAgLy8gcHJvdG9cbiRleHBvcnQuQiA9IDE2OyAvLyBiaW5kXG4kZXhwb3J0LlcgPSAzMjsgLy8gd3JhcFxubW9kdWxlLmV4cG9ydHMgPSAkZXhwb3J0O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuZXhwb3J0LmpzXG4gKiogbW9kdWxlIGlkID0gMTZcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIGh0dHBzOi8vZ2l0aHViLmNvbS96bG9pcm9jay9jb3JlLWpzL2lzc3Vlcy84NiNpc3N1ZWNvbW1lbnQtMTE1NzU5MDI4XG52YXIgZ2xvYmFsID0gbW9kdWxlLmV4cG9ydHMgPSB0eXBlb2Ygd2luZG93ICE9ICd1bmRlZmluZWQnICYmIHdpbmRvdy5NYXRoID09IE1hdGhcbiAgPyB3aW5kb3cgOiB0eXBlb2Ygc2VsZiAhPSAndW5kZWZpbmVkJyAmJiBzZWxmLk1hdGggPT0gTWF0aCA/IHNlbGYgOiBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuaWYodHlwZW9mIF9fZyA9PSAnbnVtYmVyJylfX2cgPSBnbG9iYWw7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW5kZWZcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLmdsb2JhbC5qc1xuICoqIG1vZHVsZSBpZCA9IDE3XG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgY29yZSA9IG1vZHVsZS5leHBvcnRzID0ge3ZlcnNpb246ICcxLjIuNid9O1xuaWYodHlwZW9mIF9fZSA9PSAnbnVtYmVyJylfX2UgPSBjb3JlOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXVuZGVmXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9saWJyYXJ5L21vZHVsZXMvJC5jb3JlLmpzXG4gKiogbW9kdWxlIGlkID0gMThcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIi8vIG9wdGlvbmFsIC8gc2ltcGxlIGNvbnRleHQgYmluZGluZ1xudmFyIGFGdW5jdGlvbiA9IHJlcXVpcmUoJy4vJC5hLWZ1bmN0aW9uJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGZuLCB0aGF0LCBsZW5ndGgpe1xuICBhRnVuY3Rpb24oZm4pO1xuICBpZih0aGF0ID09PSB1bmRlZmluZWQpcmV0dXJuIGZuO1xuICBzd2l0Y2gobGVuZ3RoKXtcbiAgICBjYXNlIDE6IHJldHVybiBmdW5jdGlvbihhKXtcbiAgICAgIHJldHVybiBmbi5jYWxsKHRoYXQsIGEpO1xuICAgIH07XG4gICAgY2FzZSAyOiByZXR1cm4gZnVuY3Rpb24oYSwgYil7XG4gICAgICByZXR1cm4gZm4uY2FsbCh0aGF0LCBhLCBiKTtcbiAgICB9O1xuICAgIGNhc2UgMzogcmV0dXJuIGZ1bmN0aW9uKGEsIGIsIGMpe1xuICAgICAgcmV0dXJuIGZuLmNhbGwodGhhdCwgYSwgYiwgYyk7XG4gICAgfTtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb24oLyogLi4uYXJncyAqLyl7XG4gICAgcmV0dXJuIGZuLmFwcGx5KHRoYXQsIGFyZ3VtZW50cyk7XG4gIH07XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuY3R4LmpzXG4gKiogbW9kdWxlIGlkID0gMTlcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oaXQpe1xuICBpZih0eXBlb2YgaXQgIT0gJ2Z1bmN0aW9uJyl0aHJvdyBUeXBlRXJyb3IoaXQgKyAnIGlzIG5vdCBhIGZ1bmN0aW9uIScpO1xuICByZXR1cm4gaXQ7XG59O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2NvcmUtanMvbGlicmFyeS9tb2R1bGVzLyQuYS1mdW5jdGlvbi5qc1xuICoqIG1vZHVsZSBpZCA9IDIwXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKGV4ZWMpe1xuICB0cnkge1xuICAgIHJldHVybiAhIWV4ZWMoKTtcbiAgfSBjYXRjaChlKXtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufTtcblxuXG4vKioqKioqKioqKioqKioqKipcbiAqKiBXRUJQQUNLIEZPT1RFUlxuICoqIC4vfi9jb3JlLWpzL2xpYnJhcnkvbW9kdWxlcy8kLmZhaWxzLmpzXG4gKiogbW9kdWxlIGlkID0gMjFcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIm1vZHVsZS5leHBvcnRzID0geyBcImRlZmF1bHRcIjogcmVxdWlyZShcImNvcmUtanMvbGlicmFyeS9mbi9qc29uL3N0cmluZ2lmeVwiKSwgX19lc01vZHVsZTogdHJ1ZSB9O1xuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogLi9+L2JhYmVsLXJ1bnRpbWUvY29yZS1qcy9qc29uL3N0cmluZ2lmeS5qc1xuICoqIG1vZHVsZSBpZCA9IDIyXG4gKiogbW9kdWxlIGNodW5rcyA9IDBcbiAqKi8iLCJ2YXIgY29yZSA9IHJlcXVpcmUoJy4uLy4uL21vZHVsZXMvJC5jb3JlJyk7XG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHN0cmluZ2lmeShpdCl7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnNcbiAgcmV0dXJuIChjb3JlLkpTT04gJiYgY29yZS5KU09OLnN0cmluZ2lmeSB8fCBKU09OLnN0cmluZ2lmeSkuYXBwbHkoSlNPTiwgYXJndW1lbnRzKTtcbn07XG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL34vY29yZS1qcy9saWJyYXJ5L2ZuL2pzb24vc3RyaW5naWZ5LmpzXG4gKiogbW9kdWxlIGlkID0gMjNcbiAqKiBtb2R1bGUgY2h1bmtzID0gMFxuICoqLyIsIlxuLyoqXG4gKiBAZmlsZSB1dGlscy5qcyAtIEpTIGZpbGUgZm9yIHV0aWxzIG1ldGhvZHMuXG4gKiBAYXV0aG9yIFdlYmNvbVxuICovXG5cblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBkZXNjcmlwdGlvbiBUaGUgdXRpbHMgY2xhc3NcbiAqL1xuY29uc3QgdXRpbHMgPSBmdW5jdGlvbigpIHtcblx0LyoqXG5cdCAqXG5cdCAqL1xuXHRmdW5jdGlvbiBzNCgpIHtcblx0XHRyZXR1cm4gTWF0aC5mbG9vcigoMSArIE1hdGgucmFuZG9tKCkpICogMHgxMDAwMCkudG9TdHJpbmcoMTYpLnN1YnN0cmluZygxKTtcblx0fVxuXHQvKipcblx0ICogR2VuZXJhdGVzIGFuIGlkZW50aWZpZXIuIFR3byBjYWxscyBvZiB0aGlzIG1ldGhvZGUgbWF5IG5vdCByZXR1cm4gdGhlIHNhbWUgaWRlbnRpZmllclxuXHQgKiBAcmV0dXJuIHtzdHJpbmd9IC0gVGhlIGlkZW50aWZpZXJcblx0ICovXG5cdGZ1bmN0aW9uIF9ndWlkKCkge1xuXHRcdHJldHVybiBgJHtzNCgpfSR7czQoKX0tJHtzNCgpfS0ke3M0KCl9LSR7czQoKX0tJHtzNCgpfSR7czQoKX0ke3M0KCl9YDtcblx0fVxuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIFRoZSBhcHBsaWNhdGlvbiBpbnN0YW5jZSBpbmRlbnRpZmllclxuXHQgKi9cblx0Y29uc3QgX2FwcEluc3RhbmNlSWQgPSBfZ3VpZCgpO1xuXG5cdHJldHVybiB7XG5cdFx0YXBwSW5zdGFuY2VJZDogX2FwcEluc3RhbmNlSWRcblx0fTtcbn0oKTtcblxuZXhwb3J0IGRlZmF1bHQgdXRpbHM7XG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvdXRpbHMuanNcbiAqKi8iLCIvKipcbiAqIEBmaWxlIHJvb20uanMgLSBKUyBmaWxlIHRvIHVzZSBmb3IgdGhlIHJvb20gc2VydmljZS5cbiAqIEBhdXRob3IgV2ViY29tXG4gKi9cblxuLyplc2xpbnQgY29tcGxleGl0eToxLCBtYXgtc3RhdGVtZW50czogMSwgbWF4LWxlbjogMSovXG5cbmltcG9ydCBhY3Rpb25zIGZyb20gJy4vYWN0aW9ucyc7XG5pbXBvcnQgbG9jYWxzdHJlYW0gZnJvbSAnLi9sb2NhbHN0cmVhbSc7XG5pbXBvcnQgdXRpbHMgZnJvbSAnLi91dGlscyc7XG5cbi8qKlxuICogUk9PTV9TVEFUVVNfQ0xPU0Ugc3RhdHVzIDogcm9vbSBpcyBDTE9TRSAvIGluYWN0aXZlXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmNvbnN0IFJPT01fU1RBVFVTX0NMT1NFID0gJ0NMT1NFJztcblxuLyoqXG4gKiBAY29uc3RydWN0b3JcbiAqIEBkZXNjcmlwdGlvbiBUaGUgcm9vbSBvYmplY3Qgd2l0aCBpdHMgc3RyZWFtcywgbWVzc2FnZXMsIGZsYWdzIGFuZCBjYWxsYmFja3MuIFRoZSBwdWJsaXNoZWQgbWVkaWEgc3RyZWFtcywgdGhlIFdlYlJUQyBzdGFja3MsIHRoZSBpbnN0YW50IG1lc3NhZ2VzLCBhbmQgdGhlIHBhcnRpY2lwYW50IGxpc3RzXG4gKiBhcmUgbWFuYWdlZCBpbiB0aGlzIGRhdGEgc3RydWN0dXJlLlxuICogQHBhcmFtIHBfbWUgLSBUaGUgdXNlciBpZGVudGlmaWVyLCBpZGVudGlmeWluZyB0aGUgY3VycmVudCB1c2VyIGluIHRoZSBkYXRhYmFzZVxuICogQHBhcmFtIHBfcm9vbUlkIC0gVGhlIHJvb20gaWRlbnRpZmllciwgaWRlbnRpZnlpbmcgaW4gdGhlIGRhdGFiYXNlIHRoZSByb29tIGluIHVzZVxuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAocF9tZSwgcF9yb29tSWQsIGRhdGFyZWZzLCB3ZWJydGNtbmdyKSB7XG5cblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBUaGUgcm9vbSBpZGVudGlmaWVyLCBpZGVudGlmeWluZyBhIHJvb20gaW4gdGhlIGRhdGFiYXNlXG5cdCAqL1xuXHRjb25zdCByb29tSWQgPSBwX3Jvb21JZDtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBUaGUgdXNlciBpZGVudGlmaWVyXG5cdCAqL1xuXHRjb25zdCBtZSA9IHBfbWU7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gQSBkYXRhcmVmIHBvaW50ZXIgcG9pbnRpbmcgdG8gYSBub2RlIGlkZW50aWZpZWQgYnkgdGhlIHJvb20gaWRlbnRpZmllciB1bmRlciB0aGUgcm9vbXMgbm9kZVxuXHQgKi9cblx0Y29uc3QgZGF0YXJlZiA9IGRhdGFyZWZzLmdldFJvb21zKCkuY2hpbGQocm9vbUlkKTtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBUaGUgV2ViUlRDIHN0YWNrcyB1c2VkIGluIHRoaXMgcm9vbVxuXHQgKi9cblx0bGV0IHJvb21XZWJydGNTdGFja3MgPSB7fTtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBUaGUgYXZhaWxhYmxlIHN0cmVhbXNcblx0ICovXG5cdGxldCBtQXZhaWxhYmxlU3RyZWFtcyA9IFtdO1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIEFuIGFycmF5IGNvbnRhaW5pbmcgZGF0YSBzdHJ1Y3R1cmVzIGZvciBzdHJlYW1zIHdoaWNoIHBvc3Nlc3MgY2FsbGJhY2tzIHRvIHRyaWdnZXIgaW4gSlNPTiBmb3JtYXQuXG5cdCAqIFRoZXNlIGNhbGxiYWNrcyBhcmUgYWRkU3Vic2NyaWJlckxpc3RDYiBhbmQgcmVtb3ZlU3Vic2NyaWJlcnNMaXN0Q2IuXG5cdCAqL1xuXHRsZXQgbVN0cmVhbXMgPSBbXTtcblxuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIEFuIGFycmF5IGNvbnRhaW5pbmcgYWxsIHRoZSBzdHJlYW0gbWFya2VkIGFzIG11dGVkXG5cdCAqL1xuXHRsZXQgbU11dGVkU3RyZWFtcyA9IFtdO1xuXG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gQSBjYWxsYmFjayB0byB0cmlnZ2VyIGZvciB1bnB1Ymxpc2hlZCByZW1vdGUgb2JqZWN0c1xuXHQgKi9cblx0bGV0IHJlbW90ZVVucHVibGlzaGVkQ2IgPSBudWxsO1xuXG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gQ2FsbGJhY2sgdHJpZ2dlcmVkIHdoZW4gYSBsaXN0IG9mIGluc3RhbnQgbWVzc2FnZXMgaGFzIGJlZW4gcmVjZWl2ZWRcblx0ICovXG5cdGxldCBpbnN0YW50TWVzc2FnZUxpc3RDYiA9IG51bGw7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gVXNlcidzIGNhbGxiYWNrIHRyaWdnZXJlZCB3aGVuIGEgbGlzdCBvZiBtZWRpYXMgaGFzIGJlZW4gcHVibGlzaGVkXG5cdCAqL1xuXHRsZXQgcHVibGlzaGVkTWVkaWFMaXN0Q2IgPSBudWxsO1xuXG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gcm9vbSdzIGNhbGxiYWNrIHRyaWdnZXJlZCB3aGVuIGEgbGlzdCBvZiBtZWRpYXMgaGFzIGJlZW4gcHVibGlzaGVkXG5cdCAqL1xuXHRsZXQgcHVibGlzaGVkTWVkaWFMaXN0Q2JGb3JBdmFpbGFibGVTdHJlYW0gPSBudWxsO1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIHVzZXIncyBjYWxsYmFjayB0cmlnZ2VyZWQgd2hlbiBhIGxpc3Qgb2YgbWVkaWFzIGhhcyBiZWVuIHVucHVibGlzaGVkXG5cdCAqL1xuXHRsZXQgdW5QdWJsaXNoZWRNZWRpYUxpc3RDYiA9IG51bGw7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gcm9vbSdzIGNhbGxiYWNrIHRyaWdnZXJlZCB3aGVuIGEgbGlzdCBvZiBtZWRpYXMgaGFzIGJlZW4gcHVibGlzaGVkXG5cdCAqL1xuXHRsZXQgdW5QdWJsaXNoZWRNZWRpYUxpc3RDYkZvckF2YWlsYWJsZVN0cmVhbSA9IG51bGw7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gQ2FsbGJhY2sgdHJpZ2dlcmVkIHdoZW4gYSBsaXN0IG9mIHBhcnRpY2lwYW50cyBqb2lucyB0aGUgcm9vbSAoYWRkZWQpXG5cdCAqL1xuXHRsZXQgcGFydGljaXBhbnRMaXN0Sm9pbkFkZGVkQ2IgPSBudWxsO1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIENhbGxiYWNrIHRyaWdnZXJlZCB3aGVuIGEgbGlzdCBvZiBwYXJ0aWNpcGFudHMgam9pbnMgdGhlIHJvb20gKGNoYW5nZWQpXG5cdCAqL1xuXHRsZXQgcGFydGljaXBhbnRMaXN0Sm9pbkNoYW5nZWRDYiA9IG51bGw7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gQ2FsbGJhY2sgdHJpZ2dlcmVkIHdoZW4gYSBsaXN0IG9mIHBhcnRpY2lwYW50cyBsZWF2ZXMgdGhlIHJvb21cblx0ICovXG5cdGxldCBwYXJ0aWNpcGFudExpc3RMZWF2ZUNiID0gbnVsbDtcblxuXHQvKipcblx0ICogQWRkcyBhbiBhdmFpbGFibGUgc3RyZWFtXG5cdCAqIEBwYXJhbSBkYXRhIC0gVGhlIHN0cmVhbSB0byBhZGRcblx0ICovXG5cdGZ1bmN0aW9uIF9hZGRBdmFpbGFibGVTdHJlYW0oZGF0YSkge1xuXHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OnJvb21bJHtyb29tSWR9XTo6X2FkZEF2YWlsYWJsZVN0cmVhbSlkYXRhPSR7SlNPTi5zdHJpbmdpZnkoZGF0YSl9YCk7XG5cdFx0bUF2YWlsYWJsZVN0cmVhbXMucHVzaChkYXRhKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZW1vdmVzIGFuIGF2YWlsYWJsZSBzdHJlYW1cblx0ICogQHBhcmFtIHN0cmVhbSAtIFRoZSBzdHJlYW1JZCB0byByZW1vdmVcblx0ICovXG5cdGZ1bmN0aW9uIF9yZW1vdmVBdmFpbGFibGVTdHJlYW0oc3RyZWFtSWQpIHtcblx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjpyb29tWyR7cm9vbUlkfV06Ol9yZW1vdmVBdmFpbGFibGVTdHJlYW0pc3RyZWFtSWQ9JHtzdHJlYW1JZH1gKTtcblx0XHRpZiAobUF2YWlsYWJsZVN0cmVhbXMgJiYgc3RyZWFtSWQpIHtcblx0XHRcdGZvciAobGV0IGkgPSBtQXZhaWxhYmxlU3RyZWFtcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHRcdFx0XHRpZiAobUF2YWlsYWJsZVN0cmVhbXNbaV0gJiYgT2JqZWN0LmtleXMobUF2YWlsYWJsZVN0cmVhbXNbaV0pWzBdICYmIE9iamVjdC5rZXlzKG1BdmFpbGFibGVTdHJlYW1zW2ldKVswXSA9PT0gc3RyZWFtSWQpIHtcblx0XHRcdFx0XHRkZWxldGUgbUF2YWlsYWJsZVN0cmVhbXNbaV07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogSW5pdGlhbGl6ZXMgYSBXZWJjb20gbGlzdGVuZXIuXG5cdCAqIERlZmluZXMgY2FsbGJhY2tzIChpZiBub3QgYWxyZWFkeSBkZWZpbmVkKSBmb3IgOiBpbnN0YW50IG1lc3NhZ2VzLCBtZWRpYSBsaXN0IGFuZCBwYXJ0aWNpcGFudHMuXG5cdCAqIFRoZXNlIGNhbGxiYWNrcyBhcmUgY2FsbGVkIGlmIGEgbmV3IHZhbHVlIGlzIGFkZGVkIG9yIGlmIGEgdmFsdWUgaGFzIGJlZW4gcmVtb3ZlZCBpbiB0aGUgZGF0YWJhc2UuXG5cdCAqL1xuXHRmdW5jdGlvbiBpbml0V2ViY29tTGlzdGVuZXIoKSB7XG5cdFx0aWYgKCFwdWJsaXNoZWRNZWRpYUxpc3RDYkZvckF2YWlsYWJsZVN0cmVhbSkge1xuXHRcdFx0cHVibGlzaGVkTWVkaWFMaXN0Q2JGb3JBdmFpbGFibGVTdHJlYW0gPSBmdW5jdGlvbiAoc25hcHNob3QpIHtcblx0XHRcdFx0Y29uc3Rcblx0XHRcdFx0XHRvYmogPSB7fSxcblx0XHRcdFx0XHRuYW1lID0gc25hcHNob3QubmFtZSgpLFxuXHRcdFx0XHRcdHZhbHVlID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OnJvb21bJHtyb29tSWR9XTo6b25QdWJsaXNoZWRTdHJlYW1Gb3JBdmFpbGFibGVTdHJlYW0pc3RyZWFtPSR7SlNPTi5zdHJpbmdpZnkodmFsdWUpfWApO1xuXHRcdFx0XHRvYmpbbmFtZV0gPSB2YWx1ZTtcblx0XHRcdFx0b2JqW25hbWVdLnJvb21JZCA9IHJvb21JZDtcblx0XHRcdFx0X2FkZEF2YWlsYWJsZVN0cmVhbShvYmopO1xuXHRcdFx0fTtcblx0XHRcdGRhdGFyZWYuY2hpbGQoJ3B1Ymxpc2hlZE1lZGlhTGlzdCcpLm9uKCdjaGlsZF9hZGRlZCcsIHB1Ymxpc2hlZE1lZGlhTGlzdENiRm9yQXZhaWxhYmxlU3RyZWFtKTtcblx0XHR9XG5cblx0XHRpZiAoIXVuUHVibGlzaGVkTWVkaWFMaXN0Q2JGb3JBdmFpbGFibGVTdHJlYW0pIHtcblx0XHRcdHVuUHVibGlzaGVkTWVkaWFMaXN0Q2JGb3JBdmFpbGFibGVTdHJlYW0gPSBmdW5jdGlvbiAoc25hcHNob3QpIHtcblx0XHRcdFx0Y29uc3Qgc3RyZWFtSWQgPSBzbmFwc2hvdC5uYW1lKCk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OnJvb21bJHtyb29tSWR9XTo6b25VblB1Ymxpc2hlZFN0cmVhbUZvckF2YWlsYWJsZVN0cmVhbSlzdHJlYW09JHtzdHJlYW1JZH1gKTtcblx0XHRcdFx0X3JlbW92ZUF2YWlsYWJsZVN0cmVhbShzdHJlYW1JZCk7XG5cdFx0XHR9O1xuXHRcdFx0ZGF0YXJlZi5jaGlsZCgncHVibGlzaGVkTWVkaWFMaXN0Jykub24oJ2NoaWxkX3JlbW92ZWQnLCB1blB1Ymxpc2hlZE1lZGlhTGlzdENiRm9yQXZhaWxhYmxlU3RyZWFtKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogSW5pdGlhbGl6ZXMgdGhlIHJvb20gb2JqZWN0IGJ5IGFkZGluZyBhIG5ldyB2YWx1ZSBpbiBhIGNoaWxkIGlkZW50aWZpZWQgYnkgdGhlIHVzZXIgaWRlbnRpZmllciB1bmRlclxuXHQgKiB0aGUgcGFydGljaXBhbnRMaXN0IG5vZGVcblx0ICovXG5cdGZ1bmN0aW9uIGluaXQoKSB7XG5cdFx0ZGF0YXJlZi5jaGlsZChgcGFydGljaXBhbnRMaXN0LyR7bWV9YCkudXBkYXRlKHtcblx0XHRcdGNvbm5lY3RlZDogdHJ1ZSxcblx0XHRcdHdhc0luc2lkZVJvb206IHRydWVcblx0XHR9KTtcblx0XHRkYXRhcmVmLmNoaWxkKGBwYXJ0aWNpcGFudExpc3QvJHttZX0vY29ubmVjdGVkYCkub25EaXNjb25uZWN0KCkuc2V0KGZhbHNlKTtcblx0XHRpbml0V2ViY29tTGlzdGVuZXIoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZXR1cm4gdGhlIHJvb20gaWRlbnRpZmllclxuXHQgKiBAcmV0dXJuIHtzdHJpbmd9IC0gVGhlIHJvb20gaWRlbnRpZmllclxuXHQgKi9cblx0ZnVuY3Rpb24gX2dldFJvb21JZCgpIHtcblx0XHRyZXR1cm4gcm9vbUlkO1xuXHR9XG5cblx0LyoqXG5cdCAqIFJldHVybnMgdGhlIHVzZXIgaWRlbnRpZmllclxuXHQgKiBAcmV0dXJuIHtzdHJpbmd9IC0gVGhlIHVzZXIgaWRlbnRpZmllclxuXHQgKi9cblx0ZnVuY3Rpb24gX2dldE1lKCkge1xuXHRcdHJldHVybiBtZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBJbml0aWFsaXplcyB0aGUgUGFydGljaXBhbnRzIGFkZGVkIGxpc3RlbmVyLlxuXHQgKiBEZWZpbmVzIGNhbGxiYWNrIChyZW1vdmUgYW55IGV4aXN0aW5nIG9uZSkgZm9yIHRoZSBwYXJ0aWNpcGFudHMuXG5cdCAqIFRoaXMgY2FsbGJhY2sgaXMgY2FsbGVkLCBmaXJzdCBmb3IgYW55IGV4aXN0aW5nIGNvbm5lY3RlZCBwYXJ0aWNpcGFudHMsIHRoZW4gd2hlbiBhIG5ldyBwYXJ0aWNpcGFudCBpcyBhZGRlZC5cblx0ICovXG5cdGZ1bmN0aW9uIF9zZXRPblBhcnRpY2lwYW50Sm9pbihwX2NiKSB7XG5cdFx0Y29uc3QgcGFydGljaXBhbnRMaXN0UmVmID0gZGF0YXJlZi5jaGlsZCgncGFydGljaXBhbnRMaXN0Jyk7XG5cblx0XHRpZiAocGFydGljaXBhbnRMaXN0Sm9pbkFkZGVkQ2IpIHtcblx0XHRcdHBhcnRpY2lwYW50TGlzdFJlZi5vZmYoJ2NoaWxkX2FkZGVkJywgcGFydGljaXBhbnRMaXN0Sm9pbkFkZGVkQ2IpO1xuXHRcdFx0cGFydGljaXBhbnRMaXN0Sm9pbkFkZGVkQ2IgPSBudWxsO1xuXHRcdH1cblxuXHRcdGlmIChwYXJ0aWNpcGFudExpc3RKb2luQ2hhbmdlZENiKSB7XG5cdFx0XHRwYXJ0aWNpcGFudExpc3RSZWYub2ZmKCdjaGlsZF9jaGFuZ2VkJywgcGFydGljaXBhbnRMaXN0Sm9pbkNoYW5nZWRDYik7XG5cdFx0XHRwYXJ0aWNpcGFudExpc3RKb2luQ2hhbmdlZENiID0gbnVsbDtcblx0XHR9XG5cblx0XHRpZiAocF9jYiAmJiB0eXBlb2YgcF9jYiA9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRwYXJ0aWNpcGFudExpc3RKb2luQWRkZWRDYiA9IChzbmFwc2hvdCkgPT4ge1xuXHRcdFx0XHRjb25zdCB1c2VyID0gc25hcHNob3QubmFtZSgpO1xuXHRcdFx0XHRpZiAoc25hcHNob3QudmFsKCkgJiYgc25hcHNob3QudmFsKCkuY29ubmVjdGVkICYmIHNuYXBzaG90LnZhbCgpLndhc0luc2lkZVJvb20pIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjpyb29tWyR7cm9vbUlkfV06Ol9zZXRPblBhcnRpY2lwYW50Sm9pbikgdXNlciBoYXMgam9pbmVkOiAke3VzZXJ9YCk7XG5cdFx0XHRcdFx0cF9jYih1c2VyKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdHBhcnRpY2lwYW50TGlzdFJlZi5vbignY2hpbGRfYWRkZWQnLCBwYXJ0aWNpcGFudExpc3RKb2luQWRkZWRDYik7XG5cblx0XHRcdHBhcnRpY2lwYW50TGlzdEpvaW5DaGFuZ2VkQ2IgPSBmdW5jdGlvbiAoc25hcHNob3QpIHtcblx0XHRcdFx0Y29uc3QgdXNlciA9IHNuYXBzaG90Lm5hbWUoKTtcblx0XHRcdFx0aWYgKHNuYXBzaG90LnZhbCgpICYmIChzbmFwc2hvdC52YWwoKS5jb25uZWN0ZWQgJiYgc25hcHNob3QudmFsKCkud2FzSW5zaWRlUm9vbSkpIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjpyb29tWyR7cm9vbUlkfV06Ol9zZXRPblBhcnRpY2lwYW50Sm9pbikgdXNlciBoYXMgam9pbmVkOiAke3VzZXJ9YCk7XG5cdFx0XHRcdFx0cF9jYih1c2VyKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdHBhcnRpY2lwYW50TGlzdFJlZi5vbignY2hpbGRfY2hhbmdlZCcsIHBhcnRpY2lwYW50TGlzdEpvaW5DaGFuZ2VkQ2IpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKGAoUmVhY2hTREs6OnJvb21bJHtyb29tSWR9XTo6X3NldE9uUGFydGljaXBhbnRKb2luKXBhcmFtZXRlciBpbmNvcnJlY3QuIEV4cGVjdGVkIGZ1bmN0aW9uYCk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIEluaXRpYWxpemVzIHRoZSBQYXJ0aWNpcGFudHMgbGVmdCBsaXN0ZW5lci5cblx0ICogRGVmaW5lcyBjYWxsYmFjayAocmVtb3ZlIGFueSBleGlzdGluZyBvbmUpIGZvciB0aGUgcGFydGljaXBhbnRzLlxuXHQgKiBUaGlzIGNhbGxiYWNrIGlzIGNhbGxlZCB3aGVuIGEgbmV3IHBhcnRpY2lwYW50IGlzIHJlbW92ZWQuXG5cdCAqL1xuXHRmdW5jdGlvbiBfc2V0T25QYXJ0aWNpcGFudExlYXZlKHBfY2IpIHtcblxuXHRcdGlmIChwYXJ0aWNpcGFudExpc3RMZWF2ZUNiKSB7XG5cdFx0XHRkYXRhcmVmLmNoaWxkKCdwYXJ0aWNpcGFudExpc3QnKS5vZmYoJ2NoaWxkX2NoYW5nZWQnLCBwYXJ0aWNpcGFudExpc3RMZWF2ZUNiKTtcblx0XHRcdHBhcnRpY2lwYW50TGlzdExlYXZlQ2IgPSBudWxsO1xuXHRcdH1cblxuXHRcdGlmIChwX2NiICYmIHR5cGVvZiBwX2NiID09ICdmdW5jdGlvbicpIHtcblx0XHRcdHBhcnRpY2lwYW50TGlzdExlYXZlQ2IgPSAoc25hcHNob3QpID0+IHtcblx0XHRcdFx0Y29uc3QgdXNlciA9IHNuYXBzaG90Lm5hbWUoKTtcblx0XHRcdFx0aWYgKHNuYXBzaG90LnZhbCgpICYmICghc25hcHNob3QudmFsKCkuY29ubmVjdGVkICYmIHNuYXBzaG90LnZhbCgpLndhc0luc2lkZVJvb20pKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6cm9vbVske3Jvb21JZH1dOjpfc2V0T25QYXJ0aWNpcGFudExlYXZlKSB1c2VyIGhhcyBsZWZ0OiAke3VzZXJ9YCk7XG5cdFx0XHRcdFx0cF9jYih1c2VyKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdGRhdGFyZWYuY2hpbGQoJ3BhcnRpY2lwYW50TGlzdCcpLm9uKCdjaGlsZF9jaGFuZ2VkJywgcGFydGljaXBhbnRMaXN0TGVhdmVDYik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoYChSZWFjaFNESzo6cm9vbVske3Jvb21JZH1dOjpfc2V0T25QYXJ0aWNpcGFudExlYXZlKXBhcmFtZXRlciBpbmNvcnJlY3QuIEV4cGVjdGVkIGZ1bmN0aW9uYCk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFNlbmRzIGFuIGluc3RhbnQgbWVzc2FnZSBieSBwdXNoaW5nIGFuIG5ldyBlbGVtZW50IGluIHRoZSBkYXRhYmFzZSB3aXRoIGEgdGltZXN0YW1wLCB0aGUgbWVzc2FnZSBhbmQgaXRzIGF1dGhvciAoaS5lLiB0aGUgY3VycmVudCB1c2VyKVxuXHQgKiBAcGFyYW0ge3N0cmluZ31wX21lc3NhZ2UgLSBUaGUgbWVzc2FnZSB0byBzZW5kXG5cdCAqL1xuXHRmdW5jdGlvbiBfc2VuZEluc3RhbnRNZXNzYWdlKHBfbWVzc2FnZSkge1xuXHRcdGlmIChwX21lc3NhZ2UgIT09ICcnKSB7XG5cdFx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjpyb29tWyR7cm9vbUlkfV06OnNlbmRJbnN0YW50TWVzc2FnZSltZXNzYWdlPSR7cF9tZXNzYWdlfWApO1xuXHRcdFx0ZGF0YXJlZi5jaGlsZCgnaW5zdGFudE1lc3NhZ2VMaXN0JykucHVzaCh7XG5cdFx0XHRcdGZyb206IG1lLFxuXHRcdFx0XHRtZXNzYWdlOiBwX21lc3NhZ2UsXG5cdFx0XHRcdHRpbWVzdGFtcDogV2ViY29tLlNlcnZlclZhbHVlLlRJTUVTVEFNUFxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIEluaXRpYWxpemVzIHRoZSBpbnN0YW50IG1lc3NhZ2UgbGlzdGVuZXIuXG5cdCAqIERlZmluZXMgY2FsbGJhY2sgKHJlbW92ZSBhbnkgZXhpc3Rpbmcgb25lKSBmb3IgOiBpbnN0YW50IG1lc3NhZ2VzLlxuXHQgKiBUaGlzIGNhbGxiYWNrIGlzIGNhbGxlZCwgZmlyc3QgZm9yIGFueSBleGlzdGluZyBpbnN0YW50IG1lc3NhZ2VzLCB0aGVuIHdoZW4gYSBuZXcgdmFsdWUgaXMgYWRkZWQgaW4gdGhlIGRhdGFiYXNlLlxuXHQgKi9cblx0ZnVuY3Rpb24gX3NldE9uSW5zdGFudE1lc3NhZ2UocF9jYikge1xuXHRcdGlmIChpbnN0YW50TWVzc2FnZUxpc3RDYikge1xuXHRcdFx0ZGF0YXJlZi5jaGlsZCgnaW5zdGFudE1lc3NhZ2VMaXN0Jykub2ZmKCdjaGlsZF9hZGRlZCcsIGluc3RhbnRNZXNzYWdlTGlzdENiKTtcblx0XHRcdGluc3RhbnRNZXNzYWdlTGlzdENiID0gbnVsbDtcblx0XHR9XG5cdFx0aWYgKHBfY2IgJiYgdHlwZW9mIHBfY2IgPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0aW5zdGFudE1lc3NhZ2VMaXN0Q2IgPSBmdW5jdGlvbiAoc25hcHNob3QpIHtcblx0XHRcdFx0Y29uc3Qgb2JqID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OnJvb21bJHtyb29tSWR9XTo6X3NldE9uSW5zdGFudE1lc3NhZ2UpcmVjZWl2ZSBJbnN0YW50TWVzc2FnZT0ke0pTT04uc3RyaW5naWZ5KG9iail9YCk7XG5cdFx0XHRcdHBfY2Iob2JqKTtcblx0XHRcdH07XG5cdFx0XHRkYXRhcmVmLmNoaWxkKCdpbnN0YW50TWVzc2FnZUxpc3QnKS5vbignY2hpbGRfYWRkZWQnLCBpbnN0YW50TWVzc2FnZUxpc3RDYik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoYChSZWFjaFNESzo6cm9vbVske3Jvb21JZH1dOjpfc2V0T25JbnN0YW50TWVzc2FnZSlwYXJhbWV0ZXIgaW5jb3JyZWN0LiBFeHBlY3RlZCBmdW5jdGlvbmApO1xuXHRcdH1cblx0fVxuXG5cblx0LyoqXG5cdCAqIFB1Ymxpc2hlcyB0aGUgc3RyZWFtXG5cdCAqIEBwYXJhbSBzdHJlYW1JZCAtIFRoZSBpZGVudGlmaWVyIG9mIHRoZSBzdHJlYW0gdG8gcHVibGlzaFxuXHQgKiBAcGFyYW0gbG9jYWxWaWQgLSBUaGUgbG9jYWwgdmlkZW9cblx0ICogQHBhcmFtIHBfYWN0aW9uVHlwZSAtIEEgdmFsdWUgZGV0ZXJtaW5pbmcgdGhlIHR5cGUgb2Ygc3RyZWFtIGluIHVzZSAodmlkZW8sIGF1ZGlvLCB2aWRlbyBhbmQgYXVkaW8sIHNjcmVlbi1zaGFyaW5nKS5cblx0ICogQHBhcmFtIGdldExvY2FsU3RyZWFtQ2IgLSBhIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIHJldHJpZXZlIHRoZSBtZWRpYXN0cmVhbSBvYmplY3Rcblx0ICovXG5cdGZ1bmN0aW9uIF9wdWJsaXNoU3RyZWFtKHN0cmVhbUlkLCBsb2NhbFZpZCwgcF9hY3Rpb25UeXBlLCBnZXRMb2NhbFN0cmVhbUNiKSB7XG5cdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6cm9vbVske3Jvb21JZH1dOjpwdWJsaXNoU3RyZWFtKXJvb21JZD0ke3Jvb21JZH0sc3RyZWFtSWQ9JHtzdHJlYW1JZH0sbWU9JHttZX0sYWN0aW9uVHlwZT0ke3BfYWN0aW9uVHlwZX1gKTtcblx0XHRpZiAoIShzdHJlYW1JZCAmJiB0eXBlb2Ygc3RyZWFtSWQgPT0gJ3N0cmluZycpKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKCcoUmVhY2hTREs6OnJlYWNoOjppbnZpdGVUb1Jvb20pcGFyYW1ldGVyIHN0cmVhbUlkIGlzIGluY29ycmVjdC4gRXhwZWN0aW5nIG5vbiBlbXB0eSBzdHJpbmcnKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0Y29uc3QgbG9jYWxEYXRhUmVmID0gZGF0YXJlZi5jaGlsZCgncHVibGlzaGVkTWVkaWFMaXN0JykuY2hpbGQoc3RyZWFtSWQpO1xuXHRcdGNvbnN0IHJlbW90ZURhdGFSZWYgPSBsb2NhbERhdGFSZWYuY2hpbGQoJ3N1YnNjcmliZXJzTGlzdCcpO1xuXG5cdFx0Y29uc3QgcHViQW5kU3Vic2NyaWJlID0gKCkgPT4ge1xuXHRcdFx0Ly8gcHVibGlzaCB0aGUgc3RyZWFtXG5cdFx0XHRsb2NhbERhdGFSZWYuc2V0KHtcblx0XHRcdFx0ZnJvbTogbWUsXG5cdFx0XHRcdGFwcEluc3RhbmNlSWQ6IHV0aWxzLmFwcEluc3RhbmNlSWQsXG5cdFx0XHRcdGFjdGlvblR5cGU6IHBfYWN0aW9uVHlwZVxuXHRcdFx0fSk7XG5cdFx0XHRsb2NhbERhdGFSZWYub25EaXNjb25uZWN0KCkucmVtb3ZlKCk7XG5cblx0XHRcdC8vIHN1YnNjcmliZSB0byBzdHJlYW0gdXBkYXRlcyBmb3IgYWRkXG5cdFx0XHRjb25zdCBhZGRTdWJzY3JpYmVyc0xpc3RDYiA9IChzbmFwc2hvdCkgPT4ge1xuXHRcdFx0XHRjb25zdFxuXHRcdFx0XHRcdHJlbW90ZUFwcEluc3RhbmNlSWQgPSBzbmFwc2hvdC5uYW1lKCksXG5cdFx0XHRcdFx0ZGF0YSA9IHNuYXBzaG90LnZhbCgpLFxuXHRcdFx0XHRcdF9zdWJzY3JpYmVySWQgPSBkYXRhLnVzZXJJZCxcblx0XHRcdFx0XHRfcGVlcmNvSWQgPSBkYXRhLnBlZXJjb0lkLFxuXHRcdFx0XHRcdF9wZWVyY29SZWYgPSBkYXRhLnBlZXJjb1JlZixcblx0XHRcdFx0XHRpc0F1ZGlvTXV0ZSA9IG1NdXRlZFN0cmVhbXNbc3RyZWFtSWRdICYmIG1NdXRlZFN0cmVhbXNbc3RyZWFtSWRdLmF1ZGlvLFxuXHRcdFx0XHRcdGlzVmlkZW9NdXRlID0gbU11dGVkU3RyZWFtc1tzdHJlYW1JZF0gJiYgbU11dGVkU3RyZWFtc1tzdHJlYW1JZF0udmlkZW8sXG5cdFx0XHRcdFx0c3RyZWFtU3RhY2tJZCA9IGAke3N0cmVhbUlkfV9wdWJgO1xuXG5cdFx0XHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OnJvb21bJHtyb29tSWR9XTo6cHVibGlzaFN0cmVhbTo6YWRkU3Vic2NyaWJlcnNMaXN0Q2Ipc3Vic2NyaWJlciAke19zdWJzY3JpYmVySWR9IHRvIHN0cmVhbSAke3N0cmVhbUlkfSBhZGRlZCAke0pTT04uc3RyaW5naWZ5KGRhdGEpfWApO1xuXG5cdFx0XHRcdGlmICghcm9vbVdlYnJ0Y1N0YWNrc1tzdHJlYW1TdGFja0lkXSkge1xuXHRcdFx0XHRcdHJvb21XZWJydGNTdGFja3Nbc3RyZWFtU3RhY2tJZF0gPSBbXTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNvbnN0IG1TdGFja0lkID0gd2VicnRjbW5nci5jcmVhdGVXZWJydGMobG9jYWxWaWQsIHJlbW90ZUFwcEluc3RhbmNlSWQsICgpID0+IHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjpyb29tWyR7cm9vbUlkfV06OnB1Ymxpc2hTdHJlYW06OmFkZFN1YnNjcmliZXJzTGlzdENiKXN1YnNjcmliZXIgJHtfc3Vic2NyaWJlcklkfSB0byBzdHJlYW0gJHtzdHJlYW1JZH0gY29ubmVjdGlvbiBsb3N0YCk7XG5cdFx0XHRcdFx0Ly9vblVuUHVibGlzaGVkU3RyZWFtKGxvY2FsVmlkLCByZW1vdGVWaWQpO1xuXHRcdFx0XHR9LCB0cnVlLCBwX2FjdGlvblR5cGUsIF9wZWVyY29JZCwgX3BlZXJjb1JlZiwgaXNBdWRpb011dGUsIGlzVmlkZW9NdXRlKTtcblxuXHRcdFx0XHRyb29tV2VicnRjU3RhY2tzW3N0cmVhbVN0YWNrSWRdLnB1c2goe1xuXHRcdFx0XHRcdHN0YWNrSWQ6IG1TdGFja0lkLFxuXHRcdFx0XHRcdHN1YnNjcmliZXJJZDogX3N1YnNjcmliZXJJZCxcblx0XHRcdFx0XHRpc1B1Ymxpc2g6IHRydWUsXG5cdFx0XHRcdFx0cGVlcmNvSWQ6IF9wZWVyY29JZCxcblx0XHRcdFx0XHRwZWVyY29SZWY6IF9wZWVyY29SZWYsXG5cdFx0XHRcdFx0c3RyZWFtSWRcblx0XHRcdFx0fSk7XG5cdFx0XHRcdC8vZGVsZXRlIHJvb21XZWJydGNTdGFja3Nbc3RyZWFtSWQrXCJfcHViXCJdO1xuXHRcdFx0XHQvLyQoXCJkaXYjdmlkZW9CdXR0b25fXCIrcm9vbUlkK1wiLnZpZGVvQnV0dG9uLCBkaXYjbWljQnV0dG9uX1wiK3Jvb21JZCtcIi5taWNCdXR0b25cIikucmVtb3ZlQ2xhc3MoXCJkaXNhYmxlZFwiKTtcblx0XHRcdH07XG5cblx0XHRcdC8vIHN1YnNjcmliZSB0byBzdHJlYW0gdXBkYXRlcyBmb3IgcmVtb3ZlXG5cdFx0XHRjb25zdCByZW1vdmVTdWJzY3JpYmVyc0xpc3RDYiA9IChzbmFwc2hvdCkgPT4ge1xuXHRcdFx0XHRjb25zdFxuXHRcdFx0XHRcdHN1YnNjcmliZXJJZCA9IHNuYXBzaG90LnZhbCgpLnVzZXJJZCxcblx0XHRcdFx0XHRzdHJlYW1TdGFja3MgPSByb29tV2VicnRjU3RhY2tzW2Ake3N0cmVhbUlkfV9wdWJgXTtcblxuXHRcdFx0XHRpZiAoc3Vic2NyaWJlcklkICYmIHN0cmVhbVN0YWNrcykge1xuXHRcdFx0XHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OnJvb21bJHtyb29tSWR9XTo6cHVibGlzaFN0cmVhbTo6cmVtb3ZlU3Vic2NyaWJlcnNMaXN0Q2Ipc3Vic2NyaWJlciAke3N1YnNjcmliZXJJZH0gdG8gc3RyZWFtICR7c3RyZWFtSWR9IHJlbW92ZWRgKTtcblx0XHRcdFx0XHRjb25zb2xlLmxvZyhzdHJlYW1TdGFja3MpO1xuXHRcdFx0XHRcdGZvciAobGV0IGkgPSBzdHJlYW1TdGFja3MubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRcdFx0XHRcdGlmIChzdHJlYW1TdGFja3NbaV0uc3Vic2NyaWJlcklkID09PSBzdWJzY3JpYmVySWQpIHtcblx0XHRcdFx0XHRcdFx0d2VicnRjbW5nci5jbG9zZVdlYnJ0YyhzdHJlYW1TdGFja3NbaV0uc3RhY2tJZCwgdHJ1ZSk7XG5cdFx0XHRcdFx0XHRcdHJvb21XZWJydGNTdGFja3NbYCR7c3RyZWFtSWR9X3B1YmBdLnNwbGljZShpLDEpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb25zb2xlLmxvZyhyb29tV2VicnRjU3RhY2tzW2Ake3N0cmVhbUlkfV9wdWJgXSk7XG5cdFx0XHRcdFx0Ly9kZWxldGUgcm9vbVdlYnJ0Y1N0YWNrc1tgJHtzdHJlYW1JZH1fcHViYF07XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cblx0XHRcdG1TdHJlYW1zW3N0cmVhbUlkXSA9IHtcblx0XHRcdFx0YWRkU3Vic2NyaWJlcnNMaXN0Q2IsXG5cdFx0XHRcdHJlbW92ZVN1YnNjcmliZXJzTGlzdENiXG5cdFx0XHR9O1xuXG5cdFx0XHRyZW1vdGVEYXRhUmVmLm9uKCdjaGlsZF9hZGRlZCcsIGFkZFN1YnNjcmliZXJzTGlzdENiKTtcblx0XHRcdHJlbW90ZURhdGFSZWYub24oJ2NoaWxkX3JlbW92ZWQnLCByZW1vdmVTdWJzY3JpYmVyc0xpc3RDYik7XG5cdFx0fTtcblxuXHRcdC8vaW5pdCBsb2NhbCBzdHJlYW1cblx0XHRpZiAocF9hY3Rpb25UeXBlKSB7XG5cdFx0XHRpZiAocF9hY3Rpb25UeXBlID09PSBhY3Rpb25zLkFDVElPTl9UWVBFX1ZJREVPKSB7XG5cdFx0XHRcdGxvY2Fsc3RyZWFtLmNvbm5lY3RMb2NhbFZpZGVvU3RyZWFtKGxvY2FsVmlkLCBwdWJBbmRTdWJzY3JpYmUsIGdldExvY2FsU3RyZWFtQ2IpO1xuXHRcdFx0fSBlbHNlIGlmIChwX2FjdGlvblR5cGUgPT09IGFjdGlvbnMuQUNUSU9OX1RZUEVfQVVESU8pIHtcblx0XHRcdFx0bG9jYWxzdHJlYW0uY29ubmVjdExvY2FsQXVkaW9TdHJlYW0obG9jYWxWaWQsIHB1YkFuZFN1YnNjcmliZSwgZ2V0TG9jYWxTdHJlYW1DYik7XG5cdFx0XHR9IGVsc2UgaWYgKHBfYWN0aW9uVHlwZSA9PT0gYWN0aW9ucy5BQ1RJT05fVFlQRV9BVURJT19WSURFTykge1xuXHRcdFx0XHRsb2NhbHN0cmVhbS5jb25uZWN0TG9jYWxBdWRpb1ZpZGVvU3RyZWFtKGxvY2FsVmlkLCBwdWJBbmRTdWJzY3JpYmUsIGdldExvY2FsU3RyZWFtQ2IpO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBJbml0aWFsaXplcyB0aGUgUHVibGlzaGVkIE1lZGlhTGlzdCBsaXN0ZW5lci5cblx0ICogRGVmaW5lcyBjYWxsYmFjayAocmVtb3ZlIGFueSBleGlzdGluZyBvbmUpIGZvciA6IHB1Ymxpc2hlZCBNZWRpYS5cblx0ICogVGhpcyBjYWxsYmFjayBpcyBjYWxsZWQsIGZpcnN0IGZvciBhbnkgZXhpc3RpbmcgcHVibGlzaGVkIG1lZGlhLCB0aGVuIHdoZW4gYSBuZXcgdmFsdWUgaXMgYWRkZWQgaW4gdGhlIGRhdGFiYXNlLlxuXHQgKi9cblx0ZnVuY3Rpb24gX3NldE9uUHVibGlzaGVkU3RyZWFtKHBfY2IpIHtcblxuXHRcdGlmIChwdWJsaXNoZWRNZWRpYUxpc3RDYikge1xuXHRcdFx0ZGF0YXJlZi5jaGlsZCgncHVibGlzaGVkTWVkaWFMaXN0Jykub2ZmKCdjaGlsZF9hZGRlZCcsIHB1Ymxpc2hlZE1lZGlhTGlzdENiKTtcblx0XHRcdHB1Ymxpc2hlZE1lZGlhTGlzdENiID0gbnVsbDtcblx0XHR9XG5cdFx0aWYgKHBfY2IgJiYgdHlwZW9mIHBfY2IgPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0cHVibGlzaGVkTWVkaWFMaXN0Q2IgPSBmdW5jdGlvbiAoc25hcHNob3QpIHtcblx0XHRcdFx0Y29uc3Rcblx0XHRcdFx0XHRvYmogPSB7fSxcblx0XHRcdFx0XHRuYW1lID0gc25hcHNob3QubmFtZSgpO1xuXHRcdFx0XHRvYmpbbmFtZV0gPSBzbmFwc2hvdC52YWwoKTtcblx0XHRcdFx0b2JqW25hbWVdLnJvb21JZCA9IHJvb21JZDtcblx0XHRcdFx0cF9jYihvYmopO1xuXHRcdFx0fTtcblx0XHRcdGRhdGFyZWYuY2hpbGQoJ3B1Ymxpc2hlZE1lZGlhTGlzdCcpLm9uKCdjaGlsZF9hZGRlZCcsIHB1Ymxpc2hlZE1lZGlhTGlzdENiKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc29sZS5lcnJvcihgKFJlYWNoU0RLOjpyb29tWyR7cm9vbUlkfV06Ol9zZXRPblB1Ymxpc2hlZFN0cmVhbSlwYXJhbWV0ZXIgaW5jb3JyZWN0LiBFeHBlY3RlZCBmdW5jdGlvbmApO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBVbnB1Ymxpc2hlcyB0aGUgc3RyZWFtXG5cdCAqIEBwYXJhbSBzdHJlYW1JZCAtIFRoZSBzdHJlYW0gaWRlbnRpZmllclxuXHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYWxsYmFjayAtIFRoZSBjYWxsYmFjayB0byB0cmlnZ2VyXG5cdCAqL1xuXHRmdW5jdGlvbiBfdW5QdWJsaXNoU3RyZWFtKHN0cmVhbUlkLCBjYWxsYmFjaykge1xuXHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OnJvb21bJHtyb29tSWR9XTo6dW5QdWJsaXNoU3RyZWFtKXN0cmVhbUlkICR7c3RyZWFtSWR9YCk7XG5cdFx0Y29uc3Rcblx0XHRcdGxvY2FsRGF0YVJlZiA9IGRhdGFyZWYuY2hpbGQoYHB1Ymxpc2hlZE1lZGlhTGlzdC8ke3N0cmVhbUlkfWApLFxuXHRcdFx0cmVtb3RlRGF0YVJlZiA9IGxvY2FsRGF0YVJlZi5jaGlsZCgnc3Vic2NyaWJlcnNMaXN0JyksXG5cdFx0XHRzdHJlYW1TdGFja3NJZCA9IGAke3N0cmVhbUlkfV9wdWJgO1xuXG5cdFx0aWYgKG1TdHJlYW1zW3N0cmVhbUlkXSAmJiBtU3RyZWFtc1tzdHJlYW1JZF0uYWRkU3Vic2NyaWJlcnNMaXN0Q2IpIHtcblx0XHRcdHJlbW90ZURhdGFSZWYub2ZmKCdjaGlsZF9hZGRlZCcsIG1TdHJlYW1zW3N0cmVhbUlkXS5hZGRTdWJzY3JpYmVyc0xpc3RDYik7XG5cdFx0fVxuXHRcdGlmIChtU3RyZWFtc1tzdHJlYW1JZF0gJiYgbVN0cmVhbXNbc3RyZWFtSWRdLnJlbW92ZVN1YnNjcmliZXJzTGlzdENiKSB7XG5cdFx0XHRyZW1vdGVEYXRhUmVmLm9mZignY2hpbGRfcmVtb3ZlZCcsIG1TdHJlYW1zW3N0cmVhbUlkXS5yZW1vdmVTdWJzY3JpYmVyc0xpc3RDYik7XG5cdFx0fVxuXG5cdFx0ZGVsZXRlIG1TdHJlYW1zW3N0cmVhbUlkXTtcblx0XHRkZWxldGUgbU11dGVkU3RyZWFtc1tzdHJlYW1JZF07XG5cblx0XHRsb2NhbERhdGFSZWYub25EaXNjb25uZWN0KCkuY2FuY2VsKCk7XG5cdFx0bG9jYWxEYXRhUmVmLnJlbW92ZSgpO1xuXG5cblx0XHRpZiAocm9vbVdlYnJ0Y1N0YWNrc1tzdHJlYW1TdGFja3NJZF0gJiYgcm9vbVdlYnJ0Y1N0YWNrc1tzdHJlYW1TdGFja3NJZF0ubGVuZ3RoID4gMCkge1xuXHRcdFx0bGV0IG5iU3RhY2sgPSByb29tV2VicnRjU3RhY2tzW3N0cmVhbVN0YWNrc0lkXS5sZW5ndGg7XG5cdFx0XHRjb25zdCBjbG9zZUNiID0gKCkgPT4ge1xuXHRcdFx0XHRuYlN0YWNrLS07XG5cdFx0XHRcdGlmIChuYlN0YWNrIDwgMSkge1xuXHRcdFx0XHRcdGRlbGV0ZSByb29tV2VicnRjU3RhY2tzW3N0cmVhbVN0YWNrc0lkXTtcblx0XHRcdFx0XHRpZiAoY2FsbGJhY2sgJiYgdHlwZW9mIGNhbGxiYWNrID09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRcdGNhbGxiYWNrKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdFx0Zm9yIChsZXQgaSA9IG5iU3RhY2sgLSAxOyBpID49IDA7IGktLSkge1xuXHRcdFx0XHR3ZWJydGNtbmdyLmNsb3NlV2VicnRjKHJvb21XZWJydGNTdGFja3Nbc3RyZWFtU3RhY2tzSWRdW2ldLnN0YWNrSWQsIHRydWUsIGNsb3NlQ2IpO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRkZWxldGUgcm9vbVdlYnJ0Y1N0YWNrc1tzdHJlYW1TdGFja3NJZF07XG5cdFx0XHRpZiAoY2FsbGJhY2sgJiYgdHlwZW9mIGNhbGxiYWNrID09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0Y2FsbGJhY2soKTtcblx0XHRcdH1cblx0XHR9XG5cblxuXHR9XG5cblx0LyoqXG5cdCAqIEluaXRpYWxpemVzIHRoZSB1blB1Ymxpc2hlZCBNZWRpYUxpc3QgbGlzdGVuZXIuXG5cdCAqIERlZmluZXMgY2FsbGJhY2sgKHJlbW92ZSBhbnkgZXhpbnRpbmcgb25lKSBmb3IgOiB1bnB1Ymxpc2hlZCBNZWRpYS5cblx0ICogVGhpcyBjYWxsYmFjayBpcyBjYWxsZWQgd2hlbiBhIG1lZGlhIGlzIHVucHVibGlzaC5cblx0ICovXG5cdGZ1bmN0aW9uIF9zZXRPblVuUHVibGlzaGVkU3RyZWFtKHBfY2IpIHtcblxuXHRcdGlmICh1blB1Ymxpc2hlZE1lZGlhTGlzdENiKSB7XG5cdFx0XHRkYXRhcmVmLmNoaWxkKCdwdWJsaXNoZWRNZWRpYUxpc3QnKS5vZmYoJ2NoaWxkX3JlbW92ZWQnLCB1blB1Ymxpc2hlZE1lZGlhTGlzdENiKTtcblx0XHRcdHVuUHVibGlzaGVkTWVkaWFMaXN0Q2IgPSBudWxsO1xuXHRcdH1cblx0XHRpZiAocF9jYiAmJiB0eXBlb2YgcF9jYiA9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHR1blB1Ymxpc2hlZE1lZGlhTGlzdENiID0gKHNuYXBzaG90KSA9PiB7XG5cdFx0XHRcdHBfY2Ioc25hcHNob3QubmFtZSgpKTtcblx0XHRcdH07XG5cdFx0XHRkYXRhcmVmLmNoaWxkKCdwdWJsaXNoZWRNZWRpYUxpc3QnKS5vbignY2hpbGRfcmVtb3ZlZCcsIHVuUHVibGlzaGVkTWVkaWFMaXN0Q2IpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKGAoUmVhY2hTREs6OnJvb21bJHtyb29tSWR9XTo6X3NldE9uVW5QdWJsaXNoZWRTdHJlYW0pcGFyYW1ldGVyIGluY29ycmVjdC4gRXhwZWN0ZWQgZnVuY3Rpb25gKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogU3Vic2NyaWJlcyB0byBhIHN0cmVhbSBhbmQgYWRkcyBjYWxsYmFja3MgdG8gdGhlIGRlZGljYXRlZCBub2RlIGFjY29yZGluZyB0byB0aGUgYWN0aW9uIHR5cGUgb2YgdGhlIHN0cmVhbSBkYXRhLlxuXHQgKiBAcGFyYW0gc3RyZWFtRGF0YSAtIFRoZSBzdHJlYW0gZGF0YVxuXHQgKiBAcGFyYW0gcmVtb3RlVmlkIC0gVGhlIHJlbW90ZSB2aWRlb1xuXHQgKiBAcGFyYW0gZ2V0UmVtb3RlU3RyZWFtQ2IgLSBhIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIHJldHJpZXZlIHRoZSBtZWRpYXN0cmVhbSBvYmplY3Rcblx0ICovXG5cdGZ1bmN0aW9uIF9zdWJzY3JpYmVUb1N0cmVhbShzdHJlYW1EYXRhLCByZW1vdGVWaWQsIGdldFJlbW90ZVN0cmVhbUNiKSB7XG5cdFx0Y29uc3Rcblx0XHRcdHN0cmVhbUlkID0gT2JqZWN0LmtleXMoc3RyZWFtRGF0YSlbMF0sXG5cdFx0XHRhY3Rpb25UeXBlID0gc3RyZWFtRGF0YVtzdHJlYW1JZF0uYWN0aW9uVHlwZTtcblx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjpyb29tWyR7cm9vbUlkfV06OnN1YnNjcmliZVRvU3RyZWFtKXN0cmVhbUlkICR7c3RyZWFtSWR9YCk7XG5cdFx0Ly90ZXN0IGlmIHN0cmVhbSBpcyBub3Qgb3VyXG5cdFx0aWYgKG1TdHJlYW1zICYmIG1TdHJlYW1zW3N0cmVhbUlkXSkge1xuXHRcdFx0Ly9pdCBpcyBvdXIgc3RyZWFtIC0+IHN1YnNjcmliZSB0byBsb2NhbFN0cmVhbVxuXHRcdFx0aWYgKGFjdGlvblR5cGUpIHtcblx0XHRcdFx0aWYgKGFjdGlvblR5cGUgPT09IGFjdGlvbnMuQUNUSU9OX1RZUEVfVklERU8pIHtcblx0XHRcdFx0XHRsb2NhbHN0cmVhbS5jb25uZWN0TG9jYWxWaWRlb1N0cmVhbShyZW1vdGVWaWQsIGdldFJlbW90ZVN0cmVhbUNiKTtcblx0XHRcdFx0fSBlbHNlIGlmIChhY3Rpb25UeXBlID09PSBhY3Rpb25zLkFDVElPTl9UWVBFX0FVRElPKSB7XG5cdFx0XHRcdFx0bG9jYWxzdHJlYW0uY29ubmVjdExvY2FsQXVkaW9TdHJlYW0ocmVtb3RlVmlkLCBnZXRSZW1vdGVTdHJlYW1DYik7XG5cdFx0XHRcdH0gZWxzZSBpZiAoYWN0aW9uVHlwZSA9PT0gYWN0aW9ucy5BQ1RJT05fVFlQRV9BVURJT19WSURFTykge1xuXHRcdFx0XHRcdGxvY2Fsc3RyZWFtLmNvbm5lY3RMb2NhbEF1ZGlvVmlkZW9TdHJlYW0ocmVtb3RlVmlkLCBnZXRSZW1vdGVTdHJlYW1DYik7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBzdHJlYW1JZDtcblx0XHR9XG5cblxuXHRcdGNvbnN0XG5cdFx0XHRhcHBJbnN0YW5jZUlkID0gc3RyZWFtRGF0YVtzdHJlYW1JZF0uYXBwSW5zdGFuY2VJZCxcblx0XHRcdGxvY2FsRGF0YVJlZiA9IGRhdGFyZWYuY2hpbGQoJ3B1Ymxpc2hlZE1lZGlhTGlzdCcpLmNoaWxkKHN0cmVhbUlkKSxcblx0XHRcdHJlbW90ZURhdGFSZWYgPSBsb2NhbERhdGFSZWYuY2hpbGQoJ3N1YnNjcmliZXJzTGlzdCcpLFxuXHRcdFx0c3RyZWFtU3RhY2tzSWQgPSBgJHtzdHJlYW1JZH1fc3ViYDtcblxuXHRcdGxldCBfcGVlcmNvSWQsIF9wZWVyY29SZWY7XG5cblx0XHRpZiAoIXJvb21XZWJydGNTdGFja3Nbc3RyZWFtU3RhY2tzSWRdKSB7XG5cdFx0XHRyb29tV2VicnRjU3RhY2tzW3N0cmVhbVN0YWNrc0lkXSA9IFtdO1xuXHRcdH0gZWxzZSBpZiAocm9vbVdlYnJ0Y1N0YWNrc1tzdHJlYW1TdGFja3NJZF0gJiYgcm9vbVdlYnJ0Y1N0YWNrc1tzdHJlYW1TdGFja3NJZF1bMF0gJiYgcm9vbVdlYnJ0Y1N0YWNrc1tzdHJlYW1TdGFja3NJZF1bMF0ucGVlcmNvSWQpIHtcblx0XHRcdF9wZWVyY29JZCA9IHJvb21XZWJydGNTdGFja3Nbc3RyZWFtU3RhY2tzSWRdWzBdLnBlZXJjb0lkO1xuXHRcdH1cblxuXHRcdC8vIFJldHVybnMgYSByYW5kb20gaW50ZWdlciBiZXR3ZWVuIG1pbiAoaW5jbHVkZWQpIGFuZCBtYXggKGluY2x1ZGVkKVxuXHRcdC8vIFVzaW5nIE1hdGgucm91bmQoKSB3aWxsIGdpdmUgeW91IGEgbm9uLXVuaWZvcm0gZGlzdHJpYnV0aW9uIVxuXHRcdGNvbnN0IGdldFJhbmRvbUludEluY2x1c2l2ZSA9IChtaW4sIG1heCkgPT4ge1xuXHRcdFx0cmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4gKyAxKSkgKyBtaW47XG5cdFx0fTtcblxuXHRcdGlmICghX3BlZXJjb0lkKSB7XG5cdFx0XHRfcGVlcmNvSWQgPSBNYXRoLmZsb29yKERhdGUubm93KCkpLnRvU3RyaW5nKCkgKyBnZXRSYW5kb21JbnRJbmNsdXNpdmUoMCwgMTAwMDAwMCk7XG5cdFx0fVxuXG5cdFx0X3BlZXJjb1JlZiA9IGRhdGFyZWZzLmdldFdlYnJ0YygpLnB1c2goKS5uYW1lKCk7XG5cblx0XHRyZW1vdGVEYXRhUmVmLmNoaWxkKHV0aWxzLmFwcEluc3RhbmNlSWQpLnNldCh7XG5cdFx0XHR0czogV2ViY29tLlNlcnZlclZhbHVlLlRJTUVTVEFNUCxcblx0XHRcdHVzZXJJZDogbWUsXG5cdFx0XHRwZWVyY29JZDogX3BlZXJjb0lkLFxuXHRcdFx0cGVlcmNvUmVmOiBfcGVlcmNvUmVmXG5cdFx0fSk7XG5cblx0XHRjb25zdFxuXHRcdFx0aXNBdWRpb011dGUgPSBtTXV0ZWRTdHJlYW1zW3N0cmVhbUlkXSAmJiBtTXV0ZWRTdHJlYW1zW3N0cmVhbUlkXS5hdWRpbyxcblx0XHRcdGlzVmlkZW9NdXRlID0gbU11dGVkU3RyZWFtc1tzdHJlYW1JZF0gJiYgbU11dGVkU3RyZWFtc1tzdHJlYW1JZF0udmlkZW87XG5cblx0XHRjb25zdCBtU3RhY2tJZCA9IHdlYnJ0Y21uZ3IuY3JlYXRlV2VicnRjKHJlbW90ZVZpZCwgYXBwSW5zdGFuY2VJZCwgKCkgPT4ge1xuXHRcdFx0Ly9cdG9uVW5QdWJsaXNoZWRTdHJlYW0obG9jYWxWaWQsIHJlbW90ZVZpZCk7XG5cdFx0fSwgZmFsc2UsIGFjdGlvblR5cGUsIF9wZWVyY29JZCwgX3BlZXJjb1JlZiwgaXNBdWRpb011dGUsIGlzVmlkZW9NdXRlLCBnZXRSZW1vdGVTdHJlYW1DYik7XG5cblx0XHQvL2hhbmRsZSByZW1vdGUgdW5wdWJsaXNoXG5cdFx0aWYgKCFyZW1vdGVVbnB1Ymxpc2hlZENiKSB7XG5cdFx0XHRyZW1vdGVVbnB1Ymxpc2hlZENiID0gZnVuY3Rpb24gKHNuYXBzaG90KSB7XG5cdFx0XHRcdGNvbnN0IHJlbW92ZWRTdHJlYW1JZCA9IGAke09iamVjdC5rZXlzKHNuYXBzaG90KVswXX1fc3ViYDtcblx0XHRcdFx0aWYgKHJvb21XZWJydGNTdGFja3NbcmVtb3ZlZFN0cmVhbUlkXSkge1xuXHRcdFx0XHRcdGxldCBpID0gMDtcblx0XHRcdFx0XHR3aGlsZSAoaSA8IHJvb21XZWJydGNTdGFja3NbcmVtb3ZlZFN0cmVhbUlkXS5sZW5ndGgpIHtcblx0XHRcdFx0XHRcdHdlYnJ0Y21uZ3IuY2xvc2VXZWJydGMocm9vbVdlYnJ0Y1N0YWNrc1tyZW1vdmVkU3RyZWFtSWRdW2ldLnN0YWNrSWQsIGZhbHNlKTtcblx0XHRcdFx0XHRcdGkrKztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZGVsZXRlIHJvb21XZWJydGNTdGFja3NbcmVtb3ZlZFN0cmVhbUlkXTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdGRhdGFyZWYuY2hpbGQoJ3B1Ymxpc2hlZE1lZGlhTGlzdCcpLm9uKCdjaGlsZF9yZW1vdmVkJywgcmVtb3RlVW5wdWJsaXNoZWRDYik7XG5cdFx0fVxuXG5cdFx0cm9vbVdlYnJ0Y1N0YWNrc1tzdHJlYW1TdGFja3NJZF0ucHVzaCh7XG5cdFx0XHRzdGFja0lkOiBtU3RhY2tJZCxcblx0XHRcdGlzUHVibGlzaDogZmFsc2UsXG5cdFx0XHRwZWVyY29JZDogX3BlZXJjb0lkLFxuXHRcdFx0cGVlcmNvUmVmOiBfcGVlcmNvUmVmLFxuXHRcdFx0c3RyZWFtSWRcblx0XHR9KTtcblxuXHRcdHJldHVybiBzdHJlYW1JZDtcblx0fVxuXG5cdC8qKlxuXHQgKiBVblN1YnNjcmliZSBmcm9tIGEgc3RyZWFtXG5cdCAqIEBwYXJhbSBzdHJlYW1JZCAtIFRoZSBzdHJlYW0gaWRlbnRpZmllciBmcm9tIHdoaWNoIHRoZSB1blN1YnNjcmlwdGlvbiBoYXZlIHRvIGJlIGRvbmVcblx0ICovXG5cdGZ1bmN0aW9uIF91blN1YnNjcmliZUZyb21TdHJlYW0oc3RyZWFtSWQpIHtcblx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjpyb29tWyR7cm9vbUlkfV06OnVuU3Vic2NyaWJlRnJvbVN0cmVhbSlzdHJlYW1JZCAke3N0cmVhbUlkfWApO1xuXHRcdGNvbnN0XG5cdFx0XHRsb2NhbERhdGFSZWYgPSBkYXRhcmVmLmNoaWxkKCdwdWJsaXNoZWRNZWRpYUxpc3QnKS5jaGlsZChzdHJlYW1JZCksXG5cdFx0XHRyZW1vdGVEYXRhUmVmID0gbG9jYWxEYXRhUmVmLmNoaWxkKCdzdWJzY3JpYmVyc0xpc3QnKSxcblx0XHRcdHN0cmVhbVN0YWNrc0lkID0gYCR7c3RyZWFtSWR9X3N1YmA7XG5cblx0XHRyZW1vdGVEYXRhUmVmLmNoaWxkKHV0aWxzLmFwcEluc3RhbmNlSWQpLnJlbW92ZSgpO1xuXG5cdFx0aWYgKHJvb21XZWJydGNTdGFja3Nbc3RyZWFtU3RhY2tzSWRdKSB7XG5cdFx0XHRsZXQgaSA9IDA7XG5cdFx0XHR3aGlsZSAoaSA8IHJvb21XZWJydGNTdGFja3Nbc3RyZWFtU3RhY2tzSWRdLmxlbmd0aCkge1xuXHRcdFx0XHRpZiAocm9vbVdlYnJ0Y1N0YWNrc1tzdHJlYW1TdGFja3NJZF1baV0pIHtcblx0XHRcdFx0XHR3ZWJydGNtbmdyLmNsb3NlV2VicnRjKHJvb21XZWJydGNTdGFja3Nbc3RyZWFtU3RhY2tzSWRdW2ldLnN0YWNrSWQsIGZhbHNlKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpKys7XG5cdFx0XHR9XG5cdFx0XHRkZWxldGUgcm9vbVdlYnJ0Y1N0YWNrc1tzdHJlYW1TdGFja3NJZF07XG5cdFx0fVxuXHRcdGRlbGV0ZSBtTXV0ZWRTdHJlYW1zW3N0cmVhbUlkXTtcblx0fVxuXG5cdC8qKlxuXHQgKiBSZXR1cm5zIGFsbCB0aGUgYXZhaWxhYmxlIHN0cmVhbXNcblx0ICogQHJldHVybiB7YXJyYXl9XG5cdCAqL1xuXHRmdW5jdGlvbiBfZ2V0QXZhaWxhYmxlU3RyZWFtcygpIHtcblx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjpyb29tWyR7cm9vbUlkfV06Ol9nZXRBdmFpbGFibGVTdHJlYW1zKWApO1xuXHRcdHJldHVybiBtQXZhaWxhYmxlU3RyZWFtcztcblx0fVxuXG5cdC8qKlxuXHQgKiBSZXR1cm5zIGFuIGF2YWlsYWJsZSBzdHJlYW0gaGF2aW5nIHRoZSBpZGVudGlmaWVyXG5cdCAqIEBwYXJhbSBzdHJlYW1JZCAtIFRoZSBzdHJlYW0gaWRlbnRpZmllclxuXHQgKiBAcmV0dXJuIC0gQSBzdHJlYW1cblx0ICovXG5cdGZ1bmN0aW9uIF9nZXRBdmFpbGFibGVTdHJlYW0oc3RyZWFtSWQpIHtcblx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjpyb29tWyR7cm9vbUlkfV06Ol9nZXRBdmFpbGFibGVTdHJlYW0pc3RyZWFtSWQ9JHtzdHJlYW1JZH1gKTtcblx0XHRpZiAobUF2YWlsYWJsZVN0cmVhbXMgJiYgc3RyZWFtSWQpIHtcblx0XHRcdGZvciAobGV0IGkgPSBtQXZhaWxhYmxlU3RyZWFtcy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuXHRcdFx0XHRpZiAobUF2YWlsYWJsZVN0cmVhbXNbaV0gJiYgT2JqZWN0LmtleXMobUF2YWlsYWJsZVN0cmVhbXNbaV0pWzBdICYmIE9iamVjdC5rZXlzKG1BdmFpbGFibGVTdHJlYW1zW2ldKVswXSA9PT0gc3RyZWFtSWQpIHtcblx0XHRcdFx0XHRyZXR1cm4gbUF2YWlsYWJsZVN0cmVhbXNbaV07XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblxuXG5cdC8qKlxuXHQgKiBSZW1vdmVzIGFsbCB0aGUgc3RyZWFtcyBieSBkZWxldGluZyB0aGUgYXJyYXkgY29udGFpbmluZyB0aGVtIHdpdGhvdXQgdHJpZ2dlcnJpbmcgY2FsbGJhY2tzXG5cdCAqL1xuXHRmdW5jdGlvbiBfcmVtb3ZlQWxsQXZhaWxhYmxlU3RyZWFtcygpIHtcblx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjpyb29tWyR7cm9vbUlkfV06Ol9yZW1vdmVBbGxBdmFpbGFibGVTdHJlYW1zYCk7XG5cdFx0bUF2YWlsYWJsZVN0cmVhbXMgPSBbXTtcblx0fVxuXG5cdC8qKlxuXHQgKiBBdWRpbyBtdXRlIHRoZSBzdHJlYW0gc3RyZWFtSWRcblx0ICogQHBhcmFtIHN0cmVhbUlkIC0gVGhlIHN0cmVhbSBpZGVudGlmaWVyIHRvIG11dGVcblx0ICovXG5cdGZ1bmN0aW9uIF9tdXRlQXVkaW9TdHJlYW0oc3RyZWFtSWQpIHtcblx0XHRpZiAoIShzdHJlYW1JZCAmJiB0eXBlb2Ygc3RyZWFtSWQgPT0gJ3N0cmluZycpKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKGAoUmVhY2hTREs6OnJvb21bJHtyb29tSWR9XTo6X211dGVBdWRpb1N0cmVhbSlwYXJhbWV0ZXIgc3RyZWFtSWQgaXMgaW5jb3JyZWN0LiBFeHBlY3Rpbmcgbm9uIGVtcHR5IHN0cmluZ2ApO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjpyb29tWyR7cm9vbUlkfV06Ol9tdXRlQXVkaW9TdHJlYW0pc3RyZWFtSWQ9JHtzdHJlYW1JZH1gKTtcblx0XHRpZiAoIW1NdXRlZFN0cmVhbXNbc3RyZWFtSWRdKSB7XG5cdFx0XHRtTXV0ZWRTdHJlYW1zW3N0cmVhbUlkXSA9IHt9O1xuXHRcdH1cblx0XHRtTXV0ZWRTdHJlYW1zW3N0cmVhbUlkXS5hdWRpbyA9IHRydWU7XG5cblx0XHRpZihyb29tV2VicnRjU3RhY2tzKXtcblx0XHRcdFtyb29tV2VicnRjU3RhY2tzW2Ake3N0cmVhbUlkfV9wdWJgXSwgcm9vbVdlYnJ0Y1N0YWNrc1tgJHtzdHJlYW1JZH1fc3ViYF1dLmZvckVhY2goKHN0YWNrcykgPT4ge1xuXHRcdFx0XHRpZihzdGFja3MgJiYgc3RhY2tzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRmb3IgKGxldCBpID0gc3RhY2tzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0XHRcdFx0XHR3ZWJydGNtbmdyLm11dGVBdWRpb1dlYnJ0Y1N0YWNrKHN0YWNrc1tpXS5zdGFja0lkKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBBdWRpbyB1bm11dGVTdHJlYW0gdGhlIHN0cmVhbSBzdHJlYW1JZFxuXHQgKiBAcGFyYW0gc3RyZWFtSWQgLSBUaGUgc3RyZWFtIGlkZW50aWZpZXIgdG8gdW5tdXRlXG5cdCAqL1xuXHRmdW5jdGlvbiBfdW5tdXRlQXVkaW9TdHJlYW0oc3RyZWFtSWQpIHtcblx0XHRpZiAoIShzdHJlYW1JZCAmJiB0eXBlb2Ygc3RyZWFtSWQgPT0gJ3N0cmluZycpKSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKGAoUmVhY2hTREs6OnJvb21bJHtyb29tSWR9XTo6X3VubXV0ZUF1ZGlvU3RyZWFtKXBhcmFtZXRlciBzdHJlYW1JZCBpcyBpbmNvcnJlY3QuIEV4cGVjdGluZyBub24gZW1wdHkgc3RyaW5nYCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGlmIChtTXV0ZWRTdHJlYW1zW3N0cmVhbUlkXSAmJiBtTXV0ZWRTdHJlYW1zW3N0cmVhbUlkXS5hdWRpbykge1xuXHRcdFx0bU11dGVkU3RyZWFtc1tzdHJlYW1JZF0uYXVkaW8gPSBmYWxzZTtcblx0XHR9XG5cdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6cm9vbVske3Jvb21JZH1dOjpfdW5tdXRlQXVkaW9TdHJlYW0pc3RyZWFtSWQ9JHtzdHJlYW1JZH1gKTtcblx0XHRpZihyb29tV2VicnRjU3RhY2tzKXtcblx0XHRcdFtyb29tV2VicnRjU3RhY2tzW2Ake3N0cmVhbUlkfV9wdWJgXSwgcm9vbVdlYnJ0Y1N0YWNrc1tgJHtzdHJlYW1JZH1fc3ViYF1dLmZvckVhY2goKHN0YWNrcykgPT4ge1xuXHRcdFx0XHRpZihzdGFja3MgJiYgc3RhY2tzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRmb3IgKGxldCBpID0gc3RhY2tzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG5cdFx0XHRcdFx0XHR3ZWJydGNtbmdyLnVubXV0ZUF1ZGlvV2VicnRjU3RhY2soc3RhY2tzW2ldLnN0YWNrSWQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFZpZGVvIG11dGUgdGhlIHN0cmVhbSBzdHJlYW1JZFxuXHQgKiBAcGFyYW0gc3RyZWFtSWQgLSBUaGUgc3RyZWFtIGlkZW50aWZpZXIgdG8gbXV0ZVxuXHQgKi9cblx0ZnVuY3Rpb24gX211dGVWaWRlb1N0cmVhbShzdHJlYW1JZCkge1xuXHRcdGlmICghKHN0cmVhbUlkICYmIHR5cGVvZiBzdHJlYW1JZCA9PSAnc3RyaW5nJykpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoYChSZWFjaFNESzo6cm9vbVske3Jvb21JZH1dOjpfbXV0ZVZpZGVvU3RyZWFtKXBhcmFtZXRlciBzdHJlYW1JZCBpcyBpbmNvcnJlY3QuIEV4cGVjdGluZyBub24gZW1wdHkgc3RyaW5nYCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OnJvb21bJHtyb29tSWR9XTo6X211dGVWaWRlb1N0cmVhbSlzdHJlYW1JZD0ke3N0cmVhbUlkfWApO1xuXHRcdGlmICghbU11dGVkU3RyZWFtc1tzdHJlYW1JZF0pIHtcblx0XHRcdG1NdXRlZFN0cmVhbXNbc3RyZWFtSWRdID0ge307XG5cdFx0fVxuXHRcdG1NdXRlZFN0cmVhbXNbc3RyZWFtSWRdLnZpZGVvID0gdHJ1ZTtcblxuXHRcdGlmKHJvb21XZWJydGNTdGFja3Mpe1xuXHRcdFx0Y29uc29sZS5sb2cocm9vbVdlYnJ0Y1N0YWNrc1tgJHtzdHJlYW1JZH1fcHViYF0pO1xuXHRcdFx0W3Jvb21XZWJydGNTdGFja3NbYCR7c3RyZWFtSWR9X3B1YmBdLCByb29tV2VicnRjU3RhY2tzW2Ake3N0cmVhbUlkfV9zdWJgXV0uZm9yRWFjaCgoc3RhY2tzKSA9PiB7XG5cdFx0XHRcdGlmKHN0YWNrcyAmJiBzdGFja3MubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdGZvciAobGV0IGkgPSBzdGFja3MubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRcdFx0XHRcdHdlYnJ0Y21uZ3IubXV0ZVZpZGVvV2VicnRjU3RhY2soc3RhY2tzW2ldLnN0YWNrSWQpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFZpZGVvIHVubXV0ZVN0cmVhbSB0aGUgc3RyZWFtIHN0cmVhbUlkXG5cdCAqIEBwYXJhbSBzdHJlYW1JZCAtIFRoZSBzdHJlYW0gaWRlbnRpZmllciB0byB1bm11dGVcblx0ICovXG5cdGZ1bmN0aW9uIF91bm11dGVWaWRlb1N0cmVhbShzdHJlYW1JZCkge1xuXHRcdGlmICghKHN0cmVhbUlkICYmIHR5cGVvZiBzdHJlYW1JZCA9PSAnc3RyaW5nJykpIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoYChSZWFjaFNESzo6cm9vbVske3Jvb21JZH1dOjpfdW5tdXRlVmlkZW9TdHJlYW0pcGFyYW1ldGVyIHN0cmVhbUlkIGlzIGluY29ycmVjdC4gRXhwZWN0aW5nIG5vbiBlbXB0eSBzdHJpbmdgKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cdFx0aWYgKG1NdXRlZFN0cmVhbXNbc3RyZWFtSWRdICYmIG1NdXRlZFN0cmVhbXNbc3RyZWFtSWRdLnZpZGVvKSB7XG5cdFx0XHRtTXV0ZWRTdHJlYW1zW3N0cmVhbUlkXS52aWRlbyA9IGZhbHNlO1xuXHRcdH1cblx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjpyb29tWyR7cm9vbUlkfV06Ol91bm11dGVWaWRlb1N0cmVhbSlzdHJlYW1JZD0ke3N0cmVhbUlkfWApO1xuXHRcdGlmKHJvb21XZWJydGNTdGFja3Mpe1xuXHRcdFx0W3Jvb21XZWJydGNTdGFja3NbYCR7c3RyZWFtSWR9X3B1YmBdLCByb29tV2VicnRjU3RhY2tzW2Ake3N0cmVhbUlkfV9zdWJgXV0uZm9yRWFjaCgoc3RhY2tzKSA9PiB7XG5cdFx0XHRcdGlmKHN0YWNrcyAmJiBzdGFja3MubGVuZ3RoID4gMCkge1xuXHRcdFx0XHRcdGZvciAobGV0IGkgPSBzdGFja3MubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcblx0XHRcdFx0XHRcdHdlYnJ0Y21uZ3IudW5tdXRlVmlkZW9XZWJydGNTdGFjayhzdGFja3NbaV0uc3RhY2tJZCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXG5cdC8qKlxuXHQgKiBDbG9zZXMgdGhlIHJvb20uXG5cdCAqIFNldHMgdGhlIGNvbm5lY3RlZCBzdGF0dXMgb2YgdGhlIGN1cnJlbnQgcGFydGljaXBhbnQgdG8gZmFsc2UsIGRlbGV0ZXMgbWVkaWFzIGFuZCBjYWxsYmFja3MsIHRoZW4gY2xvc2UgV2ViUlRDIHN0YWNrcyBpbiB1c2UuXG5cdCAqIEBwYXJhbSB1cGRhdGVSb29tU3RhdHVzVG9DbG9zZSAtIHRydWUgaWYgdGhlIHJvb20gc2hvdWxkIGJlIG1hcmtlZCBhcyBjbG9zZWRcblx0ICovXG5cdGZ1bmN0aW9uIF9jbG9zZSh1cGRhdGVSb29tU3RhdHVzVG9DbG9zZSkge1xuXHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OnJvb21bJHtyb29tSWR9XTo6X2Nsb3NlKXJvb20gJHtyb29tSWR9LCBkZXRyb3lSb29tPSR7dXBkYXRlUm9vbVN0YXR1c1RvQ2xvc2V9YCk7XG5cblx0XHRjb25zdFxuXHRcdFx0cGFydGljaXBhbnRMaXN0UmVmID0gZGF0YXJlZi5jaGlsZCgncGFydGljaXBhbnRMaXN0JyksXG5cdFx0XHRwdWJsaXNoZWRNZWRpYUxpc3RSZWYgPSBkYXRhcmVmLmNoaWxkKCdwdWJsaXNoZWRNZWRpYUxpc3QnKTtcblxuXHRcdC8vIG1hcmsgYXMgZGlzY29ubmVjdGVkIHdoZW4gdGhlIHJvb20gaXMgbGVmdFxuXHRcdHBhcnRpY2lwYW50TGlzdFJlZi5jaGlsZChgJHttZX0vY29ubmVjdGVkYCkuc2V0KGZhbHNlKTtcblxuXHRcdC8vIHJlbW92ZSB3ZWJjb20gY2FsbGJhY2tzXG5cdFx0T2JqZWN0LmtleXMobVN0cmVhbXMpLmZvckVhY2goX3VuUHVibGlzaFN0cmVhbSk7XG5cdFx0bVN0cmVhbXMgPSBbXTtcblxuXHRcdGlmIChpbnN0YW50TWVzc2FnZUxpc3RDYikge1xuXHRcdFx0ZGF0YXJlZi5jaGlsZCgnaW5zdGFudE1lc3NhZ2VMaXN0Jykub2ZmKCdjaGlsZF9hZGRlZCcsIGluc3RhbnRNZXNzYWdlTGlzdENiKTtcblx0XHRcdGluc3RhbnRNZXNzYWdlTGlzdENiID0gbnVsbDtcblx0XHR9XG5cdFx0aWYgKHB1Ymxpc2hlZE1lZGlhTGlzdENiKSB7XG5cdFx0XHRwdWJsaXNoZWRNZWRpYUxpc3RSZWYub2ZmKCdjaGlsZF9hZGRlZCcsIHB1Ymxpc2hlZE1lZGlhTGlzdENiKTtcblx0XHRcdHB1Ymxpc2hlZE1lZGlhTGlzdENiID0gbnVsbDtcblx0XHR9XG5cdFx0aWYgKHB1Ymxpc2hlZE1lZGlhTGlzdENiRm9yQXZhaWxhYmxlU3RyZWFtKSB7XG5cdFx0XHRwdWJsaXNoZWRNZWRpYUxpc3RSZWYub2ZmKCdjaGlsZF9hZGRlZCcsIHB1Ymxpc2hlZE1lZGlhTGlzdENiRm9yQXZhaWxhYmxlU3RyZWFtKTtcblx0XHRcdHB1Ymxpc2hlZE1lZGlhTGlzdENiRm9yQXZhaWxhYmxlU3RyZWFtID0gbnVsbDtcblx0XHR9XG5cblx0XHRpZiAodW5QdWJsaXNoZWRNZWRpYUxpc3RDYikge1xuXHRcdFx0cHVibGlzaGVkTWVkaWFMaXN0UmVmLm9mZignY2hpbGRfcmVtb3ZlZCcsIHVuUHVibGlzaGVkTWVkaWFMaXN0Q2IpO1xuXHRcdFx0dW5QdWJsaXNoZWRNZWRpYUxpc3RDYiA9IG51bGw7XG5cdFx0fVxuXG5cdFx0aWYgKHVuUHVibGlzaGVkTWVkaWFMaXN0Q2JGb3JBdmFpbGFibGVTdHJlYW0pIHtcblx0XHRcdHB1Ymxpc2hlZE1lZGlhTGlzdFJlZi5vZmYoJ2NoaWxkX3JlbW92ZWQnLCB1blB1Ymxpc2hlZE1lZGlhTGlzdENiRm9yQXZhaWxhYmxlU3RyZWFtKTtcblx0XHRcdHVuUHVibGlzaGVkTWVkaWFMaXN0Q2JGb3JBdmFpbGFibGVTdHJlYW0gPSBudWxsO1xuXHRcdH1cblxuXHRcdGlmIChwYXJ0aWNpcGFudExpc3RKb2luQWRkZWRDYikge1xuXHRcdFx0cGFydGljaXBhbnRMaXN0UmVmLm9mZignY2hpbGRfYWRkZWQnLCBwYXJ0aWNpcGFudExpc3RKb2luQWRkZWRDYik7XG5cdFx0XHRwYXJ0aWNpcGFudExpc3RKb2luQWRkZWRDYiA9IG51bGw7XG5cdFx0fVxuXG5cdFx0aWYgKHBhcnRpY2lwYW50TGlzdEpvaW5DaGFuZ2VkQ2IpIHtcblx0XHRcdHBhcnRpY2lwYW50TGlzdFJlZi5vZmYoJ2NoaWxkX2NoYW5nZWQnLCBwYXJ0aWNpcGFudExpc3RKb2luQ2hhbmdlZENiKTtcblx0XHRcdHBhcnRpY2lwYW50TGlzdEpvaW5DaGFuZ2VkQ2IgPSBudWxsO1xuXHRcdH1cblxuXHRcdGlmIChwYXJ0aWNpcGFudExpc3RMZWF2ZUNiKSB7XG5cdFx0XHRwYXJ0aWNpcGFudExpc3RSZWYub2ZmKCdjaGlsZF9jaGFuZ2VkJywgcGFydGljaXBhbnRMaXN0TGVhdmVDYik7XG5cdFx0XHRwYXJ0aWNpcGFudExpc3RMZWF2ZUNiID0gbnVsbDtcblx0XHR9XG5cblx0XHRpZiAocmVtb3RlVW5wdWJsaXNoZWRDYikge1xuXHRcdFx0cHVibGlzaGVkTWVkaWFMaXN0UmVmLm9mZignY2hpbGRfcmVtb3ZlZCcsIHJlbW90ZVVucHVibGlzaGVkQ2IpO1xuXHRcdFx0cmVtb3RlVW5wdWJsaXNoZWRDYiA9IG51bGw7XG5cdFx0fVxuXG5cdFx0Ly8gY2xvc2UgYWxsIHdlYnJ0YyBzdGFja3Ncblx0XHQvLyBPYmplY3Qua2V5cyhyb29tV2VicnRjU3RhY2tzKS5mb3JFYWNoKChzdHJlYW1TdGFja3NJZCkgPT4ge1xuXHRcdC8vIFx0cm9vbVdlYnJ0Y1N0YWNrc1tzdHJlYW1TdGFja3NJZF0uZm9yRWFjaCgoc3RhY2spID0+IHtcblx0XHQvLyBcdFx0aWYoc3RhY2spe1xuXHRcdC8vIFx0XHRcdHdlYnJ0Y21uZ3IuY2xvc2VXZWJydGMoc3RhY2suc3RhY2tJZCwgc3RhY2suaXNQdWJsaXNoKTtcblx0XHQvLyBcdFx0XHR3ZWJydGNtbmdyLmNsZWFyV2VicnRjU3RhY2tzKHN0YWNrLnN0YWNrSWQpO1xuXHRcdC8vIFx0XHR9XG5cdFx0Ly8gXHR9KTtcblx0XHQvLyB9KTtcblx0XHQvLyByb29tV2VicnRjU3RhY2tzID0ge307XG5cblx0XHQvLyBtTXV0ZWRTdHJlYW1zID0gW107XG5cblx0XHQvLyBfcmVtb3ZlQWxsQXZhaWxhYmxlU3RyZWFtcygpO1xuXG5cdFx0Ly8gY2xvc2UgYWxsIHdlYnJ0YyBzdGFja3Ncblx0XHRPYmplY3Qua2V5cyhyb29tV2VicnRjU3RhY2tzKS5mb3JFYWNoKChzdHJlYW1TdGFja3NJZCkgPT4ge1xuXHRcdFx0cm9vbVdlYnJ0Y1N0YWNrc1tzdHJlYW1TdGFja3NJZF0uZm9yRWFjaCgoc3RhY2spID0+IHtcblx0XHRcdFx0aWYgKHN0cmVhbVN0YWNrc0lkICYmIHN0YWNrKSB7XG5cdFx0XHRcdFx0Y29uc3QgX3N0cmVhbUlkPXN0YWNrLnN0cmVhbUlkO1xuXHRcdFx0XHRcdGNvbnN0IF9zdGFja0lkPXN0YWNrLnN0YWNrSWQ7XG5cdFx0XHRcdFx0Y29uc3QgX2lzUHVibGlzaD1zdGFjay5pc1B1Ymxpc2g7XG5cdFx0XHRcdFx0aWYgKF9pc1B1Ymxpc2gpIHtcblx0XHRcdFx0XHRcdF91blB1Ymxpc2hTdHJlYW0oX3N0cmVhbUlkKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0X3VuU3Vic2NyaWJlRnJvbVN0cmVhbShfc3RyZWFtSWQpO1xuXHRcdFx0XHRcdH1cdCAgICBcblx0XHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHsgXG5cdFx0XHRcdFx0XHR3ZWJydGNtbmdyLmNsZWFyV2VicnRjU3RhY2tzKF9zdGFja0lkKTtcblx0XHRcdFx0XHR9LCAxMDAwKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRyb29tV2VicnRjU3RhY2tzPXt9O1xuXHRcdFx0bU11dGVkU3RyZWFtcz1bXTsgICAgXHQgICAgICAgIFxuXHRcdFx0X3JlbW92ZUFsbEF2YWlsYWJsZVN0cmVhbXMoKTtcblx0XHR9LCAxMTAwKTtcblx0XHRcblx0XHRpZiAodXBkYXRlUm9vbVN0YXR1c1RvQ2xvc2UgJiYgdXBkYXRlUm9vbVN0YXR1c1RvQ2xvc2UgPT09IHRydWUpIHtcblx0XHRcdGRhdGFyZWYuY2hpbGQoJ2NvbW1vbkRhdGFMaXN0L3N0YXR1cycpLnNldChST09NX1NUQVRVU19DTE9TRSk7XG5cdFx0fVxuXG5cdFx0Ly8gRm9yY2UgbG9jYWxzdHJlYW0gY2xvc2Vcblx0XHRsb2NhbHN0cmVhbS5jbG9zZSgpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFN3aXRjaGVzIGJldHdlZW4gY2FtZXJhcy5cblx0ICogQHBhcmFtIHN0cmVhbUlkIC0gVGhlIGlkZW50aWZpZXIgb2YgdGhlIHN0cmVhbSB0byBwdWJsaXNoXG5cdCAqIEBwYXJhbSBsb2NhbFZpZGVvU3RyZWFtIC0gVGhlIGxvY2FsIHZpZGVvXG5cdCAqIEBwYXJhbSBhY3Rpb25UeXBlIC1cblx0ICovXG5cdGZ1bmN0aW9uIF9zd2l0Y2hDYW1lcmEoc3RyZWFtSWQsIGFjdGlvblR5cGUsIGxvY2FsVmlkZW9TdHJlYW0pe1xuXHRcdC8vIENoYW5nZSBjYW1lcmFcblx0XHRsb2NhbHN0cmVhbS5zZXRWaWRlb051bWJlcihsb2NhbHN0cmVhbS5nZXRWaWRlb051bWJlcigpID09PSAxID8gMiA6IDEpO1xuXHRcdC8vIEZvcmNlIHN0cmVhbSBjbG9zZVxuXHRcdGxvY2Fsc3RyZWFtLmNsb3NlKCk7XG5cdFx0X3VuUHVibGlzaFN0cmVhbShzdHJlYW1JZCwgKCkgPT4gY29uc29sZS5sb2coJ3VucHVibGlzaGVkU3RyZWFtJykpO1xuXHRcdC8vIFJlLXB1Ymxpc2hcblx0XHRfcHVibGlzaFN0cmVhbShzdHJlYW1JZCwgbG9jYWxWaWRlb1N0cmVhbSwgYWN0aW9uVHlwZSwgcmVzID0+IGNvbnNvbGUubG9nKHJlcykpO1xuXHR9XG5cblx0aW5pdCgpO1xuXG5cdHJldHVybiB7XG5cdFx0LyoqXG5cdFx0ICogUmV0dXJuIHRoZSByb29tIGlkZW50aWZpZXJcblx0XHQgKiBAcmV0dXJuIHtzdHJpbmd9IC0gVGhlIHJvb20gaWRlbnRpZmllclxuXHRcdCAqL1xuXHRcdGdldFJvb21JZDogX2dldFJvb21JZCxcblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIHRoZSB1c2VyIGlkZW50aWZpZXJcblx0XHQgKiBAcmV0dXJuIHtzdHJpbmd9IC0gVGhlIHVzZXIgaWRlbnRpZmllclxuXHRcdCAqL1xuXHRcdGdldE1lOiBfZ2V0TWUsXG5cdFx0LyoqXG5cdFx0ICogRGVmaW5lcyB0aGUgY2FsbGJhY2sgdG8gdHJpZ2dlciB3aGVuIGEgcGFydGljaXBhbnQgaGFzIGpvaW5lZCB0aGUgcm9vbVxuXHRcdCAqIEBwYXJhbSB7ZnVuY3Rpb259IHBfY2IgLSBUaGUgY2FsbGJhY2tcblx0XHQgKi9cblx0XHRzZXRPblBhcnRpY2lwYW50Sm9pbjogX3NldE9uUGFydGljaXBhbnRKb2luLFxuXHRcdC8qKlxuXHRcdCAqIERlZmluZXMgdGhlIGNhbGxiYWNrIHRvIHRyaWdnZXIgd2hlbiBhIHBhcnRpY2lwYW50IGhhcyBsZWZ0IHRoZSByb29tXG5cdFx0ICogQHBhcmFtIHtmdW5jdGlvbn0gcF9jYiAtIFRoZSBjYWxsYmFja1xuXHRcdCAqL1xuXHRcdHNldE9uUGFydGljaXBhbnRMZWF2ZTogX3NldE9uUGFydGljaXBhbnRMZWF2ZSxcblx0XHQvKipcblx0XHQgKiBTZW5kcyBhbiBpbnN0YW50IG1lc3NhZ2Vcblx0XHQgKiBAcGFyYW0ge3N0cmluZ30gbWVzc2FnZSAtIFRoZSBlbXNzYWdlIHRvIHNlbmRcblx0XHQgKiBAcmV0dXJuIG5vdGhpbmdcblx0XHQgKi9cblx0XHRzZW5kSW5zdGFudE1lc3NhZ2U6IF9zZW5kSW5zdGFudE1lc3NhZ2UsXG5cdFx0LyoqXG5cdFx0ICogRGVmaW5lcyB0aGUgY2FsbGJhY2sgdG8gdHJpZ2dlciB0byBzZW5kIGFuIGluc3RhbnQgbWVzc2FnZVxuXHRcdCAqIEBwYXJhbSB7ZnVuY3Rpb259IHBfY2IgLSBUaGUgY2FsbGJhY2tcblx0XHQgKi9cblx0XHRzZXRPbkluc3RhbnRNZXNzYWdlOiBfc2V0T25JbnN0YW50TWVzc2FnZSxcblx0XHQvKipcblx0XHQgKiBQdWJsaXNoZXMgYSBzdHJlYW1cblx0XHQgKiBAcGFyYW0gc3RyZWFtSWQgLSBUaGUgaWRlbnRpZmllciBvZiB0aGUgc3RyZWFtIHRvIHB1Ymxpc2hcblx0XHQgKiBAcGFyYW0gbG9jYWxWaWQgLSBUaGUgbG9jYWwgdmlkZW9cblx0XHQgKiBAcGFyYW0gYWN0aW9uVHlwZSAtXG5cdFx0ICogQHBhcmFtIGdldFN0cmVhbUNiIC0gYSBjYWxsYmFjayBmdW5jdGlvbiB0byByZXRyaWV2ZSB0aGUgbWVkaWFzdHJlYW0gb2JqZWN0XG5cdFx0ICogQHJldHVybiBub3RoaW5nXG5cdFx0ICovXG5cdFx0cHVibGlzaFN0cmVhbTogX3B1Ymxpc2hTdHJlYW0sXG5cdFx0LyoqXG5cdFx0ICogRGVmaW5lcyB0aGUgY2FsbGJhY2sgdG8gdHJpZ2dlcndoZW4gYSBzdHJlYW0gaGFzIGJlZW4gcHVibGlzaGVkXG5cdFx0ICogQHBhcmFtIHtmdW5jdGlvbn0gcF9jYiAtIFRoZSBjYWxsYmFja1xuXHRcdCAqL1xuXHRcdHNldE9uUHVibGlzaGVkU3RyZWFtOiBfc2V0T25QdWJsaXNoZWRTdHJlYW0sXG5cdFx0LyoqXG5cdFx0ICogVW5wdWJsaXNoZXMgdGhlIHN0cmVhbVxuXHRcdCAqIEBwYXJhbSBzdHJlYW1JZCAtIFRoZSBpZGVudGlmaWVyIG9mIHRoZSBzdHJlYW0gdG8gdW5wdWJsaXNoXG5cdFx0ICogQHBhcmFtIGNhbGxiYWNrIC0gVGhlIGNsYWxiYWNrIHRvIHRyaWdnZXIgd2hlbiB0aGUgc3RyZWFtIGhhcyBiZWVuIHVucHVibGlzaGVkXG5cdFx0ICovXG5cdFx0dW5QdWJsaXNoU3RyZWFtOiBfdW5QdWJsaXNoU3RyZWFtLFxuXHRcdC8qKlxuXHRcdCAqIERlZmluZXMgdGhlIGNhbGxiYWNrIHRvIHRyaWdnZXIgd2hlbiBhIHN0cmVhbSBoYXMgYmVlbiB1bnB1Ymxpc2hlZFxuXHRcdCAqIEBwYXJhbSB7ZnVuY3Rpb259IHBfY2IgLSBUaGUgY2FsbGJhY2tcblx0XHQgKi9cblx0XHRzZXRPblVuUHVibGlzaGVkU3RyZWFtOiBfc2V0T25VblB1Ymxpc2hlZFN0cmVhbSxcblxuXHRcdC8qKlxuXHRcdCAqIFN1YnNjcmliZXMgdG8gYSBzdHJlYW1cblx0XHQgKiBAcGFyYW0gc3RyZWFtRGF0YSAtIFRoZSBzdHJlYW0gZGF0YVxuXHRcdCAqIEBwYXJhbSByZW1vdGVWaWQgLSBUaGUgcmVtb3RlIHZpZGVvXG5cdFx0ICogQHBhcmFtIGdldFN0cmVhbUNiIC0gYSBjYWxsYmFjayBmdW5jdGlvbiB0byByZXRyaWV2ZSB0aGUgbWVkaWFzdHJlYW0gb2JqZWN0XG5cdFx0ICogQHJldHVybiBub3RoaW5nXG5cdFx0ICovXG5cdFx0c3Vic2NyaWJlVG9TdHJlYW06IF9zdWJzY3JpYmVUb1N0cmVhbSxcblx0XHQvKipcblx0XHQgKiBVbnN1YmNyaWJlcyBmcm9tIGEgc3RyZWFtXG5cdFx0ICogQHBhcmFtIHN0cmVhbUlkIC0gVGhlIGlkZW50aWZpZXIgb2YgdGhlIHN0cmVhbSB0byB1bnN1YnNjcmliZVxuXHRcdCAqL1xuXHRcdHVuU3Vic2NyaWJlRnJvbVN0cmVhbTogX3VuU3Vic2NyaWJlRnJvbVN0cmVhbSxcblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIGFsbCB0aGUgYXZhaWxhYmxlIHN0cmVhbXNcblx0XHQgKiBAcmV0dXJuIHthcnJheX0gLSBUaGUgYXZhaWxhYmxlIHN0cmVhbXNcblx0XHQgKi9cblx0XHRnZXRBdmFpbGFibGVTdHJlYW1zOiBfZ2V0QXZhaWxhYmxlU3RyZWFtcyxcblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIHRoZSBzdHJlYW0gbWF0Y2hpbmcgdGhlIGlkZW50aWZpZXJcblx0XHQgKiBAcGFyYW0gc3RyZWFtIC0gVGhlIHN0cmVhbSBpZGVudGlmaWVyXG5cdFx0ICovXG5cdFx0Z2V0QXZhaWxhYmxlU3RyZWFtOiBfZ2V0QXZhaWxhYmxlU3RyZWFtLFxuXHRcdC8qKlxuXHRcdCAqICBtdXRlIGF1ZGlvIHRoZSBzdHJlYW0gc3RyZWFtSWRcblx0XHQgKiBAcGFyYW0gc3RyZWFtSWQgLSBUaGUgc3RyZWFtIGlkZW50aWZpZXIgdG8gbXV0ZVxuXHRcdCAqL1xuXHRcdG11dGVBdWRpb1N0cmVhbTogX211dGVBdWRpb1N0cmVhbSxcblx0XHQvKipcblx0XHQgKiB1bm11dGUgYXVkaW8gdGhlIHN0cmVhbSBzdHJlYW1JZFxuXHRcdCAqIEBwYXJhbSBzdHJlYW1JZCAtIFRoZSBzdHJlYW0gaWRlbnRpZmllciB0byBtdXRlXG5cdFx0ICovXG5cdFx0dW5tdXRlQXVkaW9TdHJlYW06IF91bm11dGVBdWRpb1N0cmVhbSxcblx0XHQvKipcblx0XHQgKiAgbXV0ZSBWaWRlbyB0aGUgc3RyZWFtIHN0cmVhbUlkXG5cdFx0ICogQHBhcmFtIHN0cmVhbUlkIC0gVGhlIHN0cmVhbSBpZGVudGlmaWVyIHRvIG11dGVcblx0XHQgKi9cblx0XHRtdXRlVmlkZW9TdHJlYW06IF9tdXRlVmlkZW9TdHJlYW0sXG5cdFx0LyoqXG5cdFx0ICogdW5tdXRlIFZpZGVvIHRoZSBzdHJlYW0gc3RyZWFtSWRcblx0XHQgKiBAcGFyYW0gc3RyZWFtSWQgLSBUaGUgc3RyZWFtIGlkZW50aWZpZXIgdG8gbXV0ZVxuXHRcdCAqL1xuXHRcdHVubXV0ZVZpZGVvU3RyZWFtOiBfdW5tdXRlVmlkZW9TdHJlYW0sXG5cdFx0LyoqXG5cdFx0ICogQ2xvc2VzIHRoZSByb29tLlxuXHRcdCAqIFNldHMgdGhlIGNvbm5lY3RlZCBzdGF0dXMgb2YgdGhlIGN1cnJlbnQgcGFydGljaXBhbnQgdG8gZmFsc2UsIGRlbGV0ZXMgbWVkaWFzIGFuZCBjYWxsYmFja3MsIHRoZW4gY2xvc2UgV2ViUlRDIHN0YWNrcyBpbiB1c2UuXG5cdFx0ICogQHBhcmFtIHVwZGF0ZVJvb21TdGF0dXNUb0Nsb3NlIC0gdHJ1ZSBpZiB0aGUgcm9vbSBzaG91bGQgYmUgbWFya2VkIGFzIGNsb3NlZFxuXHRcdCAqL1xuXHRcdGNsb3NlOiBfY2xvc2UsXG5cdFx0LyoqXG5cdFx0ICogQ2FsbHMgdGhlIG1hY2hpbmcgZnVuY3Rpb24gZm9yIGEgZGVkaWNhdGVkIGV2ZW50XG5cdFx0ICogQHBhcmFtIHtzdHJpbmd9IGV2dCAtIFRoZSBldmVudCwgaW4gXCJpbnN0YW50TWVzc2FnZVwiLCBcInB1Ymxpc2hlZFN0cmVhbVwiLCBcInVuUHVibGlzaGVkU3RyZWFtXCIsIFwicGFydGljaXBhbnRKb2luXCIsIFwicGFydGljaXBhbnRMZWF2ZVwiXG5cdFx0ICogQHBhcmFtIHtmdW5jdGlvbn0gcF9jYiAtIFRoZSBjYWxsYmFjayB0byBjYWxsXG5cdFx0ICovXG5cdFx0b246IChldnQsIHBfY2IpID0+IHtcblx0XHRcdHN3aXRjaCAoZXZ0KSB7XG5cdFx0XHRjYXNlICdpbnN0YW50TWVzc2FnZSc6XG5cdFx0XHRcdF9zZXRPbkluc3RhbnRNZXNzYWdlKHBfY2IpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ3B1Ymxpc2hlZFN0cmVhbSc6XG5cdFx0XHRcdF9zZXRPblB1Ymxpc2hlZFN0cmVhbShwX2NiKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICd1blB1Ymxpc2hlZFN0cmVhbSc6XG5cdFx0XHRcdF9zZXRPblVuUHVibGlzaGVkU3RyZWFtKHBfY2IpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdGNhc2UgJ3BhcnRpY2lwYW50Sm9pbic6XG5cdFx0XHRcdF9zZXRPblBhcnRpY2lwYW50Sm9pbihwX2NiKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRjYXNlICdwYXJ0aWNpcGFudExlYXZlJzpcblx0XHRcdFx0X3NldE9uUGFydGljaXBhbnRMZWF2ZShwX2NiKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHRkZWZhdWx0OlxuXHRcdFx0XHRjb25zb2xlLmVycihgKFJlYWNoU0RLOjpyb29tWyR7cm9vbUlkfV06Om9uKXVuc3VwcG9ydGVkICR7ZXZ0fSBldmVudGApO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIFN3aXRjaGVzIGJldHdlZW4gY2FtZXJhcy5cblx0XHQgKiBAcGFyYW0gc3RyZWFtSWQgLSBUaGUgaWRlbnRpZmllciBvZiB0aGUgc3RyZWFtIHRvIHB1Ymxpc2hcblx0XHQgKiBAcGFyYW0gbG9jYWxWaWRlb1N0cmVhbSAtIFRoZSBsb2NhbCB2aWRlb1xuXHRcdCAqIEBwYXJhbSBhY3Rpb25UeXBlIC1cblx0XHQgKi9cblx0XHRzd2l0Y2hDYW1lcmE6IF9zd2l0Y2hDYW1lcmFcblx0fTtcbn1cblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL3Jvb20uanNcbiAqKi8iLCIvKipcbiAqIEBmaWxlIGxvY2Fsc3RyZWFtLmpzIC0gSlMgZmlsZSB0byBoYW5kbGUgbG9jYWwgc3RyZWFtcy5cbiAqIEBkZXNjcmlwdGlvbiBQcm92aWRlcyBkYXRhIHN0cnVjdHVyZXMgdG8gc3RvcmUgYW5kIGhhbmRsZSB2aWRlbywgYXVkaW8gYW5kIHZpZGVvLWFuZC1hdWRpbyBzdHJlYW1zLiBUaGUgYXVkaW8gYW5kIHZpZGVvIHN0cmVhbXMgYXJlIG1hbmFnZWQgdG9vLlxuICogSW5pdGlhbGl6YXRpb24gbWV0aG9kcyBhcmUgcHJvdmlkZWQsIHN0cmVhbSBjb25uZWN0aW9ucyBhbmQgbGlzdGVuZXJzIHRvby5cbiAqIEBhdXRob3IgV2ViY29tXG4gKi9cblxuLyplc2xpbnQgY29tcGxleGl0eToxLCBtYXgtc3RhdGVtZW50czogMSwgbWF4LWxlbjogMSovXG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZGVzY3JpcHRpb24gVGhlIGxvY2FsIHN0cmVhbSBvYmplY3Qgd2l0aCBpdHMgc3RyZWFtcywgZmxhZ3MgYW5kIGNhbGxiYWNrcy4gSXQgaXMgYSBzaW5nbGV0b24uXG4gKi9cbmNvbnN0IGxvY2Fsc3RyZWFtID0gKGZ1bmN0aW9uKCkge1xuXG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gVGhlIGxvY2FsIHZpZGVvIHN0cmVhbXMsIGFzIEhUTUwgdmlkZW8gb2JqZWN0cywgaW4gYW4gYXJyYXlcblx0ICovXG5cdGxldCBsb2NhbFZpZGVvU3RyZWFtcyA9IFtdO1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIFRoZSBsb2NhbCBhdWRpbyBzdHJlYW1zLCBhcyBIVE1MIHZpZGVvIG9iamVjdHMsIGluIGFuIGFycmF5XG5cdCAqL1xuXHRsZXQgbG9jYWxBdWRpb1N0cmVhbXMgPSBbXTtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBUaGUgbG9jYWwgYXVkaW8gYW5kIHZpZGVvIHN0cmVhbXMsIGFzIEhUTUwgdmlkZW8gb2JqZWN0cywgaW4gYW4gYXJyYXlcblx0ICovXG5cdGxldCBsb2NhbEF1ZGlvVmlkZW9TdHJlYW1zID0gW107XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gVGhlIHZpZGVvIHN0cmVhbSBvYmplY3Rcblx0ICovXG5cdGxldCBzdHJlYW1WaWRlbyA9IG51bGw7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gVGhlIGF1ZGlvIHN0cmVhbSBvYmplY3Rcblx0ICovXG5cdGxldCBzdHJlYW1BdWRpbyA9IG51bGw7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gVGhlIHZpZGVvIGFuZCBhdWRpbyBzdHJlYW0gb2JqZWN0XG5cdCAqL1xuXHRsZXQgc3RyZWFtQXVkaW9WaWRlbyA9IG51bGw7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gQW4gYXJyYXkgY29udGFpbmluZyB2aWRlbyBsaXN0ZW5lcnMgYXMgZnVuY3Rpb25zLiBUaGVzZSBsaXN0ZW5lcnMgd2lsbCBiZSB0cmlnZ2VyZWQgaWYgdGhlIHZpZGVvIHN0cmVhbSBpcyBlc3RhYmxpc2hlZC5cblx0ICovXG5cdGxldCBsaXN0ZW5lcnNWaWRlbyA9IFtdO1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIEFuIGFycmF5IGNvbnRhaW5pbmcgYXVkaW8gbGlzdGVuZXJzIGFzIGZ1bmN0aW9ucy4gVGhlc2UgbGlzdGVuZXJzIHdpbGwgYmUgdHJpZ2dlcmVkIGlmIHRoZSBhdWRpbyBzdHJlYW0gaXMgZXN0YWJsaXNoZWQuXG5cdCAqL1xuXHRsZXQgbGlzdGVuZXJzQXVkaW8gPSBbXTtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBBbiBhcnJheSBjb250YWluaW5nIGF1ZGlvIGFuZCB2aWRlbyBsaXN0ZW5lcnMgYXMgZnVuY3Rpb25zLiBUaGVzZSBsaXN0ZW5lcnMgd2lsbCBiZSB0cmlnZ2VyZWQgaWYgdGhlIHZpZGUtYW5kLWF1ZGlvIHN0cmVhbSBpcyBlc3RhYmxpc2hlZC5cblx0ICovXG5cdGxldCBsaXN0ZW5lcnNBdWRpb1ZpZGVvID0gW107XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gVGhlIGxvY2FsIHZpZGVvIHN0cmVhbSwgYXMgYW4gSFRNTCB2aWRlbyBlbGVtZW50XG5cdCAqL1xuXHRsZXQgbUxvY2FsU3RyZWFtVmlkZW8gPSBudWxsO1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIFRoZSBsb2NhbCBhdWRpbyBzdHJlYW0sIGFzIGFuIEhUTUwgdmlkZW8gZWxlbWVudFxuXHQgKi9cblx0bGV0IG1Mb2NhbFN0cmVhbUF1ZGlvID0gbnVsbDtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBUaGUgbG9jYWwgYXVkaW8gYW5kIHZpZGVvIHN0cmVhbSwgYXMgYW4gSFRNTCB2aWRlbyBlbGVtZW50XG5cdCAqL1xuXHRsZXQgbUxvY2FsU3RyZWFtQXVkaW9WaWRlbyA9IG51bGw7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gRmxhZyBpbmRpY2F0aW5nIGlmIHRoZSB2aWRlbyBpbml0aWFsaXNhdGlvbiBpcyBpbiBwcm9ncmVzc1xuXHQgKi9cblx0bGV0IGluaXRWaWRlb1Byb2dyZXNzID0gZmFsc2U7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gRmxhZyBpbmRpY2F0aW5nIGlmIHRoZSBhdWRpbyBpbml0aWFsaXNhdGlvbiBpcyBpbiBwcm9ncmVzc1xuXHQgKi9cblx0bGV0IGluaXRBdWRpb1Byb2dyZXNzID0gZmFsc2U7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gRmxhZyBpbmRpY2F0aW5nIGlmIHRoZSBhdWRpbyBhbmQgdmlkZW8gaW5pdGlhbGlzYXRpb24gaXMgaW4gcHJvZ3Jlc3Ncblx0ICovXG5cdGxldCBpbml0QXVkaW9WaWRlb1Byb2dyZXNzID0gZmFsc2U7XG5cblx0LyoqXG5cdCAqIEluaXRpYWxpemVzIHRoZSB2aWRlbyBsb2NhbCBzdHJlYW0uXG5cdCAqIFRoZSB3ZWIgYnJvd3NlcidzIHVzZXIgbWVkaWEgd2lsbCBiZSBjYWxsZWQsIHNvIHRoZSBicm93c2VyIGluIHVzZSBtdXN0IGJlIHJlY2VudCAoRmlyZWZveCAxNywgQ2hyb21lIDIxLCBPcGVyYSAxOCBhbmQgbGF0ZXIgdmVyc2lvbnMpLlxuXHQgKiBBIHZpZGVvIGVsZW1lbnQgd2lsbCBiZSBjcmVhdGVkLCBhbmQgcHVzaGVkIHRvIHRoZSBsb2NhbCBzdHJlYW1zIG9iamVjdHMuIFRoZSBjYXRjaGVkIHZpZGVvIGFuZCBhdWRpbyBzdHJlYW0gd2lsbCBiZSBhdHRhY2hlZCB0byB0aGUgY3JlYXRlZCBIVE1MIGVsZW1lbnQuXG5cdCAqIExpc3RlbmVycyB3aWxsIGFsc28gYmUgY2FsbGVkLlxuXHQgKi9cblx0ZnVuY3Rpb24gaW5pdFZpZGVvKGNhbGxiYWNrKXtcblx0XHRjb25zb2xlLmxvZygnKFJlYWNoU0RLOjpsb2NhbHN0cmVhbTo6aW5pdFZpZGVvKScpO1xuXHRcdGlmICghIGluaXRWaWRlb1Byb2dyZXNzKSB7XG5cdFx0XHRpbml0VmlkZW9Qcm9ncmVzcz10cnVlO1xuXG5cdFx0XHRuYXZpZ2F0b3IuZ2V0TWVkaWEgPSBnZXRVc2VyTWVkaWE7XG5cdFx0XHRtTG9jYWxTdHJlYW1WaWRlbyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ1ZJREVPJyk7XG5cdFx0XHRtTG9jYWxTdHJlYW1WaWRlby5tdXRlZD0gdHJ1ZTtcblx0XHRcdGxvY2FsVmlkZW9TdHJlYW1zLnB1c2gobUxvY2FsU3RyZWFtVmlkZW8pO1xuXG5cdFx0XHRpZihzdHJlYW1WaWRlbyA9PT0gbnVsbCl7XG5cdFx0XHRcdG5hdmlnYXRvci5nZXRNZWRpYSh7YXVkaW8gOiBmYWxzZSx2aWRlbyA6IHRydWV9LFxuXHRcdFx0XHRcdChzKSA9PiB7XG5cdFx0XHRcdFx0XHRzdHJlYW1WaWRlbyA9IHM7XG5cblx0XHRcdFx0XHRcdGxvY2FsVmlkZW9TdHJlYW1zLmZvckVhY2goKGxvY2FsVmlkZW9TdHJlYW0pID0+IHtcblx0XHRcdFx0XHRcdFx0YXR0YWNoTWVkaWFTdHJlYW0obG9jYWxWaWRlb1N0cmVhbSwgc3RyZWFtVmlkZW8pO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRsb2NhbFZpZGVvU3RyZWFtcyA9IFtdO1xuXG5cdFx0XHRcdFx0XHRsaXN0ZW5lcnNWaWRlby5mb3JFYWNoKChsaXN0ZW5lclZpZGVvKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGxpc3RlbmVyVmlkZW8oc3RyZWFtVmlkZW8pO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRsaXN0ZW5lcnNWaWRlbyA9IFtdO1xuXG5cdFx0XHRcdFx0XHRpbml0VmlkZW9Qcm9ncmVzcz1mYWxzZTtcblxuXHRcdFx0XHRcdFx0aWYgKGNhbGxiYWNrKSB7XG5cdFx0XHRcdFx0XHRcdGNhbGxiYWNrKCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0XHQoZXJyb3IpID0+IHtcblx0XHRcdFx0XHRcdGNvbnNvbGUuZXJyb3IoJ0Vycm9yIG9uIHdlYnJ0Y0xvY2FsU3RyZWFtIC0gd2Via2l0R2V0VXNlck1lZGlhIDogZXJyb3I9Jyk7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmRpcihlcnJvcik7XG5cdFx0XHRcdFx0XHRpbml0VmlkZW9Qcm9ncmVzcyA9IGZhbHNlO1xuXG5cdFx0XHRcdFx0XHRpZiAoY2FsbGJhY2spIHtcblx0XHRcdFx0XHRcdFx0Y2FsbGJhY2soZXJyb3IpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGxvY2FsVmlkZW9TdHJlYW1zLmZvckVhY2goKGxvY2FsVmlkZW9TdHJlYW0pID0+IHtcblx0XHRcdFx0XHRhdHRhY2hNZWRpYVN0cmVhbShsb2NhbFZpZGVvU3RyZWFtLCBzdHJlYW1WaWRlbyk7XG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRsb2NhbFZpZGVvU3RyZWFtcyA9IFtdO1xuXG5cdFx0XHRcdGxpc3RlbmVyc1ZpZGVvLmZvckVhY2goKGxpc3RlbmVyVmlkZW8pID0+IHtcblx0XHRcdFx0XHRsaXN0ZW5lclZpZGVvKHN0cmVhbVZpZGVvKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGxpc3RlbmVyc1ZpZGVvID0gW107XG5cblx0XHRcdFx0aW5pdFZpZGVvUHJvZ3Jlc3MgPSBmYWxzZTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogSW5pdGlhbGl6ZXMgdGhlIHZpZGVvIGxvY2FsIHN0cmVhbS5cblx0ICogVGhlIHdlYiBicm93c2VyJ3MgdXNlciBtZWRpYSB3aWxsIGJlIGNhbGxlZCwgc28gdGhlIGJyb3dzZXIgaW4gdXNlIG11c3QgYmUgcmVjZW50IChGaXJlZm94IDE3LCBDaHJvbWUgMjEsIE9wZXJhIDE4IGFuZCBsYXRlciB2ZXJzaW9ucykuXG5cdCAqIEEgdmlkZW8gZWxlbWVudCB3aWxsIGJlIGNyZWF0ZWQsIGFuZCBwdXNoZWQgdG8gdGhlIGxvY2FsIHN0cmVhbXMgb2JqZWN0cy4gVGhlIGNhdGNoZWQgYXVkaW8gc3RyZWFtIHdpbGwgYmUgYXR0YWNoZWQgdG8gdGhlIGNyZWF0ZWQgSFRNTCBlbGVtZW50LlxuXHQgKiBMaXN0ZW5lcnMgd2lsbCBhbHNvIGJlIGNhbGxlZC5cblx0ICovXG5cdGZ1bmN0aW9uIGluaXRBdWRpbyhjYWxsYmFjaykge1xuXHRcdGNvbnNvbGUubG9nKCcoUmVhY2hTREs6OmxvY2Fsc3RyZWFtOjppbml0QXVkaW8pJyk7XG5cdFx0aWYgKCEgaW5pdEF1ZGlvUHJvZ3Jlc3MpIHtcblx0XHRcdGluaXRBdWRpb1Byb2dyZXNzPXRydWU7XG5cblx0XHRcdG5hdmlnYXRvci5nZXRNZWRpYSA9IGdldFVzZXJNZWRpYTtcblx0XHRcdG1Mb2NhbFN0cmVhbUF1ZGlvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnQVVESU8nKTtcblx0XHRcdG1Mb2NhbFN0cmVhbUF1ZGlvLm11dGVkPSB0cnVlO1xuXHRcdFx0bG9jYWxBdWRpb1N0cmVhbXMucHVzaChtTG9jYWxTdHJlYW1BdWRpbyk7XG5cblx0XHRcdGlmKHN0cmVhbUF1ZGlvID09PSBudWxsKXtcblx0XHRcdFx0bmF2aWdhdG9yLmdldE1lZGlhKHthdWRpbyA6IHRydWUsdmlkZW8gOiBmYWxzZX0sXG5cdFx0XHRcdFx0KHMpID0+IHtcblx0XHRcdFx0XHRcdHN0cmVhbUF1ZGlvID0gcztcblx0XHRcdFx0XHRcdGxvY2FsQXVkaW9TdHJlYW1zLmZvckVhY2goKGxvY2FsQXVkaW9TdHJlYW0pID0+IHtcblx0XHRcdFx0XHRcdFx0YXR0YWNoTWVkaWFTdHJlYW0obG9jYWxBdWRpb1N0cmVhbSwgc3RyZWFtQXVkaW8pO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRsb2NhbEF1ZGlvU3RyZWFtcyA9IFtdO1xuXG5cdFx0XHRcdFx0XHRsaXN0ZW5lcnNBdWRpby5mb3JFYWNoKChsaXN0ZW5lckF1ZGlvKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGxpc3RlbmVyQXVkaW8oc3RyZWFtQXVkaW8pO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRsaXN0ZW5lcnNBdWRpbyA9IFtdO1xuXG5cdFx0XHRcdFx0XHRpbml0QXVkaW9Qcm9ncmVzcyA9IGZhbHNlO1xuXG5cdFx0XHRcdFx0XHRpZiAoY2FsbGJhY2spIHtcblx0XHRcdFx0XHRcdFx0Y2FsbGJhY2soKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9LFxuXHRcdFx0XHRcdChlcnJvcikgPT4ge1xuXHRcdFx0XHRcdFx0Y29uc29sZS5lcnJvcignRXJyb3Igb24gd2VicnRjTG9jYWxTdHJlYW0gLSB3ZWJraXRHZXRVc2VyTWVkaWEgOmVycm9yPScpO1xuXHRcdFx0XHRcdFx0Y29uc29sZS5kaXIoZXJyb3IpO1xuXHRcdFx0XHRcdFx0aW5pdEF1ZGlvUHJvZ3Jlc3M9ZmFsc2U7XG5cblx0XHRcdFx0XHRcdGlmIChjYWxsYmFjaykge1xuXHRcdFx0XHRcdFx0XHRjYWxsYmFjayhlcnJvcik7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHQpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0bG9jYWxBdWRpb1N0cmVhbXMuZm9yRWFjaCgobG9jYWxBdWRpb1N0cmVhbSkgPT4ge1xuXHRcdFx0XHRcdGF0dGFjaE1lZGlhU3RyZWFtKGxvY2FsQXVkaW9TdHJlYW0sIHN0cmVhbUF1ZGlvKTtcblx0XHRcdFx0fSk7XG5cdFx0XHRcdGxvY2FsQXVkaW9TdHJlYW1zID0gW107XG5cblx0XHRcdFx0bGlzdGVuZXJzQXVkaW8uZm9yRWFjaCgobGlzdGVuZXJBdWRpbykgPT4ge1xuXHRcdFx0XHRcdGxpc3RlbmVyQXVkaW8oc3RyZWFtQXVkaW8pO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0bGlzdGVuZXJzQXVkaW8gPSBbXTtcblxuXHRcdFx0XHRpbml0QXVkaW9Qcm9ncmVzcyA9IGZhbHNlO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBJbml0aWFsaXplcyB0aGUgYXVkaW8tYW5kLXZpZGVvIGxvY2FsIHN0cmVhbS5cblx0ICogVGhlIHdlYiBicm93c2VyJ3MgdXNlciBtZWRpYSB3aWxsIGJlIGNhbGxlZCwgc28gdGhlIGJyb3dzZXIgaW4gdXNlIG11c3QgYmUgcmVjZW50IChGaXJlZm94IDE3LCBDaHJvbWUgMjEsIE9wZXJhIDE4IGFuZCBsYXRlciB2ZXJzaW9ucykuXG5cdCAqIEEgdmlkZW8gZWxlbWVudCB3aWxsIGJlIGNyZWF0ZWQsIGFuZCBwdXNoZWQgdG8gdGhlIGxvY2FsIHN0cmVhbXMgb2JqZWN0cy4gVGhlIGNhdGNoZWQgYXVkaW8gc3RyZWFtIHdpbGwgYmUgYXR0YWNoZWQgdG8gdGhlIGNyZWF0ZWQgSFRNTCBlbGVtZW50LlxuXHQgKiBMaXN0ZW5lcnMgd2lsbCBhbHNvIGJlIGNhbGxlZC5cblx0ICovXG5cdGZ1bmN0aW9uIGluaXRBdWRpb1ZpZGVvKGNhbGxiYWNrKSB7XG5cdFx0Y29uc29sZS5sb2coJyhSZWFjaFNESzo6bG9jYWxzdHJlYW06OmluaXRBdWRpb1ZpZGVvKScpO1xuXHRcdGlmICghaW5pdEF1ZGlvVmlkZW9Qcm9ncmVzcykge1xuXHRcdFx0aW5pdEF1ZGlvVmlkZW9Qcm9ncmVzcz10cnVlO1xuXG5cdFx0XHRuYXZpZ2F0b3IuZ2V0TWVkaWEgPSBnZXRVc2VyTWVkaWE7XG5cdFx0XHRtTG9jYWxTdHJlYW1BdWRpb1ZpZGVvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnQVVESU9WSURFTycpO1xuXHRcdFx0bUxvY2FsU3RyZWFtQXVkaW9WaWRlby5tdXRlZD0gdHJ1ZTtcblx0XHRcdGxvY2FsQXVkaW9WaWRlb1N0cmVhbXMucHVzaChtTG9jYWxTdHJlYW1BdWRpb1ZpZGVvKTtcblxuXHRcdFx0aWYoc3RyZWFtQXVkaW9WaWRlbyA9PT0gbnVsbCl7XG5cdFx0XHRcdG5hdmlnYXRvci5nZXRNZWRpYSh7YXVkaW8gOiB0cnVlLHZpZGVvIDogdHJ1ZX0sXG5cdFx0XHRcdFx0KHMpID0+IHtcblx0XHRcdFx0XHRcdHN0cmVhbUF1ZGlvVmlkZW8gPSBzO1xuXG5cdFx0XHRcdFx0XHRsb2NhbEF1ZGlvVmlkZW9TdHJlYW1zLmZvckVhY2goKGxvY2FsQXVkaW9WaWRlb1N0cmVhbSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRhdHRhY2hNZWRpYVN0cmVhbShsb2NhbEF1ZGlvVmlkZW9TdHJlYW0sIHN0cmVhbUF1ZGlvVmlkZW8pO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRsb2NhbEF1ZGlvVmlkZW9TdHJlYW1zID0gW107XG5cblx0XHRcdFx0XHRcdGxpc3RlbmVyc0F1ZGlvVmlkZW8uZm9yRWFjaCgobGlzdGVuZXJBdWRpb1ZpZGVvKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGxpc3RlbmVyQXVkaW9WaWRlbyhzdHJlYW1BdWRpb1ZpZGVvKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0bGlzdGVuZXJzQXVkaW9WaWRlbyA9IFtdO1xuXG5cdFx0XHRcdFx0XHRpbml0QXVkaW9WaWRlb1Byb2dyZXNzID0gZmFsc2U7XG5cblx0XHRcdFx0XHRcdGlmIChjYWxsYmFjaykge1xuXHRcdFx0XHRcdFx0XHRjYWxsYmFjaygpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0KGVycm9yKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmVycm9yKCcoUmVhY2hTREs6OmxvY2Fsc3RyZWFtOjppbml0QXVkaW9WaWRlbzo6RXJyb3Igb24gd2VicnRjTG9jYWxTdHJlYW0gLSB3ZWJraXRHZXRVc2VyTWVkaWEgOiBlcnJvcj0nKTtcblx0XHRcdFx0XHRcdGNvbnNvbGUuZGlyKGVycm9yKTtcblx0XHRcdFx0XHRcdGluaXRBdWRpb1ZpZGVvUHJvZ3Jlc3M9ZmFsc2U7XG5cblx0XHRcdFx0XHRcdGlmIChjYWxsYmFjaykge1xuXHRcdFx0XHRcdFx0XHRjYWxsYmFjayhlcnJvcik7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHQpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0bG9jYWxBdWRpb1ZpZGVvU3RyZWFtcy5mb3JFYWNoKChsb2NhbEF1ZGlvVmlkZW9TdHJlYW0pID0+IHtcblx0XHRcdFx0XHRhdHRhY2hNZWRpYVN0cmVhbShsb2NhbEF1ZGlvVmlkZW9TdHJlYW0sIHN0cmVhbUF1ZGlvVmlkZW8pO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0bG9jYWxBdWRpb1ZpZGVvU3RyZWFtcyA9IFtdO1xuXG5cdFx0XHRcdGxpc3RlbmVyc0F1ZGlvVmlkZW8uZm9yRWFjaCgobGlzdGVuZXJBdWRpb1ZpZGVvKSA9PiB7XG5cdFx0XHRcdFx0bGlzdGVuZXJBdWRpb1ZpZGVvKHN0cmVhbUF1ZGlvVmlkZW8pO1xuXHRcdFx0XHR9KTtcblx0XHRcdFx0bGlzdGVuZXJzQXVkaW9WaWRlbyA9IFtdO1xuXG5cdFx0XHRcdGluaXRBdWRpb1ZpZGVvUHJvZ3Jlc3MgPSBmYWxzZTtcblx0XHRcdH1cblxuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBDbG9zZXMgYWxsIHRoZSBzdHJlYW1zLlxuXHQgKiBTZXQgYWxsIHRoZSBpbml0UHJvZ3Jlc3MgZmxhZ3MgdG8gZmFsc2UsIGRldGFjaCBhbGwgdGhlIHN0cmVhbXMgYWZ0ZXIgc3RvcHBpbmcgdGhlbS5cblx0ICovXG5cdGZ1bmN0aW9uIGNsb3NlKCkge1xuXHRcdGNvbnNvbGUubG9nKCcoUmVhY2hTREs6OmxvY2Fsc3RyZWFtOjpjbG9zZSknKTtcblx0XHRpZiAobUxvY2FsU3RyZWFtVmlkZW8pIHtcblx0XHRcdGRldGFjaE1lZGlhU3RyZWFtKG1Mb2NhbFN0cmVhbVZpZGVvKTtcblx0XHRcdG1Mb2NhbFN0cmVhbVZpZGVvPW51bGw7XG5cdFx0fVxuXHRcdGlmIChzdHJlYW1BdWRpb1ZpZGVvKSB7XG5cdFx0XHRzdHJlYW1BdWRpb1ZpZGVvLmdldFRyYWNrcygpLmZvckVhY2goKHRyYWNrKT0+e1xuXHRcdFx0XHR0cmFjay5zdG9wKCk7XG5cdFx0XHR9KTtcblx0XHRcdHN0cmVhbUF1ZGlvVmlkZW89bnVsbDtcblx0XHR9XG5cdFx0aWYgKHN0cmVhbVZpZGVvKSB7XG5cdFx0XHRzdHJlYW1WaWRlby5zdG9wKCk7XG5cdFx0XHRzdHJlYW1WaWRlbyA9IG51bGw7XG5cdFx0fVxuXHRcdGluaXRWaWRlb1Byb2dyZXNzPWZhbHNlO1xuXG5cdFx0aWYgKG1Mb2NhbFN0cmVhbUF1ZGlvKSB7XG5cdFx0XHRkZXRhY2hNZWRpYVN0cmVhbShtTG9jYWxTdHJlYW1BdWRpbyk7XG5cdFx0XHRtTG9jYWxTdHJlYW1BdWRpbz1udWxsO1xuXHRcdH1cblx0XHRpZiAoc3RyZWFtQXVkaW8pIHtcblx0XHRcdHN0cmVhbUF1ZGlvLnN0b3AoKTtcblx0XHRcdHN0cmVhbUF1ZGlvID0gbnVsbDtcblx0XHR9XG5cblx0XHRpbml0QXVkaW9Qcm9ncmVzcz1mYWxzZTtcblxuXHRcdGlmIChtTG9jYWxTdHJlYW1BdWRpb1ZpZGVvKSB7XG5cdFx0XHRkZXRhY2hNZWRpYVN0cmVhbShtTG9jYWxTdHJlYW1BdWRpb1ZpZGVvKTtcblx0XHRcdG1Mb2NhbFN0cmVhbUF1ZGlvVmlkZW89bnVsbDtcblx0XHR9XG5cdFx0aWYgKHN0cmVhbUF1ZGlvVmlkZW8pIHtcblx0XHRcdHN0cmVhbUF1ZGlvVmlkZW8uc3RvcCgpO1xuXHRcdFx0c3RyZWFtQXVkaW9WaWRlbyA9IG51bGw7XG5cdFx0fVxuXG5cdFx0aW5pdEF1ZGlvVmlkZW9Qcm9ncmVzcz1mYWxzZTtcblx0fVxuXG5cblx0cmV0dXJuIHtcblx0XHQvKipcblx0XHQgKiBSZXR1cm5zIHRoZSB2aWRlbyBzdHJlYW1cblx0XHQgKi9cblx0XHRnZXRWaWRlb1N0cmVhbTogKCkgPT4ge1xuXHRcdFx0cmV0dXJuIHN0cmVhbVZpZGVvO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogQWRkcyBhIHZpZGVvIGxpc3RlbmVyIHdoaWNoIHdpbGwgYmUgY2FsbGVkIGFmdGVyIHRoZSB2aWRlbyBzdHJlYW0gaXMgZXN0YWJsaXNoZWQuXG5cdFx0ICogQHBhcmFtIHtmdW5jdGlvbn0gY2IgLSBUaGUgbGlzdGVuZXIgdG8gYWRkXG5cdFx0ICovXG5cdFx0YWRkVmlkZW9MaXN0ZW5lcjogKGNiKSA9PiB7XG5cdFx0XHRsaXN0ZW5lcnNWaWRlby5wdXNoKGNiKTtcblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIEluaXRpYWxpemVzIHRoZSB2aWRlbyBsb2NhbCBzdHJlYW0uXG5cdFx0ICogVGhlIHdlYiBicm93c2VyJ3MgdXNlciBtZWRpYSB3aWxsIGJlIGNhbGxlZCwgc28gdGhlIGJyb3dzZXIgaW4gdXNlIG11c3QgYmUgcmVjZW50IChGaXJlZm94IDE3LCBDaHJvbWUgMjEsIE9wZXJhIDE4IGFuZCBsYXRlciB2ZXJzaW9ucykuXG5cdFx0ICogQSB2aWRlbyBlbGVtZW50IHdpbGwgYmUgY3JlYXRlZCwgYW5kIHB1c2hlZCB0byB0aGUgbG9jYWwgc3RyZWFtcyBvYmplY3RzLiBUaGUgY2F0Y2hlZCB2aWRlbyBhbmQgYXVkaW8gc3RyZWFtIHdpbGwgYmUgYXR0YWNoZWQgdG8gdGhlIGNyZWF0ZWQgSFRNTCBlbGVtZW50LlxuXHRcdCAqIExpc3RlbmVycyB3aWxsIGFsc28gYmUgY2FsbGVkLlxuXHRcdCAqL1xuXHRcdGluaXRWaWRlbzogKCkgPT4ge1xuXHRcdFx0aW5pdFZpZGVvKCk7XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiBNYWtlcyB0aGUgY29ubmVjdGlvbiB0byB0aGUgbG9jYWwgdmlkZW8gc3RyZWFtLCBhbmQgYXR0YWNoIHRoZSBsb2NhbCB2aWRlbyBzdHJlYW0gdG8gdGhlIHZpZGVvIGVsZW1lbnQgaWYgZGVmaW5lZC5cblx0XHQgKiBJZiB0aGUgdmlkZW8gZWxlbWVudCBpcyBub3QgZGVmaW5lZCwgdGhlIHZpZGVvIGxvY2FsIHN0cmVhbSB3aWxsIGJlIGluaXRpYWxpemVkIGFuZCBhIGRlZGljYXRlZCBIVE1MIHZpZGVvIHRhZyB3aWxsIGJlIGNyZWF0ZWQuXG5cdFx0ICogQHBhcmFtIHZpZGVvRWx0IC0gVGhlIHZpZGVvIGVsZW1lbnQgd2hlcmUgcGxhY2UgdGhlIGNvbm5lY3RlZCBsb2NhbCB2aWRlbyBzdHJlYW0uIGlmIG51bGwsIGEgbmV3IG9uZSB3aWxsIGJlIGNyZWF0ZWQuXG5cdFx0ICogQHBhcmFtIGdldExvY2FsU3RyZWFtQ2IgLSBhIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIHJldHJpZXZlIHRoZSBtZWRpYXN0cmVhbSBvYmplY3Rcblx0XHQgKi9cblx0XHRjb25uZWN0TG9jYWxWaWRlb1N0cmVhbTogKHZpZGVvRWx0LCBwdWJsaXNoU3RyZWFtQ2IsIGdldExvY2FsU3RyZWFtQ2IpID0+IHtcblx0XHRcdGlmICh2aWRlb0VsdCkge1xuXHRcdFx0XHR2aWRlb0VsdC5tdXRlZD10cnVlO1xuXHRcdFx0XHRpZiAoc3RyZWFtVmlkZW8pIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnKFJlYWNoU0RLOjpsb2NhbHN0cmVhbTo6Y29ubmVjdExvY2FsVmlkZW9TdHJlYW0pdXNlIGV4aXN0aW5nIHN0cmVhbVZpZGVvJyk7XG5cdFx0XHRcdFx0YXR0YWNoTWVkaWFTdHJlYW0odmlkZW9FbHQsc3RyZWFtVmlkZW8pO1xuXHRcdFx0XHRcdGlmIChnZXRMb2NhbFN0cmVhbUNiICYmIHR5cGVvZiBnZXRMb2NhbFN0cmVhbUNiPT0nZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0XHRnZXRMb2NhbFN0cmVhbUNiKHN0cmVhbVZpZGVvKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0bG9jYWxWaWRlb1N0cmVhbXMucHVzaCh2aWRlb0VsdCk7XG5cdFx0XHRcdFx0aWYgKGdldExvY2FsU3RyZWFtQ2IgJiYgdHlwZW9mIGdldExvY2FsU3RyZWFtQ2I9PSdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRcdGxpc3RlbmVyc1ZpZGVvLnB1c2goZ2V0TG9jYWxTdHJlYW1DYik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGluaXRWaWRlbyhwdWJsaXNoU3RyZWFtQ2IpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZiAoIXN0cmVhbVZpZGVvKSB7XG5cdFx0XHRcdFx0aWYgKGdldExvY2FsU3RyZWFtQ2IgJiYgdHlwZW9mIGdldExvY2FsU3RyZWFtQ2I9PSdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRcdGxpc3RlbmVyc1ZpZGVvLnB1c2goZ2V0TG9jYWxTdHJlYW1DYik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGluaXRWaWRlbyhwdWJsaXNoU3RyZWFtQ2IpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGlmIChnZXRMb2NhbFN0cmVhbUNiICYmIHR5cGVvZiBnZXRMb2NhbFN0cmVhbUNiPT0nZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0XHRnZXRMb2NhbFN0cmVhbUNiKHN0cmVhbVZpZGVvKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgdGhlIGF1ZGlvIHN0cmVhbVxuXHRcdCAqIEByZXR1cm4gLSBBbiBhdWRpbyBzdHJlYW1cblx0XHQgKi9cblx0XHRnZXRBdWRpb1N0cmVhbTogKCkgPT4ge1xuXHRcdFx0cmV0dXJuIHN0cmVhbUF1ZGlvO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogQWRkcyBhbiBhdWRpbyBsaXN0ZW5lciB3aGljaCB3aWxsIGJlIGNhbGxlZCBhZnRlciB0aGUgYXVkaW8gc3RyZWFtIGlzIGVzdGFibGlzaGVkLlxuXHRcdCAqIEBwYXJhbSB7ZnVuY3Rpb259IGNiIC0gVGhlIGxpc3RlbmVyIHRvIGFkZFxuXHRcdCAqL1xuXHRcdGFkZEF1ZGlvTGlzdGVuZXI6IChjYikgPT4ge1xuXHRcdFx0bGlzdGVuZXJzQXVkaW8ucHVzaChjYik7XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiBJbml0aWFsaXplcyB0aGUgYXVkaW8gbG9jYWwgc3RyZWFtLlxuXHRcdCAqIFRoZSB3ZWIgYnJvd3NlcidzIHVzZXIgbWVkaWEgd2lsbCBiZSBjYWxsZWQsIHNvIHRoZSBicm93c2VyIGluIHVzZSBtdXN0IGJlIHJlY2VudCAoRmlyZWZveCAxNywgQ2hyb21lIDIxLCBPcGVyYSAxOCBhbmQgbGF0ZXIgdmVyc2lvbnMpLlxuXHRcdCAqIEEgdmlkZW8gZWxlbWVudCB3aWxsIGJlIGNyZWF0ZWQsIGFuZCBwdXNoZWQgdG8gdGhlIGxvY2FsIHN0cmVhbXMgb2JqZWN0cy4gVGhlIGNhdGNoZWQgYXVkaW8gc3RyZWFtIHdpbGwgYmUgYXR0YWNoZWQgdG8gdGhlIGNyZWF0ZWQgSFRNTCBlbGVtZW50LlxuXHRcdCAqIExpc3RlbmVycyB3aWxsIGFsc28gYmUgY2FsbGVkLlxuXHRcdCAqL1xuXHRcdGluaXRBdWRpbzogKCkgPT4ge1xuXHRcdFx0aW5pdEF1ZGlvKCk7XG5cdFx0fSxcblx0XHQvKipcblx0XHQgKiBDb25uZWN0cyB0byB0aGUgbG9jYWwgYXVkaW8gc3RyZWFtIGFuZCBzZXRzIGl0IHRvIHRoZSBhdWRpbyBlbGVtZW50IGlmIGRlZmluZWQuXG5cdFx0ICogSWYgbm90LCBhIGRlZGljYXRlZCBIVE1MIHZpZGVvIHdpbGwgYmUgY3JlYXRlZC4gVGhlIGF1ZGlvIG1lZGlhIHN0cmVhbSB3aWxsIGJlIGF0dGFjaGVkIHRvIHRoZSBlbGVtZW50IGluIHVzZS5cblx0XHQgKiBAcGFyYW0gQXVkaW9FbHQgLSBUaGUgYXVkaW8gZWxlbWVudCBpbiB1c2UgcG9zc2Vzc2luZyB0aGUgYXR0YWNoZWQgbG9jYWwgYXVkaW8gc3RyZWFtXG5cdFx0ICogQHBhcmFtIGdldExvY2FsU3RyZWFtQ2IgLSBhIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIHJldHJpZXZlIHRoZSBtZWRpYXN0cmVhbSBvYmplY3Rcblx0XHQgKi9cblx0XHRjb25uZWN0TG9jYWxBdWRpb1N0cmVhbTogKEF1ZGlvRWx0LCBwdWJsaXNoU3RyZWFtQ2IsIGdldExvY2FsU3RyZWFtQ2IpID0+IHtcblx0XHRcdGlmIChBdWRpb0VsdCkge1xuXHRcdFx0XHRBdWRpb0VsdC5tdXRlZD10cnVlO1xuXHRcdFx0XHRpZiAoc3RyZWFtQXVkaW8pIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnKFJlYWNoU0RLOjpsb2NhbHN0cmVhbTo6Y29ubmVjdExvY2FsQXVkaW9TdHJlYW0pdXNlIGV4aXN0aW5nIHN0cmVhbUF1ZGlvJyk7XG5cdFx0XHRcdFx0YXR0YWNoTWVkaWFTdHJlYW0oQXVkaW9FbHQsc3RyZWFtQXVkaW8pO1xuXHRcdFx0XHRcdGlmIChnZXRMb2NhbFN0cmVhbUNiICYmIHR5cGVvZiBnZXRMb2NhbFN0cmVhbUNiPT0nZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0XHRnZXRMb2NhbFN0cmVhbUNiKHN0cmVhbUF1ZGlvKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0bG9jYWxBdWRpb1N0cmVhbXMucHVzaChBdWRpb0VsdCk7XG5cdFx0XHRcdFx0aWYgKGdldExvY2FsU3RyZWFtQ2IgJiYgdHlwZW9mIGdldExvY2FsU3RyZWFtQ2I9PSdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRcdGxpc3RlbmVyc0F1ZGlvLnB1c2goZ2V0TG9jYWxTdHJlYW1DYik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGluaXRBdWRpbyhwdWJsaXNoU3RyZWFtQ2IpO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZiAoIXN0cmVhbUF1ZGlvKSB7XG5cdFx0XHRcdFx0aWYgKGdldExvY2FsU3RyZWFtQ2IgJiYgdHlwZW9mIGdldExvY2FsU3RyZWFtQ2I9PSdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRcdGxpc3RlbmVyc0F1ZGlvLnB1c2goZ2V0TG9jYWxTdHJlYW1DYik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGluaXRBdWRpbyhwdWJsaXNoU3RyZWFtQ2IpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGlmIChnZXRMb2NhbFN0cmVhbUNiICYmIHR5cGVvZiBnZXRMb2NhbFN0cmVhbUNiPT0nZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0XHRnZXRMb2NhbFN0cmVhbUNiKHN0cmVhbUF1ZGlvKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIFJldHVybnMgdGhlIGF1ZGlvIHZpZGVvIHN0cmVhbVxuXHRcdCAqIEByZXR1cm4gLSBUaGUgYXVkaW8gYW5kIHZpZGVvIHN0cmVhbVxuXHRcdCAqL1xuXHRcdGdldEF1ZGlvVmlkZW9TdHJlYW06ICgpID0+IHtcblx0XHRcdHJldHVybiBzdHJlYW1BdWRpb1ZpZGVvO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogQWRkcyB0aGUgYXVkaW8tYW5kLXZpZGVvIGxpc3RlbmVyIHdoaWNoIHdpbGwgYmUgY2FsbGVkIGFmdGVyIHRoZSBhdWRpLWFuZC12aWRlbyBzdHJlYW0gaXMgZXN0YWJsaXNoZWQuXG5cdFx0ICogQHBhcmFtIGNiIC0gVGhlIGF1ZGlvIGFuZCB2aWRlbyBsaXN0ZW5lciB0byBhZGRcblx0XHQgKi9cblx0XHRhZGRBdWRpb1ZpZGVvTGlzdGVuZXI6IChjYikgPT4ge1xuXHRcdFx0bGlzdGVuZXJzQXVkaW9WaWRlby5wdXNoKGNiKTtcblx0XHR9LFxuXHRcdC8qKlxuXHRcdCAqIEluaXRpYWxpemVzIHRoZSBhdWRpby1hbmQtdmlkZW8gbG9jYWwgc3RyZWFtLlxuXHRcdCAqIFRoZSB3ZWIgYnJvd3NlcidzIHVzZXIgbWVkaWEgd2lsbCBiZSBjYWxsZWQsIHNvIHRoZSBicm93c2VyIGluIHVzZSBtdXN0IGJlIHJlY2VudCAoRmlyZWZveCAxNywgQ2hyb21lIDIxLCBPcGVyYSAxOCBhbmQgbGF0ZXIgdmVyc2lvbnMpLlxuXHRcdCAqIEEgdmlkZW8gZWxlbWVudCB3aWxsIGJlIGNyZWF0ZWQsIGFuZCBwdXNoZWQgdG8gdGhlIGxvY2FsIHN0cmVhbXMgb2JqZWN0cy4gVGhlIGNhdGNoZWQgYXVkaW8gc3RyZWFtIHdpbGwgYmUgYXR0YWNoZWQgdG8gdGhlIGNyZWF0ZWQgSFRNTCBlbGVtZW50LlxuXHRcdCAqIExpc3RlbmVycyB3aWxsIGFsc28gYmUgY2FsbGVkLlxuXHRcdCAqL1xuXHRcdGluaXRBdWRpb1ZpZGVvOiAoKSA9PiB7XG5cdFx0XHRpbml0QXVkaW9WaWRlbygpO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogQ29ubmVjdHMgdGhlIGxvY2FsIGF1ZGlvIGFuZCB2aWRlbyBzdHJlYW1zIGFuZCBhc3NpZ25zIHRoZW0gdG8gdGhlIGF1ZGlvIGFuZCB2aWRlbyBlbGVtZW50IGlmIG5lZWRlZC5cblx0XHQgKiBJZiBubyBIVE1MIGVsZW1lbnQgaXMgcGFzc2VkIHRvIHRoZSBmdW5jdGlvbm4gYSBuZXcgZWxlbWVudCBpcyBjcmVhdGVkXG5cdFx0ICogQHBhcmFtIEF1ZGlvVmlkZW9FbHQgLSBUaGUgZWxlbWVudCB3aGVyZSB0byBwbGFjZSB0aGUgYXVkaW8gYW5kIHZpZGVvIGxvY2FsIHN0cmVhbXNcblx0XHQgKiBAcGFyYW0gZ2V0TG9jYWxTdHJlYW1DYiAtIGEgY2FsbGJhY2sgZnVuY3Rpb24gdG8gcmV0cmlldmUgdGhlIG1lZGlhc3RyZWFtIG9iamVjdFxuXHRcdCAqL1xuXHRcdGNvbm5lY3RMb2NhbEF1ZGlvVmlkZW9TdHJlYW06IChBdWRpb1ZpZGVvRWx0LCBwdWJsaXNoU3RyZWFtQ2IsIGdldExvY2FsU3RyZWFtQ2IpID0+IHtcblx0XHRcdGlmIChBdWRpb1ZpZGVvRWx0KSB7XG5cdFx0XHRcdEF1ZGlvVmlkZW9FbHQubXV0ZWQ9dHJ1ZTtcblx0XHRcdFx0aWYgKHN0cmVhbUF1ZGlvVmlkZW8pIHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnKFJlYWNoU0RLOjpsb2NhbHN0cmVhbTo6Y29ubmVjdExvY2FsQXVkaW9WaWRlb1N0cmVhbSl1c2UgZXhpc3Rpbmcgc3RyZWFtQXVkaW9WaWRlbycpO1xuXHRcdFx0XHRcdGF0dGFjaE1lZGlhU3RyZWFtKEF1ZGlvVmlkZW9FbHQsc3RyZWFtQXVkaW9WaWRlbyk7XG5cdFx0XHRcdFx0aWYgKGdldExvY2FsU3RyZWFtQ2IpIHtcblx0XHRcdFx0XHRcdGdldExvY2FsU3RyZWFtQ2Ioc3RyZWFtQXVkaW9WaWRlbyk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGxvY2FsQXVkaW9WaWRlb1N0cmVhbXMucHVzaChBdWRpb1ZpZGVvRWx0KTtcblx0XHRcdFx0XHRpZiAoZ2V0TG9jYWxTdHJlYW1DYiAmJiB0eXBlb2YgZ2V0TG9jYWxTdHJlYW1DYiA9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0XHRsaXN0ZW5lcnNBdWRpb1ZpZGVvLnB1c2goZ2V0TG9jYWxTdHJlYW1DYik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGluaXRBdWRpb1ZpZGVvKHB1Ymxpc2hTdHJlYW1DYik7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGlmICghc3RyZWFtQXVkaW9WaWRlbykge1xuXHRcdFx0XHRcdGlmIChnZXRMb2NhbFN0cmVhbUNiICYmIHR5cGVvZiBnZXRMb2NhbFN0cmVhbUNiID09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRcdGxpc3RlbmVyc0F1ZGlvVmlkZW8ucHVzaChnZXRMb2NhbFN0cmVhbUNiKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aW5pdEF1ZGlvVmlkZW8ocHVibGlzaFN0cmVhbUNiKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRpZiAoZ2V0TG9jYWxTdHJlYW1DYikge1xuXHRcdFx0XHRcdFx0Z2V0TG9jYWxTdHJlYW1DYihzdHJlYW1BdWRpb1ZpZGVvKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogRGV0YWNoZXMgc3RyZWFtcyBhbmQgZGVsZXRlcyBsaXN0ZW5lcnNcblx0XHQgKi9cblx0XHRjbG9zZTogKCkgPT4ge1xuXHRcdFx0Y2xvc2UoKTtcblx0XHR9XG5cdH07XG5cbn0pKCk7XG5cbmV4cG9ydCBkZWZhdWx0IGxvY2Fsc3RyZWFtO1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2xvY2Fsc3RyZWFtLmpzXG4gKiovIiwiLyoqXG4gKiBAZmlsZSB3ZWJydGNtbmdyLmpzIC0gSlMgZmlsZSBmb3IgYSBXZWJSVEMgbWFuYWdlclxuICogQGF1dGhvciBXZWJjb21cbiAqL1xuXG4vKmVzbGludCBjb21wbGV4aXR5OjEsIG1heC1zdGF0ZW1lbnRzOiAxLCBtYXgtbGVuOiAxLCBtYXgtcGFyYW1zOiAxKi9cblxuaW1wb3J0IHV0aWxzIGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IHdlYnJ0YyBmcm9tICcuL3dlYnJ0Yyc7XG5pbXBvcnQgbG9jYWxzdHJlYW0gZnJvbSAnLi9sb2NhbHN0cmVhbSc7XG5cbi8qKlxuICogQGNvbnN0cnVjdG9yXG4gKiBAZGVzY3JpcHRpb24gV2ViUlRDIG1hbmFnZXIgaGFuZGxpbmcgdGhlIFdlYlJUQyBzdGFja3MgaW4gdXNlXG4gKi9cbmNvbnN0IHdlYnJ0Y21uZ3IgPSBmdW5jdGlvbihkYXRhcmVmcykge1xuXG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gQW4gYXJyYXkgY29udGFpbmcgdGhlIFdlYlJUQyBzdGFja3MgaW4gdXNlXG5cdCAqL1xuXHRjb25zdCB3ZWJydGNTdGFja3MgPSBbXTtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBBbiBhcnJheSBjb250YWludCB0aGUgdmlydHVhbCBXZWJSVEMgc3RhY2tzXG5cdCAqL1xuXHRjb25zdCB2aXJ0dWFsV2VicnRjU3RhY2tzID0gW107XG5cblx0LyoqXG5cdCogYSB3b3JrIGFyb3VuZCB0byBiZSBhYmxlIHRvIGdldCBhIHNlbGYgcmVmZXJlbmNlIHRocm91Z2ggc2V0dGluZyBteXNlbGYgdGhyb3VnaCB0aGUgUmVhY2ggY2xhc3Ncblx0Ki9cblx0bGV0IG13ZWJydGNtbmdyX3JlZmVyZW5jZTtcblxuXHQvKipcblx0ICogQ3JlYXRlcyBhIFdlYlJUQyBvYmplY3Rcblx0ICogQHBhcmFtIHBfVmlkIC0gdGhlIHZpZGVvIGNvbnRhaW5lciBsaW5rZWQgdG8gdGhlIHBlZXJjb25uZWN0aW9uXG5cdCAqIEBwYXJhbSBwX3JlbW90ZUFwcEluc3RJZCAtIHRoZSByZW1vdGUgYXBwbGljYXRpb24gaW5zdGFuY2UgaWRlbnRpZmllclxuXHQgKiBAcGFyYW0gcF9vbkNsb3NlQ2IgLSBBIGNhbGxiYWNrIHRvIHRyaWdnZXIgd2hlbiB0aGUgY29ubmVjdGlvbiBpcyBjbG9zZWRcblx0ICogQHBhcmFtIHBfaXNQdWJsaXNoIC0gdHJ1ZSBpZiBpdCdzIGEgcGVlcmNvbm5lY3Rpb24gcmVsYXRlZCB0byBhIHB1Ymxpc2hTdHJlYW0sIGZhbHNlIGlmIGl0J3MgcmVsYXRhdGVkIHRvIGEgc3Vic2NyaWJlXG5cdCAqIEBwYXJhbSBwX2FjdGlvblR5cGUgLSBUaGUgYWN0aW9uIHR5cGUgKGF1ZGlvLCB2aWRlbywgYXVkaW8tdmlkZW8pXG5cdCAqIEBwYXJhbSBwX3BlZXJjb0lkIC0gVGhlIFBlZXJDb25uZWN0aW9uIElkXG5cdCAqIEBwYXJhbSBwX3BlZXJjb1JlZiAtIFRoZSBQZWVyQ29ubmVjdGlvbiBSZWYgaW4gdGhlIHdlYnJ0YyBub2RlXG5cdCAqIEBwYXJhbSBwX3BlZXJjb1JlZiAtIFRoZSBQZWVyQ29ubmVjdGlvbiBJZCBpbiB0aGUgd2VicnRjIG5vZGVcblx0ICogQHBhcmFtIHBfbXV0ZWRBdWRpbyAtIG9wdGlvbmFsIC0gaWYgdHJ1ZSBwZWVyY29ubmVjdGlvbiB3aWxsIGJlIGNyZWF0ZWQgbXV0ZWRcblx0ICogQHBhcmFtIHBfbXV0ZVZpZGVvIC0gb3B0aW9uYWwgLSBpZiB0cnVlIHBlZXJjb25uZWN0aW9uIHdpbGwgYmUgY3JlYXRlZCB3aXRoIHZpZGVvIG11dGVkXG5cdCAqIEBwYXJhbSBwX2dldFN0cmVhbUNiIC0gYSBjYWxsYmFjayBmdW5jdGlvbiB0byByZXRyaWV2ZSB0aGUgbWVkaWFzdHJlYW0gb2JqZWN0XG5cdCAqL1xuXHRmdW5jdGlvbiBfY3JlYXRlV2VicnRjKHBfVmlkLCBwX3JlbW90ZUFwcEluc3RJZCwgcF9vbkNsb3NlQ2IsIHBfaXNQdWJsaXNoLCBwX2FjdGlvblR5cGUsIHBfcGVlcmNvSWQsIHBfcGVlcmNvUmVmLCBwX211dGVkQXVkaW8sIHBfbXV0ZVZpZGVvLCBwX2dldFN0cmVhbUNiKSB7XG5cdFx0Y29uc3Rcblx0XHRcdHdlYnJ0Y1N0YWNrSWQgPSBwX3BlZXJjb0lkLFxuXHRcdFx0bG9jYWxEYXRhUmVmID0gZGF0YXJlZnMuZ2V0V2VicnRjKCkuY2hpbGQoYCR7cF9wZWVyY29SZWZ9LyR7dXRpbHMuYXBwSW5zdGFuY2VJZH1gKSxcblx0XHRcdHJlbW90ZURhdGFSZWYgPSBkYXRhcmVmcy5nZXRXZWJydGMoKS5jaGlsZChgJHtwX3BlZXJjb1JlZn0vJHtwX3JlbW90ZUFwcEluc3RJZH1gKTtcbi8vICAgIFx0IGlmIChwX2lzUHVibGlzaCkge1xuLy8gICAgXHRcdCB3ZWJydGNTdGFja0lkPXV0aWxzLmFwcEluc3RhbmNlSWQrXCJfXCIrcF9yZW1vdGVBcHBJbnN0SWQ7XG4vLyAgICAgICAgIH0gZWxzZSB7XG4vLyAgICAgICAgXHQgd2VicnRjU3RhY2tJZD1wX3JlbW90ZUFwcEluc3RJZCtcIl9cIit1dGlscy5hcHBJbnN0YW5jZUlkO1xuLy8gICAgICAgICB9XG5cdFx0bGV0IHZpcnR1YWxXZWJydGNTdGFjayA7XG5cdFx0Ly8gY3JlYXRlIHRoZSB2aXJ0dWFsIHdlYnJ0Y3N0YWNrXG5cdFx0aWYgKHBfaXNQdWJsaXNoKSB7XG5cdFx0XHR2aXJ0dWFsV2VicnRjU3RhY2sgPSB7XG5cdFx0XHRcdHdlYlJ0Y1N0YWNrSWQ6IHdlYnJ0Y1N0YWNrSWQsXG5cdFx0XHRcdGxvY2FsVmlkOiBwX1ZpZFxuXHRcdFx0fTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dmlydHVhbFdlYnJ0Y1N0YWNrID0ge1xuXHRcdFx0XHR3ZWJSdGNTdGFja0lkOiB3ZWJydGNTdGFja0lkLFxuXHRcdFx0XHRyZW1vdGVWaWQ6IHBfVmlkXG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdGNvbnN0IGlkID0gdmlydHVhbFdlYnJ0Y1N0YWNrcy5wdXNoKHZpcnR1YWxXZWJydGNTdGFjaykgLSAxO1xuXG5cdFx0Ly8gY3JlYXRlIHRoZSByZWFsIHdlYnJ0Y3N0YWNrIGlmIGl0IGRvZXMgbm90IGFscmVhZHkgZXhpc3Rcblx0XHRpZiAoIXdlYnJ0Y1N0YWNrc1t3ZWJydGNTdGFja0lkXSkge1xuXHRcdFx0Y29uc29sZS5kZWJ1ZygnUmVhY2hTREs6OndlYnJ0Y21uZ3I6OmNyZWF0ZVdlYnJ0Yy0+Y3JlYXRlIGEgbmV3IHJlYWwgd2VicnRjU3RhY2snKTtcblx0XHRcdC8vIGNyZWF0ZSB0aGUgcmVhbCB3ZWJydGNzdGFja1xuXHRcdFx0Y29uc3Qgd2ViUnRjU3RhY2sgPSB3ZWJydGMobXdlYnJ0Y21uZ3JfcmVmZXJlbmNlLCBwX2lzUHVibGlzaCwgbG9jYWxEYXRhUmVmLCByZW1vdGVEYXRhUmVmLCB3ZWJydGNTdGFja0lkLCBwX2FjdGlvblR5cGUsIHBfbXV0ZWRBdWRpbywgcF9tdXRlVmlkZW8pO1xuXHRcdFx0d2ViUnRjU3RhY2suc2V0T25DbG9zZShwX29uQ2xvc2VDYik7XG5cdFx0XHRpZiAocF9pc1B1Ymxpc2gpIHtcblx0XHRcdFx0d2VicnRjU3RhY2tzW3dlYnJ0Y1N0YWNrSWRdID0ge1xuXHRcdFx0XHRcdHN0YWNrOndlYlJ0Y1N0YWNrLFxuXHRcdFx0XHRcdGlzUHVibGlzaGVkOjEsXG5cdFx0XHRcdFx0aXNTdWJzY3JpYmVkOjBcblx0XHRcdFx0fTtcblx0XHRcdFx0d2ViUnRjU3RhY2suY29ubmVjdExvY2FsU3RyZWFtKHBfVmlkLHBfZ2V0U3RyZWFtQ2IpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0d2VicnRjU3RhY2tzW3dlYnJ0Y1N0YWNrSWRdID0ge1xuXHRcdFx0XHRcdHN0YWNrOndlYlJ0Y1N0YWNrLFxuXHRcdFx0XHRcdGlzUHVibGlzaGVkOjAsXG5cdFx0XHRcdFx0aXNTdWJzY3JpYmVkOjFcblx0XHRcdFx0fTtcblx0XHRcdFx0d2ViUnRjU3RhY2suY29ubmVjdFJlbW90ZVN0cmVhbShwX1ZpZCxwX2dldFN0cmVhbUNiKTtcblx0XHRcdH1cblxuXG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc29sZS5kZWJ1ZygnUmVhY2hTREs6OndlYnJ0Y21uZ3I6OmNyZWF0ZVdlYnJ0Yy0+dXNlIGV4aXN0aW5nIHJlYWwgd2VicnRjU3RhY2snKTtcblx0XHRcdC8vIGluY3JlbWVudCByZWYgY291bnRlclxuXHRcdFx0aWYgKHBfaXNQdWJsaXNoKSB7XG5cdFx0XHRcdHdlYnJ0Y1N0YWNrc1t3ZWJydGNTdGFja0lkXS5pc1B1Ymxpc2hlZCsrO1xuXHRcdFx0XHR3ZWJydGNTdGFja3Nbd2VicnRjU3RhY2tJZF0uc3RhY2suY29ubmVjdExvY2FsU3RyZWFtKHBfVmlkLCBwX2dldFN0cmVhbUNiKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHdlYnJ0Y1N0YWNrc1t3ZWJydGNTdGFja0lkXS5pc1N1YnNjcmliZWQrKztcblx0XHRcdFx0d2VicnRjU3RhY2tzW3dlYnJ0Y1N0YWNrSWRdLnN0YWNrLmNvbm5lY3RSZW1vdGVTdHJlYW0ocF9WaWQsIHBfZ2V0U3RyZWFtQ2IpO1xuXHRcdFx0fVxuXG5cblx0XHR9XG5cdFx0Y29uc29sZS5kZWJ1ZyhgUmVhY2hTREs6OndlYnJ0Y21uZ3I6OmNyZWF0ZVdlYnJ0Yy0+d2VicnRjU3RhY2s6JHt3ZWJydGNTdGFja0lkfSBuZXcgaXNQdWJsaXNoZWQgY291bnQgPSR7d2VicnRjU3RhY2tzW3dlYnJ0Y1N0YWNrSWRdLmlzUHVibGlzaGVkfSBuZXcgaXNTdWJzY3JpYmVkIGNvdW50ID0ke3dlYnJ0Y1N0YWNrc1t3ZWJydGNTdGFja0lkXS5pc1N1YnNjcmliZWR9YCk7XG5cdFx0cmV0dXJuIGlkO1xuXHR9XG5cblx0LyoqXG5cdCAqIENsb3NlIFdlYlJUQyBmZWF0dXJlcyA6IGRldGFjaCBtZWRpYSBzdHJlYW1zIGFuZCB1bnB1Ymxpc2ggc3RhY2tzLlxuXHQgKiBAcGFyYW0gaWQgLVxuXHQgKiBAcGFyYW0gcF9pc1VuUHVibGlzaFxuXHQgKiBAcGFyYW0gY2FsbGJhY2sgLVxuXHQgKi9cblx0ZnVuY3Rpb24gX2Nsb3NlV2VicnRjKGlkLHBfaXNVblB1Ymxpc2gsY2FsbGJhY2spIHtcblx0XHRjb25zb2xlLmRlYnVnKGBSZWFjaFNESzo6d2VicnRjbW5ncjo6Y2xvc2VXZWJydGMtPmlkPSR7aWR9YCk7XG5cdFx0aWYgKCF2aXJ0dWFsV2VicnRjU3RhY2tzW2lkXSkge1xuXHRcdFx0Y29uc29sZS53YXJuKGBSZWFjaFNESzo6d2VicnRjbW5ncjo6Y2xvc2VXZWJydGM6IHZpcnR1YWxzdGFjayAke2lkfSBub3QgZm91bmRgKTtcblx0XHRcdGlmIChjYWxsYmFjayAmJiB0eXBlb2YgY2FsbGJhY2sgPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRjYWxsYmFjaygpO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblxuXHRcdGNvbnN0IHdlYnJ0Y1N0YWNrSWQgPSB2aXJ0dWFsV2VicnRjU3RhY2tzW2lkXS53ZWJSdGNTdGFja0lkO1xuXHRcdGlmICh3ZWJydGNTdGFja0lkICYmIHdlYnJ0Y1N0YWNrc1t3ZWJydGNTdGFja0lkXSAgKSB7XG5cdFx0XHRpZiAocF9pc1VuUHVibGlzaCAmJiB3ZWJydGNTdGFja3Nbd2VicnRjU3RhY2tJZF0uaXNQdWJsaXNoZWQ+MCkge1xuXHRcdFx0XHR3ZWJydGNTdGFja3Nbd2VicnRjU3RhY2tJZF0uaXNQdWJsaXNoZWQtLTtcblx0XHRcdH0gZWxzZSBpZiAoIXBfaXNVblB1Ymxpc2ggJiYgd2VicnRjU3RhY2tzW3dlYnJ0Y1N0YWNrSWRdLmlzU3Vic2NyaWJlZD4wKSB7XG5cdFx0XHRcdHdlYnJ0Y1N0YWNrc1t3ZWJydGNTdGFja0lkXS5pc1N1YnNjcmliZWQtLTtcblx0XHRcdH1cblx0XHRcdGlmICh3ZWJydGNTdGFja3Nbd2VicnRjU3RhY2tJZF0uaXNQdWJsaXNoZWQ8MSAmJiB3ZWJydGNTdGFja3Nbd2VicnRjU3RhY2tJZF0uaXNTdWJzY3JpYmVkPDEpIHtcblx0XHRcdFx0Y29uc29sZS5kZWJ1ZyhgUmVhY2hTREs6OndlYnJ0Y21uZ3I6OmNsb3NlV2VicnRjLT5kZXN0cm95ICByZWFsIHdlYnJ0Y1N0YWNrOiR7d2VicnRjU3RhY2tJZH1gKTtcblx0XHRcdFx0Ly8gZGVzdHJveSB0aGUgc3RhY2tcblx0XHRcdFx0d2VicnRjU3RhY2tzW3dlYnJ0Y1N0YWNrSWRdLnN0YWNrLmNsb3NlKGNhbGxiYWNrKTtcblx0XHRcdFx0d2VicnRjU3RhY2tzW3dlYnJ0Y1N0YWNrSWRdID0gbnVsbDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNvbnNvbGUuZGVidWcoYFJlYWNoU0RLOjp3ZWJydGNtbmdyOjpjbG9zZVdlYnJ0Yy0+ZGVjcmVtZW50ICByZWFsIHdlYnJ0Y1N0YWNrOiR7d2VicnRjU3RhY2tJZH0gbmV3IGlzUHVibGlzaGVkIGNvdW50ID0ke3dlYnJ0Y1N0YWNrc1t3ZWJydGNTdGFja0lkXS5pc1B1Ymxpc2hlZH0gbmV3IGlzU3Vic2NyaWJlZCBjb3VudCA9JHt3ZWJydGNTdGFja3Nbd2VicnRjU3RhY2tJZF0uaXNTdWJzY3JpYmVkfWApO1xuXHRcdFx0XHRpZiAoY2FsbGJhY2sgJiYgdHlwZW9mIGNhbGxiYWNrID09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRjYWxsYmFjaygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmIChjYWxsYmFjayAmJiB0eXBlb2YgY2FsbGJhY2sgPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRjYWxsYmFjaygpO1xuXHRcdFx0fVxuXHRcdFx0Y29uc29sZS53YXJuKCdSZWFjaFNESzo6d2VicnRjbW5ncjo6Y2xvc2VXZWJydGMgY2Fubm90IGZvdW5kIHJlYWwgc3RhY2snKTtcblx0XHR9XG5cblx0XHRpZiAodmlydHVhbFdlYnJ0Y1N0YWNrc1tpZF0ubG9jYWxWaWQpIHtcblx0XHRcdGxvY2Fsc3RyZWFtLmNsb3NlKCk7XG5cdFx0XHRkZXRhY2hNZWRpYVN0cmVhbSh2aXJ0dWFsV2VicnRjU3RhY2tzW2lkXS5sb2NhbFZpZCk7XG5cdFx0fVxuXHRcdGlmICh2aXJ0dWFsV2VicnRjU3RhY2tzW2lkXS5yZW1vdGVWaWQpIHsgZGV0YWNoTWVkaWFTdHJlYW0odmlydHVhbFdlYnJ0Y1N0YWNrc1tpZF0ucmVtb3RlVmlkKTt9XG5cblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDbGVhcnMgYSBzcGVjaWZpY2FsIFdlYlJUQyBzdGFjayBieSBzZXR0aW5nIGl0IHRvIG51bGwuXG5cdCAqIEBwYXJhbSB3ZWJydGNTdGFja0lkIC0gVGhlIFdlYlJUQyBzdGFjayBJRCB0byBjbGVhclxuXHQgKi9cblx0ZnVuY3Rpb24gX2NsZWFyV2VicnRjU3RhY2tzKHdlYnJ0Y1N0YWNrSWQpIHtcblx0XHRjb25zb2xlLmRlYnVnKGBSZWFjaFNESzo6d2VicnRjbW5ncjo6Y2xlYXJXZWJydGNTdGFja3MgaWQ9JHt3ZWJydGNTdGFja0lkfWApO1xuXHRcdGlmICh3ZWJydGNTdGFja0lkICYmIHdlYnJ0Y1N0YWNrcyAmJiB3ZWJydGNTdGFja3Nbd2VicnRjU3RhY2tJZF0pIHtcblx0XHRcdHdlYnJ0Y1N0YWNrc1t3ZWJydGNTdGFja0lkXSA9IG51bGw7XG5cdFx0fVxuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0LyoqXG5cdCAqIEF1ZGlvIG11dGUgdGhlIHdlYnJ0YyBwZWVyY29ubmVjdGlvblxuXHQgKiBAcGFyYW0gdmlydHVhbFdlYnJ0Y1N0YWNrSWQgLSBUaGUgV2ViUlRDIHN0YWNrIElEIHRvIG11dGVcblx0ICovXG5cdGZ1bmN0aW9uIF9tdXRlQXVkaW9XZWJydGNTdGFjayh2aXJ0dWFsV2VicnRjU3RhY2tJZCkge1xuXHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OndlYnJ0Y21uZ3I6Om11dGVBdWRpb1dlYnJ0Y1N0YWNrKSB2aXJ0dWFsV2VicnRjU3RhY2tJZD0ke3ZpcnR1YWxXZWJydGNTdGFja0lkfWApO1xuXG5cdFx0aWYgKHZpcnR1YWxXZWJydGNTdGFja3MgJiYgdmlydHVhbFdlYnJ0Y1N0YWNrc1t2aXJ0dWFsV2VicnRjU3RhY2tJZF0gJiYgdmlydHVhbFdlYnJ0Y1N0YWNrc1t2aXJ0dWFsV2VicnRjU3RhY2tJZF0ud2ViUnRjU3RhY2tJZCkge1xuXHRcdFx0Y29uc3Qgd2ViUnRjU3RhY2tJZCA9IHZpcnR1YWxXZWJydGNTdGFja3NbdmlydHVhbFdlYnJ0Y1N0YWNrSWRdLndlYlJ0Y1N0YWNrSWQ7XG5cdFx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjp3ZWJydGNtbmdyOjptdXRlQXVkaW9XZWJydGNTdGFjaykgdmlydHVhbFdlYnJ0Y1N0YWNrSWQ9JHt2aXJ0dWFsV2VicnRjU3RhY2tJZH0gd2ViUnRjU3RhY2tJZD0ke3dlYlJ0Y1N0YWNrSWR9YCk7XG5cdFx0XHRpZiAod2VicnRjU3RhY2tzICYmIHdlYnJ0Y1N0YWNrc1t3ZWJSdGNTdGFja0lkXSAmJiB3ZWJydGNTdGFja3Nbd2ViUnRjU3RhY2tJZF0uc3RhY2spIHtcblx0XHRcdFx0d2VicnRjU3RhY2tzW3dlYlJ0Y1N0YWNrSWRdLnN0YWNrLm11dGVBdWRpbygpO1xuXHRcdFx0fSAgZWxzZSB7XG5cdFx0XHRcdGNvbnNvbGUud2FybihgKFJlYWNoU0RLOjp3ZWJydGNtbmdyOjptdXRlQXVkaW9XZWJydGNTdGFjaykgd2VicnRjU3RhY2s9JHt3ZWJSdGNTdGFja0lkfSBub3QgZm91bmRgKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc29sZS53YXJuKGAoUmVhY2hTREs6OndlYnJ0Y21uZ3I6Om11dGVBdWRpb1dlYnJ0Y1N0YWNrKSB2aXJ0dWFsV2VicnRjU3RhY2tJZD0ke3ZpcnR1YWxXZWJydGNTdGFja0lkfSBub3QgZm91bmRgKTtcblx0XHR9XG5cblx0fVxuXG5cdC8qKlxuXHQgKiBBdWRpbyB1bm11dGUgdGhlIHdlYnJ0YyBwZWVyY29ubmVjdGlvblxuXHQgKiBAcGFyYW0gdmlydHVhbFdlYnJ0Y1N0YWNrSWQgLSBUaGUgV2ViUlRDIHN0YWNrIElEIHRvIHVubXV0ZVxuXHQgKi9cblx0ZnVuY3Rpb24gIF91bm11dGVBdWRpb1dlYnJ0Y1N0YWNrICh2aXJ0dWFsV2VicnRjU3RhY2tJZCkge1xuXHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OndlYnJ0Y21uZ3I6Ol91bm11dGVBdWRpb1dlYnJ0Y1N0YWNrKSB2aXJ0dWFsV2VicnRjU3RhY2tJZD0ke3ZpcnR1YWxXZWJydGNTdGFja0lkfWApO1xuXG5cdFx0aWYgKHZpcnR1YWxXZWJydGNTdGFja3MgJiYgdmlydHVhbFdlYnJ0Y1N0YWNrc1t2aXJ0dWFsV2VicnRjU3RhY2tJZF0gJiYgdmlydHVhbFdlYnJ0Y1N0YWNrc1t2aXJ0dWFsV2VicnRjU3RhY2tJZF0ud2ViUnRjU3RhY2tJZCkge1xuXHRcdFx0Y29uc3Qgd2ViUnRjU3RhY2tJZCA9IHZpcnR1YWxXZWJydGNTdGFja3NbdmlydHVhbFdlYnJ0Y1N0YWNrSWRdLndlYlJ0Y1N0YWNrSWQ7XG5cdFx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjp3ZWJydGNtbmdyOjpfdW5tdXRlQXVkaW9XZWJydGNTdGFjaykgdmlydHVhbFdlYnJ0Y1N0YWNrSWQ9JHt2aXJ0dWFsV2VicnRjU3RhY2tJZH0sd2ViUnRjU3RhY2tJZD0ke3dlYlJ0Y1N0YWNrSWR9YCk7XG5cdFx0XHRpZiAod2VicnRjU3RhY2tzICYmIHdlYnJ0Y1N0YWNrc1t3ZWJSdGNTdGFja0lkXSAmJiB3ZWJydGNTdGFja3Nbd2ViUnRjU3RhY2tJZF0uc3RhY2spIHtcblx0XHRcdFx0d2VicnRjU3RhY2tzW3dlYlJ0Y1N0YWNrSWRdLnN0YWNrLnVubXV0ZUF1ZGlvKCk7XG5cdFx0XHR9ICBlbHNlIHtcblx0XHRcdFx0Y29uc29sZS53YXJuKGAoUmVhY2hTREs6OndlYnJ0Y21uZ3I6Ol91bm11dGVBdWRpb1dlYnJ0Y1N0YWNrKSB3ZWJydGNTdGFjaz0ke3dlYlJ0Y1N0YWNrSWR9IG5vdCBmb3VuZGApO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zb2xlLndhcm4oYChSZWFjaFNESzo6d2VicnRjbW5ncjo6X3VubXV0ZUF1ZGlvV2VicnRjU3RhY2spIHZpcnR1YWxXZWJydGNTdGFja0lkPSR7dmlydHVhbFdlYnJ0Y1N0YWNrSWR9IG5vdCBmb3VuZGApO1xuXHRcdH1cblxuXHR9XG5cblxuXHQvKipcblx0ICogVmlkZW8gbXV0ZSB0aGUgd2VicnRjIHBlZXJjb25uZWN0aW9uXG5cdCAqIEBwYXJhbSB2aXJ0dWFsV2VicnRjU3RhY2tJZCAtIFRoZSBXZWJSVEMgc3RhY2sgSUQgdG8gbXV0ZVxuXHQgKi9cblx0ZnVuY3Rpb24gX211dGVWaWRlb1dlYnJ0Y1N0YWNrKHZpcnR1YWxXZWJydGNTdGFja0lkKSB7XG5cdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6d2VicnRjbW5ncjo6bXV0ZUF1ZGlvV2VicnRjU3RhY2spIHZpcnR1YWxXZWJydGNTdGFja0lkPSR7dmlydHVhbFdlYnJ0Y1N0YWNrSWR9YCk7XG5cblx0XHRpZiAodmlydHVhbFdlYnJ0Y1N0YWNrcyAmJiB2aXJ0dWFsV2VicnRjU3RhY2tzW3ZpcnR1YWxXZWJydGNTdGFja0lkXSAmJiB2aXJ0dWFsV2VicnRjU3RhY2tzW3ZpcnR1YWxXZWJydGNTdGFja0lkXS53ZWJSdGNTdGFja0lkKSB7XG5cdFx0XHRjb25zdCB3ZWJSdGNTdGFja0lkID0gdmlydHVhbFdlYnJ0Y1N0YWNrc1t2aXJ0dWFsV2VicnRjU3RhY2tJZF0ud2ViUnRjU3RhY2tJZDtcblx0XHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OndlYnJ0Y21uZ3I6Om11dGVBdWRpb1dlYnJ0Y1N0YWNrKSB2aXJ0dWFsV2VicnRjU3RhY2tJZD0ke3ZpcnR1YWxXZWJydGNTdGFja0lkfSB3ZWJSdGNTdGFja0lkPSR7d2ViUnRjU3RhY2tJZH1gKTtcblx0XHRcdGlmICh3ZWJydGNTdGFja3MgJiYgd2VicnRjU3RhY2tzW3dlYlJ0Y1N0YWNrSWRdICYmIHdlYnJ0Y1N0YWNrc1t3ZWJSdGNTdGFja0lkXS5zdGFjaykge1xuXHRcdFx0XHR3ZWJydGNTdGFja3Nbd2ViUnRjU3RhY2tJZF0uc3RhY2subXV0ZVZpZGVvKCk7XG5cdFx0XHR9ICBlbHNlIHtcblx0XHRcdFx0Y29uc29sZS53YXJuKGAoUmVhY2hTREs6OndlYnJ0Y21uZ3I6Om11dGVBdWRpb1dlYnJ0Y1N0YWNrKSB3ZWJydGNTdGFjaz0ke3dlYlJ0Y1N0YWNrSWR9IG5vdCBmb3VuZGApO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zb2xlLndhcm4oYChSZWFjaFNESzo6d2VicnRjbW5ncjo6bXV0ZUF1ZGlvV2VicnRjU3RhY2spIHZpcnR1YWxXZWJydGNTdGFja0lkPSR7dmlydHVhbFdlYnJ0Y1N0YWNrSWR9IG5vdCBmb3VuZGApO1xuXHRcdH1cblxuXG5cdH1cblxuXHQvKipcblx0ICogVmlkZW8gdW5tdXRlIHRoZSB3ZWJydGMgcGVlcmNvbm5lY3Rpb25cblx0ICogQHBhcmFtIHZpcnR1YWxXZWJydGNTdGFja0lkIC0gVGhlIFdlYlJUQyBzdGFjayBJRCB0byB1bm11dGVcblx0ICovXG5cdGZ1bmN0aW9uICBfdW5tdXRlVmlkZW9XZWJydGNTdGFjayAodmlydHVhbFdlYnJ0Y1N0YWNrSWQpIHtcblx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjp3ZWJydGNtbmdyOjpfdW5tdXRlQXVkaW9XZWJydGNTdGFjaykgdmlydHVhbFdlYnJ0Y1N0YWNrSWQ9JHt2aXJ0dWFsV2VicnRjU3RhY2tJZH1gKTtcblxuXHRcdGlmICh2aXJ0dWFsV2VicnRjU3RhY2tzICYmIHZpcnR1YWxXZWJydGNTdGFja3NbdmlydHVhbFdlYnJ0Y1N0YWNrSWRdICYmIHZpcnR1YWxXZWJydGNTdGFja3NbdmlydHVhbFdlYnJ0Y1N0YWNrSWRdLndlYlJ0Y1N0YWNrSWQpIHtcblx0XHRcdGNvbnN0IHdlYlJ0Y1N0YWNrSWQgPSB2aXJ0dWFsV2VicnRjU3RhY2tzW3ZpcnR1YWxXZWJydGNTdGFja0lkXS53ZWJSdGNTdGFja0lkO1xuXHRcdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6d2VicnRjbW5ncjo6X3VubXV0ZUF1ZGlvV2VicnRjU3RhY2spIHZpcnR1YWxXZWJydGNTdGFja0lkPSR7dmlydHVhbFdlYnJ0Y1N0YWNrSWR9LCB3ZWJSdGNTdGFja0lkPSR7d2ViUnRjU3RhY2tJZH1gKTtcblx0XHRcdGlmICh3ZWJydGNTdGFja3MgJiYgd2VicnRjU3RhY2tzW3dlYlJ0Y1N0YWNrSWRdICYmIHdlYnJ0Y1N0YWNrc1t3ZWJSdGNTdGFja0lkXS5zdGFjaykge1xuXHRcdFx0XHR3ZWJydGNTdGFja3Nbd2ViUnRjU3RhY2tJZF0uc3RhY2sudW5tdXRlVmlkZW8oKTtcblx0XHRcdH0gIGVsc2Uge1xuXHRcdFx0XHRjb25zb2xlLndhcm4oYChSZWFjaFNESzo6d2VicnRjbW5ncjo6X3VubXV0ZUF1ZGlvV2VicnRjU3RhY2spIHdlYnJ0Y1N0YWNrPSR7d2ViUnRjU3RhY2tJZH0gbm90IGZvdW5kYCk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGNvbnNvbGUud2FybihgKFJlYWNoU0RLOjp3ZWJydGNtbmdyOjpfdW5tdXRlQXVkaW9XZWJydGNTdGFjaykgdmlydHVhbFdlYnJ0Y1N0YWNrSWQ9JHt2aXJ0dWFsV2VicnRjU3RhY2tJZH0gbm90IGZvdW5kYCk7XG5cdFx0fVxuXG5cdH1cblx0LyoqXG5cdCAqIFNldHRpbmcgbXlzZWxmIHdpdGggd2VicnRjIG1hbmFnZXIgb2JqZWN0XG5cdCAqIEBwYXJhbSB3ZWJydGNtbmdyIC0gVGhlIFdlYlJUQyBtYW5hZ2VyIG9iamVjdFxuXHQgKi9cblx0ZnVuY3Rpb24gX3NldFdlYnJ0Y01hbmdlcih3ZWJydGNtbmdyKXtcblx0XHRtd2VicnRjbW5ncl9yZWZlcmVuY2U9IHdlYnJ0Y21uZ3I7XG5cdH1cblxuXHRyZXR1cm4ge1xuXG5cdFx0LyoqXG5cdFx0ICogQ3JlYXRlcyBhIFdlYlJUQyBvYmplY3Rcblx0XHQgKiBAcGFyYW0gcF9WaWQgLSB0aGUgdmlkZW8gY29udGFpbmVyIGxpbmtlZCB0byB0aGUgcGVlcmNvbm5lY3Rpb25cblx0XHQgKiBAcGFyYW0gcF9yZW1vdGVBcHBJbnN0SWQgLSB0aGUgcmVtb3RlIGFwcGxpY2F0aW9uIGluc3RhbmNlIGlkZW50aWZpZXJcblx0XHQgKiBAcGFyYW0gcF9vbkNsb3NlQ2IgLSBBIGNhbGxiYWNrIHRvIHRyaWdnZXIgd2hlbiB0aGUgY29ubmVjdGlvbiBpcyBjbG9zZWRcblx0XHQgKiBAcGFyYW0gcF9pc1B1Ymxpc2ggLSB0cnVlIGlmIGl0J3MgYSBwZWVyY29ubmVjdGlvbiByZWxhdGVkIHRvIGEgcHVibGlzaFN0cmVhbSwgZmFsc2UgaWYgaXQncyByZWxhdGF0ZWQgdG8gYSBzdWJzY3JpYmVcblx0XHQgKiBAcGFyYW0gcF9hY3Rpb25UeXBlIC0gVGhlIGFjdGlvbiB0eXBlIChhdWRpbywgdmlkZW8sIGF1ZGlvLXZpZGVvKVxuXHRcdCAqIEBwYXJhbSBwX3BlZXJjb0lkIC0gVGhlIFBlZXJDb25uZWN0aW9uIElkIGluIHRoZSB3ZWJydGMgbm9kZVxuXHRcdCAqL1xuXHRcdGNyZWF0ZVdlYnJ0YzogKHBfVmlkLCBwX3JlbW90ZUFwcEluc3RJZCwgcF9vbkNsb3NlQ2IsIHBfaXNQdWJsaXNoLCBwX2FjdGlvblR5cGUsIHBfcGVlcmNvSWQscF9wZWVyY29SZWYsIHBfbXV0ZWRBdWRpbywgcF9tdXRlVmlkZW8sIHBfZ2V0U3RyZWFtQ2IpID0+IHtcblx0XHRcdHJldHVybiBfY3JlYXRlV2VicnRjLmJpbmQodGhpcykocF9WaWQsIHBfcmVtb3RlQXBwSW5zdElkLCBwX29uQ2xvc2VDYiwgcF9pc1B1Ymxpc2gsIHBfYWN0aW9uVHlwZSwgcF9wZWVyY29JZCwgcF9wZWVyY29SZWYscF9tdXRlZEF1ZGlvLCBwX211dGVWaWRlbywgcF9nZXRTdHJlYW1DYik7XG5cdFx0fSxcblxuXHRcdC8qKlxuXHRcdCAqIENsb3NlIFdlYlJUQyBmZWF0dXJlcyA6IGRldGFjaCBtZWRpYSBzdHJlYW1zIGFuZCB1bnB1Ymxpc2ggc3RhY2tzLlxuXHRcdCAqIEBwYXJhbSBpZCAtXG5cdFx0ICogQHBhcmFtIHBfaXNVblB1Ymxpc2hcblx0XHQgKiBAcGFyYW0gY2FsbGJhY2sgLVxuXHRcdCAqL1xuXHRcdGNsb3NlV2VicnRjOiBfY2xvc2VXZWJydGMsXG5cblx0XHQvKipcblx0XHQgKiBDbGVhcnMgYSBzcGVjaWZpY2FsIFdlYlJUQyBzdGFjayBieSBzZXR0aW5nIGl0IHRvIG51bGwuXG5cdFx0ICogQHBhcmFtIHdlYnJ0Y1N0YWNrSWQgLSBUaGUgV2ViUlRDIHN0YWNrIElEIHRvIGNsZWFyXG5cdFx0ICovXG5cdFx0Y2xlYXJXZWJydGNTdGFja3M6IF9jbGVhcldlYnJ0Y1N0YWNrcyxcblx0XHQvKipcblx0XHQgKiBhdWRpbyBtdXRlIHRoZSB3ZWJydGMgcGVlcmNvbm5lY3Rpb25cblx0XHQgKiBAcGFyYW0gdmlydHVhbFdlYnJ0Y1N0YWNrSWQgLSBUaGUgV2ViUlRDIHN0YWNrIElEIHRvIG11dGVcblx0XHQgKi9cblx0XHRtdXRlQXVkaW9XZWJydGNTdGFjazogX211dGVBdWRpb1dlYnJ0Y1N0YWNrLFxuXHRcdC8qKlxuXHRcdCAqICBhdWRpbyB1bm11dGUgdGhlIHdlYnJ0YyBwZWVyY29ubmVjdGlvblxuXHRcdCAqIEBwYXJhbSB2aXJ0dWFsV2VicnRjU3RhY2tJZCAtIFRoZSBXZWJSVEMgc3RhY2sgSUQgdG8gdW5tdXRlXG5cdFx0ICovXG5cdFx0dW5tdXRlQXVkaW9XZWJydGNTdGFjazogX3VubXV0ZUF1ZGlvV2VicnRjU3RhY2ssXG5cdFx0LyoqXG5cdFx0ICogdmlkZW8gbXV0ZSB0aGUgd2VicnRjIHBlZXJjb25uZWN0aW9uXG5cdFx0ICogQHBhcmFtIHZpcnR1YWxXZWJydGNTdGFja0lkIC0gVGhlIFdlYlJUQyBzdGFjayBJRCB0byBtdXRlXG5cdFx0ICovXG5cdFx0bXV0ZVZpZGVvV2VicnRjU3RhY2s6IF9tdXRlVmlkZW9XZWJydGNTdGFjayxcblx0XHQvKipcblx0XHQgKiB2aWRlbyB1bm11dGUgdGhlIHdlYnJ0YyBwZWVyY29ubmVjdGlvblxuXHRcdCAqIEBwYXJhbSB2aXJ0dWFsV2VicnRjU3RhY2tJZCAtIFRoZSBXZWJSVEMgc3RhY2sgSUQgdG8gdW5tdXRlXG5cdFx0ICovXG5cdFx0dW5tdXRlVmlkZW9XZWJydGNTdGFjazogX3VubXV0ZVZpZGVvV2VicnRjU3RhY2ssXG5cblx0XHRzZXRXZWJydGNNYW5nZXIgOiBfc2V0V2VicnRjTWFuZ2VyXG5cblx0fTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHdlYnJ0Y21uZ3I7XG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvd2VicnRjbW5nci5qc1xuICoqLyIsIi8qKlxuICogQGZpbGUgd2VicnRjLmpzIC0gSlMgZmlsZSB1c2VkIGZvciBXZWJSVEMgYXNwZWN0c1xuICogQGF1dGhvciBXZWJjb21cbiAqL1xuXG4vKmVzbGludCBjb21wbGV4aXR5OjEsIG1heC1zdGF0ZW1lbnRzOiAxLCBtYXgtbGVuOiAxLCBtYXgtcGFyYW1zOiAxLCByZXF1aXJlLWpzZG9jOiAxKi9cblxuaW1wb3J0IGFjdGlvbnMgZnJvbSAnLi9hY3Rpb25zJztcbmltcG9ydCBsb2NhbHN0cmVhbSBmcm9tICcuL2xvY2Fsc3RyZWFtJztcbmltcG9ydCB2YXJzIGZyb20gJy4vYWN0aW9ucyc7XG5cbi8qKlxuICogSUNFIGNvbm5lY3Rpb24gc3RhdHVzIDogZGlzY29ubmVjdGVkXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmNvbnN0IElDRV9DT05ORUNUSU9OX1NUQVRFX0RJU0NPTk5FQ1RFRCA9ICdkaXNjb25uZWN0ZWQnO1xuXG4vKipcbiAqIElDRSBjb25uZWN0aW9uIHN0YXR1cyA6IGNvbm5lY3RlZFxuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5jb25zdCBJQ0VfQ09OTkVDVElPTl9TVEFURV9DT05ORUNURUQ9ICdjb25uZWN0ZWQnO1xuXG4vKipcbiAqIElDRSBjb25uZWN0aW9uIHN0YXR1cyA6IGNvbXBsZXRlZFxuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5jb25zdCBJQ0VfQ09OTkVDVElPTl9TVEFURV9DT01QTEVURUQ9ICdjb21wbGV0ZWQnO1xuXG4vKipcbiAqIElDRSBjb25uZWN0aW9uIHN0YXR1cyA6IGNoZWNraW5nXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmNvbnN0IElDRV9DT05ORUNUSU9OX1NUQVRFX0NIRUNLSU5HPSAnY2hlY2tpbmcnO1xuXG4vKipcbiAqIElDRSBjb25uZWN0aW9uIHN0YXR1cyA6IGNsb3NlZFxuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5jb25zdCBJQ0VfQ09OTkVDVElPTl9TVEFURV9DTE9TRUQ9ICdjbG9zZWQnO1xuXG4vKipcbiAqIElDRSBjb25uZWN0aW9uIHN0YXR1cyA6IGZhaWxlZFxuICogQGNvbnN0YW50XG4gKiBAdHlwZSB7c3RyaW5nfVxuICovXG5jb25zdCBJQ0VfQ09OTkVDVElPTl9TVEFURV9GQUlMRUQ9ICdmYWlsZWQnO1xuXG4vKipcbiAqIElDRSBjb25uZWN0aW9uIHN0YXR1cyA6IGFub3RoZXIgc3RhdHVzXG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmNvbnN0IElDRV9DT05ORUNUSU9OX1NUQVRFX09USEVSPSAnb3RoZXInO1xuXG5cbi8qKlxuICogVGhlIGRlZmF1bHQgSUNFIGNvbmZpZ3VyYXRpb24gZm9yIFRVUk4gYW5kIFNUVU4gc2VydmVycyB0byB1c2UgZm9yIFdlYlJUQyBjb21tdW5pY2F0aW9ueFxuICogTkIgOiB0aGVzZSBjb25maWd1cmF0aW9uIHdpbGwgYmUgb3ZlcndyaXRlbiBieSB0aGUgY29uZmlndXJhdGlvbiBvbiB0aGUgV2ViY29tIHNlcnZlciBpZiBwcmVzZW50XG4gKiBAY29uc3RhbnRcbiAqIEB0eXBlIHtqc29ufVxuICovXG5cbmNvbnN0IERFRkFVTFRfSUNFX0NPTkZJRyA9IHtcblx0aWNlU2VydmVyczogW1xuXHRcdHtcblx0XHRcdHVybDogJ3R1cm5zOnR1cm4xLndlYmNvbS5vcmFuZ2UuY29tOjQ0MycsXG5cdFx0XHR1c2VybmFtZTogJ2FkbWluJyxcblx0XHRcdGNyZWRlbnRpYWw6ICd3ZWJjb20xMjM0J1xuXHRcdH0sXG5cdFx0e1xuXHRcdFx0dXJsOiAndHVybjp0dXJuMi53ZWJjb20ub3JhbmdlLmNvbTo0NDMnLFxuXHRcdFx0dXNlcm5hbWU6ICdhZG1pbicsXG5cdFx0XHRjcmVkZW50aWFsOiAnd2ViY29tMTIzNCdcblx0XHR9LFxuXHRcdHtcblx0XHRcdHVybDogJ3R1cm5zOnR1cm4zLndlYmNvbS5vcmFuZ2UuY29tOjQ0MycsXG5cdFx0XHR1c2VybmFtZTogJ2FkbWluJyxcblx0XHRcdGNyZWRlbnRpYWw6ICd3ZWJjb20xMjM0J1xuXHRcdH1cblx0XVxufTtcblxuXG4vKipcbiAqIEBjb25zdHJ1Y3RvclxuICogQGRlc2NyaXB0aW9uIFdlYlJUQyBjb25uZWN0aW9uIG9iamVjdC4gTWFuYWdlcyBhIFdlYlJUQyBjb25uZWN0aW9uLCBpLmUuIG9uZSBwZWVyY29ubmVjdGlvblxuICogQHBhcmFtIHBfd2VicnRjbW5nciAtIFJlZmVyZW5jZSB0byBXZWJSVENNYW5hZ2VyXG4gKiBAcGFyYW0gcF9pc1B1Ymxpc2ggLSBGbGFnIGluZGljYXRpbmcgaWYgdGhlcmUgaXMgYSBwbHVibGlzaCBhY3Rpb25cbiAqIEBwYXJhbSBwX2xvY2FsRGF0YVJlZiAtIFRoZSBsb2NhbCBkYXRhIHJlZlxuICogQHBhcmFtIHBfcmVtb3RlRGF0YVJlZiAtIFRoZSByZW1vdGUgZGF0YSByZWZcbiAqIEBwYXJhbSBwX3dlYnJ0Y1N0YWNrSWQgLSBUaGUgc3RhY2sgSUQgaW4gdXNlXG4gKiBAcGFyYW0gcF9hY3Rpb25UeXBlIC1cbiAqIEBwYXJhbSBwX211dGVBdWRpbyAtIG9wdGlvbmFsIC0gaWYgdHJ1ZSBwZWVyY29ubmVjdGlvbiB3aWxsIGJlIGNyZWF0ZWQgd2l0aCBhdWRpbyBtdXRlZFxuICogQHBhcmFtIHBfbXV0ZVZpZGVvIC0gb3B0aW9uYWwgLSBpZiB0cnVlIHBlZXJjb25uZWN0aW9uIHdpbGwgYmUgY3JlYXRlZCB3aXRoIHZpZGVvIG11dGVkXG5cbiAqL1xuY29uc3Qgd2VicnRjID0gZnVuY3Rpb24gKHBfd2VicnRjbW5nciwgcF9pc1B1Ymxpc2gsIHBfbG9jYWxEYXRhUmVmLCBwX3JlbW90ZURhdGFSZWYsIHBfd2VicnRjU3RhY2tJZCwgcF9hY3Rpb25UeXBlLCBwX211dGVBdWRpbywgcF9tdXRlVmlkZW8pIHtcblxuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIFdlYlJUQyBtYW5hZ2VyIG9iamVjdC4gVXNlZnVsIHRvIGNsZWFyIHdlYnJ0YyBzdGFja1xuXHQgKi9cblx0Y29uc3Qgd2VicnRjbW5nciA9IHBfd2VicnRjbW5ncjtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBUaGUgV2ViUlRDIHN0YWNrIGlkZW50aWZpZXIsIGhlcmUgdGhlIGN1cnJlbnQgdGltZXN0YW1wXG5cdCAqL1xuXHRjb25zdCBzdGFja0lkID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gSWYgdGhlcmUgaXMgYSBwdWJsaXNoIGFjdGlvbiBvciBub3Rcblx0ICovXG5cdGNvbnN0IGlzUHVibGlzaCA9IHBfaXNQdWJsaXNoO1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIFRoZSBwZWVyIGNvbm5lY3Rpb25cblx0ICovXG5cdGxldCBwYyA9IG51bGw7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gVGhlIGxvY2FsIGRhdGEgcmVmXG5cdCAqL1xuXHRjb25zdCBsb2NhbERhdGFSZWYgPSBwX2xvY2FsRGF0YVJlZjtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBUaGUgcmVtdG9lIGRhdGEgcmVmXG5cdCAqL1xuXHRjb25zdCByZW1vdGVEYXRhUmVmID0gcF9yZW1vdGVEYXRhUmVmO1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIEEgY2FsbGJhY2sgdG8gdHJpZ2dlciB3aGVyZSBhIGxpc3Qgb2YgSUNFIGNhbmRpZGF0ZXMgaXMgcHJvdmlkZWRcblx0ICovXG5cdGxldCBpY2VDYW5kaWRhdGVzTGlzdENiID0gbnVsbDtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBBIGNhbGxiYWNrIHRyaWdnZXJlZCB3aGVuIGEgU0RQIG9mZmVyIGhhcyBiZWVuIHJlY2VpdmVkXG5cdCAqL1xuXHRsZXQgc2RwT2ZmZXJDYiA9IG51bGw7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gQSBjYWxsYmFjayB0cmlnZ2VyZWQgd2hlbiBhIFNEUCBhbnN3ZXIgaGFzIGJlZW4gcmVjZWl2ZWRcblx0ICovXG5cdGxldCBzZHBBbnN3ZXJDYiA9IG51bGw7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gQSBjYWxsYmFjayB0cmlnZ2VyZWQgb24gYSByZW1vdGUgZGF0YXJlZiBldmVudFxuXHQgKi9cblx0bGV0IHJlbW90ZWRhdGFyZWZDYiA9IG51bGw7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gQSBjYWxsYmFjayB0cmlnZ2VyZWQgd2hlbiB0aGUgY29ubmVjdGlvbiBpcyBjbG9zaW5nXG5cdCAqL1xuXHRsZXQgb25DbG9zZUNiID0gbnVsbDtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBUaGUgV2ViUlRDIHN0YWNrIElEXG5cdCAqL1xuXHRjb25zdCB3ZWJydGNTdGFja0lkID0gcF93ZWJydGNTdGFja0lkO1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIFRoZSBhY3Rpb24gdHlwZSB0byBwcm9jZXNzXG5cdCAqL1xuXHRjb25zdCBhY3Rpb25UeXBlID0gcF9hY3Rpb25UeXBlO1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIFRoZSBjb25maWd1cmF0aW9uXG5cdCAqL1xuXHRsZXQgY29uZmlnID0gbnVsbDtcblxuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIEEgcGVlciBjb25uZWN0aW9uIG9iamVjdCwgZm9yIGNyb3NzIGJyb3dzZXJzIGNvbXBhdGliaWxpdGllc1xuXHQgKi9cblx0bGV0IG15UGVlckNvbm5lY3Rpb24gPSBudWxsO1xuXHQvL3ZhciBteUNyZWF0ZU9iamVjdFVSTCA9IG51bGw7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gQW4gUlRDIHNlc3Npb24gZGVzY3JpcHRpb24sIGZvciBjcm9zcyBicm93c2VycyBjb21wYXRpYmlsaXRpZXNcblx0ICovXG5cdGxldCBteVJUQ1Nlc3Npb25EZXNjcmlwdGlvbiA9IG51bGw7XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gQW4gUlRDIElDRSBjYW5kaWRhdGUsIGZvciBjcm9zcyBicm93c2VycyBjb21wYXRpYmlsaXRpZXNcblx0ICovXG5cdGxldCBteVJUQ0ljZUNhbmRpZGF0ZSA9IG51bGw7XG5cblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBBbiBhcnJheSBjb250YWluaW5nIGxvY2FsIHN0cmVhbXNcblx0ICovXG5cdGNvbnN0IGxvY2FsU3RyZWFtcyA9IFtdO1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIEFuIGFycmF5IGNvbnRhaW5pbmcgcmVtb3RlIHN0cmVhbXNcblx0ICovXG5cdGNvbnN0IHJlbW90ZVN0cmVhbXMgPSBbXTtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBBbiBhcnJheSBjb250YWluaW5nIHJlbW90ZSBzdHJlYW1zIENCXG5cdCAqL1xuXHRsZXQgcmVtb3RlU3RyZWFtc0NiID0gW107XG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gVGhlIHJlY2VpdmVkIHN0cmVhbVxuXHQgKi9cblx0bGV0IHJlY2VpdmVkU3RyZWFtID0gbnVsbDtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBUaGUgc2VudCBzdHJlYW1cblx0ICovXG5cdGxldCBzZW50U3RyZWFtID0gbnVsbDtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBGbGFnIGluZGljYXRpbmcgaWYgdGhlIGNvbm5lY3Rpb24gaXMgY2xvc2VkXG5cdCAqL1xuXHRsZXQgaXNDbG9zZWQgPSBmYWxzZTtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBGbGFnIGluZGljYXRpbmcgaWYgdGhlIGNsb3NlIHByb2Nlc3MgaXMgb24gZ29pbmdcblx0ICovXG5cdGxldCBjbG9zZUluUHJvZ3Jlc3MgPSBmYWxzZTtcblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiBUaGUgSUNFIGNvbm5lY3Rpb24gc3RhdGVcblx0ICovXG5cdGxldCBpY2VDb25uZWN0aW9uU3RhdGUgPSBudWxsO1xuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIEFub3RoZXIgY2FsbGJhY2sgdG8gdHJpZ2dlciB3aGVuIHRoZSBjb25uZWN0aW9uIHNob3VsZCBiZSBjbG9zZWRcblx0ICovXG5cdGxldCBvbkNsb3NlQ2IyID0gbnVsbDtcblxuXHRsZXQgaXNBdWRpb011dGUgPSBmYWxzZTtcblxuXHRsZXQgaXNWaWRlb011dGUgPSBmYWxzZTtcblxuXG5cdGNvbnNvbGUubG9nKCcoUmVhY2hTREs6OndlYnJ0Yzo6KXN0YWNrSWQ9JHtzdGFja0lkfSBpc1B1Ymxpc2g9JHtpc1B1Ymxpc2h9LGxvY2FsRGF0YVJlZj0ke2xvY2FsRGF0YVJlZn0scmVtb3RlRGF0YVJlZj0ke3JlbW90ZURhdGFSZWZ9KScpO1xuXG5cdC8qKlxuXHQgKiBAZGVzY3JpcHRpb24gQSBEYXRhZ3JhbSBUcmFuc3BvcnQgTGF5ZXIgU2VjdXJpdHkgKERUTFMpIGtleSBhZ3JlZW1lbnRcblx0ICovXG5cdGNvbnN0IER0bHNTcnRwS2V5QWdyZWVtZW50ID0ge1xuXHRcdER0bHNTcnRwS2V5QWdyZWVtZW50OiB0cnVlXG5cdH07XG5cblx0LyoqXG5cdCAqIEBkZXNjcmlwdGlvbiAtIFNvbWUgb3B0aW9uc1xuXHQgKi9cblx0Y29uc3Qgb3B0aW9uYWwgPSB7XG5cdFx0b3B0aW9uYWw6IFtEdGxzU3J0cEtleUFncmVlbWVudF1cblx0fTtcblxuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIFRoZSBwdWJsaXNoZXIgbWVkaWEgY29uc3RyYWludHMgYXMgYSBKU09OIGFycmF5XG5cdCAqL1xuXHRjb25zdCBwdWJsaXNoZXJNZWRpYUNvbnN0cmFpbnRzID0ge1xuXHRcdCdtYW5kYXRvcnknOiB7XG5cdFx0XHQnT2ZmZXJUb1JlY2VpdmVBdWRpbyc6IGZhbHNlLFxuXHRcdFx0J09mZmVyVG9SZWNlaXZlVmlkZW8nOiBmYWxzZVxuXHRcdH1cblx0fTtcblxuXHQvKipcblx0ICogQGRlc2NyaXB0aW9uIFRoZSBzdWJzY3JpYmVyIG1lZGlhIGNvbnN0cmFpbnRzIGFzIGEgSlNPTiBhcnJheVxuXHQgKi9cblx0Y29uc3Qgc3Vic2NyaWJlck1lZGlhQ29uc3RyYWludHMgPSB7XG5cdFx0J21hbmRhdG9yeSc6IHtcblx0XHRcdCdPZmZlclRvUmVjZWl2ZUF1ZGlvJzogdHJ1ZSxcblx0XHRcdCdPZmZlclRvUmVjZWl2ZVZpZGVvJzogdHJ1ZVxuXHRcdH1cblx0fTtcblxuXHQvKipcblx0ICogQ2FsbGJhY2sgdG8gdHJpZ2dlciB3aGVuIGFuIGVycm9yIG9jY3Vyc1xuXHQgKiBAcGFyYW0gZSAtIFRoZSBlcnJvclxuXHQgKi9cblx0ZnVuY3Rpb24gb25FcnJvcihlKSB7XG5cdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6d2VicnRjOjopc3RhY2tJZD0ke3N0YWNrSWR9ZXJyb3I9JHtlfWApO1xuXHRcdGNvbnNvbGUuZGlyKGUpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEdldHMgdGhlIElDRSBzZXJ2ZXJzIGNvbmZpZ3VyYXRpb25cblx0ICogQHBhcmFtIGNhbGxiYWNrT2sgLSBUaGUgY2FsbGJhY2sgdG8gdHJpZ2dlciB3aGVuIHRoZSBjb25maWcgcmV0cmlldmVtZW50IGlzIGRvbmVcblx0ICogQHBhcmFtIGNhbGxiYWNrS28gLSBUaGUgY2FsbGJhY2sgdG8gdHJpZ2dlciB3aGVuIGFuIGVycm9yIG9jY3Vyc1xuXHQgKi9cblx0ZnVuY3Rpb24gZ2V0SWNlU2VydmVyc0NvbmZpZ0Zyb21TZXJ2ZXIoY2FsbGJhY2tPaywgY2FsbGJhY2tLbykge1xuXHRcdGNvbnNvbGUubG9nKCdSZWFjaFNESzo6d2VicnRjOjpnZXRJY2VTZXJ2ZXJzQ29uZmlnRnJvbVNlcnZlcicpO1xuXHRcdGlmIChsb2NhbERhdGFSZWYpIHtcblx0XHRcdGxvY2FsRGF0YVJlZi5yb290KCkuY2hpbGQoJ2NvbmZpZycpLm9uY2UoJ3ZhbHVlJywgKHNuYXBzaG90KSA9PiB7XG5cdFx0XHRcdGNvbnN0IF9jb25maWcgPSBzbmFwc2hvdCA/IHNuYXBzaG90LnZhbCgpIDogbnVsbDtcblx0XHRcdFx0aWYgKF9jb25maWcpIHtcblx0XHRcdFx0XHRpZiAodHlwZW9mIGNhbGxiYWNrT2sgPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdFx0Y2FsbGJhY2tPayhfY29uZmlnKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSBpZiAodHlwZW9mIGNhbGxiYWNrS28gPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdGNhbGxiYWNrS28oKTtcblx0XHRcdFx0fVxuXHRcdFx0fSwgKGVycm9yKSA9PiB7XG5cdFx0XHRcdGlmICh0eXBlb2YgY2FsbGJhY2tLbyA9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2tLbyhlcnJvcik7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0gZWxzZSBpZiAodHlwZW9mIGNhbGxiYWNrS28gPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0Y2FsbGJhY2tLbygpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBTdGFydHMgdGhlIGxpc3RpbmcgdG8gYSByZW1vdGUgSUNFIGNhbmRpZGF0ZSBieSBlbmFibGluZyB0aGUgZGVkaWNhdGVkIGNhbGxiYWNrXG5cdCAqIGZvciB0aGUgXCJjaGlsZF9hZGRlZFwiIGV2ZW50IG9uIHRoZSBcImljZUNhbmRpZGF0ZXNMaXN0XCIgbm9kZSBpbiB0aGUgZGF0YWJhc2UuXG5cdCAqL1xuXHRmdW5jdGlvbiBzdGFydExpc3RlbmluZ1RvUmVtb3RlSWNlQ2FuZGlkYXRlKCkge1xuXHRcdHJlbW90ZURhdGFSZWYuY2hpbGQoJ2ljZUNhbmRpZGF0ZXNMaXN0Jykub24oJ2NoaWxkX2FkZGVkJywgaWNlQ2FuZGlkYXRlc0xpc3RDYik7XG5cdH1cblxuXHQvKipcblx0ICogU3RvcHMgdGhlIGxpc3RlbmluZyB0byByZW1vdGUgSUNFIGNhbmRpc2RhdGUgYnkgZGlzYWJsaW5nIHRoZSBkZWRpY2F0ZWQgY2FsbGJhY2tcblx0ICogZm9yIHRoZSBcImNoaWxkX2FkZGVkXCIgZXZlbnQgb24gdGhlIFwiaWNlQ2FuZGlkYXRlc0xpc3RcIiBub2RlIGluIHRoZSBkYXRhYmFzZS5cblx0ICovXG5cdGZ1bmN0aW9uIHN0b3BMaXN0ZW5pbmdUb1JlbW90ZUljZUNhbmRpZGF0ZSgpIHtcblx0XHRyZW1vdGVEYXRhUmVmLmNoaWxkKCdpY2VDYW5kaWRhdGVzTGlzdCcpLm9mZignY2hpbGRfYWRkZWQnLCBpY2VDYW5kaWRhdGVzTGlzdENiKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBFbmFibGUvRGlzYWJsZSB0cmFja3Ncblx0ICogQHBhcmFtIGVuYWJsZWQgdHJ1ZSB0byBlbmFibGUgdHJhY2tzXG5cdCAqIEBwYXJhbSB0cmFja3MgdGhlIHRyYWNrc1xuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0ZnVuY3Rpb24gX211dGVUcmFja3MoLypCb29sZWFuKi9lbmFibGVkLCAvKkFycmF5Ki90cmFja3MpIHtcblx0XHRpZih0cmFja3MpIHtcblx0XHRcdHRyYWNrcy5mb3JFYWNoKCh0cmFjaykgPT4ge1xuXHRcdFx0XHRpZih0cmFjaykge1xuXHRcdFx0XHRcdHRyYWNrLmVuYWJsZWQgPSBlbmFibGVkO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogTXV0ZS9Vbk11dGUgYXVkaW8gdHJhY2tzXG5cdCAqIEBwYXJhbSBtdXRlIHRydWUgdG8gbXV0ZSB0cmFja3Ncblx0ICogQHByaXZhdGVcblx0ICovXG5cdGZ1bmN0aW9uIF9tdXRlQXVkaW9UcmFja3MobXV0ZSkge1xuXHRcdGlzQXVkaW9NdXRlID0gbXV0ZTtcblx0XHRjb25zdCBzdHJlYW0gPSBpc1B1Ymxpc2ggJiYgc2VudFN0cmVhbSA/IHNlbnRTdHJlYW0gOiAoIWlzUHVibGlzaCAmJiByZWNlaXZlZFN0cmVhbSA/IHJlY2VpdmVkU3RyZWFtIDogbnVsbCk7XG5cdFx0aWYoc3RyZWFtKXtcblx0XHRcdF9tdXRlVHJhY2tzKCFpc0F1ZGlvTXV0ZSwgc3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBNdXRlIGF1ZGlvIHRyYWNrc1xuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0ZnVuY3Rpb24gX211dGVBdWRpbygpIHtcblx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjp3ZWJydGM6Ol9tdXRlQXVkaW8pc3RhY2tJZD0ke3N0YWNrSWR9YCk7XG5cdFx0X211dGVBdWRpb1RyYWNrcyh0cnVlKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBVbm11dGUgYXVkaW8gdHJhY2tzXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRmdW5jdGlvbiBfdW5tdXRlQXVkaW8oKSB7XG5cdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6d2VicnRjOjpfdW5tdXRlQXVkaW8pc3RhY2tJZD0ke3N0YWNrSWR9YCk7XG5cdFx0X211dGVBdWRpb1RyYWNrcyhmYWxzZSk7XG5cdH1cblxuXHQvKipcblx0ICogTXV0ZS9Vbk11dGUgdmlkZW8gdHJhY2tzXG5cdCAqIEBwYXJhbSBtdXRlIHRydWUgdG8gbXV0ZSB0cmFja3Ncblx0ICogQHByaXZhdGVcblx0ICovXG5cdGZ1bmN0aW9uIF9tdXRlVmlkZW9UcmFja3MobXV0ZSkge1xuXHRcdGlzVmlkZW9NdXRlID0gbXV0ZTtcblx0XHRjb25zdCBzdHJlYW0gPSBpc1B1Ymxpc2ggJiYgc2VudFN0cmVhbSA/IHNlbnRTdHJlYW0gOiAoIWlzUHVibGlzaCAmJiByZWNlaXZlZFN0cmVhbSA/IHJlY2VpdmVkU3RyZWFtIDogbnVsbCk7XG5cdFx0aWYoc3RyZWFtKXtcblx0XHRcdF9tdXRlVHJhY2tzKCFpc1ZpZGVvTXV0ZSwgc3RyZWFtLmdldFZpZGVvVHJhY2tzKCkpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBNdXRlIHZpZGVvIHRyYWNrc1xuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0ZnVuY3Rpb24gX211dGVWaWRlbygpIHtcblx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjp3ZWJydGM6Ol9tdXRlVmlkZW8pc3RhY2tJZD0ke3N0YWNrSWR9YCk7XG5cdFx0X211dGVWaWRlb1RyYWNrcyh0cnVlKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBVbm11dGUgdmlkZW8gdHJhY2tzXG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRmdW5jdGlvbiBfdW5tdXRlVmlkZW8oKSB7XG5cdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6d2VicnRjOjpfdW5tdXRlVmlkZW8pc3RhY2tJZD0ke3N0YWNrSWR9YCk7XG5cdFx0X211dGVWaWRlb1RyYWNrcyhmYWxzZSk7XG5cdH1cblxuXHQvKipcblx0ICogSW5pdGlhbGl6ZXMgdGhlIGxvY2FsIHN0cmVhbVxuXHQgKiBAcGFyYW0gY2FsbGJhY2sgLSBBIGNhbGxiYWNrIHRvIHRyaWdnZXIgd2hlbiB0aGUgaW5pdGlhbGlzYXRpb24gaXMgZG9uZVxuXHQgKi9cblx0ZnVuY3Rpb24gX2luaXRsb2NhbFN0cmVhbShjYWxsYmFjaykge1xuXHRcdC8vIGdldCBsb2NhbCB2aWRlbyBzdHJlYW0gYW5kIHJlbmRlcnMgdG8gbG9jYWxWaWRcblx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjp3ZWJydGM6Ol9pbml0bG9jYWxTdHJlYW0pc3RhY2tJZD0ke3N0YWNrSWR9IGdldCBsb2NhbCB2aWRlbyBzdHJlYW0gYW5kIHJlbmRlcnMgdG8gbG9jYWwgdmlkZW9gKTtcblx0XHRpZiAoYWN0aW9uVHlwZSkge1xuXHRcdFx0bGV0IGluaXRsb2NhbFN0cmVhbTtcblx0XHRcdGlmIChhY3Rpb25UeXBlID09PSB2YXJzLkFDVElPTl9UWVBFX1ZJREVPKSB7XG5cdFx0XHRcdGluaXRsb2NhbFN0cmVhbSA9ICgpID0+IHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnKFJlYWNoU0RLOjp3ZWJydGM6Ol9pbml0bG9jYWxTdHJlYW0paW5pdGxvY2FsU3RyZWFtX3ZpZGVvJyk7XG5cdFx0XHRcdFx0aWYgKGxvY2Fsc3RyZWFtLmdldFZpZGVvU3RyZWFtKCkgJiYgbG9jYWxzdHJlYW0uZ2V0VmlkZW9TdHJlYW0oKS5jbG9uZSAmJiB0eXBlb2YgbG9jYWxzdHJlYW0uZ2V0VmlkZW9TdHJlYW0oKS5jbG9uZSA9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0XHRzZW50U3RyZWFtID0gbG9jYWxzdHJlYW0uZ2V0VmlkZW9TdHJlYW0oKS5jbG9uZSgpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRzZW50U3RyZWFtID0gbG9jYWxzdHJlYW0uZ2V0VmlkZW9TdHJlYW0oKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKGlzQXVkaW9NdXRlKSB7XG5cdFx0XHRcdFx0XHRfbXV0ZUF1ZGlvKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChpc1ZpZGVvTXV0ZSkge1xuXHRcdFx0XHRcdFx0X211dGVWaWRlbygpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRwYy5hZGRTdHJlYW0oc2VudFN0cmVhbSk7XG5cdFx0XHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBsb2NhbFN0cmVhbXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OndlYnJ0Yzo6X2luaXRsb2NhbFN0cmVhbSlzdGFja0lkPSR7c3RhY2tJZH0gcmVuZGVyaW5nIGxvY2FsIHZpZGVvIHRvICR7bG9jYWxTdHJlYW1zW2ldLmlkfWApO1xuXHRcdFx0XHRcdFx0YXR0YWNoTWVkaWFTdHJlYW0obG9jYWxTdHJlYW1zW2ldLCBsb2NhbHN0cmVhbS5nZXRWaWRlb1N0cmVhbSgpKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoY2FsbGJhY2sgJiYgdHlwZW9mIGNhbGxiYWNrID09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRcdGNhbGxiYWNrKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9O1xuXHRcdFx0XHRpZiAobG9jYWxzdHJlYW0uZ2V0VmlkZW9TdHJlYW0oKSkge1xuXHRcdFx0XHRcdGluaXRsb2NhbFN0cmVhbSgpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGxvY2Fsc3RyZWFtLmFkZFZpZGVvTGlzdGVuZXIoaW5pdGxvY2FsU3RyZWFtKTtcblx0XHRcdFx0XHRsb2NhbHN0cmVhbS5pbml0VmlkZW8oKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmIChhY3Rpb25UeXBlID09PSB2YXJzLkFDVElPTl9UWVBFX0FVRElPKSB7XG5cdFx0XHRcdGluaXRsb2NhbFN0cmVhbSA9ICgpID0+IHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnKFJlYWNoU0RLOjp3ZWJydGM6Ol9pbml0bG9jYWxTdHJlYW0paW5pdGxvY2FsU3RyZWFtX2F1ZGlvJyk7XG5cdFx0XHRcdFx0aWYgKGxvY2Fsc3RyZWFtLmdldEF1ZGlvU3RyZWFtKCkgJiYgbG9jYWxzdHJlYW0uZ2V0QXVkaW9TdHJlYW0oKS5jbG9uZSAmJiB0eXBlb2YgbG9jYWxzdHJlYW0uZ2V0QXVkaW9TdHJlYW0oKS5jbG9uZSA9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0XHRzZW50U3RyZWFtID0gbG9jYWxzdHJlYW0uZ2V0QXVkaW9TdHJlYW0oKS5jbG9uZSgpO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRzZW50U3RyZWFtID0gbG9jYWxzdHJlYW0uZ2V0QXVkaW9TdHJlYW0oKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKGlzQXVkaW9NdXRlKSB7XG5cdFx0XHRcdFx0XHRfbXV0ZUF1ZGlvKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChpc1ZpZGVvTXV0ZSkge1xuXHRcdFx0XHRcdFx0X211dGVWaWRlbygpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRwYy5hZGRTdHJlYW0oc2VudFN0cmVhbSk7XG5cdFx0XHRcdFx0Zm9yIChsZXQgaSA9IDA7IGkgPCBsb2NhbFN0cmVhbXMubGVuZ3RoOyBpKyspIHtcblx0XHRcdFx0XHRcdGNvbnNvbGUubG9nKGAoUmVhY2hTREs6OndlYnJ0Yzo6X2luaXRsb2NhbFN0cmVhbSlzdGFja0lkPSR7c3RhY2tJZH0gcmVuZGVyaW5nIGxvY2FsIEF1ZGlvIHRvICR7bG9jYWxTdHJlYW1zW2ldLmlkfWApO1xuXHRcdFx0XHRcdFx0YXR0YWNoTWVkaWFTdHJlYW0obG9jYWxTdHJlYW1zW2ldLCBsb2NhbHN0cmVhbS5nZXRBdWRpb1N0cmVhbSgpKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoY2FsbGJhY2sgJiYgdHlwZW9mIGNhbGxiYWNrID09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRcdGNhbGxiYWNrKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9O1xuXHRcdFx0XHRpZiAobG9jYWxzdHJlYW0uZ2V0QXVkaW9TdHJlYW0oKSkge1xuXHRcdFx0XHRcdGluaXRsb2NhbFN0cmVhbSgpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGxvY2Fsc3RyZWFtLmFkZEF1ZGlvTGlzdGVuZXIoaW5pdGxvY2FsU3RyZWFtKTtcblx0XHRcdFx0XHRsb2NhbHN0cmVhbS5pbml0QXVkaW8oKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIGlmIChhY3Rpb25UeXBlID09PSBhY3Rpb25zLkFDVElPTl9UWVBFX0FVRElPX1ZJREVPKSB7XG5cdFx0XHRcdGluaXRsb2NhbFN0cmVhbSA9ICgpID0+IHtcblx0XHRcdFx0XHRjb25zb2xlLmxvZygnKFJlYWNoU0RLOjp3ZWJydGM6Ol9pbml0bG9jYWxTdHJlYW0paW5pdGxvY2FsU3RyZWFtX2F1ZGlvX3ZpZGVvJyk7XG5cdFx0XHRcdFx0aWYgKGxvY2Fsc3RyZWFtLmdldEF1ZGlvVmlkZW9TdHJlYW0oKSAmJiBsb2NhbHN0cmVhbS5nZXRBdWRpb1ZpZGVvU3RyZWFtKCkuY2xvbmUgJiYgdHlwZW9mIGxvY2Fsc3RyZWFtLmdldEF1ZGlvVmlkZW9TdHJlYW0oKS5jbG9uZSA9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0XHRzZW50U3RyZWFtID0gbG9jYWxzdHJlYW0uZ2V0QXVkaW9WaWRlb1N0cmVhbSgpLmNsb25lKCk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHNlbnRTdHJlYW0gPSBsb2NhbHN0cmVhbS5nZXRBdWRpb1ZpZGVvU3RyZWFtKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmIChpc0F1ZGlvTXV0ZSkge1xuXHRcdFx0XHRcdFx0X211dGVBdWRpbygpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoaXNWaWRlb011dGUpIHtcblx0XHRcdFx0XHRcdF9tdXRlVmlkZW8oKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRwYy5hZGRTdHJlYW0oc2VudFN0cmVhbSk7XG5cblx0XHRcdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGxvY2FsU3RyZWFtcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRcdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6d2VicnRjOjpfaW5pdGxvY2FsU3RyZWFtKXN0YWNrSWQ9JHtzdGFja0lkfSByZW5kZXJpbmcgbG9jYWwgQXVkaW9WaWRlbyB0byAke2xvY2FsU3RyZWFtc1tpXS5pZH1gKTtcblx0XHRcdFx0XHRcdGF0dGFjaE1lZGlhU3RyZWFtKGxvY2FsU3RyZWFtc1tpXSwgbG9jYWxzdHJlYW0uZ2V0QXVkaW9WaWRlb1N0cmVhbSgpKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRpZiAoY2FsbGJhY2sgJiYgdHlwZW9mIGNhbGxiYWNrID09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRcdGNhbGxiYWNrKCk7XG5cdFx0XHRcdFx0fVxuXG5cblx0XHRcdFx0fTtcblx0XHRcdFx0aWYgKGxvY2Fsc3RyZWFtLmdldEF1ZGlvVmlkZW9TdHJlYW0oKSkge1xuXHRcdFx0XHRcdGluaXRsb2NhbFN0cmVhbSgpO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGxvY2Fsc3RyZWFtLmFkZEF1ZGlvVmlkZW9MaXN0ZW5lcihpbml0bG9jYWxTdHJlYW0pO1xuXHRcdFx0XHRcdGxvY2Fsc3RyZWFtLmluaXRBdWRpb1ZpZGVvKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29uc29sZS53YXJuKCcoUmVhY2hTREs6OndlYnJ0Yzo6X2luaXRsb2NhbFN0cmVhbSlubyBhY3Rpb25UeXBlIHNwZWNpZmllZCcpO1xuXHRcdH1cblxuXHR9XG5cblx0LyoqXG5cdCAqIFByZXBhcmVzIHRoZSBTRFAgY2FsbGJhY2tzLlxuXHQgKiBSZW1vdGUgZGVzY3JpcHRpb24gd2lsbCBieSBkZWZpbmVkIGZvciB0aGUgcGVlciBjb25uZWN0aW9uIGFuZCBjYWxsYmFja3MgYXJlIGRlZmluZWQgZm9yIFNEUCBhbnN3c2VyIGFuZCByZXNwb25zZSBtYW5hZ2VtZW50LlxuXHQgKiBJZiB0aGVyZSBpcyBubyBwdWJsaXNoaW5nLCBsb2NhbCBkZXNjcmlwdGlvbiB3aWxsIGJlIGRlZmluZWQuXG5cdCAqL1xuXHRmdW5jdGlvbiBfaW5pdFNkcENhbGxiYWNrcygpIHtcblx0XHRjb25zb2xlLmRlYnVnKGAoUmVhY2hTREs6OndlYnJ0Yzo6X2luaXRTZHBDYWxsYmFja3Mpc3RhY2tJZD0ke3N0YWNrSWR9YCk7XG5cdFx0aWYgKGlzUHVibGlzaCkge1xuXHRcdFx0aWYgKHNkcE9mZmVyQ2IpIHtcblx0XHRcdFx0cmVtb3RlRGF0YVJlZi5vZmYoJ2NoaWxkX2FkZGVkJywgc2RwT2ZmZXJDYik7XG5cdFx0XHR9XG5cdFx0XHRzZHBBbnN3ZXJDYiA9IChzbmFwc2hvdCkgPT4ge1xuXHRcdFx0XHRpZiAoIWlzQ2xvc2VkICYmIHNuYXBzaG90Lm5hbWUoKSA9PT0gJ3NkcEFuc3dlcicpIHtcblx0XHRcdFx0XHRjb25zdCBkYXRhID0gc25hcHNob3QudmFsKCk7XG5cdFx0XHRcdFx0Y29uc29sZS5kZWJ1ZyhgKFJlYWNoU0RLOjp3ZWJydGM6OnNkcEFuc3dlckNiKXN0YWNrSWQ9JHtzdGFja0lkfS1yZWNlaXZlZCBzZHBBbnN3ZXI6ICR7SlNPTi5zdHJpbmdpZnkoZGF0YSl9YCk7XG5cdFx0XHRcdFx0cGMuc2V0UmVtb3RlRGVzY3JpcHRpb24obmV3IG15UlRDU2Vzc2lvbkRlc2NyaXB0aW9uKGRhdGEpLCAoKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zb2xlLmRlYnVnKGAoUmVhY2hTREs6OndlYnJ0Yzo6c2RwQW5zd2VyQ2Ipc3RhY2tJZD0ke3N0YWNrSWR9LXJlbW90ZSBkZXNjcmlwdGlvbiBzZXRgKTtcblx0XHRcdFx0XHRcdC8vIHJlbW92ZSBzZHBBbnN3ZXIgZnJvbSB3ZWJjb21cblx0XHRcdFx0XHRcdC8vc25hcHNob3QucmVmKCkucmVtb3ZlKCk7XG5cdFx0XHRcdFx0XHRzdGFydExpc3RlbmluZ1RvUmVtb3RlSWNlQ2FuZGlkYXRlKCk7XG5cdFx0XHRcdFx0fSwgb25FcnJvcik7XG5cdFx0XHRcdFx0cmVtb3RlRGF0YVJlZi5vZmYoJ2NoaWxkX2FkZGVkJywgc2RwQW5zd2VyQ2IpO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdFx0cmVtb3RlRGF0YVJlZi5vbignY2hpbGRfYWRkZWQnLCBzZHBBbnN3ZXJDYik7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmIChzZHBBbnN3ZXJDYikge1xuXHRcdFx0XHRyZW1vdGVEYXRhUmVmLm9mZignY2hpbGRfYWRkZWQnLCBzZHBBbnN3ZXJDYik7XG5cdFx0XHR9XG5cdFx0XHRzZHBPZmZlckNiID0gZnVuY3Rpb24gKHNuYXBzaG90KSB7XG5cdFx0XHRcdGlmICghaXNDbG9zZWQgJiYgc25hcHNob3QubmFtZSgpID09PSAnc2RwT2ZmZXInKSB7XG5cdFx0XHRcdFx0Y29uc3QgZGF0YSA9IHNuYXBzaG90LnZhbCgpO1xuXHRcdFx0XHRcdGNvbnNvbGUuZGVidWcoYChSZWFjaFNESzo6d2VicnRjOjpzZHBPZmZlckNiKXN0YWNrSWQ9JHtzdGFja0lkfS1yZWNlaXZlZCBzZHBPZmZlcjogJHtKU09OLnN0cmluZ2lmeShkYXRhKX1gKTtcblx0XHRcdFx0XHRwYy5zZXRSZW1vdGVEZXNjcmlwdGlvbihuZXcgbXlSVENTZXNzaW9uRGVzY3JpcHRpb24oZGF0YSksICgpID0+IHtcblx0XHRcdFx0XHRcdHBjLmNyZWF0ZUFuc3dlcigoZGVzY3JpcHRpb24pID0+IHtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6d2VicnRjOjpzZHBPZmZlckNiKXN0YWNrSWQ9JHtzdGFja0lkfS1zZW5kaW5nIGFuc3dlcmApO1xuXHRcdFx0XHRcdFx0XHRwYy5zZXRMb2NhbERlc2NyaXB0aW9uKGRlc2NyaXB0aW9uLCAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0Y29uc29sZS5kZWJ1ZyhgKFJlYWNoU0RLOjp3ZWJydGM6OnNkcE9mZmVyQ2Ipc3RhY2tJZD0ke3N0YWNrSWR9LXNldCBzZHBBbnN3ZXIgaW4gYmFzZSA6ICR7SlNPTi5zdHJpbmdpZnkoZGVzY3JpcHRpb24pfWApO1xuXHRcdFx0XHRcdFx0XHRcdGxvY2FsRGF0YVJlZi5jaGlsZCgnc2RwQW5zd2VyJykuc2V0KEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoZGVzY3JpcHRpb24pKSk7IC8vIGRlY29kaW5nL2VuY29kaW5nIGJlY2F1c2Ugb2YgRmlyZWZveCBidWdcblx0XHRcdFx0XHRcdFx0XHQvLyByZW1vdmUgc2RwT2ZmZXIgZnJvbSB3ZWJjb21cblx0XHRcdFx0XHRcdFx0XHQvL3NuYXBzaG90LnJlZigpLnJlbW92ZSgpO1xuXHRcdFx0XHRcdFx0XHRcdHN0YXJ0TGlzdGVuaW5nVG9SZW1vdGVJY2VDYW5kaWRhdGUoKTtcblx0XHRcdFx0XHRcdFx0fSwgb25FcnJvcik7XG5cdFx0XHRcdFx0XHR9LCBvbkVycm9yLCBzdWJzY3JpYmVyTWVkaWFDb25zdHJhaW50cyk7XG5cdFx0XHRcdFx0fSwgb25FcnJvcik7XG5cdFx0XHRcdFx0cmVtb3RlRGF0YVJlZi5vZmYoJ2NoaWxkX2FkZGVkJywgc2RwT2ZmZXJDYik7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cdFx0XHRyZW1vdGVEYXRhUmVmLm9uKCdjaGlsZF9hZGRlZCcsIHNkcE9mZmVyQ2IpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBDbG9zZXMgdGhlIFNEUCBjYWxsYmFja3MgYnkgZGlzYWJsaW5nIGNhbGxiYWNrcyBmb3IgdGhlIFwiY2hpbGRfYWRkZWRcIiBldmVudCBhbmQgYnkgZGVmaW5pbmcgdGhlbSB0byBudWxsLlxuXHQgKi9cblx0ZnVuY3Rpb24gX2Nsb3NlU2RwQ2FsbGJhY2tzKCkge1xuXHRcdGlmIChzZHBBbnN3ZXJDYikge1xuXHRcdFx0cmVtb3RlRGF0YVJlZi5vZmYoJ2NoaWxkX2FkZGVkJywgc2RwQW5zd2VyQ2IpO1xuXHRcdFx0c2RwQW5zd2VyQ2IgPSBudWxsO1xuXHRcdH1cblx0XHRpZiAoc2RwT2ZmZXJDYikge1xuXHRcdFx0cmVtb3RlRGF0YVJlZi5vZmYoJ2NoaWxkX2FkZGVkJywgc2RwT2ZmZXJDYik7XG5cdFx0XHRzZHBPZmZlckNiID0gbnVsbDtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogU2VuZHMgYW4gU0RQIG9mZmVyIHRocm91Z2ggdGhlIHBlZXIgY29ubmVjdGlvbi5cblx0ICogQW4gU0RQIG9mZmVyIGlzIGNyZWF0ZWQsIHdpdGggYSBsb2NhbCBkZXNjcmlwdGlvbiwgYW5kIGlzIHNlbnQuXG5cdCAqIFRoZSBkZXNjcmlwdGlvbiBpcyBib3RoIGRlY29kZWQgYW5kIGVuY29kZWQgYmVjYXVzZSBvZiBGaXJlZm94IGJ1Z3MuXG5cdCAqL1xuXHRmdW5jdGlvbiBzZW5kT2ZmZXIoKSB7XG5cdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0Ly8gcHVibGllIGwnb2ZmcmUgaW5pdGlhbGVcblx0XHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHRjb25zb2xlLmxvZyhgKHdlYnJ0Yzo6c2VuZE9mZmVyKXN0YWNraWQ9JHtzdGFja0lkfS1jcmVhdGluZyBzZHBPZmZlcmApO1xuXHRcdHBjLmNyZWF0ZU9mZmVyKChkZXNjcmlwdGlvbikgPT4ge1xuXHRcdFx0cGMuc2V0TG9jYWxEZXNjcmlwdGlvbihkZXNjcmlwdGlvbiwgKCkgPT4ge1xuXHRcdFx0XHRjb25zb2xlLmRlYnVnKGAoUmVhY2hTREs6OndlYnJ0Yzo6Y3JlYXRlT2ZmZXIpc3RhY2tJZD0ke3N0YWNrSWR9LXNldCBzZHBPZmZlciBpbiBiYXNlIDogJHtKU09OLnN0cmluZ2lmeShkZXNjcmlwdGlvbil9YCk7XG5cdFx0XHRcdGxvY2FsRGF0YVJlZi5jaGlsZCgnc2RwT2ZmZXInKS5zZXQoSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShkZXNjcmlwdGlvbikpKTsgLy8gZGVjb2RpbmcvZW5jb2RpbmcgYmVjYXVzZSBvZiBGaXJlZm94IGJ1Z1xuXHRcdFx0fSwgb25FcnJvcik7XG5cdFx0fSwgb25FcnJvciwgcHVibGlzaGVyTWVkaWFDb25zdHJhaW50cyk7XG5cdH1cblxuXHQvKipcblx0ICogQ2xvc2VzIHRoZSBjb25uZWN0aW9uIGFuZCB0cmlnZ2VycyB0aGUgY2FsbGJhY2sgd2hlbiB0aGUgb3BlcmF0aW9uIGlzIGRvbmVcblx0ICogQHBhcmFtIGNhbGxiYWNrXG5cdCAqL1xuXHRmdW5jdGlvbiBfY2xvc2UoY2FsbGJhY2spIHtcblxuXHRcdGlmICghY2xvc2VJblByb2dyZXNzICYmICFpc0Nsb3NlZCkge1xuXHRcdFx0Y2xvc2VJblByb2dyZXNzID0gdHJ1ZTtcblx0XHRcdG9uQ2xvc2VDYjIgPSBjYWxsYmFjaztcblx0XHRcdGNvbnNvbGUuZGVidWcoYChSZWFjaFNESzo6d2VicnRjOjpfY2xvc2Upc3RhY2tJZD0ke3N0YWNrSWR9LWNsb3Npbmcgd2VicnRjIHN0YWNrYCk7XG5cdFx0XHRpZiAocGMpIHtcblx0XHRcdFx0cGMuY2xvc2UoKTtcblxuXHRcdFx0fVxuXG5cdFx0XHQvLyByZW1vdmUgd2ViY29tIGNhbGxiYWNrc1xuXHRcdFx0aWYgKHJlbW90ZWRhdGFyZWZDYikge1xuXHRcdFx0XHRyZW1vdGVEYXRhUmVmLm9mZignY2hpbGRfYWRkZWQnLCByZW1vdGVkYXRhcmVmQ2IpO1xuXHRcdFx0XHRyZW1vdGVkYXRhcmVmQ2IgPSBudWxsO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoaWNlQ2FuZGlkYXRlc0xpc3RDYikge1xuXHRcdFx0XHRzdG9wTGlzdGVuaW5nVG9SZW1vdGVJY2VDYW5kaWRhdGUoKTtcblx0XHRcdFx0aWNlQ2FuZGlkYXRlc0xpc3RDYiA9IG51bGw7XG5cdFx0XHR9XG5cdFx0XHRfY2xvc2VTZHBDYWxsYmFja3MoKTtcblxuXHRcdFx0Ly8gcmVtb3ZlIHdlYmNvbSBkYXRhXG4vL1x0XHRcdGxvY2FsRGF0YVJlZi5wYXJlbnQoKS5vbkRpc2Nvbm5lY3QoKS5jYW5jZWwoKTtcbi8vXHRcdFx0bG9jYWxEYXRhUmVmLnBhcmVudCgpLm9uRGlzY29ubmVjdCgpLnJlbW92ZSgpO1xuXHRcdFx0Ly9yZW1vdGVEYXRhUmVmLnJlbW92ZSgpO1xuXG5cdFx0XHQvLyBzdG9wIHZpZGVvXG5cdFx0XHRmb3IgKGxldCBpID0gMDsgaSA8IGxvY2FsU3RyZWFtcy5sZW5ndGg7IGkrKykge1xuXHRcdFx0XHRpZiAobG9jYWxTdHJlYW1zW2ldKSB7XG5cdFx0XHRcdFx0Ly9sb2NhbFN0cmVhbXNbaV0uc3JjPVwiXCI7IG5vdCBzdXBwb3J0ZWQgYnkgRmlyZWZveFxuXHRcdFx0XHRcdGRldGFjaE1lZGlhU3RyZWFtKGxvY2FsU3RyZWFtc1tpXSk7XG5cdFx0XHRcdFx0Ly9sb2NhbFN0cmVhbXNbaV0ucmVtb3ZlQXR0cmlidXRlKFwic3JjXCIpO1xuXHRcdFx0XHRcdGNvbnNvbGUuZGVidWcoYChSZWFjaFNESzo6d2VicnRjOjpfY2xvc2Upc3RhY2tJZD0ke3N0YWNrSWR9LXN0b3BwaW5nIGxvY2FsIHZpZGVvIHRvICR7bG9jYWxTdHJlYW1zW2ldLmlkfWApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRmb3IgKGxldCBqID0gMDsgaiA8IHJlbW90ZVN0cmVhbXMubGVuZ3RoOyBqKyspIHtcblx0XHRcdFx0aWYgKHJlbW90ZVN0cmVhbXNbal0pIHtcblx0XHRcdFx0XHQvL3JlbW90ZVN0cmVhbXNbal0uc3JjPVwiXCI7IG5vdCBzdXBwb3J0ZWQgYnkgRmlyZWZveFxuXHRcdFx0XHRcdGRldGFjaE1lZGlhU3RyZWFtKHJlbW90ZVN0cmVhbXNbal0pO1xuXHRcdFx0XHRcdC8vcmVtb3RlU3RyZWFtc1tqXS5yZW1vdmVBdHRyaWJ1dGUoXCJzcmNcIik7XG5cdFx0XHRcdFx0Y29uc29sZS5kZWJ1ZyhgKFJlYWNoU0RLOjp3ZWJydGM6Ol9jbG9zZSlzdGFja0lkPSR7c3RhY2tJZH0tc3RvcHBpbmcgcmVtb3RlIHZpZCB0byAke3JlbW90ZVN0cmVhbXNbal0uaWR9YCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXG5cdFx0XHRpc0Nsb3NlZCA9IHRydWU7XG5cdFx0XHRjb25zb2xlLmRlYnVnKGAoUmVhY2hTREs6OndlYnJ0Yzo6X2Nsb3NlKXN0YWNrSWQ9JHtzdGFja0lkfS1jbG9zaW5nIHdlYnJ0YyBzdGFjayAtPiB3YWl0aW5nIGZvciBJQ0VfQ09OTkVDVElPTl9TVEFURV9ESVNDT05ORUNURURgKTtcblx0XHRcdGlmIChpc0Nsb3NlZCAmJiAoaWNlQ29ubmVjdGlvblN0YXRlID09PSBJQ0VfQ09OTkVDVElPTl9TVEFURV9ESVNDT05ORUNURUQgfHwgaWNlQ29ubmVjdGlvblN0YXRlID09PSBJQ0VfQ09OTkVDVElPTl9TVEFURV9DTE9TRUQgfHwgaWNlQ29ubmVjdGlvblN0YXRlID09PSBJQ0VfQ09OTkVDVElPTl9TVEFURV9GQUlMRUQpKSB7XG5cdFx0XHRcdGNvbnNvbGUuZGVidWcoYChSZWFjaFNESzo6d2VicnRjOjpfY2xvc2Upc3RhY2tJZD0ke3N0YWNrSWR9LWNsb3NlZCB3ZWJydGMgc3RhY2sgY29tcGxldGVgKTtcblx0XHRcdFx0cGMgPSBudWxsO1xuXHRcdFx0XHRjbG9zZUluUHJvZ3Jlc3MgPSBmYWxzZTtcblx0XHRcdFx0d2VicnRjbW5nci5jbGVhcldlYnJ0Y1N0YWNrcyh3ZWJydGNTdGFja0lkKTtcblx0XHRcdFx0Y29uc29sZS5sb2cob25DbG9zZUNiKTtcblx0XHRcdFx0aWYgKG9uQ2xvc2VDYjIgJiYgdHlwZW9mIG9uQ2xvc2VDYjIgPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdG9uQ2xvc2VDYjIoKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb25zb2xlLmRlYnVnKGAoUmVhY2hTREs6OndlYnJ0Yzo6X2Nsb3NlKXN0YWNrSWQ9JHtzdGFja0lkfS1jbG9zaW5nIHdlYnJ0YyBzdGFjayBhbHJlYWR5IGluIHByb2dyZXNzYCk7XG5cdFx0fVxuXHR9XG5cblx0ZnVuY3Rpb24gX2Nvbm5lY3RMb2NhbFN0cmVhbSh2aWRlb0VsdCwgZ2V0U3RyZWFtQ2IpIHtcblx0XHRpZiAoYWN0aW9uVHlwZSkge1xuXHRcdFx0aWYgKGFjdGlvblR5cGUgPT09IGFjdGlvbnMuQUNUSU9OX1RZUEVfVklERU8pIHtcblx0XHRcdFx0bG9jYWxzdHJlYW0uY29ubmVjdExvY2FsVmlkZW9TdHJlYW0odmlkZW9FbHQsIGdldFN0cmVhbUNiKTtcblx0XHRcdH0gZWxzZSBpZiAoYWN0aW9uVHlwZSA9PT0gYWN0aW9ucy5BQ1RJT05fVFlQRV9BVURJTykge1xuXHRcdFx0XHRsb2NhbHN0cmVhbS5jb25uZWN0TG9jYWxBdWRpb1N0cmVhbSh2aWRlb0VsdCwgZ2V0U3RyZWFtQ2IpO1xuXHRcdFx0fSBlbHNlIGlmIChhY3Rpb25UeXBlID09PSBhY3Rpb25zLkFDVElPTl9UWVBFX0FVRElPX1ZJREVPKSB7XG5cdFx0XHRcdGxvY2Fsc3RyZWFtLmNvbm5lY3RMb2NhbEF1ZGlvVmlkZW9TdHJlYW0odmlkZW9FbHQsIGdldFN0cmVhbUNiKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBfY29ubmVjdFJlbW90ZVN0cmVhbSh2aWRlb0VsdCwgZ2V0U3RyZWFtQ2IpIHtcblx0XHRpZiAodmlkZW9FbHQpIHtcblx0XHRcdGlmIChyZWNlaXZlZFN0cmVhbSkge1xuXHRcdFx0XHRhdHRhY2hNZWRpYVN0cmVhbSh2aWRlb0VsdCwgcmVjZWl2ZWRTdHJlYW0pO1xuXHRcdFx0XHRpZiAoZ2V0U3RyZWFtQ2IgJiYgdHlwZW9mIGdldFN0cmVhbUNiID09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRnZXRTdHJlYW1DYihyZWNlaXZlZFN0cmVhbSk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJlbW90ZVN0cmVhbXMucHVzaCh2aWRlb0VsdCk7XG5cdFx0XHRcdGlmIChnZXRTdHJlYW1DYiAmJiB0eXBlb2YgZ2V0U3RyZWFtQ2IgPT0gJ2Z1bmN0aW9uJykge1xuXHRcdFx0XHRcdHJlbW90ZVN0cmVhbXNDYi5wdXNoKGdldFN0cmVhbUNiKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRpZiAocmVjZWl2ZWRTdHJlYW0pIHtcblx0XHRcdFx0aWYgKGdldFN0cmVhbUNiICYmIHR5cGVvZiBnZXRTdHJlYW1DYiA9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0Z2V0U3RyZWFtQ2IocmVjZWl2ZWRTdHJlYW0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRpZiAoZ2V0U3RyZWFtQ2IgJiYgdHlwZW9mIGdldFN0cmVhbUNiID09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRyZW1vdGVTdHJlYW1zQ2IucHVzaChnZXRTdHJlYW1DYik7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdH1cblx0fVxuXG5cblx0LyoqXG5cdCAqIEluaXRpYWxpemVzIHRoZSBwZWVyIGNvbm5lY3Rpb25cblx0ICovXG5cdGZ1bmN0aW9uIGluaXRfcGMoKSB7XG5cdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6d2VicnRjOjppbml0X3BjKXN0YWNrSWQ9JHtzdGFja0lkfV9jb25maWc9YCwgSlNPTi5zdHJpbmdpZnkoY29uZmlnKSk7XG5cdFx0Ly8gVE9ETyB0ZXN0IGlzIGNvbmZpZyBpcyBtYWxmb3JtYXRlZCBvciBlbXB0eVxuXHRcdHBjID0gbmV3IG15UGVlckNvbm5lY3Rpb24oY29uZmlnLCBvcHRpb25hbCk7XG5cblxuXHRcdC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLVxuXHRcdC8vIFJlY2VpdmVkIEljZSBjYW5kaWRhdGUgZnJvbSB0aGUgc3RhY2s6IHNlbmQgaXQgdG8gdGhlIHBlZXJcblx0XHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHRwYy5vbmljZWNhbmRpZGF0ZSA9IGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRpZiAoZS5jYW5kaWRhdGUpIHtcblx0XHRcdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6d2VicnRjOjpwYy5vbmljZWNhbmRpZGF0ZSlzdGFja0lkPSR7c3RhY2tJZH0gc2VuZCBpY2UgY2FuZGlkYXRlPSR7SlNPTi5zdHJpbmdpZnkoZS5jYW5kaWRhdGUpfWApO1xuXHRcdFx0XHRsb2NhbERhdGFSZWYuY2hpbGQoJ2ljZUNhbmRpZGF0ZXNMaXN0JykucHVzaCh7XG5cdFx0XHRcdFx0bGFiZWw6IGUuY2FuZGlkYXRlLnNkcE1MaW5lSW5kZXgsXG5cdFx0XHRcdFx0aWQ6IGUuY2FuZGlkYXRlLnNkcE1pZCxcblx0XHRcdFx0XHRjYW5kaWRhdGU6IGUuY2FuZGlkYXRlLmNhbmRpZGF0ZVxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Ly8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cdFx0Ly8gUmVjZWl2ZWQgYSByZW1vdGUgc3RyZWFtIGZyb20gdGhlIHN0YWNrOiBwbGF5IGl0IG9uIHRoZSB2aWRlbyBwbGF5ZXJcblx0XHQvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS1cblx0XHRwYy5vbmFkZHN0cmVhbSA9IGZ1bmN0aW9uIChlKSB7XG5cdFx0XHRjb25zb2xlLmRlYnVnKGAoUmVhY2hTREs6OndlYnJ0Yzo6b25hZGRzdHJlYW0pc3RhY2tJZD0ke3N0YWNrSWR9LXN0cmVhbToke0pTT04uc3RyaW5naWZ5KGUuc3RyZWFtKX1gKTtcblx0XHRcdGlmIChlICYmIGUuc3RyZWFtKSB7XG5cdFx0XHRcdHJlY2VpdmVkU3RyZWFtID0gZS5zdHJlYW07XG5cdFx0XHRcdGlmIChpc0F1ZGlvTXV0ZSkge1xuXHRcdFx0XHRcdF9tdXRlQXVkaW8oKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoaXNWaWRlb011dGUpIHtcblx0XHRcdFx0XHRfbXV0ZVZpZGVvKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cbi8vICAgICAgICAgICAgX3JlbW90ZVN0cmVhbSA9IGUuc3RyZWFtO1xuLy9cbi8vXHRcdFx0Zm9yICh2YXIgaT0wO2k8cmVtb3RlU3RyZWFtcy5sZW5ndGg7aSsrKSB7XG4vL1x0XHRcdCAgICBpZiAocmVtb3RlU3RyZWFtc1tpXSkge1xuLy9cdFx0XHQgICAgXHQgIGNvbnNvbGUuZGVidWcoXCIoUmVhY2hTREs6OndlYnJ0Yzo6b25hZGRzdHJlYW0pcGMub25hZGRzdHJlYW0gc3RhY2tJZD1cIitzdGFja0lkICsgXCItXCIgK1wicmVuZGVyaW5nIHJlbW90ZSB2aWQgdG8gXCIrcmVtb3RlU3RyZWFtc1tpXS5pZCk7XG4vL1x0XHRcdCAgICBcdCAgYXR0YWNoTWVkaWFTdHJlYW0oIHJlbW90ZVN0cmVhbXNbaV0sX3JlbW90ZVN0cmVhbSk7XG4vL1x0XHRcdCAgICB9XG4vL1x0XHRcdH1cblx0XHR9O1xuXG5cdFx0cGMub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UgPSAoKSA9PiB7XG5cblx0XHRcdGlmICghIXBjICYmIHBjLmljZUNvbm5lY3Rpb25TdGF0ZSA9PT0gSUNFX0NPTk5FQ1RJT05fU1RBVEVfQ0hFQ0tJTkcpIHtcblx0XHRcdFx0Y29uc29sZS5kZWJ1ZyhgKFJlYWNoU0RLOjp3ZWJydGM6Om9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlKXN0YWNrSWQ9JHtzdGFja0lkfS1jaGVja2luZ2ApO1xuXHRcdFx0XHRpY2VDb25uZWN0aW9uU3RhdGUgPSBJQ0VfQ09OTkVDVElPTl9TVEFURV9DSEVDS0lORztcblx0XHRcdH0gZWxzZSBpZiAoISFwYyAmJiBwYy5pY2VDb25uZWN0aW9uU3RhdGUgPT09IElDRV9DT05ORUNUSU9OX1NUQVRFX0NPTk5FQ1RFRCkge1xuXHRcdFx0XHRpY2VDb25uZWN0aW9uU3RhdGUgPSBJQ0VfQ09OTkVDVElPTl9TVEFURV9DT05ORUNURUQ7XG5cdFx0XHRcdGNvbnNvbGUuZGVidWcoYChSZWFjaFNESzo6d2VicnRjOjpvbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZSlzdGFja0lkPSR7c3RhY2tJZH0tY29ubmVjdGVkYCk7XG5cdFx0XHRcdGlmIChyZWNlaXZlZFN0cmVhbSkge1xuXHRcdFx0XHRcdHJlbW90ZVN0cmVhbXMuZm9yRWFjaCgocmVtb3RlU3RyZWFtKSA9PiB7XG5cdFx0XHRcdFx0XHRpZihyZW1vdGVTdHJlYW0pIHtcblx0XHRcdFx0XHRcdFx0Y29uc29sZS5kZWJ1ZyhgKFJlYWNoU0RLOjp3ZWJydGM6Om9uYWRkc3RyZWFtKXBjLm9uYWRkc3RyZWFtIHN0YWNrSWQ9JHtzdGFja0lkfS1yZW5kZXJpbmcgcmVtb3RlIHZpZCB0byAke3JlbW90ZVN0cmVhbS5pZH1gKTtcblx0XHRcdFx0XHRcdFx0YXR0YWNoTWVkaWFTdHJlYW0ocmVtb3RlU3RyZWFtLCByZWNlaXZlZFN0cmVhbSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0cmVtb3RlU3RyZWFtc0NiLmZvckVhY2goKHJlbW90ZVN0cmVhbUNiKSA9PiB7XG5cdFx0XHRcdFx0XHRpZihyZW1vdGVTdHJlYW1DYikge1xuXHRcdFx0XHRcdFx0XHRyZW1vdGVTdHJlYW1DYihyZWNlaXZlZFN0cmVhbSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0cmVtb3RlU3RyZWFtc0NiID0gW107XG5cdFx0XHRcdH1cblx0XHRcdFx0c3RvcExpc3RlbmluZ1RvUmVtb3RlSWNlQ2FuZGlkYXRlKCk7XG5cdFx0XHR9IGVsc2UgaWYgKCEhcGMgJiYgcGMuaWNlQ29ubmVjdGlvblN0YXRlID09PSBJQ0VfQ09OTkVDVElPTl9TVEFURV9DT01QTEVURUQpIHtcblx0XHRcdFx0aWNlQ29ubmVjdGlvblN0YXRlID0gSUNFX0NPTk5FQ1RJT05fU1RBVEVfQ09NUExFVEVEO1xuXHRcdFx0XHRjb25zb2xlLmRlYnVnKGAoUmVhY2hTREs6OndlYnJ0Yzo6b25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2Upc3RhY2tJZD0ke3N0YWNrSWR9LSR7SUNFX0NPTk5FQ1RJT05fU1RBVEVfQ09NUExFVEVEfWApO1xuXHRcdFx0XHRzdG9wTGlzdGVuaW5nVG9SZW1vdGVJY2VDYW5kaWRhdGUoKTtcblx0XHRcdH1cblx0XHRcdGlmICghIXBjICYmIHBjLmljZUNvbm5lY3Rpb25TdGF0ZSA9PT0gSUNFX0NPTk5FQ1RJT05fU1RBVEVfRElTQ09OTkVDVEVEKSB7XG5cdFx0XHRcdGljZUNvbm5lY3Rpb25TdGF0ZSA9IElDRV9DT05ORUNUSU9OX1NUQVRFX0RJU0NPTk5FQ1RFRDtcblx0XHRcdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6d2VicnRjOjpvbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZSlzdGFja0lkPSR7c3RhY2tJZH0tcmVtb3RlIGRpc2Nvbm5lY3Rpb24sIGNsb3NpbmcgcGVlciBjb25uZWN0aW9uYCk7XG5cdFx0XHRcdC8vIF9jbG9zZSgpO1xuXHRcdFx0fSBlbHNlIGlmICghIXBjICYmIHBjLmljZUNvbm5lY3Rpb25TdGF0ZSA9PT0gSUNFX0NPTk5FQ1RJT05fU1RBVEVfQ0xPU0VEKSB7XG5cdFx0XHRcdGNvbnNvbGUuZGVidWcoYChSZWFjaFNESzo6d2VicnRjOjpvbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZSlzdGFja0lkPSR7c3RhY2tJZH0tY2xvc2VkYCk7XG5cdFx0XHRcdGljZUNvbm5lY3Rpb25TdGF0ZSA9IElDRV9DT05ORUNUSU9OX1NUQVRFX0NMT1NFRDtcblx0XHRcdFx0X2Nsb3NlKCk7XG5cdFx0XHR9IGVsc2UgaWYgKCEhcGMgJiYgcGMuaWNlQ29ubmVjdGlvblN0YXRlID09PSBJQ0VfQ09OTkVDVElPTl9TVEFURV9GQUlMRUQpIHtcblx0XHRcdFx0Y29uc29sZS5kZWJ1ZyhgKFJlYWNoU0RLOjp3ZWJydGM6Om9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlKXN0YWNrSWQ9JHtzdGFja0lkfS1mYWlsZWRgKTtcblx0XHRcdFx0aWNlQ29ubmVjdGlvblN0YXRlID0gSUNFX0NPTk5FQ1RJT05fU1RBVEVfRkFJTEVEO1xuXHRcdFx0XHQvL19jbG9zZSgpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aWYgKHBjKSB7XG5cdFx0XHRcdFx0Y29uc29sZS5kZWJ1ZyhgKFJlYWNoU0RLOjp3ZWJydGM6Om9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlKXN0YWNrSWQ9JHtzdGFja0lkfS0ke3BjLmljZUNvbm5lY3Rpb25TdGF0ZX1gKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjb25zb2xlLmRlYnVnKGAoUmVhY2hTREs6OndlYnJ0Yzo6b25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2Upc3RhY2tJZD0ke3N0YWNrSWR9LXBjID0gbnVsbGApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWNlQ29ubmVjdGlvblN0YXRlID0gSUNFX0NPTk5FQ1RJT05fU1RBVEVfT1RIRVI7XG5cdFx0XHR9XG5cblx0XHRcdGlmIChpc0Nsb3NlZCAmJiAoaWNlQ29ubmVjdGlvblN0YXRlID09PSBJQ0VfQ09OTkVDVElPTl9TVEFURV9ESVNDT05ORUNURUQgfHwgaWNlQ29ubmVjdGlvblN0YXRlID09PSBJQ0VfQ09OTkVDVElPTl9TVEFURV9DTE9TRUQgfHwgaWNlQ29ubmVjdGlvblN0YXRlID09PSBJQ0VfQ09OTkVDVElPTl9TVEFURV9GQUlMRUQpKSB7XG5cdFx0XHRcdGNvbnNvbGUuZGVidWcoYChSZWFjaFNESzo6d2VicnRjOjpfY2xvc2Upc3RhY2tJZD0ke3N0YWNrSWR9LWNsb3NlZCB3ZWJydGMgc3RhY2sgY29tcGxldGVgKTtcblx0XHRcdFx0cGMgPSBudWxsO1xuXHRcdFx0XHRjbG9zZUluUHJvZ3Jlc3MgPSBmYWxzZTtcblx0XHRcdFx0d2VicnRjbW5nci5jbGVhcldlYnJ0Y1N0YWNrcyh3ZWJydGNTdGFja0lkKTtcblx0XHRcdFx0aWYgKG9uQ2xvc2VDYiAmJiB0eXBlb2Ygb25DbG9zZUNiID09ICdmdW5jdGlvbicpIHtcblx0XHRcdFx0XHRvbkNsb3NlQ2IoKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAob25DbG9zZUNiMiAmJiB0eXBlb2Ygb25DbG9zZUNiMiA9PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdFx0b25DbG9zZUNiMigpO1xuXHRcdFx0XHR9XG5cblx0XHRcdH1cblx0XHR9O1xuXG5cdFx0Ly8gc3Vic2NyaWJlIHRvIHJlbW90ZSBkYXRhXG5cdFx0aWNlQ2FuZGlkYXRlc0xpc3RDYiA9IChzbmFwc2hvdCkgPT4ge1xuXHRcdFx0Y29uc3Rcblx0XHRcdFx0ZGF0YSA9IHNuYXBzaG90LnZhbCgpLFxuXHRcdFx0XHRjYW5kaWRhdGUgPSBuZXcgbXlSVENJY2VDYW5kaWRhdGUoe1xuXHRcdFx0XHRcdHNkcE1MaW5lSW5kZXg6IGRhdGEubGFiZWwsXG5cdFx0XHRcdFx0Y2FuZGlkYXRlOiBkYXRhLmNhbmRpZGF0ZSxcblx0XHRcdFx0XHRzZHBNaWQ6IGRhdGEuaWRcblx0XHRcdFx0fSk7XG5cdFx0XHRjb25zb2xlLmxvZyhgKFJlYWNoU0RLOjp3ZWJydGM6OmljZUNhbmRpZGF0ZXNMaXN0Q2Ipc3RhY2tJZD0ke3N0YWNrSWR9cmVjZWl2ZWQgaWNlIGNhbmRpZGF0ZT0ke0pTT04uc3RyaW5naWZ5KGNhbmRpZGF0ZSl9YCk7XG5cblx0XHRcdHBjLmFkZEljZUNhbmRpZGF0ZShjYW5kaWRhdGUpO1xuXHRcdFx0Ly8gcmVtb3ZlIGNhbmRpZGF0ZSBmcm9tIHdlYmNvbVxuXHRcdFx0Ly9zbmFwc2hvdC5yZWYoKS5yZW1vdmUoKTtcblx0XHR9O1xuXG5cdFx0aWYgKGlzUHVibGlzaCkge1xuXHRcdFx0X2luaXRsb2NhbFN0cmVhbSgoKSA9PiB7XG5cdFx0XHRcdF9pbml0U2RwQ2FsbGJhY2tzKCk7XG5cdFx0XHRcdHNlbmRPZmZlcigpO1xuXHRcdFx0fSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdF9pbml0U2RwQ2FsbGJhY2tzKCk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIEluaXRpYWxpemVzIHRoZSBvYmplY3Rcblx0ICovXG5cdCgoKSA9PiB7XG5cdFx0Y29uc29sZS5sb2coYChSZWFjaFNESzo6d2VicnRjOjppbml0KXN0YWNrSWQ9JHtzdGFja0lkfWApO1xuXHRcdC8vIHBlZXJjb25uZWN0aW9uXG5cdFx0aWYgKHR5cGVvZihSVENQZWVyQ29ubmVjdGlvbikgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdG15UGVlckNvbm5lY3Rpb24gPSBSVENQZWVyQ29ubmVjdGlvbjtcblx0XHR9XG5cdFx0ZWxzZSB7XG5cdFx0XHRjb25zb2xlLmVycm9yKGAoUmVhY2hTREs6OndlYnJ0Yzo6aW5pdClzdGFja0lkPSR7c3RhY2tJZH0gZXJyb3I9V2VicnRjIGlzIG5vdCBzdXBwb3J0ZWQgb24gdGhpcyBicm93c2VyICFgKTtcblx0XHRcdHRocm93IG5ldyBFcnJvcignV2VicnRjIGlzIG5vdCBzdXBwb3J0ZWQgb24gdGhpcyBicm93c2VyICEnKTtcblx0XHR9XG5cblx0XHRpZiAodHlwZW9mKFJUQ1Nlc3Npb25EZXNjcmlwdGlvbikgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdG15UlRDU2Vzc2lvbkRlc2NyaXB0aW9uID0gUlRDU2Vzc2lvbkRlc2NyaXB0aW9uO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoYChSZWFjaFNESzo6d2VicnRjOjppbml0KXN0YWNrSWQ9JHtzdGFja0lkfSBlcnJvcjI9V2VicnRjIGlzIG5vdCBzdXBwb3J0ZWQgb24gdGhpcyBicm93c2VyICFgKTtcblx0XHRcdHRocm93IG5ldyBFcnJvcignV2VicnRjIGlzIG5vdCBzdXBwb3J0ZWQgb24gdGhpcyBicm93c2VyICEnKTtcblx0XHR9XG5cblx0XHRpZiAodHlwZW9mKFJUQ0ljZUNhbmRpZGF0ZSkgPT09ICdmdW5jdGlvbicpIHtcblx0XHRcdG15UlRDSWNlQ2FuZGlkYXRlID0gUlRDSWNlQ2FuZGlkYXRlO1xuXHRcdH1cblx0XHRlbHNlIHtcblx0XHRcdGNvbnNvbGUuZXJyb3IoYChSZWFjaFNESzo6d2VicnRjOjppbml0KXN0YWNrSWQ9JHtzdGFja0lkfSBlcnJvcjM9V2VicnRjIGlzIG5vdCBzdXBwb3J0ZWQgb24gdGhpcyBicm93c2VyICFgKTtcblx0XHRcdHRocm93IG5ldyBFcnJvcignV2VicnRjIGlzIG5vdCBzdXBwb3J0ZWQgb24gdGhpcyBicm93c2VyICEnKTtcblx0XHR9XG5cblx0XHRpZiAocF9tdXRlQXVkaW8pIHtcblx0XHRcdGlzQXVkaW9NdXRlID0gdHJ1ZTtcblx0XHR9XG5cdFx0aWYgKHBfbXV0ZVZpZGVvKSB7XG5cdFx0XHRpc1ZpZGVvTXV0ZSA9IHRydWU7XG5cdFx0fVxuXG5cdFx0Z2V0SWNlU2VydmVyc0NvbmZpZ0Zyb21TZXJ2ZXIoKF9jb25maWcpID0+IHtcblx0XHRcdGNvbmZpZyA9IF9jb25maWc7XG5cdFx0XHRjb25zb2xlLmxvZygnKFJlYWNoU0RLOjp3ZWJydGM6OikgdXNlIHNlcnZlciBjb25maWc9JywgSlNPTi5zdHJpbmdpZnkoY29uZmlnKSk7XG5cdFx0XHRpbml0X3BjKCk7XG5cdFx0fSwgKCkgPT4ge1xuXHRcdFx0aWYgKHR5cGVvZiBERUZBVUxUX0lDRV9DT05GSUcgIT09ICd1bmRlZmluZWQnKSB7XG5cdFx0XHRcdGNvbmZpZyA9IERFRkFVTFRfSUNFX0NPTkZJRztcblx0XHRcdFx0Y29uc29sZS5sb2coJyhSZWFjaFNESzo6d2VicnRjOjopIHVzZSBERUZBVUxUX0lDRV9DT05GSUcgY29uZmlnPScsIEpTT04uc3RyaW5naWZ5KGNvbmZpZykpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y29uc29sZS5sb2coJyhSZWFjaFNESzo6d2VicnRjOjopIG5vIGljZSAgY29uZmlnJyk7XG5cdFx0XHR9XG5cdFx0XHRpbml0X3BjKCk7XG5cdFx0fSk7XG5cblx0fSkoKTtcblxuXHQvL2luaXQoKTtcblxuXHRyZXR1cm4ge1xuXG5cdFx0LyoqXG5cdFx0ICogRGVmaW5lcyB0aGUgY2FsbGJhY2sgdG8gdHJpZ2dlciBzbyBhcyB0byBjbG9zZSB0aGUgY29tbXVuaWNhdGlvblxuXHRcdCAqIEBwYXJhbSB7ZnVuY3Rpb259IGNiIC0gVGhlIGNhbGxiYWNrIHRvIHRyaWdnZXJcblx0XHQgKi9cblx0XHRzZXRPbkNsb3NlOiAoY2IpID0+IHtcblx0XHRcdG9uQ2xvc2VDYiA9IGNiO1xuXHRcdH0sXG5cdFx0LyoqXG5cdFx0ICogQ2xvc2VzIGEgY2FsbGJhY2tcblx0XHQgKiBAcGFyYW0ge2Z1bmN0aW9ufSBjYiAtIFRoZSBjYWxsYmFjayB0byBjbG9zZVxuXHRcdCAqL1xuXHRcdGNsb3NlOiAoY2IpID0+IHtcblx0XHRcdGNvbnNvbGUuZGVidWcoYChSZWFjaFNESzo6d2VicnRjOjpfY2xvc2Upc3RhY2tJZD0ke3N0YWNrSWR9LWNsb3NlIHJlcXVlc3RlZGApO1xuXHRcdFx0X2Nsb3NlKGNiKTtcblx0XHR9LFxuXG5cdFx0LyoqXG5cdFx0ICogQ29ubmVjdCBhIGxvY2FsIHN0cmVhbSB0byBhbiBlbGVtZW50IGFjY29yZGluZyB0byB0aGUgYWN0aW9uIHR5cGUgaW4gdXNlIChBQ1RJT05fVFlQRV9WSURFTywgQUNUSU9OX1RZUEVfQVVESU8sIEFDVElPTl9UWVBFX0FVRElPX1ZJREVPKVxuXHRcdCAqIEBwYXJhbSB2aWRlb0VsdCAtIFRoZSB2aWRlbyBlbGVtZW50XG5cdFx0ICogQHBhcmFtIGdldFN0cmVhbUNiIC0gYSBjYWxsYmFjayBmdW5jdGlvbiB0byByZXRyaWV2ZSB0aGUgbWVkaWFzdHJlYW0gb2JqZWN0XG5cdFx0ICovXG5cdFx0Y29ubmVjdExvY2FsU3RyZWFtOiBfY29ubmVjdExvY2FsU3RyZWFtLFxuXHRcdC8qKlxuXHRcdCAqIENvbm5lY3QgYSByZW1vdGUgc3RyZWFtIHRvIGFuIGVsZW1lbnRcblx0XHQgKiBAcGFyYW0gdmlkZW9FbHQgLSBUaGUgdmlkZW8gZWxlbWVudFxuXHRcdCAqIEBwYXJhbSBnZXRTdHJlYW1DYiAtIGEgY2FsbGJhY2sgZnVuY3Rpb24gdG8gcmV0cmlldmUgdGhlIG1lZGlhc3RyZWFtIG9iamVjdFxuXHRcdCAqL1xuXHRcdGNvbm5lY3RSZW1vdGVTdHJlYW06IF9jb25uZWN0UmVtb3RlU3RyZWFtLFxuXHRcdC8qKlxuXHRcdCAqIG11dGUgQXVkaW9cblx0XHQgKi9cblx0XHRtdXRlQXVkaW86IF9tdXRlQXVkaW8sXG5cdFx0LyoqXG5cdFx0ICogdW5tdXRlIEF1ZGlvXG5cdFx0ICovXG5cdFx0dW5tdXRlQXVkaW86IF91bm11dGVBdWRpbyxcblx0XHQvKipcblx0XHQgKiBtdXRlIFZpZGVvXG5cdFx0ICovXG5cdFx0bXV0ZVZpZGVvOiBfbXV0ZVZpZGVvLFxuXHRcdC8qKlxuXHRcdCAqIHVubXV0ZSBWaWRlb1xuXHRcdCAqL1xuXHRcdHVubXV0ZVZpZGVvOiBfdW5tdXRlVmlkZW9cblx0fTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHdlYnJ0YztcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy93ZWJydGMuanNcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9