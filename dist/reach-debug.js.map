{"version":3,"sources":["webpack://Reach/webpack/universalModuleDefinition","webpack://Reach/webpack/bootstrap","webpack://Reach/./node_modules/after/index.js","webpack://Reach/./node_modules/arraybuffer.slice/index.js","webpack://Reach/./node_modules/backo2/index.js","webpack://Reach/./node_modules/base64-arraybuffer/lib/base64-arraybuffer.js","webpack://Reach/./node_modules/base64-js/index.js","webpack://Reach/./node_modules/blob/index.js","webpack://Reach/./node_modules/buffer/index.js","webpack://Reach/./node_modules/component-bind/index.js","webpack://Reach/./node_modules/component-emitter/index.js","webpack://Reach/./node_modules/component-inherit/index.js","webpack://Reach/./node_modules/core-js/fn/array/find.js","webpack://Reach/./node_modules/core-js/modules/_a-function.js","webpack://Reach/./node_modules/core-js/modules/_add-to-unscopables.js","webpack://Reach/./node_modules/core-js/modules/_an-object.js","webpack://Reach/./node_modules/core-js/modules/_array-methods.js","webpack://Reach/./node_modules/core-js/modules/_array-species-constructor.js","webpack://Reach/./node_modules/core-js/modules/_array-species-create.js","webpack://Reach/./node_modules/core-js/modules/_cof.js","webpack://Reach/./node_modules/core-js/modules/_core.js","webpack://Reach/./node_modules/core-js/modules/_ctx.js","webpack://Reach/./node_modules/core-js/modules/_defined.js","webpack://Reach/./node_modules/core-js/modules/_descriptors.js","webpack://Reach/./node_modules/core-js/modules/_dom-create.js","webpack://Reach/./node_modules/core-js/modules/_export.js","webpack://Reach/./node_modules/core-js/modules/_fails.js","webpack://Reach/./node_modules/core-js/modules/_global.js","webpack://Reach/./node_modules/core-js/modules/_has.js","webpack://Reach/./node_modules/core-js/modules/_hide.js","webpack://Reach/./node_modules/core-js/modules/_ie8-dom-define.js","webpack://Reach/./node_modules/core-js/modules/_iobject.js","webpack://Reach/./node_modules/core-js/modules/_is-array.js","webpack://Reach/./node_modules/core-js/modules/_is-object.js","webpack://Reach/./node_modules/core-js/modules/_library.js","webpack://Reach/./node_modules/core-js/modules/_object-dp.js","webpack://Reach/./node_modules/core-js/modules/_property-desc.js","webpack://Reach/./node_modules/core-js/modules/_redefine.js","webpack://Reach/./node_modules/core-js/modules/_shared.js","webpack://Reach/./node_modules/core-js/modules/_to-integer.js","webpack://Reach/./node_modules/core-js/modules/_to-length.js","webpack://Reach/./node_modules/core-js/modules/_to-object.js","webpack://Reach/./node_modules/core-js/modules/_to-primitive.js","webpack://Reach/./node_modules/core-js/modules/_uid.js","webpack://Reach/./node_modules/core-js/modules/_wks.js","webpack://Reach/./node_modules/core-js/modules/es6.array.find.js","webpack://Reach/./node_modules/engine.io-client/lib/index.js","webpack://Reach/./node_modules/engine.io-client/lib/socket.js","webpack://Reach/./node_modules/engine.io-client/lib/transport.js","webpack://Reach/./node_modules/engine.io-client/lib/transports/index.js","webpack://Reach/./node_modules/engine.io-client/lib/transports/polling-jsonp.js","webpack://Reach/./node_modules/engine.io-client/lib/transports/polling-xhr.js","webpack://Reach/./node_modules/engine.io-client/lib/transports/polling.js","webpack://Reach/./node_modules/engine.io-client/lib/transports/websocket.js","webpack://Reach/./node_modules/engine.io-client/lib/xmlhttprequest.js","webpack://Reach/./node_modules/engine.io-client/node_modules/debug/src/browser.js","webpack://Reach/./node_modules/engine.io-client/node_modules/debug/src/debug.js","webpack://Reach/./node_modules/engine.io-parser/lib/browser.js","webpack://Reach/./node_modules/engine.io-parser/lib/keys.js","webpack://Reach/./node_modules/engine.io-parser/lib/utf8.js","webpack://Reach/./node_modules/getstats/getStats.js","webpack://Reach/./node_modules/has-binary2/index.js","webpack://Reach/./node_modules/has-binary2/node_modules/isarray/index.js","webpack://Reach/./node_modules/has-cors/index.js","webpack://Reach/./node_modules/ieee754/index.js","webpack://Reach/./node_modules/indexof/index.js","webpack://Reach/./node_modules/isarray/index.js","webpack://Reach/./node_modules/ms/index.js","webpack://Reach/./node_modules/parseqs/index.js","webpack://Reach/./node_modules/parseuri/index.js","webpack://Reach/./node_modules/process/browser.js","webpack://Reach/./node_modules/rtcpeerconnection-shim/rtcpeerconnection.js","webpack://Reach/./node_modules/sdp/sdp.js","webpack://Reach/./node_modules/socket.io-client/lib/index.js","webpack://Reach/./node_modules/socket.io-client/lib/manager.js","webpack://Reach/./node_modules/socket.io-client/lib/on.js","webpack://Reach/./node_modules/socket.io-client/lib/socket.js","webpack://Reach/./node_modules/socket.io-client/lib/url.js","webpack://Reach/./node_modules/socket.io-client/node_modules/debug/src/browser.js","webpack://Reach/./node_modules/socket.io-client/node_modules/debug/src/debug.js","webpack://Reach/./node_modules/socket.io-client/node_modules/isarray/index.js","webpack://Reach/./node_modules/socket.io-client/node_modules/socket.io-parser/binary.js","webpack://Reach/./node_modules/socket.io-client/node_modules/socket.io-parser/index.js","webpack://Reach/./node_modules/socket.io-client/node_modules/socket.io-parser/is-buffer.js","webpack://Reach/./node_modules/to-array/index.js","webpack://Reach/(webpack)/buildin/global.js","webpack://Reach/./node_modules/webrtc-adapter/src/js/adapter_core.js","webpack://Reach/./node_modules/webrtc-adapter/src/js/adapter_factory.js","webpack://Reach/./node_modules/webrtc-adapter/src/js/chrome/chrome_shim.js","webpack://Reach/./node_modules/webrtc-adapter/src/js/chrome/getdisplaymedia.js","webpack://Reach/./node_modules/webrtc-adapter/src/js/chrome/getusermedia.js","webpack://Reach/./node_modules/webrtc-adapter/src/js/common_shim.js","webpack://Reach/./node_modules/webrtc-adapter/src/js/edge/edge_shim.js","webpack://Reach/./node_modules/webrtc-adapter/src/js/edge/filtericeservers.js","webpack://Reach/./node_modules/webrtc-adapter/src/js/edge/getdisplaymedia.js","webpack://Reach/./node_modules/webrtc-adapter/src/js/edge/getusermedia.js","webpack://Reach/./node_modules/webrtc-adapter/src/js/firefox/firefox_shim.js","webpack://Reach/./node_modules/webrtc-adapter/src/js/firefox/getdisplaymedia.js","webpack://Reach/./node_modules/webrtc-adapter/src/js/firefox/getusermedia.js","webpack://Reach/./node_modules/webrtc-adapter/src/js/safari/safari_shim.js","webpack://Reach/./node_modules/webrtc-adapter/src/js/utils.js","webpack://Reach/./node_modules/yeast/index.js","webpack://Reach/./src/Reach.js","webpack://Reach/./src/core/Config.js","webpack://Reach/./src/core/Device.js","webpack://Reach/./src/core/Invite.js","webpack://Reach/./src/core/Message.js","webpack://Reach/./src/core/Participant.js","webpack://Reach/./src/core/Room.js","webpack://Reach/./src/core/User.js","webpack://Reach/./src/core/stream/Local.js","webpack://Reach/./src/core/stream/Remote.js","webpack://Reach/./src/core/stream/StreamManager.js","webpack://Reach/./src/core/util/DataSync.js","webpack://Reach/./src/core/util/Log.js","webpack://Reach/./src/core/util/Media.js","webpack://Reach/./src/core/util/cache.js","webpack://Reach/./src/core/util/constants.js","webpack://Reach/./src/core/webrtc/PeerConnection.js","webpack://Reach/./src/core/webrtc/PeerConnectionManager.js","webpack://Reach/./src/definitions/Browser.js","webpack://Reach/./src/definitions/Codec.js","webpack://Reach/./src/definitions/Events.js","webpack://Reach/./src/definitions/StreamTypes.js","webpack://Reach/ws (ignored)","webpack://Reach/external \"webcom/webcom\""],"names":["Object","defineProperty","exports","value","default","_webcom","_interopRequireDefault","require","_Browser","_StreamTypes","Events","_interopRequireWildcard","_Codec","_User","_Room","_Invite","DataSync","_cache","Log","_Media","obj","__esModule","newObj","key","prototype","hasOwnProperty","call","desc","getOwnPropertyDescriptor","get","set","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","_createClass","protoProps","staticProps","Reach","url","cfg","arguments","undefined","base","config","_callbacks","register","email","password","name","rememberMe","_this","createUser","then","auth","login","catch","r","p","Promise","resolve","current","logout","authWithPassword","init","u","user","resume","_this2","reject","INTERNAL","PersistentStorage","error","Error","anonymous","authAnonymously","_this3","disconnect","keys","forEach","event","off","reach","toPath","e","users","include","_this4","list","filter","uid","rooms","invites","concat","on","callback","cancelCallback","path","Cls","toClass","cb","snapData","d","push","createRoom","extra","publicRoom","create","getRoom","getUser","peerConnections","stacks","sdk","SDK_VERSION","schema","SCHEMA_VERSION","room","stream","invite","local","audio","video","module","_toConsumableArray","arr","_iterableToArray","_nonIterableSpread","iter","iterator","toString","Array","from","_arrayWithoutHoles","isArray","arr2","_flattenServers","servers","_ref","_expand","map","server","username","credential","urls","uris","uri","apply","Config","constraints","localStreamContainer","remoteStreamContainer","preferredVideoCodec","preferredAudioCodec","reset","assign","iceServers","val","logLevel","level","_iceServers","_currentServers","_newServers","newServer","some","reduce","previous","idx","findIndex","s","stats","_stats","Device","values","os","userAgent","status","userUid","deviceUid","newUid","replace","_constants","update","reason","_ended","ONGOING","to","prop","Invite","ref","parent","topic","_created","cancel","CANCELED","ts","REJECTED","accept","ACCEPTED","supports","_listener","updated","bind","onStatusChange","splice","offStatusChange","send","invitee","message","inviteMetaData","inviteRef","inviteId","Message","roomId","text","edit","newText","remove","data","pushRef","Participant","role","_joined","_Participant","_Message","_Local","_joinRoom","split","join","CLOSED","participant","CONNECTED","w","Room","roomUid","localStream","owner","_public","participants","messages","_streams","localStreams","streams","device","remoteStreams","NONE","_path","_data","NOT_CONNECTED","all","removeParticipant","Obj","typedCallback","test","streamData","remoteStream","getRemote","sendMessage","share","type","getLocalVideo","publish","leave","_this5","onDisconnect","close","unSubscribe","WAS_CONNECTED","_this6","_closed","roomMetaData","Date","now","roomFullMetaData","OPENED","id1","Math","floor","random","id2","roomRef","OWNER","_Device","initializing","User","userId","lastSeen","provider","devices","deviceId","deviceMetadata","webcom","navigator","deviceRef","inviteIds","hasConnectedDevices","RegExp","StreamTypes","_facingModes","facingMode","USER","ENVIRONMENT","_getConstraintValue","exact","ideal","_setConstrainValue","other","Local","muted","container","node","isVideoLoaded","_inputs","updateConstraints","mediaDevices","getUserMedia","WEBRTC_ERROR","media","kind","constraintsValue","mute","track","AUDIO","state","_this$muted","tracks","getAudioTracks","VIDEO","SCREEN_SHARING","getVideoTracks","AUDIO_VIDEO","getTracks","enabled","unMute","CLOSING","indexOf","switchCamera","_switchDevice","switchMicrophone","next","currentModeIdx","mediaDevice","sort","nextDevice","v","stop","reverse","sharedStream","streamMetaData","streamRef","streamSize","height","videoHeight","width","videoWidth","onloadeddata","window","addEventListener","_streamSize","shared","subscriber","offer","pc","SUBSCRIBED","closedPC","defaultConstraints","_constraints","mediaStream","MediaStream","checkDevices","label","deviceIds","attachStream","peerConnection","renegotiate","_media","srcObject","removeChild","Remote","subscribe","answer","subscribed","SIZE","MUTE","_close","remote","_Remote","StreamManager","getShared","once","eventType","isNativeReflectConstruct","Reflect","construct","sham","Proxy","_construct","Parent","args","Class","a","Function","_setPrototypeOf","o","setPrototypeOf","__proto__","evt","_write","method","child","Type","_len","params","_key","snapChild","queryCallback","levels","isEnabled","toUpperCase","gConsole","global","console","logger","toLowerCase","group","_len2","items","_key2","item","groupEnd","_Reach","presets","UHD","h","min","FHD","max","HD","SVGA","SD","VGA","_assignDevice","constraint","Media","videoConstraints","audioConstraints","videoDeviceId","audioDeviceId","preset","dimConstraint","dim","volume","tagName","_node","document","createElement","autoplay","browser","setAttribute","style","borderRadius","replaceChild","appendChild","enumerateDevices","_Config","_StreamManager","_PeerConnectionManager","CacheManager","_base","_config","_user","_device","_logLevel","_peerConnections","_room","cache","_default","PARTICIPANT","MODERATOR","_socket","_getstats","DtlsSrtpKeyAgreement","sdpConstraints","receive","OfferToReceiveAudio","OfferToReceiveVideo","ICE_CONNECTION_STATE_DISCONNECTED","ICE_CONNECTION_STATE_CONNECTED","ICE_CONNECTION_STATE_COMPLETED","ICE_CONNECTION_STATE_CHECKING","ICE_CONNECTION_STATE_CLOSED","ICE_CONNECTION_STATE_FAILED","ICE_CONNECTION_STATE_OTHER","_toJSON","toJSON","PeerConnection","stackId","streamId","_localPath","_remotePath","negotiated","RTCPeerConnection","optional","mandatory","onicecandidate","candidate","oniceconnectionstatechange","iceConnectionState","_attachStream","_remoteICECandidates","_getStats","isConnected","onicegatheringstatechange","iceGatheringState","_status","interval","result","socket","emit","id","listen","snap","addIceCandidate","RTCIceCandidate","htmlElement","errorCallbacks","ontrack","onaddstream","sdpOffer","sdp","setRemoteDescription","remoteDescription","createAnswer","description","_setPreferredCodecs","setLocalDescription","localDescription","_sendSdpToRemote","sendTimeout","onnegotiationneeded","clearTimeout","setTimeout","_sendOffer","sdpAnswer","_alterStream","remoteUserId","remoteDevice","newSdp","exec","descriptionChanged","_this7","createOffer","_this8","getSenders","sender","oldStream","newStream","RTCRtpSender","newTracks","replaceTrack","_this9","signalingState","onsignalingstatechange","sdpLines","medias","sdpLine","fmt","index","codecs","c","prefer","mediaList","preferedCodec","selected","find","codec","ids","_remoteStream","_PeerConnection","getShortStackId","localeCompare","hashCode","str","prevHash","currVal","charCodeAt","getStackId","deviceId1","deviceId2","shortstackId","hash","substring","PeerConnectionManager","getPeerConnection","shortUserId","shortRemoteTo","shortRemoteFrom","remoteTo","remoteFrom","_webrtcAdapter","_console","compatible","browserDetails","minVersion","version","browserShim","log","VP8","VP9","VP10","H264","H265","OPUS","G722","G711","ISAC","ISAC_16","ISAC_32","LSAC","paths","ROOM","INVITE","MESSAGE","STREAM","classes","_Events","JSON","stringify"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,kDAA0C,gCAAgC;AAC1E;AACA;;AAEA;AACA;AACA;AACA,gEAAwD,kBAAkB;AAC1E;AACA,yDAAiD,cAAc;AAC/D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAyC,iCAAiC;AAC1E,wHAAgH,mBAAmB,EAAE;AACrI;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;;AAGA;AACA;;;;;;;;;;;;AClFA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;AC3BA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,0BAA0B,sCAAsC;;AAEhE,kBAAkB,gBAAgB;AAClC,gBAAgB,cAAc;AAC9B,oBAAoB,aAAa;;AAEjC;AACA;AACA;;AAEA;AACA;AACA,6BAA6B,SAAS;AACtC;AACA;AACA;AACA;;;;;;;;;;;;;AC3BA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;ACnFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;;AAEA;AACA;AACA;;AAEA,eAAe,SAAS;AACxB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,eAAe,SAAS;AACxB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;;;;;;;;;;;;AClEW;;AAEZ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,kCAAkC,SAAS;AAC3C;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB,SAAS;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,0CAA0C,UAAU;AACpD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;ACtJA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,CAAC;;AAED;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA,yDAAyD;AACzD;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA,CAAC;;;;;;;;;;;;;ACnGD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEY;;AAEZ,aAAa,mBAAO,CAAC,oDAAW;AAChC,cAAc,mBAAO,CAAC,gDAAS;AAC/B,cAAc,mBAAO,CAAC,gDAAS;;AAE/B;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,qBAAqB,mDAAmD;AACxE;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB,UAAU;AAC7B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,YAAY;AAC7B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA,uCAAuC,SAAS;AAChD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,iBAAiB;AAChC;AACA;AACA;;AAEA;AACA;AACA,aAAa,iBAAiB;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,gDAAgD,EAAE;AAClD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,iBAAiB,SAAS;AAC1B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA,wBAAwB,eAAe;AACvC;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,wBAAwB,QAAQ;AAChC;AACA,qBAAqB,eAAe;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,YAAY;AAC7B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qBAAqB,SAAS;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,qBAAqB,SAAS;AAC9B;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA,qBAAqB,SAAS;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,mBAAmB,cAAc;AACjC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD,OAAO;AAC9D;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA,uDAAuD,OAAO;AAC9D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,qBAAqB,QAAQ;AAC7B;AACA;AACA,GAAG;AACH;AACA,eAAe,SAAS;AACxB;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,mBAAmB,SAAS;AAC5B;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,eAAe,iBAAiB;AAChC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,YAAY;AAC7B;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAiB,gBAAgB;AACjC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,iBAAiB,gBAAgB;AACjC;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iBAAiB,YAAY;AAC7B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;AC5vDA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,gBAAgB;AAC3B,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACrBA;AACA;AACA;;AAEA,IAAI,IAA6B;AACjC;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,iBAAiB,sBAAsB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,MAAM;AACjB,YAAY;AACZ;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,2CAA2C,SAAS;AACpD;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;ACjKA;AACA;AACA;AACA;AACA;AACA,E;;;;;;;;;;;ACNA,mBAAO,CAAC,sFAA8B;AACtC,iBAAiB,mBAAO,CAAC,oEAAqB;;;;;;;;;;;;ACD9C;AACA;AACA;AACA;;;;;;;;;;;;ACHA;AACA,kBAAkB,mBAAO,CAAC,sDAAQ;AAClC;AACA,0CAA0C,mBAAO,CAAC,wDAAS,6BAA6B;AACxF;AACA;AACA;;;;;;;;;;;;ACNA,eAAe,mBAAO,CAAC,kEAAc;AACrC;AACA;AACA;AACA;;;;;;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU,mBAAO,CAAC,sDAAQ;AAC1B,cAAc,mBAAO,CAAC,8DAAY;AAClC,eAAe,mBAAO,CAAC,kEAAc;AACrC,eAAe,mBAAO,CAAC,kEAAc;AACrC,UAAU,mBAAO,CAAC,wFAAyB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UA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AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2FAA2F;;AAE3F;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,kCAAkC;;AAElC;AACA;AACA;AACA;;AAEA;AACA,mBAAmB,mBAAO,CAAC,qEAAa;AACxC,oBAAoB,mBAAO,CAAC,mFAAoB;AAChD,gBAAgB,mBAAO,CAAC,wEAAkB;;AAE1C;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;;AAEA;AACA;AACA,8CAA8C,WAAW;AACzD;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qBAAqB,8BAA8B;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,2BAA2B,kBAAkB;AAC7C;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,6CAA6C,OAAO;AACpD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,MAAM;AACjB;AACA;AACA;;AAEA;AACA;AACA,sCAAsC,OAAO;AAC7C;AACA;AACA;AACA;;;;;;;;;;;;ACzuBA;AACA;AACA;;AAEA,aAAa,mBAAO,CAAC,wEAAkB;AACvC,cAAc,mBAAO,CAAC,oEAAmB;;AAEzC;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,UAAU;AACtB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,MAAM;AACjB;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;AC/JA;AACA;AACA;;AAEA,qBAAqB,mBAAO,CAAC,iFAAoB;AACjD,UAAU,mBAAO,CAAC,oFAAe;AACjC,YAAY,mBAAO,CAAC,wFAAiB;AACrC,gBAAgB,mBAAO,CAAC,gFAAa;;AAErC;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;;;;;;;;;;ACpDA;AACA;AACA;;AAEA,cAAc,mBAAO,CAAC,4EAAW;AACjC,cAAc,mBAAO,CAAC,oEAAmB;;AAEzC;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,mBAAmB;;AAEnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;;;;;;;;;;;;AC9OA;;AAEA;AACA;AACA;;AAEA,qBAAqB,mBAAO,CAAC,iFAAoB;AACjD,cAAc,mBAAO,CAAC,4EAAW;AACjC,cAAc,mBAAO,CAAC,oEAAmB;AACzC,cAAc,mBAAO,CAAC,oEAAmB;AACzC,YAAY,mBAAO,CAAC,gFAAO;;AAE3B;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB;AACA;;AAEA;AACA;AACA,0BAA0B,iDAAiD;AAC3E;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,cAAc;;AAEd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,SAAS;AACT,2DAA2D;AAC3D;AACA,OAAO;AACP;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC9ZA;AACA;AACA;;AAEA,gBAAgB,mBAAO,CAAC,sEAAc;AACtC,cAAc,mBAAO,CAAC,gDAAS;AAC/B,aAAa,mBAAO,CAAC,wEAAkB;AACvC,cAAc,mBAAO,CAAC,oEAAmB;AACzC,YAAY,mBAAO,CAAC,4CAAO;AAC3B,YAAY,mBAAO,CAAC,gFAAO;;AAE3B;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA,uBAAuB,mBAAO,CAAC,iFAAoB;AACnD,gCAAgC,iBAAiB;AACjD;AACA,CAAC;;AAED;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,SAAS;AACpB;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,iBAAiB,gBAAgB;AACjC;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,SAAS;AACpB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;ACpPA;AACA;AACA;;AAEA,gBAAgB,mBAAO,CAAC,sEAAc;AACtC,aAAa,mBAAO,CAAC,wEAAkB;AACvC,cAAc,mBAAO,CAAC,gDAAS;AAC/B,cAAc,mBAAO,CAAC,oEAAmB;AACzC,YAAY,mBAAO,CAAC,4CAAO;AAC3B,YAAY,mBAAO,CAAC,gFAAO;;AAE3B;;AAEA;AACA;AACA,CAAC;AACD;AACA,CAAC;AACD;AACA,oBAAoB,mBAAO,CAAC,WAAI;AAChC,GAAG,YAAY;AACf;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,SAAS,OAAO;AAChB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,MAAM;AACjB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,4BAA4B,OAAO;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA;;AAEA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,QAAQ;AACpB;AACA;;AAEA;AACA;AACA;;;;;;;;;;;;;ACpSA;;AAEA,cAAc,mBAAO,CAAC,kDAAU;;AAEhC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG,YAAY;;AAEf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG,YAAY;;AAEf;AACA;AACA;AACA,KAAK,YAAY;AACjB;AACA;;;;;;;;;;;;ACpCA;AACA;AACA;AACA;AACA;;AAEA,2BAA2B,mBAAO,CAAC,gFAAS;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;;;;;;;ACjMA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAmB,mBAAO,CAAC,sCAAI;;AAE/B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;;AAEA;AACA;;AAEA;AACA;AACA,cAAc;AACd;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,iBAAiB;AACpC;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,aAAa,SAAS;AACtB,4BAA4B;AAC5B;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA,aAAa,8BAA8B;AAC3C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yCAAyC,SAAS;AAClD;AACA;AACA;AACA;AACA,yCAAyC,SAAS;AAClD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,MAAM;AACjB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;AChOA;AACA;AACA;;AAEA,WAAW,mBAAO,CAAC,2DAAQ;AAC3B,gBAAgB,mBAAO,CAAC,wDAAa;AACrC,kBAAkB,mBAAO,CAAC,oEAAmB;AAC7C,YAAY,mBAAO,CAAC,4CAAO;AAC3B,WAAW,mBAAO,CAAC,2DAAQ;;AAE3B;AACA;AACA,kBAAkB,mBAAO,CAAC,uFAAoB;AAC9C;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA,WAAW;;AAEX;AACA;AACA;;AAEA,WAAW,mBAAO,CAAC,0CAAM;;AAEzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA,8BAA8B;AAC9B;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,8DAA8D,gBAAgB;AAC9E;;AAEA;;AAEA;;AAEA;AACA,+BAA+B;AAC/B;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iBAAiB,yBAAyB;AAC1C;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,0BAA0B,qCAAqC;AAC/D;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,mBAAmB,kBAAkB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,cAAc;AACd,KAAK;AACL,cAAc;AACd;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;;AAEA;AACA;AACA,8BAA8B,gBAAgB;AAC9C,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;;AAEA;AACA;AACA;AACA,YAAY,oBAAoB,oCAAoC;AACpE;;AAEA;;AAEA;AACA;AACA;;AAEA,UAAU;AACV;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA,iBAAiB,gBAAgB;AACjC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,kCAAkC,OAAO;AACzC;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,YAAY,YAAY;AACxB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,mDAAmD;AACnD,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,cAAc;AACrC;AACA;AACA;AACA;;AAEA,qBAAqB;AACrB;AACA,OAAO,OAAO;AACd;AACA;;AAEA;AACA,qBAAqB,mBAAmB;AACxC;AACA;AACA;;AAEA;AACA,qBAAqB,iBAAiB;AACtC;AACA;AACA,KAAK;;AAEL;AACA,GAAG;AACH;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB,oBAAoB;AAC3C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB,mBAAmB;AACxC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,YAAY;AACvB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,mBAAmB,EAAE;AACrB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,uBAAuB,kBAAkB;AACzC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;;;;;;AC3lBA;AACA;AACA;AACA,YAAY,MAAM;AAClB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AClBA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA,IAAI;AACJ,2BAA2B;AAC3B;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,qCAAqC;AACrC;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACjNA,8GAAa;;AAEb;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,uCAAuC;AACvC,wCAAwC;AACxC,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;;AAEA;AACA,8BAA8B;AAC9B;;AAEA,wDAAwD;;AAExD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,SAAS;AACT,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,wBAAwB;AACxB;AACA,aAAa;AACb;AACA,wBAAwB;AACxB;AACA,aAAa;AACb;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA,wCAAwC;AACxC;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;;AAEb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;;AAEA,uEAAuE;AACvE;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mEAAmE;AACnE;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA,IAAI,IAA6B;AACjC;AACA;;AAEA,IAAI,IAA0C;AAC9C,IAAI,iCAAmB,EAAE,mCAAE;AAC3B;AACA,KAAK;AAAA,oGAAC;AACN;;;;;;;;;;;;;ACv8BA;;AAEA;AACA;AACA;;AAEA,cAAc,mBAAO,CAAC,yEAAS;;AAE/B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,mCAAmC,OAAO;AAC1C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;AC/DA,iBAAiB;;AAEjB;AACA;AACA;;;;;;;;;;;;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;;;;;;;;;;;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,QAAQ,WAAW;;AAEnB;AACA;AACA;AACA,QAAQ,WAAW;;AAEnB;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA,QAAQ,WAAW;;AAEnB;AACA;AACA,QAAQ,UAAU;;AAElB;AACA;;;;;;;;;;;;;AClFA;;AAEA;AACA;AACA,iBAAiB,gBAAgB;AACjC;AACA;AACA;AACA,E;;;;;;;;;;;ACTA,iBAAiB;;AAEjB;AACA;AACA;;;;;;;;;;;;ACJA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,OAAO;AAClB,YAAY,MAAM;AAClB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACvJA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;;AAEA;AACA;AACA;AACA,mCAAmC,OAAO;AAC1C;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACpCA;AACA;AACA;AACA;AACA;AACA;;AAEA,yGAAyG,IAAI,GAAG,IAAI,SAAS,IAAI;;AAEjI;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,wEAAwE;AACxE;;AAEA;AACA,gBAAgB;AAChB;;AAEA;AACA;AACA;;AAEA;AACA;AACA,wEAAwE;AACxE,kFAAkF;AAClF;AACA;;AAEA;AACA;;;;;;;;;;;;ACtCA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,qCAAqC;;AAErC;AACA;AACA;;AAEA,2BAA2B;AAC3B;AACA;AACA;AACA,4BAA4B,UAAU;;;;;;;;;;;;;ACvLtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;;AAEb,eAAe,mBAAO,CAAC,sCAAK;;AAE5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,mBAAmB;AACtC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,mBAAmB,sCAAsC;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD;AACpD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,yBAAyB,gCAAgC;AACzD;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS,aAAa;AACtB;;AAEA;AACA;AACA;AACA,SAAS,aAAa;AACtB;;AAEA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;;AAET;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,mDAAmD;;AAEnD;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,+CAA+C,OAAO;AACtD;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,+BAA+B;;AAE/B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA,mBAAmB,8BAA8B;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;;;AAGA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,SAAS;AACT;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;;AAEzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,gCAAgC;AAC3C;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP,8BAA8B;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,WAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,aAAa;AACb;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;;AAEA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,eAAe;AACf;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,WAAW;AACX;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,aAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD;AACxD;AACA,OAAO;AACP,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,SAAS;AACT;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;;AAEP;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qDAAqD;AACrD;AACA,WAAW;AACX;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,uBAAuB,4BAA4B;AACnD;AACA;AACA;AACA,+DAA+D;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,yBAAyB,4BAA4B;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,OAAO;AACP;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,SAAS;AACT;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,GAAG;;AAEH;AACA;;;;;;;;;;;;;ACh0DA;AACa;;AAEb;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oBAAoB;AACpB,0BAA0B;AAC1B;AACA;AACA;AACA,yDAAyD;AACzD,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL,iDAAiD;AACjD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,kBAAkB,OAAO;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAI,IAA0B;AAC9B;AACA;;;;;;;;;;;;;ACrsBA;AACA;AACA;;AAEA,UAAU,mBAAO,CAAC,yDAAO;AACzB,aAAa,mBAAO,CAAC,gGAAkB;AACvC,cAAc,mBAAO,CAAC,iEAAW;AACjC,YAAY,mBAAO,CAAC,gFAAO;;AAE3B;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB,mBAAO,CAAC,iEAAW;AACrC,iBAAiB,mBAAO,CAAC,+DAAU;;;;;;;;;;;;;AC5FnC;AACA;AACA;;AAEA,UAAU,mBAAO,CAAC,sEAAkB;AACpC,aAAa,mBAAO,CAAC,+DAAU;AAC/B,cAAc,mBAAO,CAAC,oEAAmB;AACzC,aAAa,mBAAO,CAAC,gGAAkB;AACvC,SAAS,mBAAO,CAAC,uDAAM;AACvB,WAAW,mBAAO,CAAC,8DAAgB;AACnC,YAAY,mBAAO,CAAC,gFAAO;AAC3B,cAAc,mBAAO,CAAC,gDAAS;AAC/B,cAAc,mBAAO,CAAC,8CAAQ;;AAE9B;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,YAAY,QAAQ;AACpB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,QAAQ;AACpB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,QAAQ;AACpB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,QAAQ;AACpB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,QAAQ;AACpB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,SAAS;AACpB,YAAY,QAAQ;AACpB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qBAAqB,2BAA2B;AAChD;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG,OAAO;AACV;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,iBAAiB,gBAAgB;AACjC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,OAAO;AACP,KAAK;;AAEL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC3jBA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,WAAW,oBAAoB;AAC/B,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACtBA;AACA;AACA;;AAEA,aAAa,mBAAO,CAAC,gGAAkB;AACvC,cAAc,mBAAO,CAAC,oEAAmB;AACzC,cAAc,mBAAO,CAAC,kDAAU;AAChC,SAAS,mBAAO,CAAC,uDAAM;AACvB,WAAW,mBAAO,CAAC,8DAAgB;AACnC,YAAY,mBAAO,CAAC,gFAAO;AAC3B,cAAc,mBAAO,CAAC,gDAAS;AAC/B,aAAa,mBAAO,CAAC,wDAAa;;AAElC;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAmB,mCAAmC;AACtD,KAAK;AACL,mBAAmB,qBAAqB;AACxC;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,aAAa,+BAA+B;AAC5C;AACA;AACA;;AAEA,aAAa,4BAA4B;AACzC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAmB,sBAAsB;AACzC;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA,iBAAiB,0BAA0B;AAC3C;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,YAAY,OAAO;AACnB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,YAAY,OAAO;AACnB;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;ACpbA;AACA;AACA;;AAEA,eAAe,mBAAO,CAAC,kDAAU;AACjC,YAAY,mBAAO,CAAC,gFAAO;;AAE3B;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,OAAO;AAClB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;AC1EA;AACA;AACA;AACA;AACA;;AAEA,2BAA2B,mBAAO,CAAC,gFAAS;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;;;;;;;ACjMA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,mBAAmB,mBAAO,CAAC,sCAAI;;AAE/B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;;AAEA;AACA;;AAEA;AACA;AACA,cAAc;AACd;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,iBAAiB;AACpC;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA,aAAa,SAAS;AACtB,4BAA4B;AAC5B;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA,aAAa,8BAA8B;AAC3C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,yCAAyC,SAAS;AAClD;AACA;AACA;AACA;AACA,yCAAyC,SAAS;AAClD;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,MAAM;AACjB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;AChOA,iBAAiB;;AAEjB;AACA;AACA;;;;;;;;;;;;ACJA;;AAEA;AACA;AACA;;AAEA,cAAc,mBAAO,CAAC,8EAAS;AAC/B,YAAY,mBAAO,CAAC,+FAAa;AACjC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC,UAAU;AACV;;AAEA;AACA;;AAEA;AACA,uBAAuB;AACvB;AACA;AACA,GAAG;AACH;AACA,mBAAmB,iBAAiB;AACpC;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,MAAM;AACjB,YAAY,OAAO;AACnB;AACA;;AAEA;AACA;AACA,iCAAiC;AACjC;AACA;;AAEA;AACA;;AAEA;AACA,6BAA6B;AAC7B,GAAG;AACH,mBAAmB,iBAAiB;AACpC;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,wCAAwC;AACxC,KAAK,yBAAyB;AAC9B,qBAAqB,gBAAgB;AACrC;AACA;AACA,KAAK,mDAAmD;AACxD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC3IA;AACA;AACA;;AAEA,YAAY,mBAAO,CAAC,gFAAO;AAC3B,cAAc,mBAAO,CAAC,oEAAmB;AACzC,aAAa,mBAAO,CAAC,yFAAU;AAC/B,cAAc,mBAAO,CAAC,8EAAS;AAC/B,YAAY,mBAAO,CAAC,+FAAa;;AAEjC;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,SAAS;AACpB;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,0BAA0B;AAC1B,sBAAsB;AACtB;;AAEA;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA,qFAAqF;AACrF;;AAEA;AACA;AACA;AACA;AACA,KAAK,OAAO;AACZ;AACA;AACA,GAAG,qCAAqC;AACxC;AACA;AACA,KAAK;AACL;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,OAAO;AACnB;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,YAAY,oBAAoB;AAChC;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,qBAAqB;AAChC,YAAY,cAAc;AAC1B;AACA;AACA;;AAEA;AACA;AACA,2DAA2D;AAC3D;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC7ZA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;;ACnBA;;AAEA;AACA;;AAEA;;AAEA,4BAA4B,iBAAiB;AAC7C;AACA;;AAEA;AACA;;;;;;;;;;;;ACZA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA,4CAA4C;;AAE5C;;;;;;;;;;;;;ACnBA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEuC;;AAEpD,gBAAgB,0EAAc,EAAE,OAAO;AACxB,sEAAO,EAAC;;;;;;;;;;;;;ACdvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACiC;;AAEjC;AACmD;AACN;AACS;AACH;AACP;;AAE5C;AACO,yBAAyB,OAAO,KAAK;AAC5C;AACA;AACA;AACA;AACA,CAAC;AACD;AACA,kBAAkB,0CAAS;AAC3B,yBAAyB,oDAAmB;;AAE5C;AACA;AACA,IAAI,qDAAU;AACd,oBAAoB,qDAAoB;AACxC,gBAAgB,iDAAgB;AAChC,qBAAqB,sDAAqB;AAC1C;;AAEA;AACA;AACA;AACA,WAAW,gDAAU,KAAK,sEAA6B;AACvD;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,gDAAU;;AAEtC,MAAM,oEAA2B;AACjC,MAAM,mEAA0B;AAChC,MAAM,sEAA6B;AACnC,MAAM,+DAAsB;AAC5B,MAAM,2EAAkC;AACxC,MAAM,0EAAiC;AACvC,MAAM,8EAAqC;AAC3C,MAAM,wEAA+B;;AAErC,MAAM,gEAA8B;AACpC,MAAM,gEAA8B;AACpC,MAAM,+DAA6B;AACnC,MAAM,mEAAiC;AACvC,MAAM,mEAAiC;AACvC;AACA;AACA,WAAW,kDAAW,KAAK,wEAA8B;AACzD;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,kDAAW;;AAEvC,MAAM,sEAA4B;AAClC,MAAM,wEAA8B;AACpC,MAAM,iEAAuB;AAC7B,MAAM,sEAA4B;AAClC,MAAM,wEAA8B;AACpC,MAAM,0EAAgC;AACtC,MAAM,wEAA8B;;AAEpC,MAAM,gEAA8B;AACpC,MAAM,gEAA8B;AACpC,MAAM,+DAA6B;AACnC,MAAM,mEAAiC;AACvC;AACA;AACA,WAAW,4CAAQ,KAAK,kEAA2B;AACnD;AACA;AACA;AACA;AACA;AACA,4BAA4B,4CAAQ;;AAEpC,MAAM,gEAAyB;AAC/B,MAAM,mEAA4B;AAClC,MAAM,kEAA2B;AACjC,MAAM,gEAAyB;;AAE/B;;AAEA,MAAM,+DAA6B;AACnC,MAAM,mEAAiC;AACvC;AACA;AACA,WAAW,gDAAU;AACrB;AACA;AACA;AACA;AACA;AACA,4BAA4B,gDAAU;;AAEtC,MAAM,wEAA+B;AACrC,MAAM,yEAAgC;AACtC,MAAM,oEAA2B;AACjC,MAAM,uEAA8B;AACpC,MAAM,wEAA+B;AACrC,MAAM,6EAAoC;AAC1C,MAAM,oEAA2B;;AAEjC,MAAM,gEAA8B;AACpC,MAAM,+DAA6B;AACnC,MAAM,mEAAiC;AACvC,MAAM,mEAAiC;AACvC;AACA;AACA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;AACwB;;AAErC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;;AAEgD;AACM;;AAE/C;AACP;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,0BAA0B;AAC1B;;AAEA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,0BAA0B;AAC1B;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,IAAI,iEAA6B;AACjC;AACA;AACA,WAAW,QAAQ,sBAAsB;AACzC;AACA;AACA,KAAK;AACL;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,qBAAqB;AACrB;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI,iEAA6B;AACjC;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA,yBAAyB,uDAAmB;AAC5C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,SAAS;AACT;AACA,OAAO;;AAEP;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP,EAAE,iEAA6B;AAC/B;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;;;;;;AC1tBA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;AACN;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;;;;;;;;;;;;AC/CA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;AACwB;AACrC,gBAAgB,6CAAS;;AAElB;AACP;;AAEA;AACA;AACA;;AAEA,yBAAyB,uDAAmB;;AAE5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2DAA2D,YAAY;AACvE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA,yDAAyD,oBAAoB;AAC7E,yDAAyD;AACzD;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,KAAK;AACL;AACA;;;;;;;;;;;;;AC3LA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;;AAEc;AACM;;AAE1B;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,8BAA8B,0CAAQ;AACtC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAE,8DAA6B;AAC/B;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,GAAG;AACH;;AAEO;AACP;AACA;AACA;AACA,yBAAyB,oDAAmB;;AAE5C;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA,qBAAqB,0CAAQ;AAC7B;AACA;AACA,oBAAoB,0CAAQ;AAC5B;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB,0CAAQ;AAC1B;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,8DAA6B;AAC/B;AACA;AACA,GAAG;AACH;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEO;AACP;AACA;AACA;AACA;AACA,yBAAyB,oDAAmB;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;;;;;;;;;;;;AC7TA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;;AAEqB;AACkB;AACO;;AAEX;AACM;;AAE/C;AACP,yBAAyB,oDAAmB;;AAE5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA,gCAAgC,6DAAqB;AACrD;AACA;AACA;AACA,0BAA0B,0EAAgB;AAC1C;AACA,MAAM,0CAAS;AACf;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC1FA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;;AAEqB;AAClC;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,iDAAgB;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA,GAAG;AACH;;;;;;;;;;;;;AClDA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;;AAEN;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACvBA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;;AAEN;AACP;;AAEA;AACA;AACA,aAAa,yCAAyC;AACtD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AC9BA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;;AAEqB;AACc;AACM;;AAE/C;AACP;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA,KAAK;AACL;AACA;;AAEO;AACP,yBAAyB,oDAAmB;;AAE5C;AACA;AACA,WAAW;AACX;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;;AAEP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA,aAAa;AACb,WAAW;AACX;AACA;AACA;AACA;AACA;AACA,2CAA2C;AAC3C;AACA,eAAe;AACf,aAAa;AACb;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,8DAA6B;AAC/B;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,IAAI,iDAAgB;AACpB;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACrLA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;;AAEN;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B,KAAK;AACL;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AClCA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;;AAEqB;;AAE3B;AACP,yBAAyB,oDAAmB;AAC5C;AACA;;AAEA;AACA;AACA,IAAI,iDAAgB;AACpB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACnEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;AACqB;;AAE3B;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX,SAAS;AACT;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEO;AACP;AACA,2BAA2B;AAC3B;AACA,OAAO,OAAO,oDAAmB;AACjC;AACA;;AAEA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,qBAAqB,gCAAgC;AACrD;AACA;AACA;AACA,UAAU,iDAAgB;AAC1B;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA,KAAK;AACL;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA;AACA,SAAS;AACT;AACA;AACA,WAAW;AACX;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACvUA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACa;;AAEb;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,YAAY,QAAQ;AACpB;AACO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,SAAS;AACpB;AACO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB;AACA;AACO;AACP,SAAS,UAAU;;AAEnB;AACA,kBAAkB;;AAElB;AACA;AACA;AACA;AACA;;AAEA,kCAAkC;AAClC;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,wDAAwD;AACxD;AACA;AACA;AACA,GAAG;AACH,0DAA0D;AAC1D;AACA;AACA;AACA,GAAG,OAAO;AACV;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,uCAAuC,aAAa;AACpD,GAAG,IAAI;AACP;;;;;;;;;;;;;AClMa;;AAEb;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","file":"reach-debug.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"webcom/webcom\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"webcom/webcom\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Reach\"] = factory(require(\"webcom/webcom\"));\n\telse\n\t\troot[\"Reach\"] = factory(root[\"webcom/webcom\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE_webcom_webcom__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/Reach.js\");\n","module.exports = after\n\nfunction after(count, callback, err_cb) {\n    var bail = false\n    err_cb = err_cb || noop\n    proxy.count = count\n\n    return (count === 0) ? callback() : proxy\n\n    function proxy(err, result) {\n        if (proxy.count <= 0) {\n            throw new Error('after called too many times')\n        }\n        --proxy.count\n\n        // after first error, rest are passed to err_cb\n        if (err) {\n            bail = true\n            callback(err)\n            // future error callbacks will go to error handler\n            callback = err_cb\n        } else if (proxy.count === 0 && !bail) {\n            callback(null, result)\n        }\n    }\n}\n\nfunction noop() {}\n","/**\n * An abstraction for slicing an arraybuffer even when\n * ArrayBuffer.prototype.slice is not supported\n *\n * @api public\n */\n\nmodule.exports = function(arraybuffer, start, end) {\n  var bytes = arraybuffer.byteLength;\n  start = start || 0;\n  end = end || bytes;\n\n  if (arraybuffer.slice) { return arraybuffer.slice(start, end); }\n\n  if (start < 0) { start += bytes; }\n  if (end < 0) { end += bytes; }\n  if (end > bytes) { end = bytes; }\n\n  if (start >= bytes || start >= end || bytes === 0) {\n    return new ArrayBuffer(0);\n  }\n\n  var abv = new Uint8Array(arraybuffer);\n  var result = new Uint8Array(end - start);\n  for (var i = start, ii = 0; i < end; i++, ii++) {\n    result[ii] = abv[i];\n  }\n  return result.buffer;\n};\n","\n/**\n * Expose `Backoff`.\n */\n\nmodule.exports = Backoff;\n\n/**\n * Initialize backoff timer with `opts`.\n *\n * - `min` initial timeout in milliseconds [100]\n * - `max` max timeout [10000]\n * - `jitter` [0]\n * - `factor` [2]\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction Backoff(opts) {\n  opts = opts || {};\n  this.ms = opts.min || 100;\n  this.max = opts.max || 10000;\n  this.factor = opts.factor || 2;\n  this.jitter = opts.jitter > 0 && opts.jitter <= 1 ? opts.jitter : 0;\n  this.attempts = 0;\n}\n\n/**\n * Return the backoff duration.\n *\n * @return {Number}\n * @api public\n */\n\nBackoff.prototype.duration = function(){\n  var ms = this.ms * Math.pow(this.factor, this.attempts++);\n  if (this.jitter) {\n    var rand =  Math.random();\n    var deviation = Math.floor(rand * this.jitter * ms);\n    ms = (Math.floor(rand * 10) & 1) == 0  ? ms - deviation : ms + deviation;\n  }\n  return Math.min(ms, this.max) | 0;\n};\n\n/**\n * Reset the number of attempts.\n *\n * @api public\n */\n\nBackoff.prototype.reset = function(){\n  this.attempts = 0;\n};\n\n/**\n * Set the minimum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMin = function(min){\n  this.ms = min;\n};\n\n/**\n * Set the maximum duration\n *\n * @api public\n */\n\nBackoff.prototype.setMax = function(max){\n  this.max = max;\n};\n\n/**\n * Set the jitter\n *\n * @api public\n */\n\nBackoff.prototype.setJitter = function(jitter){\n  this.jitter = jitter;\n};\n\n","/*\n * base64-arraybuffer\n * https://github.com/niklasvh/base64-arraybuffer\n *\n * Copyright (c) 2012 Niklas von Hertzen\n * Licensed under the MIT license.\n */\n(function(){\n  \"use strict\";\n\n  var chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n\n  // Use a lookup table to find the index.\n  var lookup = new Uint8Array(256);\n  for (var i = 0; i < chars.length; i++) {\n    lookup[chars.charCodeAt(i)] = i;\n  }\n\n  exports.encode = function(arraybuffer) {\n    var bytes = new Uint8Array(arraybuffer),\n    i, len = bytes.length, base64 = \"\";\n\n    for (i = 0; i < len; i+=3) {\n      base64 += chars[bytes[i] >> 2];\n      base64 += chars[((bytes[i] & 3) << 4) | (bytes[i + 1] >> 4)];\n      base64 += chars[((bytes[i + 1] & 15) << 2) | (bytes[i + 2] >> 6)];\n      base64 += chars[bytes[i + 2] & 63];\n    }\n\n    if ((len % 3) === 2) {\n      base64 = base64.substring(0, base64.length - 1) + \"=\";\n    } else if (len % 3 === 1) {\n      base64 = base64.substring(0, base64.length - 2) + \"==\";\n    }\n\n    return base64;\n  };\n\n  exports.decode =  function(base64) {\n    var bufferLength = base64.length * 0.75,\n    len = base64.length, i, p = 0,\n    encoded1, encoded2, encoded3, encoded4;\n\n    if (base64[base64.length - 1] === \"=\") {\n      bufferLength--;\n      if (base64[base64.length - 2] === \"=\") {\n        bufferLength--;\n      }\n    }\n\n    var arraybuffer = new ArrayBuffer(bufferLength),\n    bytes = new Uint8Array(arraybuffer);\n\n    for (i = 0; i < len; i+=4) {\n      encoded1 = lookup[base64.charCodeAt(i)];\n      encoded2 = lookup[base64.charCodeAt(i+1)];\n      encoded3 = lookup[base64.charCodeAt(i+2)];\n      encoded4 = lookup[base64.charCodeAt(i+3)];\n\n      bytes[p++] = (encoded1 << 2) | (encoded2 >> 4);\n      bytes[p++] = ((encoded2 & 15) << 4) | (encoded3 >> 2);\n      bytes[p++] = ((encoded3 & 3) << 6) | (encoded4 & 63);\n    }\n\n    return arraybuffer;\n  };\n})();\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  for (var i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/**\r\n * Create a blob builder even when vendor prefixes exist\r\n */\r\n\r\nvar BlobBuilder = typeof BlobBuilder !== 'undefined' ? BlobBuilder :\r\n  typeof WebKitBlobBuilder !== 'undefined' ? WebKitBlobBuilder :\r\n  typeof MSBlobBuilder !== 'undefined' ? MSBlobBuilder :\r\n  typeof MozBlobBuilder !== 'undefined' ? MozBlobBuilder : \r\n  false;\r\n\r\n/**\r\n * Check if Blob constructor is supported\r\n */\r\n\r\nvar blobSupported = (function() {\r\n  try {\r\n    var a = new Blob(['hi']);\r\n    return a.size === 2;\r\n  } catch(e) {\r\n    return false;\r\n  }\r\n})();\r\n\r\n/**\r\n * Check if Blob constructor supports ArrayBufferViews\r\n * Fails in Safari 6, so we need to map to ArrayBuffers there.\r\n */\r\n\r\nvar blobSupportsArrayBufferView = blobSupported && (function() {\r\n  try {\r\n    var b = new Blob([new Uint8Array([1,2])]);\r\n    return b.size === 2;\r\n  } catch(e) {\r\n    return false;\r\n  }\r\n})();\r\n\r\n/**\r\n * Check if BlobBuilder is supported\r\n */\r\n\r\nvar blobBuilderSupported = BlobBuilder\r\n  && BlobBuilder.prototype.append\r\n  && BlobBuilder.prototype.getBlob;\r\n\r\n/**\r\n * Helper function that maps ArrayBufferViews to ArrayBuffers\r\n * Used by BlobBuilder constructor and old browsers that didn't\r\n * support it in the Blob constructor.\r\n */\r\n\r\nfunction mapArrayBufferViews(ary) {\r\n  return ary.map(function(chunk) {\r\n    if (chunk.buffer instanceof ArrayBuffer) {\r\n      var buf = chunk.buffer;\r\n\r\n      // if this is a subarray, make a copy so we only\r\n      // include the subarray region from the underlying buffer\r\n      if (chunk.byteLength !== buf.byteLength) {\r\n        var copy = new Uint8Array(chunk.byteLength);\r\n        copy.set(new Uint8Array(buf, chunk.byteOffset, chunk.byteLength));\r\n        buf = copy.buffer;\r\n      }\r\n\r\n      return buf;\r\n    }\r\n\r\n    return chunk;\r\n  });\r\n}\r\n\r\nfunction BlobBuilderConstructor(ary, options) {\r\n  options = options || {};\r\n\r\n  var bb = new BlobBuilder();\r\n  mapArrayBufferViews(ary).forEach(function(part) {\r\n    bb.append(part);\r\n  });\r\n\r\n  return (options.type) ? bb.getBlob(options.type) : bb.getBlob();\r\n};\r\n\r\nfunction BlobConstructor(ary, options) {\r\n  return new Blob(mapArrayBufferViews(ary), options || {});\r\n};\r\n\r\nif (typeof Blob !== 'undefined') {\r\n  BlobBuilderConstructor.prototype = Blob.prototype;\r\n  BlobConstructor.prototype = Blob.prototype;\r\n}\r\n\r\nmodule.exports = (function() {\r\n  if (blobSupported) {\r\n    return blobSupportsArrayBufferView ? Blob : BlobConstructor;\r\n  } else if (blobBuilderSupported) {\r\n    return BlobBuilderConstructor;\r\n  } else {\r\n    return undefined;\r\n  }\r\n})();\r\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","/**\n * Slice reference.\n */\n\nvar slice = [].slice;\n\n/**\n * Bind `obj` to `fn`.\n *\n * @param {Object} obj\n * @param {Function|String} fn or string\n * @return {Function}\n * @api public\n */\n\nmodule.exports = function(obj, fn){\n  if ('string' == typeof fn) fn = obj[fn];\n  if ('function' != typeof fn) throw new Error('bind() requires a function');\n  var args = slice.call(arguments, 2);\n  return function(){\n    return fn.apply(obj, args.concat(slice.call(arguments)));\n  }\n};\n","\r\n/**\r\n * Expose `Emitter`.\r\n */\r\n\r\nif (typeof module !== 'undefined') {\r\n  module.exports = Emitter;\r\n}\r\n\r\n/**\r\n * Initialize a new `Emitter`.\r\n *\r\n * @api public\r\n */\r\n\r\nfunction Emitter(obj) {\r\n  if (obj) return mixin(obj);\r\n};\r\n\r\n/**\r\n * Mixin the emitter properties.\r\n *\r\n * @param {Object} obj\r\n * @return {Object}\r\n * @api private\r\n */\r\n\r\nfunction mixin(obj) {\r\n  for (var key in Emitter.prototype) {\r\n    obj[key] = Emitter.prototype[key];\r\n  }\r\n  return obj;\r\n}\r\n\r\n/**\r\n * Listen on the given `event` with `fn`.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.on =\r\nEmitter.prototype.addEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n  (this._callbacks['$' + event] = this._callbacks['$' + event] || [])\r\n    .push(fn);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Adds an `event` listener that will be invoked a single\r\n * time then automatically removed.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.once = function(event, fn){\r\n  function on() {\r\n    this.off(event, on);\r\n    fn.apply(this, arguments);\r\n  }\r\n\r\n  on.fn = fn;\r\n  this.on(event, on);\r\n  return this;\r\n};\r\n\r\n/**\r\n * Remove the given callback for `event` or all\r\n * registered callbacks.\r\n *\r\n * @param {String} event\r\n * @param {Function} fn\r\n * @return {Emitter}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.off =\r\nEmitter.prototype.removeListener =\r\nEmitter.prototype.removeAllListeners =\r\nEmitter.prototype.removeEventListener = function(event, fn){\r\n  this._callbacks = this._callbacks || {};\r\n\r\n  // all\r\n  if (0 == arguments.length) {\r\n    this._callbacks = {};\r\n    return this;\r\n  }\r\n\r\n  // specific event\r\n  var callbacks = this._callbacks['$' + event];\r\n  if (!callbacks) return this;\r\n\r\n  // remove all handlers\r\n  if (1 == arguments.length) {\r\n    delete this._callbacks['$' + event];\r\n    return this;\r\n  }\r\n\r\n  // remove specific handler\r\n  var cb;\r\n  for (var i = 0; i < callbacks.length; i++) {\r\n    cb = callbacks[i];\r\n    if (cb === fn || cb.fn === fn) {\r\n      callbacks.splice(i, 1);\r\n      break;\r\n    }\r\n  }\r\n  return this;\r\n};\r\n\r\n/**\r\n * Emit `event` with the given args.\r\n *\r\n * @param {String} event\r\n * @param {Mixed} ...\r\n * @return {Emitter}\r\n */\r\n\r\nEmitter.prototype.emit = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  var args = [].slice.call(arguments, 1)\r\n    , callbacks = this._callbacks['$' + event];\r\n\r\n  if (callbacks) {\r\n    callbacks = callbacks.slice(0);\r\n    for (var i = 0, len = callbacks.length; i < len; ++i) {\r\n      callbacks[i].apply(this, args);\r\n    }\r\n  }\r\n\r\n  return this;\r\n};\r\n\r\n/**\r\n * Return array of callbacks for `event`.\r\n *\r\n * @param {String} event\r\n * @return {Array}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.listeners = function(event){\r\n  this._callbacks = this._callbacks || {};\r\n  return this._callbacks['$' + event] || [];\r\n};\r\n\r\n/**\r\n * Check if this emitter has `event` handlers.\r\n *\r\n * @param {String} event\r\n * @return {Boolean}\r\n * @api public\r\n */\r\n\r\nEmitter.prototype.hasListeners = function(event){\r\n  return !! this.listeners(event).length;\r\n};\r\n","\nmodule.exports = function(a, b){\n  var fn = function(){};\n  fn.prototype = b.prototype;\n  a.prototype = new fn;\n  a.prototype.constructor = a;\n};","require('../../modules/es6.array.find');\nmodule.exports = require('../../modules/_core').Array.find;\n","module.exports = function (it) {\n  if (typeof it != 'function') throw TypeError(it + ' is not a function!');\n  return it;\n};\n","// 22.1.3.31 Array.prototype[@@unscopables]\nvar UNSCOPABLES = require('./_wks')('unscopables');\nvar ArrayProto = Array.prototype;\nif (ArrayProto[UNSCOPABLES] == undefined) require('./_hide')(ArrayProto, UNSCOPABLES, {});\nmodule.exports = function (key) {\n  ArrayProto[UNSCOPABLES][key] = true;\n};\n","var isObject = require('./_is-object');\nmodule.exports = function (it) {\n  if (!isObject(it)) throw TypeError(it + ' is not an object!');\n  return it;\n};\n","// 0 -> Array#forEach\n// 1 -> Array#map\n// 2 -> Array#filter\n// 3 -> Array#some\n// 4 -> Array#every\n// 5 -> Array#find\n// 6 -> Array#findIndex\nvar ctx = require('./_ctx');\nvar IObject = require('./_iobject');\nvar toObject = require('./_to-object');\nvar toLength = require('./_to-length');\nvar asc = require('./_array-species-create');\nmodule.exports = function (TYPE, $create) {\n  var IS_MAP = TYPE == 1;\n  var IS_FILTER = TYPE == 2;\n  var IS_SOME = TYPE == 3;\n  var IS_EVERY = TYPE == 4;\n  var IS_FIND_INDEX = TYPE == 6;\n  var NO_HOLES = TYPE == 5 || IS_FIND_INDEX;\n  var create = $create || asc;\n  return function ($this, callbackfn, that) {\n    var O = toObject($this);\n    var self = IObject(O);\n    var f = ctx(callbackfn, that, 3);\n    var length = toLength(self.length);\n    var index = 0;\n    var result = IS_MAP ? create($this, length) : IS_FILTER ? create($this, 0) : undefined;\n    var val, res;\n    for (;length > index; index++) if (NO_HOLES || index in self) {\n      val = self[index];\n      res = f(val, index, O);\n      if (TYPE) {\n        if (IS_MAP) result[index] = res;   // map\n        else if (res) switch (TYPE) {\n          case 3: return true;             // some\n          case 5: return val;              // find\n          case 6: return index;            // findIndex\n          case 2: result.push(val);        // filter\n        } else if (IS_EVERY) return false; // every\n      }\n    }\n    return IS_FIND_INDEX ? -1 : IS_SOME || IS_EVERY ? IS_EVERY : result;\n  };\n};\n","var isObject = require('./_is-object');\nvar isArray = require('./_is-array');\nvar SPECIES = require('./_wks')('species');\n\nmodule.exports = function (original) {\n  var C;\n  if (isArray(original)) {\n    C = original.constructor;\n    // cross-realm fallback\n    if (typeof C == 'function' && (C === Array || isArray(C.prototype))) C = undefined;\n    if (isObject(C)) {\n      C = C[SPECIES];\n      if (C === null) C = undefined;\n    }\n  } return C === undefined ? Array : C;\n};\n","// 9.4.2.3 ArraySpeciesCreate(originalArray, length)\nvar speciesConstructor = require('./_array-species-constructor');\n\nmodule.exports = function (original, length) {\n  return new (speciesConstructor(original))(length);\n};\n","var toString = {}.toString;\n\nmodule.exports = function (it) {\n  return toString.call(it).slice(8, -1);\n};\n","var core = module.exports = { version: '2.6.3' };\nif (typeof __e == 'number') __e = core; // eslint-disable-line no-undef\n","// optional / simple context binding\nvar aFunction = require('./_a-function');\nmodule.exports = function (fn, that, length) {\n  aFunction(fn);\n  if (that === undefined) return fn;\n  switch (length) {\n    case 1: return function (a) {\n      return fn.call(that, a);\n    };\n    case 2: return function (a, b) {\n      return fn.call(that, a, b);\n    };\n    case 3: return function (a, b, c) {\n      return fn.call(that, a, b, c);\n    };\n  }\n  return function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","// 7.2.1 RequireObjectCoercible(argument)\nmodule.exports = function (it) {\n  if (it == undefined) throw TypeError(\"Can't call method on  \" + it);\n  return it;\n};\n","// Thank's IE8 for his funny defineProperty\nmodule.exports = !require('./_fails')(function () {\n  return Object.defineProperty({}, 'a', { get: function () { return 7; } }).a != 7;\n});\n","var isObject = require('./_is-object');\nvar document = require('./_global').document;\n// typeof document.createElement is 'object' in old IE\nvar is = isObject(document) && isObject(document.createElement);\nmodule.exports = function (it) {\n  return is ? document.createElement(it) : {};\n};\n","var global = require('./_global');\nvar core = require('./_core');\nvar hide = require('./_hide');\nvar redefine = require('./_redefine');\nvar ctx = require('./_ctx');\nvar PROTOTYPE = 'prototype';\n\nvar $export = function (type, name, source) {\n  var IS_FORCED = type & $export.F;\n  var IS_GLOBAL = type & $export.G;\n  var IS_STATIC = type & $export.S;\n  var IS_PROTO = type & $export.P;\n  var IS_BIND = type & $export.B;\n  var target = IS_GLOBAL ? global : IS_STATIC ? global[name] || (global[name] = {}) : (global[name] || {})[PROTOTYPE];\n  var exports = IS_GLOBAL ? core : core[name] || (core[name] = {});\n  var expProto = exports[PROTOTYPE] || (exports[PROTOTYPE] = {});\n  var key, own, out, exp;\n  if (IS_GLOBAL) source = name;\n  for (key in source) {\n    // contains in native\n    own = !IS_FORCED && target && target[key] !== undefined;\n    // export native or passed\n    out = (own ? target : source)[key];\n    // bind timers to global for call from export context\n    exp = IS_BIND && own ? ctx(out, global) : IS_PROTO && typeof out == 'function' ? ctx(Function.call, out) : out;\n    // extend global\n    if (target) redefine(target, key, out, type & $export.U);\n    // export\n    if (exports[key] != out) hide(exports, key, exp);\n    if (IS_PROTO && expProto[key] != out) expProto[key] = out;\n  }\n};\nglobal.core = core;\n// type bitmap\n$export.F = 1;   // forced\n$export.G = 2;   // global\n$export.S = 4;   // static\n$export.P = 8;   // proto\n$export.B = 16;  // bind\n$export.W = 32;  // wrap\n$export.U = 64;  // safe\n$export.R = 128; // real proto method for `library`\nmodule.exports = $export;\n","module.exports = function (exec) {\n  try {\n    return !!exec();\n  } catch (e) {\n    return true;\n  }\n};\n","// https://github.com/zloirock/core-js/issues/86#issuecomment-115759028\nvar global = module.exports = typeof window != 'undefined' && window.Math == Math\n  ? window : typeof self != 'undefined' && self.Math == Math ? self\n  // eslint-disable-next-line no-new-func\n  : Function('return this')();\nif (typeof __g == 'number') __g = global; // eslint-disable-line no-undef\n","var hasOwnProperty = {}.hasOwnProperty;\nmodule.exports = function (it, key) {\n  return hasOwnProperty.call(it, key);\n};\n","var dP = require('./_object-dp');\nvar createDesc = require('./_property-desc');\nmodule.exports = require('./_descriptors') ? function (object, key, value) {\n  return dP.f(object, key, createDesc(1, value));\n} : function (object, key, value) {\n  object[key] = value;\n  return object;\n};\n","module.exports = !require('./_descriptors') && !require('./_fails')(function () {\n  return Object.defineProperty(require('./_dom-create')('div'), 'a', { get: function () { return 7; } }).a != 7;\n});\n","// fallback for non-array-like ES3 and non-enumerable old V8 strings\nvar cof = require('./_cof');\n// eslint-disable-next-line no-prototype-builtins\nmodule.exports = Object('z').propertyIsEnumerable(0) ? Object : function (it) {\n  return cof(it) == 'String' ? it.split('') : Object(it);\n};\n","// 7.2.2 IsArray(argument)\nvar cof = require('./_cof');\nmodule.exports = Array.isArray || function isArray(arg) {\n  return cof(arg) == 'Array';\n};\n","module.exports = function (it) {\n  return typeof it === 'object' ? it !== null : typeof it === 'function';\n};\n","module.exports = false;\n","var anObject = require('./_an-object');\nvar IE8_DOM_DEFINE = require('./_ie8-dom-define');\nvar toPrimitive = require('./_to-primitive');\nvar dP = Object.defineProperty;\n\nexports.f = require('./_descriptors') ? Object.defineProperty : function defineProperty(O, P, Attributes) {\n  anObject(O);\n  P = toPrimitive(P, true);\n  anObject(Attributes);\n  if (IE8_DOM_DEFINE) try {\n    return dP(O, P, Attributes);\n  } catch (e) { /* empty */ }\n  if ('get' in Attributes || 'set' in Attributes) throw TypeError('Accessors not supported!');\n  if ('value' in Attributes) O[P] = Attributes.value;\n  return O;\n};\n","module.exports = function (bitmap, value) {\n  return {\n    enumerable: !(bitmap & 1),\n    configurable: !(bitmap & 2),\n    writable: !(bitmap & 4),\n    value: value\n  };\n};\n","var global = require('./_global');\nvar hide = require('./_hide');\nvar has = require('./_has');\nvar SRC = require('./_uid')('src');\nvar TO_STRING = 'toString';\nvar $toString = Function[TO_STRING];\nvar TPL = ('' + $toString).split(TO_STRING);\n\nrequire('./_core').inspectSource = function (it) {\n  return $toString.call(it);\n};\n\n(module.exports = function (O, key, val, safe) {\n  var isFunction = typeof val == 'function';\n  if (isFunction) has(val, 'name') || hide(val, 'name', key);\n  if (O[key] === val) return;\n  if (isFunction) has(val, SRC) || hide(val, SRC, O[key] ? '' + O[key] : TPL.join(String(key)));\n  if (O === global) {\n    O[key] = val;\n  } else if (!safe) {\n    delete O[key];\n    hide(O, key, val);\n  } else if (O[key]) {\n    O[key] = val;\n  } else {\n    hide(O, key, val);\n  }\n// add fake Function#toString for correct work wrapped methods / constructors with methods like LoDash isNative\n})(Function.prototype, TO_STRING, function toString() {\n  return typeof this == 'function' && this[SRC] || $toString.call(this);\n});\n","var core = require('./_core');\nvar global = require('./_global');\nvar SHARED = '__core-js_shared__';\nvar store = global[SHARED] || (global[SHARED] = {});\n\n(module.exports = function (key, value) {\n  return store[key] || (store[key] = value !== undefined ? value : {});\n})('versions', []).push({\n  version: core.version,\n  mode: require('./_library') ? 'pure' : 'global',\n  copyright: '© 2019 Denis Pushkarev (zloirock.ru)'\n});\n","// 7.1.4 ToInteger\nvar ceil = Math.ceil;\nvar floor = Math.floor;\nmodule.exports = function (it) {\n  return isNaN(it = +it) ? 0 : (it > 0 ? floor : ceil)(it);\n};\n","// 7.1.15 ToLength\nvar toInteger = require('./_to-integer');\nvar min = Math.min;\nmodule.exports = function (it) {\n  return it > 0 ? min(toInteger(it), 0x1fffffffffffff) : 0; // pow(2, 53) - 1 == 9007199254740991\n};\n","// 7.1.13 ToObject(argument)\nvar defined = require('./_defined');\nmodule.exports = function (it) {\n  return Object(defined(it));\n};\n","// 7.1.1 ToPrimitive(input [, PreferredType])\nvar isObject = require('./_is-object');\n// instead of the ES6 spec version, we didn't implement @@toPrimitive case\n// and the second argument - flag - preferred type is a string\nmodule.exports = function (it, S) {\n  if (!isObject(it)) return it;\n  var fn, val;\n  if (S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (typeof (fn = it.valueOf) == 'function' && !isObject(val = fn.call(it))) return val;\n  if (!S && typeof (fn = it.toString) == 'function' && !isObject(val = fn.call(it))) return val;\n  throw TypeError(\"Can't convert object to primitive value\");\n};\n","var id = 0;\nvar px = Math.random();\nmodule.exports = function (key) {\n  return 'Symbol('.concat(key === undefined ? '' : key, ')_', (++id + px).toString(36));\n};\n","var store = require('./_shared')('wks');\nvar uid = require('./_uid');\nvar Symbol = require('./_global').Symbol;\nvar USE_SYMBOL = typeof Symbol == 'function';\n\nvar $exports = module.exports = function (name) {\n  return store[name] || (store[name] =\n    USE_SYMBOL && Symbol[name] || (USE_SYMBOL ? Symbol : uid)('Symbol.' + name));\n};\n\n$exports.store = store;\n","'use strict';\n// 22.1.3.8 Array.prototype.find(predicate, thisArg = undefined)\nvar $export = require('./_export');\nvar $find = require('./_array-methods')(5);\nvar KEY = 'find';\nvar forced = true;\n// Shouldn't skip holes\nif (KEY in []) Array(1)[KEY](function () { forced = false; });\n$export($export.P + $export.F * forced, 'Array', {\n  find: function find(callbackfn /* , that = undefined */) {\n    return $find(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\nrequire('./_add-to-unscopables')(KEY);\n","\nmodule.exports = require('./socket');\n\n/**\n * Exports parser\n *\n * @api public\n *\n */\nmodule.exports.parser = require('engine.io-parser');\n","/**\n * Module dependencies.\n */\n\nvar transports = require('./transports/index');\nvar Emitter = require('component-emitter');\nvar debug = require('debug')('engine.io-client:socket');\nvar index = require('indexof');\nvar parser = require('engine.io-parser');\nvar parseuri = require('parseuri');\nvar parseqs = require('parseqs');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Socket;\n\n/**\n * Socket constructor.\n *\n * @param {String|Object} uri or options\n * @param {Object} options\n * @api public\n */\n\nfunction Socket (uri, opts) {\n  if (!(this instanceof Socket)) return new Socket(uri, opts);\n\n  opts = opts || {};\n\n  if (uri && 'object' === typeof uri) {\n    opts = uri;\n    uri = null;\n  }\n\n  if (uri) {\n    uri = parseuri(uri);\n    opts.hostname = uri.host;\n    opts.secure = uri.protocol === 'https' || uri.protocol === 'wss';\n    opts.port = uri.port;\n    if (uri.query) opts.query = uri.query;\n  } else if (opts.host) {\n    opts.hostname = parseuri(opts.host).host;\n  }\n\n  this.secure = null != opts.secure ? opts.secure\n    : (typeof location !== 'undefined' && 'https:' === location.protocol);\n\n  if (opts.hostname && !opts.port) {\n    // if no port is specified manually, use the protocol default\n    opts.port = this.secure ? '443' : '80';\n  }\n\n  this.agent = opts.agent || false;\n  this.hostname = opts.hostname ||\n    (typeof location !== 'undefined' ? location.hostname : 'localhost');\n  this.port = opts.port || (typeof location !== 'undefined' && location.port\n      ? location.port\n      : (this.secure ? 443 : 80));\n  this.query = opts.query || {};\n  if ('string' === typeof this.query) this.query = parseqs.decode(this.query);\n  this.upgrade = false !== opts.upgrade;\n  this.path = (opts.path || '/engine.io').replace(/\\/$/, '') + '/';\n  this.forceJSONP = !!opts.forceJSONP;\n  this.jsonp = false !== opts.jsonp;\n  this.forceBase64 = !!opts.forceBase64;\n  this.enablesXDR = !!opts.enablesXDR;\n  this.timestampParam = opts.timestampParam || 't';\n  this.timestampRequests = opts.timestampRequests;\n  this.transports = opts.transports || ['polling', 'websocket'];\n  this.transportOptions = opts.transportOptions || {};\n  this.readyState = '';\n  this.writeBuffer = [];\n  this.prevBufferLen = 0;\n  this.policyPort = opts.policyPort || 843;\n  this.rememberUpgrade = opts.rememberUpgrade || false;\n  this.binaryType = null;\n  this.onlyBinaryUpgrades = opts.onlyBinaryUpgrades;\n  this.perMessageDeflate = false !== opts.perMessageDeflate ? (opts.perMessageDeflate || {}) : false;\n\n  if (true === this.perMessageDeflate) this.perMessageDeflate = {};\n  if (this.perMessageDeflate && null == this.perMessageDeflate.threshold) {\n    this.perMessageDeflate.threshold = 1024;\n  }\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx || null;\n  this.key = opts.key || null;\n  this.passphrase = opts.passphrase || null;\n  this.cert = opts.cert || null;\n  this.ca = opts.ca || null;\n  this.ciphers = opts.ciphers || null;\n  this.rejectUnauthorized = opts.rejectUnauthorized === undefined ? true : opts.rejectUnauthorized;\n  this.forceNode = !!opts.forceNode;\n\n  // detect ReactNative environment\n  this.isReactNative = (typeof navigator !== 'undefined' && typeof navigator.product === 'string' && navigator.product.toLowerCase() === 'reactnative');\n\n  // other options for Node.js or ReactNative client\n  if (typeof self === 'undefined' || this.isReactNative) {\n    if (opts.extraHeaders && Object.keys(opts.extraHeaders).length > 0) {\n      this.extraHeaders = opts.extraHeaders;\n    }\n\n    if (opts.localAddress) {\n      this.localAddress = opts.localAddress;\n    }\n  }\n\n  // set on handshake\n  this.id = null;\n  this.upgrades = null;\n  this.pingInterval = null;\n  this.pingTimeout = null;\n\n  // set on heartbeat\n  this.pingIntervalTimer = null;\n  this.pingTimeoutTimer = null;\n\n  this.open();\n}\n\nSocket.priorWebsocketSuccess = false;\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nSocket.protocol = parser.protocol; // this is an int\n\n/**\n * Expose deps for legacy compatibility\n * and standalone browser access.\n */\n\nSocket.Socket = Socket;\nSocket.Transport = require('./transport');\nSocket.transports = require('./transports/index');\nSocket.parser = require('engine.io-parser');\n\n/**\n * Creates transport of the given type.\n *\n * @param {String} transport name\n * @return {Transport}\n * @api private\n */\n\nSocket.prototype.createTransport = function (name) {\n  debug('creating transport \"%s\"', name);\n  var query = clone(this.query);\n\n  // append engine.io protocol identifier\n  query.EIO = parser.protocol;\n\n  // transport name\n  query.transport = name;\n\n  // per-transport options\n  var options = this.transportOptions[name] || {};\n\n  // session id if we already have one\n  if (this.id) query.sid = this.id;\n\n  var transport = new transports[name]({\n    query: query,\n    socket: this,\n    agent: options.agent || this.agent,\n    hostname: options.hostname || this.hostname,\n    port: options.port || this.port,\n    secure: options.secure || this.secure,\n    path: options.path || this.path,\n    forceJSONP: options.forceJSONP || this.forceJSONP,\n    jsonp: options.jsonp || this.jsonp,\n    forceBase64: options.forceBase64 || this.forceBase64,\n    enablesXDR: options.enablesXDR || this.enablesXDR,\n    timestampRequests: options.timestampRequests || this.timestampRequests,\n    timestampParam: options.timestampParam || this.timestampParam,\n    policyPort: options.policyPort || this.policyPort,\n    pfx: options.pfx || this.pfx,\n    key: options.key || this.key,\n    passphrase: options.passphrase || this.passphrase,\n    cert: options.cert || this.cert,\n    ca: options.ca || this.ca,\n    ciphers: options.ciphers || this.ciphers,\n    rejectUnauthorized: options.rejectUnauthorized || this.rejectUnauthorized,\n    perMessageDeflate: options.perMessageDeflate || this.perMessageDeflate,\n    extraHeaders: options.extraHeaders || this.extraHeaders,\n    forceNode: options.forceNode || this.forceNode,\n    localAddress: options.localAddress || this.localAddress,\n    requestTimeout: options.requestTimeout || this.requestTimeout,\n    protocols: options.protocols || void (0),\n    isReactNative: this.isReactNative\n  });\n\n  return transport;\n};\n\nfunction clone (obj) {\n  var o = {};\n  for (var i in obj) {\n    if (obj.hasOwnProperty(i)) {\n      o[i] = obj[i];\n    }\n  }\n  return o;\n}\n\n/**\n * Initializes transport to use and starts probe.\n *\n * @api private\n */\nSocket.prototype.open = function () {\n  var transport;\n  if (this.rememberUpgrade && Socket.priorWebsocketSuccess && this.transports.indexOf('websocket') !== -1) {\n    transport = 'websocket';\n  } else if (0 === this.transports.length) {\n    // Emit error on next tick so it can be listened to\n    var self = this;\n    setTimeout(function () {\n      self.emit('error', 'No transports available');\n    }, 0);\n    return;\n  } else {\n    transport = this.transports[0];\n  }\n  this.readyState = 'opening';\n\n  // Retry with the next transport if the transport is disabled (jsonp: false)\n  try {\n    transport = this.createTransport(transport);\n  } catch (e) {\n    this.transports.shift();\n    this.open();\n    return;\n  }\n\n  transport.open();\n  this.setTransport(transport);\n};\n\n/**\n * Sets the current transport. Disables the existing one (if any).\n *\n * @api private\n */\n\nSocket.prototype.setTransport = function (transport) {\n  debug('setting transport %s', transport.name);\n  var self = this;\n\n  if (this.transport) {\n    debug('clearing existing transport %s', this.transport.name);\n    this.transport.removeAllListeners();\n  }\n\n  // set up transport\n  this.transport = transport;\n\n  // set up transport listeners\n  transport\n  .on('drain', function () {\n    self.onDrain();\n  })\n  .on('packet', function (packet) {\n    self.onPacket(packet);\n  })\n  .on('error', function (e) {\n    self.onError(e);\n  })\n  .on('close', function () {\n    self.onClose('transport close');\n  });\n};\n\n/**\n * Probes a transport.\n *\n * @param {String} transport name\n * @api private\n */\n\nSocket.prototype.probe = function (name) {\n  debug('probing transport \"%s\"', name);\n  var transport = this.createTransport(name, { probe: 1 });\n  var failed = false;\n  var self = this;\n\n  Socket.priorWebsocketSuccess = false;\n\n  function onTransportOpen () {\n    if (self.onlyBinaryUpgrades) {\n      var upgradeLosesBinary = !this.supportsBinary && self.transport.supportsBinary;\n      failed = failed || upgradeLosesBinary;\n    }\n    if (failed) return;\n\n    debug('probe transport \"%s\" opened', name);\n    transport.send([{ type: 'ping', data: 'probe' }]);\n    transport.once('packet', function (msg) {\n      if (failed) return;\n      if ('pong' === msg.type && 'probe' === msg.data) {\n        debug('probe transport \"%s\" pong', name);\n        self.upgrading = true;\n        self.emit('upgrading', transport);\n        if (!transport) return;\n        Socket.priorWebsocketSuccess = 'websocket' === transport.name;\n\n        debug('pausing current transport \"%s\"', self.transport.name);\n        self.transport.pause(function () {\n          if (failed) return;\n          if ('closed' === self.readyState) return;\n          debug('changing transport and sending upgrade packet');\n\n          cleanup();\n\n          self.setTransport(transport);\n          transport.send([{ type: 'upgrade' }]);\n          self.emit('upgrade', transport);\n          transport = null;\n          self.upgrading = false;\n          self.flush();\n        });\n      } else {\n        debug('probe transport \"%s\" failed', name);\n        var err = new Error('probe error');\n        err.transport = transport.name;\n        self.emit('upgradeError', err);\n      }\n    });\n  }\n\n  function freezeTransport () {\n    if (failed) return;\n\n    // Any callback called by transport should be ignored since now\n    failed = true;\n\n    cleanup();\n\n    transport.close();\n    transport = null;\n  }\n\n  // Handle any error that happens while probing\n  function onerror (err) {\n    var error = new Error('probe error: ' + err);\n    error.transport = transport.name;\n\n    freezeTransport();\n\n    debug('probe transport \"%s\" failed because of error: %s', name, err);\n\n    self.emit('upgradeError', error);\n  }\n\n  function onTransportClose () {\n    onerror('transport closed');\n  }\n\n  // When the socket is closed while we're probing\n  function onclose () {\n    onerror('socket closed');\n  }\n\n  // When the socket is upgraded while we're probing\n  function onupgrade (to) {\n    if (transport && to.name !== transport.name) {\n      debug('\"%s\" works - aborting \"%s\"', to.name, transport.name);\n      freezeTransport();\n    }\n  }\n\n  // Remove all listeners on the transport and on self\n  function cleanup () {\n    transport.removeListener('open', onTransportOpen);\n    transport.removeListener('error', onerror);\n    transport.removeListener('close', onTransportClose);\n    self.removeListener('close', onclose);\n    self.removeListener('upgrading', onupgrade);\n  }\n\n  transport.once('open', onTransportOpen);\n  transport.once('error', onerror);\n  transport.once('close', onTransportClose);\n\n  this.once('close', onclose);\n  this.once('upgrading', onupgrade);\n\n  transport.open();\n};\n\n/**\n * Called when connection is deemed open.\n *\n * @api public\n */\n\nSocket.prototype.onOpen = function () {\n  debug('socket open');\n  this.readyState = 'open';\n  Socket.priorWebsocketSuccess = 'websocket' === this.transport.name;\n  this.emit('open');\n  this.flush();\n\n  // we check for `readyState` in case an `open`\n  // listener already closed the socket\n  if ('open' === this.readyState && this.upgrade && this.transport.pause) {\n    debug('starting upgrade probes');\n    for (var i = 0, l = this.upgrades.length; i < l; i++) {\n      this.probe(this.upgrades[i]);\n    }\n  }\n};\n\n/**\n * Handles a packet.\n *\n * @api private\n */\n\nSocket.prototype.onPacket = function (packet) {\n  if ('opening' === this.readyState || 'open' === this.readyState ||\n      'closing' === this.readyState) {\n    debug('socket receive: type \"%s\", data \"%s\"', packet.type, packet.data);\n\n    this.emit('packet', packet);\n\n    // Socket is live - any packet counts\n    this.emit('heartbeat');\n\n    switch (packet.type) {\n      case 'open':\n        this.onHandshake(JSON.parse(packet.data));\n        break;\n\n      case 'pong':\n        this.setPing();\n        this.emit('pong');\n        break;\n\n      case 'error':\n        var err = new Error('server error');\n        err.code = packet.data;\n        this.onError(err);\n        break;\n\n      case 'message':\n        this.emit('data', packet.data);\n        this.emit('message', packet.data);\n        break;\n    }\n  } else {\n    debug('packet received with socket readyState \"%s\"', this.readyState);\n  }\n};\n\n/**\n * Called upon handshake completion.\n *\n * @param {Object} handshake obj\n * @api private\n */\n\nSocket.prototype.onHandshake = function (data) {\n  this.emit('handshake', data);\n  this.id = data.sid;\n  this.transport.query.sid = data.sid;\n  this.upgrades = this.filterUpgrades(data.upgrades);\n  this.pingInterval = data.pingInterval;\n  this.pingTimeout = data.pingTimeout;\n  this.onOpen();\n  // In case open handler closes socket\n  if ('closed' === this.readyState) return;\n  this.setPing();\n\n  // Prolong liveness of socket on heartbeat\n  this.removeListener('heartbeat', this.onHeartbeat);\n  this.on('heartbeat', this.onHeartbeat);\n};\n\n/**\n * Resets ping timeout.\n *\n * @api private\n */\n\nSocket.prototype.onHeartbeat = function (timeout) {\n  clearTimeout(this.pingTimeoutTimer);\n  var self = this;\n  self.pingTimeoutTimer = setTimeout(function () {\n    if ('closed' === self.readyState) return;\n    self.onClose('ping timeout');\n  }, timeout || (self.pingInterval + self.pingTimeout));\n};\n\n/**\n * Pings server every `this.pingInterval` and expects response\n * within `this.pingTimeout` or closes connection.\n *\n * @api private\n */\n\nSocket.prototype.setPing = function () {\n  var self = this;\n  clearTimeout(self.pingIntervalTimer);\n  self.pingIntervalTimer = setTimeout(function () {\n    debug('writing ping packet - expecting pong within %sms', self.pingTimeout);\n    self.ping();\n    self.onHeartbeat(self.pingTimeout);\n  }, self.pingInterval);\n};\n\n/**\n* Sends a ping packet.\n*\n* @api private\n*/\n\nSocket.prototype.ping = function () {\n  var self = this;\n  this.sendPacket('ping', function () {\n    self.emit('ping');\n  });\n};\n\n/**\n * Called on `drain` event\n *\n * @api private\n */\n\nSocket.prototype.onDrain = function () {\n  this.writeBuffer.splice(0, this.prevBufferLen);\n\n  // setting prevBufferLen = 0 is very important\n  // for example, when upgrading, upgrade packet is sent over,\n  // and a nonzero prevBufferLen could cause problems on `drain`\n  this.prevBufferLen = 0;\n\n  if (0 === this.writeBuffer.length) {\n    this.emit('drain');\n  } else {\n    this.flush();\n  }\n};\n\n/**\n * Flush write buffers.\n *\n * @api private\n */\n\nSocket.prototype.flush = function () {\n  if ('closed' !== this.readyState && this.transport.writable &&\n    !this.upgrading && this.writeBuffer.length) {\n    debug('flushing %d packets in socket', this.writeBuffer.length);\n    this.transport.send(this.writeBuffer);\n    // keep track of current length of writeBuffer\n    // splice writeBuffer and callbackBuffer on `drain`\n    this.prevBufferLen = this.writeBuffer.length;\n    this.emit('flush');\n  }\n};\n\n/**\n * Sends a message.\n *\n * @param {String} message.\n * @param {Function} callback function.\n * @param {Object} options.\n * @return {Socket} for chaining.\n * @api public\n */\n\nSocket.prototype.write =\nSocket.prototype.send = function (msg, options, fn) {\n  this.sendPacket('message', msg, options, fn);\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {String} packet type.\n * @param {String} data.\n * @param {Object} options.\n * @param {Function} callback function.\n * @api private\n */\n\nSocket.prototype.sendPacket = function (type, data, options, fn) {\n  if ('function' === typeof data) {\n    fn = data;\n    data = undefined;\n  }\n\n  if ('function' === typeof options) {\n    fn = options;\n    options = null;\n  }\n\n  if ('closing' === this.readyState || 'closed' === this.readyState) {\n    return;\n  }\n\n  options = options || {};\n  options.compress = false !== options.compress;\n\n  var packet = {\n    type: type,\n    data: data,\n    options: options\n  };\n  this.emit('packetCreate', packet);\n  this.writeBuffer.push(packet);\n  if (fn) this.once('flush', fn);\n  this.flush();\n};\n\n/**\n * Closes the connection.\n *\n * @api private\n */\n\nSocket.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.readyState = 'closing';\n\n    var self = this;\n\n    if (this.writeBuffer.length) {\n      this.once('drain', function () {\n        if (this.upgrading) {\n          waitForUpgrade();\n        } else {\n          close();\n        }\n      });\n    } else if (this.upgrading) {\n      waitForUpgrade();\n    } else {\n      close();\n    }\n  }\n\n  function close () {\n    self.onClose('forced close');\n    debug('socket closing - telling transport to close');\n    self.transport.close();\n  }\n\n  function cleanupAndClose () {\n    self.removeListener('upgrade', cleanupAndClose);\n    self.removeListener('upgradeError', cleanupAndClose);\n    close();\n  }\n\n  function waitForUpgrade () {\n    // wait for upgrade to finish since we can't send packets while pausing a transport\n    self.once('upgrade', cleanupAndClose);\n    self.once('upgradeError', cleanupAndClose);\n  }\n\n  return this;\n};\n\n/**\n * Called upon transport error\n *\n * @api private\n */\n\nSocket.prototype.onError = function (err) {\n  debug('socket error %j', err);\n  Socket.priorWebsocketSuccess = false;\n  this.emit('error', err);\n  this.onClose('transport error', err);\n};\n\n/**\n * Called upon transport close.\n *\n * @api private\n */\n\nSocket.prototype.onClose = function (reason, desc) {\n  if ('opening' === this.readyState || 'open' === this.readyState || 'closing' === this.readyState) {\n    debug('socket close with reason: \"%s\"', reason);\n    var self = this;\n\n    // clear timers\n    clearTimeout(this.pingIntervalTimer);\n    clearTimeout(this.pingTimeoutTimer);\n\n    // stop event from firing again for transport\n    this.transport.removeAllListeners('close');\n\n    // ensure transport won't stay open\n    this.transport.close();\n\n    // ignore further transport communication\n    this.transport.removeAllListeners();\n\n    // set ready state\n    this.readyState = 'closed';\n\n    // clear session id\n    this.id = null;\n\n    // emit close event\n    this.emit('close', reason, desc);\n\n    // clean buffers after, so users can still\n    // grab the buffers on `close` event\n    self.writeBuffer = [];\n    self.prevBufferLen = 0;\n  }\n};\n\n/**\n * Filters upgrades, returning only those matching client transports.\n *\n * @param {Array} server upgrades\n * @api private\n *\n */\n\nSocket.prototype.filterUpgrades = function (upgrades) {\n  var filteredUpgrades = [];\n  for (var i = 0, j = upgrades.length; i < j; i++) {\n    if (~index(this.transports, upgrades[i])) filteredUpgrades.push(upgrades[i]);\n  }\n  return filteredUpgrades;\n};\n","/**\n * Module dependencies.\n */\n\nvar parser = require('engine.io-parser');\nvar Emitter = require('component-emitter');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Transport;\n\n/**\n * Transport abstract constructor.\n *\n * @param {Object} options.\n * @api private\n */\n\nfunction Transport (opts) {\n  this.path = opts.path;\n  this.hostname = opts.hostname;\n  this.port = opts.port;\n  this.secure = opts.secure;\n  this.query = opts.query;\n  this.timestampParam = opts.timestampParam;\n  this.timestampRequests = opts.timestampRequests;\n  this.readyState = '';\n  this.agent = opts.agent || false;\n  this.socket = opts.socket;\n  this.enablesXDR = opts.enablesXDR;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n  this.forceNode = opts.forceNode;\n\n  // results of ReactNative environment detection\n  this.isReactNative = opts.isReactNative;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n  this.localAddress = opts.localAddress;\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Transport.prototype);\n\n/**\n * Emits an error.\n *\n * @param {String} str\n * @return {Transport} for chaining\n * @api public\n */\n\nTransport.prototype.onError = function (msg, desc) {\n  var err = new Error(msg);\n  err.type = 'TransportError';\n  err.description = desc;\n  this.emit('error', err);\n  return this;\n};\n\n/**\n * Opens the transport.\n *\n * @api public\n */\n\nTransport.prototype.open = function () {\n  if ('closed' === this.readyState || '' === this.readyState) {\n    this.readyState = 'opening';\n    this.doOpen();\n  }\n\n  return this;\n};\n\n/**\n * Closes the transport.\n *\n * @api private\n */\n\nTransport.prototype.close = function () {\n  if ('opening' === this.readyState || 'open' === this.readyState) {\n    this.doClose();\n    this.onClose();\n  }\n\n  return this;\n};\n\n/**\n * Sends multiple packets.\n *\n * @param {Array} packets\n * @api private\n */\n\nTransport.prototype.send = function (packets) {\n  if ('open' === this.readyState) {\n    this.write(packets);\n  } else {\n    throw new Error('Transport not open');\n  }\n};\n\n/**\n * Called upon open\n *\n * @api private\n */\n\nTransport.prototype.onOpen = function () {\n  this.readyState = 'open';\n  this.writable = true;\n  this.emit('open');\n};\n\n/**\n * Called with data.\n *\n * @param {String} data\n * @api private\n */\n\nTransport.prototype.onData = function (data) {\n  var packet = parser.decodePacket(data, this.socket.binaryType);\n  this.onPacket(packet);\n};\n\n/**\n * Called with a decoded packet.\n */\n\nTransport.prototype.onPacket = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon close.\n *\n * @api private\n */\n\nTransport.prototype.onClose = function () {\n  this.readyState = 'closed';\n  this.emit('close');\n};\n","/**\n * Module dependencies\n */\n\nvar XMLHttpRequest = require('xmlhttprequest-ssl');\nvar XHR = require('./polling-xhr');\nvar JSONP = require('./polling-jsonp');\nvar websocket = require('./websocket');\n\n/**\n * Export transports.\n */\n\nexports.polling = polling;\nexports.websocket = websocket;\n\n/**\n * Polling transport polymorphic constructor.\n * Decides on xhr vs jsonp based on feature detection.\n *\n * @api private\n */\n\nfunction polling (opts) {\n  var xhr;\n  var xd = false;\n  var xs = false;\n  var jsonp = false !== opts.jsonp;\n\n  if (typeof location !== 'undefined') {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    xd = opts.hostname !== location.hostname || port !== opts.port;\n    xs = opts.secure !== isSSL;\n  }\n\n  opts.xdomain = xd;\n  opts.xscheme = xs;\n  xhr = new XMLHttpRequest(opts);\n\n  if ('open' in xhr && !opts.forceJSONP) {\n    return new XHR(opts);\n  } else {\n    if (!jsonp) throw new Error('JSONP disabled');\n    return new JSONP(opts);\n  }\n}\n","/**\n * Module requirements.\n */\n\nvar Polling = require('./polling');\nvar inherit = require('component-inherit');\n\n/**\n * Module exports.\n */\n\nmodule.exports = JSONPPolling;\n\n/**\n * Cached regular expressions.\n */\n\nvar rNewline = /\\n/g;\nvar rEscapedNewline = /\\\\n/g;\n\n/**\n * Global JSONP callbacks.\n */\n\nvar callbacks;\n\n/**\n * Noop.\n */\n\nfunction empty () { }\n\n/**\n * Until https://github.com/tc39/proposal-global is shipped.\n */\nfunction glob () {\n  return typeof self !== 'undefined' ? self\n      : typeof window !== 'undefined' ? window\n      : typeof global !== 'undefined' ? global : {};\n}\n\n/**\n * JSONP Polling constructor.\n *\n * @param {Object} opts.\n * @api public\n */\n\nfunction JSONPPolling (opts) {\n  Polling.call(this, opts);\n\n  this.query = this.query || {};\n\n  // define global callbacks array if not present\n  // we do this here (lazily) to avoid unneeded global pollution\n  if (!callbacks) {\n    // we need to consider multiple engines in the same page\n    var global = glob();\n    callbacks = global.___eio = (global.___eio || []);\n  }\n\n  // callback identifier\n  this.index = callbacks.length;\n\n  // add callback to jsonp global\n  var self = this;\n  callbacks.push(function (msg) {\n    self.onData(msg);\n  });\n\n  // append to query string\n  this.query.j = this.index;\n\n  // prevent spurious errors from being emitted when the window is unloaded\n  if (typeof addEventListener === 'function') {\n    addEventListener('beforeunload', function () {\n      if (self.script) self.script.onerror = empty;\n    }, false);\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(JSONPPolling, Polling);\n\n/*\n * JSONP only supports binary as base64 encoded strings\n */\n\nJSONPPolling.prototype.supportsBinary = false;\n\n/**\n * Closes the socket.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doClose = function () {\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  if (this.form) {\n    this.form.parentNode.removeChild(this.form);\n    this.form = null;\n    this.iframe = null;\n  }\n\n  Polling.prototype.doClose.call(this);\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nJSONPPolling.prototype.doPoll = function () {\n  var self = this;\n  var script = document.createElement('script');\n\n  if (this.script) {\n    this.script.parentNode.removeChild(this.script);\n    this.script = null;\n  }\n\n  script.async = true;\n  script.src = this.uri();\n  script.onerror = function (e) {\n    self.onError('jsonp poll error', e);\n  };\n\n  var insertAt = document.getElementsByTagName('script')[0];\n  if (insertAt) {\n    insertAt.parentNode.insertBefore(script, insertAt);\n  } else {\n    (document.head || document.body).appendChild(script);\n  }\n  this.script = script;\n\n  var isUAgecko = 'undefined' !== typeof navigator && /gecko/i.test(navigator.userAgent);\n\n  if (isUAgecko) {\n    setTimeout(function () {\n      var iframe = document.createElement('iframe');\n      document.body.appendChild(iframe);\n      document.body.removeChild(iframe);\n    }, 100);\n  }\n};\n\n/**\n * Writes with a hidden iframe.\n *\n * @param {String} data to send\n * @param {Function} called upon flush.\n * @api private\n */\n\nJSONPPolling.prototype.doWrite = function (data, fn) {\n  var self = this;\n\n  if (!this.form) {\n    var form = document.createElement('form');\n    var area = document.createElement('textarea');\n    var id = this.iframeId = 'eio_iframe_' + this.index;\n    var iframe;\n\n    form.className = 'socketio';\n    form.style.position = 'absolute';\n    form.style.top = '-1000px';\n    form.style.left = '-1000px';\n    form.target = id;\n    form.method = 'POST';\n    form.setAttribute('accept-charset', 'utf-8');\n    area.name = 'd';\n    form.appendChild(area);\n    document.body.appendChild(form);\n\n    this.form = form;\n    this.area = area;\n  }\n\n  this.form.action = this.uri();\n\n  function complete () {\n    initIframe();\n    fn();\n  }\n\n  function initIframe () {\n    if (self.iframe) {\n      try {\n        self.form.removeChild(self.iframe);\n      } catch (e) {\n        self.onError('jsonp polling iframe removal error', e);\n      }\n    }\n\n    try {\n      // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n      var html = '<iframe src=\"javascript:0\" name=\"' + self.iframeId + '\">';\n      iframe = document.createElement(html);\n    } catch (e) {\n      iframe = document.createElement('iframe');\n      iframe.name = self.iframeId;\n      iframe.src = 'javascript:0';\n    }\n\n    iframe.id = self.iframeId;\n\n    self.form.appendChild(iframe);\n    self.iframe = iframe;\n  }\n\n  initIframe();\n\n  // escape \\n to prevent it from being converted into \\r\\n by some UAs\n  // double escaping is required for escaped new lines because unescaping of new lines can be done safely on server-side\n  data = data.replace(rEscapedNewline, '\\\\\\n');\n  this.area.value = data.replace(rNewline, '\\\\n');\n\n  try {\n    this.form.submit();\n  } catch (e) {}\n\n  if (this.iframe.attachEvent) {\n    this.iframe.onreadystatechange = function () {\n      if (self.iframe.readyState === 'complete') {\n        complete();\n      }\n    };\n  } else {\n    this.iframe.onload = complete;\n  }\n};\n","/* global attachEvent */\n\n/**\n * Module requirements.\n */\n\nvar XMLHttpRequest = require('xmlhttprequest-ssl');\nvar Polling = require('./polling');\nvar Emitter = require('component-emitter');\nvar inherit = require('component-inherit');\nvar debug = require('debug')('engine.io-client:polling-xhr');\n\n/**\n * Module exports.\n */\n\nmodule.exports = XHR;\nmodule.exports.Request = Request;\n\n/**\n * Empty function\n */\n\nfunction empty () {}\n\n/**\n * XHR Polling constructor.\n *\n * @param {Object} opts\n * @api public\n */\n\nfunction XHR (opts) {\n  Polling.call(this, opts);\n  this.requestTimeout = opts.requestTimeout;\n  this.extraHeaders = opts.extraHeaders;\n\n  if (typeof location !== 'undefined') {\n    var isSSL = 'https:' === location.protocol;\n    var port = location.port;\n\n    // some user agents have empty `location.port`\n    if (!port) {\n      port = isSSL ? 443 : 80;\n    }\n\n    this.xd = (typeof location !== 'undefined' && opts.hostname !== location.hostname) ||\n      port !== opts.port;\n    this.xs = opts.secure !== isSSL;\n  }\n}\n\n/**\n * Inherits from Polling.\n */\n\ninherit(XHR, Polling);\n\n/**\n * XHR supports binary\n */\n\nXHR.prototype.supportsBinary = true;\n\n/**\n * Creates a request.\n *\n * @param {String} method\n * @api private\n */\n\nXHR.prototype.request = function (opts) {\n  opts = opts || {};\n  opts.uri = this.uri();\n  opts.xd = this.xd;\n  opts.xs = this.xs;\n  opts.agent = this.agent || false;\n  opts.supportsBinary = this.supportsBinary;\n  opts.enablesXDR = this.enablesXDR;\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n  opts.requestTimeout = this.requestTimeout;\n\n  // other options for Node.js client\n  opts.extraHeaders = this.extraHeaders;\n\n  return new Request(opts);\n};\n\n/**\n * Sends data.\n *\n * @param {String} data to send.\n * @param {Function} called upon flush.\n * @api private\n */\n\nXHR.prototype.doWrite = function (data, fn) {\n  var isBinary = typeof data !== 'string' && data !== undefined;\n  var req = this.request({ method: 'POST', data: data, isBinary: isBinary });\n  var self = this;\n  req.on('success', fn);\n  req.on('error', function (err) {\n    self.onError('xhr post error', err);\n  });\n  this.sendXhr = req;\n};\n\n/**\n * Starts a poll cycle.\n *\n * @api private\n */\n\nXHR.prototype.doPoll = function () {\n  debug('xhr poll');\n  var req = this.request();\n  var self = this;\n  req.on('data', function (data) {\n    self.onData(data);\n  });\n  req.on('error', function (err) {\n    self.onError('xhr poll error', err);\n  });\n  this.pollXhr = req;\n};\n\n/**\n * Request constructor\n *\n * @param {Object} options\n * @api public\n */\n\nfunction Request (opts) {\n  this.method = opts.method || 'GET';\n  this.uri = opts.uri;\n  this.xd = !!opts.xd;\n  this.xs = !!opts.xs;\n  this.async = false !== opts.async;\n  this.data = undefined !== opts.data ? opts.data : null;\n  this.agent = opts.agent;\n  this.isBinary = opts.isBinary;\n  this.supportsBinary = opts.supportsBinary;\n  this.enablesXDR = opts.enablesXDR;\n  this.requestTimeout = opts.requestTimeout;\n\n  // SSL options for Node.js client\n  this.pfx = opts.pfx;\n  this.key = opts.key;\n  this.passphrase = opts.passphrase;\n  this.cert = opts.cert;\n  this.ca = opts.ca;\n  this.ciphers = opts.ciphers;\n  this.rejectUnauthorized = opts.rejectUnauthorized;\n\n  // other options for Node.js client\n  this.extraHeaders = opts.extraHeaders;\n\n  this.create();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Request.prototype);\n\n/**\n * Creates the XHR object and sends the request.\n *\n * @api private\n */\n\nRequest.prototype.create = function () {\n  var opts = { agent: this.agent, xdomain: this.xd, xscheme: this.xs, enablesXDR: this.enablesXDR };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n\n  var xhr = this.xhr = new XMLHttpRequest(opts);\n  var self = this;\n\n  try {\n    debug('xhr open %s: %s', this.method, this.uri);\n    xhr.open(this.method, this.uri, this.async);\n    try {\n      if (this.extraHeaders) {\n        xhr.setDisableHeaderCheck && xhr.setDisableHeaderCheck(true);\n        for (var i in this.extraHeaders) {\n          if (this.extraHeaders.hasOwnProperty(i)) {\n            xhr.setRequestHeader(i, this.extraHeaders[i]);\n          }\n        }\n      }\n    } catch (e) {}\n\n    if ('POST' === this.method) {\n      try {\n        if (this.isBinary) {\n          xhr.setRequestHeader('Content-type', 'application/octet-stream');\n        } else {\n          xhr.setRequestHeader('Content-type', 'text/plain;charset=UTF-8');\n        }\n      } catch (e) {}\n    }\n\n    try {\n      xhr.setRequestHeader('Accept', '*/*');\n    } catch (e) {}\n\n    // ie6 check\n    if ('withCredentials' in xhr) {\n      xhr.withCredentials = true;\n    }\n\n    if (this.requestTimeout) {\n      xhr.timeout = this.requestTimeout;\n    }\n\n    if (this.hasXDR()) {\n      xhr.onload = function () {\n        self.onLoad();\n      };\n      xhr.onerror = function () {\n        self.onError(xhr.responseText);\n      };\n    } else {\n      xhr.onreadystatechange = function () {\n        if (xhr.readyState === 2) {\n          try {\n            var contentType = xhr.getResponseHeader('Content-Type');\n            if (self.supportsBinary && contentType === 'application/octet-stream') {\n              xhr.responseType = 'arraybuffer';\n            }\n          } catch (e) {}\n        }\n        if (4 !== xhr.readyState) return;\n        if (200 === xhr.status || 1223 === xhr.status) {\n          self.onLoad();\n        } else {\n          // make sure the `error` event handler that's user-set\n          // does not throw in the same tick and gets caught here\n          setTimeout(function () {\n            self.onError(xhr.status);\n          }, 0);\n        }\n      };\n    }\n\n    debug('xhr data %s', this.data);\n    xhr.send(this.data);\n  } catch (e) {\n    // Need to defer since .create() is called directly fhrom the constructor\n    // and thus the 'error' event can only be only bound *after* this exception\n    // occurs.  Therefore, also, we cannot throw here at all.\n    setTimeout(function () {\n      self.onError(e);\n    }, 0);\n    return;\n  }\n\n  if (typeof document !== 'undefined') {\n    this.index = Request.requestsCount++;\n    Request.requests[this.index] = this;\n  }\n};\n\n/**\n * Called upon successful response.\n *\n * @api private\n */\n\nRequest.prototype.onSuccess = function () {\n  this.emit('success');\n  this.cleanup();\n};\n\n/**\n * Called if we have data.\n *\n * @api private\n */\n\nRequest.prototype.onData = function (data) {\n  this.emit('data', data);\n  this.onSuccess();\n};\n\n/**\n * Called upon error.\n *\n * @api private\n */\n\nRequest.prototype.onError = function (err) {\n  this.emit('error', err);\n  this.cleanup(true);\n};\n\n/**\n * Cleans up house.\n *\n * @api private\n */\n\nRequest.prototype.cleanup = function (fromError) {\n  if ('undefined' === typeof this.xhr || null === this.xhr) {\n    return;\n  }\n  // xmlhttprequest\n  if (this.hasXDR()) {\n    this.xhr.onload = this.xhr.onerror = empty;\n  } else {\n    this.xhr.onreadystatechange = empty;\n  }\n\n  if (fromError) {\n    try {\n      this.xhr.abort();\n    } catch (e) {}\n  }\n\n  if (typeof document !== 'undefined') {\n    delete Request.requests[this.index];\n  }\n\n  this.xhr = null;\n};\n\n/**\n * Called upon load.\n *\n * @api private\n */\n\nRequest.prototype.onLoad = function () {\n  var data;\n  try {\n    var contentType;\n    try {\n      contentType = this.xhr.getResponseHeader('Content-Type');\n    } catch (e) {}\n    if (contentType === 'application/octet-stream') {\n      data = this.xhr.response || this.xhr.responseText;\n    } else {\n      data = this.xhr.responseText;\n    }\n  } catch (e) {\n    this.onError(e);\n  }\n  if (null != data) {\n    this.onData(data);\n  }\n};\n\n/**\n * Check if it has XDomainRequest.\n *\n * @api private\n */\n\nRequest.prototype.hasXDR = function () {\n  return typeof XDomainRequest !== 'undefined' && !this.xs && this.enablesXDR;\n};\n\n/**\n * Aborts the request.\n *\n * @api public\n */\n\nRequest.prototype.abort = function () {\n  this.cleanup();\n};\n\n/**\n * Aborts pending requests when unloading the window. This is needed to prevent\n * memory leaks (e.g. when using IE) and to ensure that no spurious error is\n * emitted.\n */\n\nRequest.requestsCount = 0;\nRequest.requests = {};\n\nif (typeof document !== 'undefined') {\n  if (typeof attachEvent === 'function') {\n    attachEvent('onunload', unloadHandler);\n  } else if (typeof addEventListener === 'function') {\n    var terminationEvent = 'onpagehide' in self ? 'pagehide' : 'unload';\n    addEventListener(terminationEvent, unloadHandler, false);\n  }\n}\n\nfunction unloadHandler () {\n  for (var i in Request.requests) {\n    if (Request.requests.hasOwnProperty(i)) {\n      Request.requests[i].abort();\n    }\n  }\n}\n","/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parseqs = require('parseqs');\nvar parser = require('engine.io-parser');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:polling');\n\n/**\n * Module exports.\n */\n\nmodule.exports = Polling;\n\n/**\n * Is XHR2 supported?\n */\n\nvar hasXHR2 = (function () {\n  var XMLHttpRequest = require('xmlhttprequest-ssl');\n  var xhr = new XMLHttpRequest({ xdomain: false });\n  return null != xhr.responseType;\n})();\n\n/**\n * Polling interface.\n *\n * @param {Object} opts\n * @api private\n */\n\nfunction Polling (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (!hasXHR2 || forceBase64) {\n    this.supportsBinary = false;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(Polling, Transport);\n\n/**\n * Transport name.\n */\n\nPolling.prototype.name = 'polling';\n\n/**\n * Opens the socket (triggers polling). We write a PING message to determine\n * when the transport is open.\n *\n * @api private\n */\n\nPolling.prototype.doOpen = function () {\n  this.poll();\n};\n\n/**\n * Pauses polling.\n *\n * @param {Function} callback upon buffers are flushed and transport is paused\n * @api private\n */\n\nPolling.prototype.pause = function (onPause) {\n  var self = this;\n\n  this.readyState = 'pausing';\n\n  function pause () {\n    debug('paused');\n    self.readyState = 'paused';\n    onPause();\n  }\n\n  if (this.polling || !this.writable) {\n    var total = 0;\n\n    if (this.polling) {\n      debug('we are currently polling - waiting to pause');\n      total++;\n      this.once('pollComplete', function () {\n        debug('pre-pause polling complete');\n        --total || pause();\n      });\n    }\n\n    if (!this.writable) {\n      debug('we are currently writing - waiting to pause');\n      total++;\n      this.once('drain', function () {\n        debug('pre-pause writing complete');\n        --total || pause();\n      });\n    }\n  } else {\n    pause();\n  }\n};\n\n/**\n * Starts polling cycle.\n *\n * @api public\n */\n\nPolling.prototype.poll = function () {\n  debug('polling');\n  this.polling = true;\n  this.doPoll();\n  this.emit('poll');\n};\n\n/**\n * Overloads onData to detect payloads.\n *\n * @api private\n */\n\nPolling.prototype.onData = function (data) {\n  var self = this;\n  debug('polling got data %s', data);\n  var callback = function (packet, index, total) {\n    // if its the first message we consider the transport open\n    if ('opening' === self.readyState) {\n      self.onOpen();\n    }\n\n    // if its a close packet, we close the ongoing requests\n    if ('close' === packet.type) {\n      self.onClose();\n      return false;\n    }\n\n    // otherwise bypass onData and handle the message\n    self.onPacket(packet);\n  };\n\n  // decode payload\n  parser.decodePayload(data, this.socket.binaryType, callback);\n\n  // if an event did not trigger closing\n  if ('closed' !== this.readyState) {\n    // if we got data we're not polling\n    this.polling = false;\n    this.emit('pollComplete');\n\n    if ('open' === this.readyState) {\n      this.poll();\n    } else {\n      debug('ignoring poll - transport state \"%s\"', this.readyState);\n    }\n  }\n};\n\n/**\n * For polling, send a close packet.\n *\n * @api private\n */\n\nPolling.prototype.doClose = function () {\n  var self = this;\n\n  function close () {\n    debug('writing close packet');\n    self.write([{ type: 'close' }]);\n  }\n\n  if ('open' === this.readyState) {\n    debug('transport open - closing');\n    close();\n  } else {\n    // in case we're trying to close while\n    // handshaking is in progress (GH-164)\n    debug('transport not open - deferring close');\n    this.once('open', close);\n  }\n};\n\n/**\n * Writes a packets payload.\n *\n * @param {Array} data packets\n * @param {Function} drain callback\n * @api private\n */\n\nPolling.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n  var callbackfn = function () {\n    self.writable = true;\n    self.emit('drain');\n  };\n\n  parser.encodePayload(packets, this.supportsBinary, function (data) {\n    self.doWrite(data, callbackfn);\n  });\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nPolling.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'https' : 'http';\n  var port = '';\n\n  // cache busting is forced\n  if (false !== this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  if (!this.supportsBinary && !query.sid) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // avoid port if default for schema\n  if (this.port && (('https' === schema && Number(this.port) !== 443) ||\n     ('http' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n","/**\n * Module dependencies.\n */\n\nvar Transport = require('../transport');\nvar parser = require('engine.io-parser');\nvar parseqs = require('parseqs');\nvar inherit = require('component-inherit');\nvar yeast = require('yeast');\nvar debug = require('debug')('engine.io-client:websocket');\n\nvar BrowserWebSocket, NodeWebSocket;\n\nif (typeof WebSocket !== 'undefined') {\n  BrowserWebSocket = WebSocket;\n} else if (typeof self !== 'undefined') {\n  BrowserWebSocket = self.WebSocket || self.MozWebSocket;\n} else {\n  try {\n    NodeWebSocket = require('ws');\n  } catch (e) { }\n}\n\n/**\n * Get either the `WebSocket` or `MozWebSocket` globals\n * in the browser or try to resolve WebSocket-compatible\n * interface exposed by `ws` for Node-like environment.\n */\n\nvar WebSocketImpl = BrowserWebSocket || NodeWebSocket;\n\n/**\n * Module exports.\n */\n\nmodule.exports = WS;\n\n/**\n * WebSocket transport constructor.\n *\n * @api {Object} connection options\n * @api public\n */\n\nfunction WS (opts) {\n  var forceBase64 = (opts && opts.forceBase64);\n  if (forceBase64) {\n    this.supportsBinary = false;\n  }\n  this.perMessageDeflate = opts.perMessageDeflate;\n  this.usingBrowserWebSocket = BrowserWebSocket && !opts.forceNode;\n  this.protocols = opts.protocols;\n  if (!this.usingBrowserWebSocket) {\n    WebSocketImpl = NodeWebSocket;\n  }\n  Transport.call(this, opts);\n}\n\n/**\n * Inherits from Transport.\n */\n\ninherit(WS, Transport);\n\n/**\n * Transport name.\n *\n * @api public\n */\n\nWS.prototype.name = 'websocket';\n\n/*\n * WebSockets support binary\n */\n\nWS.prototype.supportsBinary = true;\n\n/**\n * Opens socket.\n *\n * @api private\n */\n\nWS.prototype.doOpen = function () {\n  if (!this.check()) {\n    // let probe timeout\n    return;\n  }\n\n  var uri = this.uri();\n  var protocols = this.protocols;\n  var opts = {\n    agent: this.agent,\n    perMessageDeflate: this.perMessageDeflate\n  };\n\n  // SSL options for Node.js client\n  opts.pfx = this.pfx;\n  opts.key = this.key;\n  opts.passphrase = this.passphrase;\n  opts.cert = this.cert;\n  opts.ca = this.ca;\n  opts.ciphers = this.ciphers;\n  opts.rejectUnauthorized = this.rejectUnauthorized;\n  if (this.extraHeaders) {\n    opts.headers = this.extraHeaders;\n  }\n  if (this.localAddress) {\n    opts.localAddress = this.localAddress;\n  }\n\n  try {\n    this.ws =\n      this.usingBrowserWebSocket && !this.isReactNative\n        ? protocols\n          ? new WebSocketImpl(uri, protocols)\n          : new WebSocketImpl(uri)\n        : new WebSocketImpl(uri, protocols, opts);\n  } catch (err) {\n    return this.emit('error', err);\n  }\n\n  if (this.ws.binaryType === undefined) {\n    this.supportsBinary = false;\n  }\n\n  if (this.ws.supports && this.ws.supports.binary) {\n    this.supportsBinary = true;\n    this.ws.binaryType = 'nodebuffer';\n  } else {\n    this.ws.binaryType = 'arraybuffer';\n  }\n\n  this.addEventListeners();\n};\n\n/**\n * Adds event listeners to the socket\n *\n * @api private\n */\n\nWS.prototype.addEventListeners = function () {\n  var self = this;\n\n  this.ws.onopen = function () {\n    self.onOpen();\n  };\n  this.ws.onclose = function () {\n    self.onClose();\n  };\n  this.ws.onmessage = function (ev) {\n    self.onData(ev.data);\n  };\n  this.ws.onerror = function (e) {\n    self.onError('websocket error', e);\n  };\n};\n\n/**\n * Writes data to socket.\n *\n * @param {Array} array of packets.\n * @api private\n */\n\nWS.prototype.write = function (packets) {\n  var self = this;\n  this.writable = false;\n\n  // encodePacket efficient as it uses WS framing\n  // no need for encodePayload\n  var total = packets.length;\n  for (var i = 0, l = total; i < l; i++) {\n    (function (packet) {\n      parser.encodePacket(packet, self.supportsBinary, function (data) {\n        if (!self.usingBrowserWebSocket) {\n          // always create a new object (GH-437)\n          var opts = {};\n          if (packet.options) {\n            opts.compress = packet.options.compress;\n          }\n\n          if (self.perMessageDeflate) {\n            var len = 'string' === typeof data ? Buffer.byteLength(data) : data.length;\n            if (len < self.perMessageDeflate.threshold) {\n              opts.compress = false;\n            }\n          }\n        }\n\n        // Sometimes the websocket has already been closed but the browser didn't\n        // have a chance of informing us about it yet, in that case send will\n        // throw an error\n        try {\n          if (self.usingBrowserWebSocket) {\n            // TypeError is thrown when passing the second argument on Safari\n            self.ws.send(data);\n          } else {\n            self.ws.send(data, opts);\n          }\n        } catch (e) {\n          debug('websocket closed before onclose event');\n        }\n\n        --total || done();\n      });\n    })(packets[i]);\n  }\n\n  function done () {\n    self.emit('flush');\n\n    // fake drain\n    // defer to next tick to allow Socket to clear writeBuffer\n    setTimeout(function () {\n      self.writable = true;\n      self.emit('drain');\n    }, 0);\n  }\n};\n\n/**\n * Called upon close\n *\n * @api private\n */\n\nWS.prototype.onClose = function () {\n  Transport.prototype.onClose.call(this);\n};\n\n/**\n * Closes socket.\n *\n * @api private\n */\n\nWS.prototype.doClose = function () {\n  if (typeof this.ws !== 'undefined') {\n    this.ws.close();\n  }\n};\n\n/**\n * Generates uri for connection.\n *\n * @api private\n */\n\nWS.prototype.uri = function () {\n  var query = this.query || {};\n  var schema = this.secure ? 'wss' : 'ws';\n  var port = '';\n\n  // avoid port if default for schema\n  if (this.port && (('wss' === schema && Number(this.port) !== 443) ||\n    ('ws' === schema && Number(this.port) !== 80))) {\n    port = ':' + this.port;\n  }\n\n  // append timestamp to URI\n  if (this.timestampRequests) {\n    query[this.timestampParam] = yeast();\n  }\n\n  // communicate binary support capabilities\n  if (!this.supportsBinary) {\n    query.b64 = 1;\n  }\n\n  query = parseqs.encode(query);\n\n  // prepend ? to query\n  if (query.length) {\n    query = '?' + query;\n  }\n\n  var ipv6 = this.hostname.indexOf(':') !== -1;\n  return schema + '://' + (ipv6 ? '[' + this.hostname + ']' : this.hostname) + port + this.path + query;\n};\n\n/**\n * Feature detection for WebSocket.\n *\n * @return {Boolean} whether this transport is available.\n * @api public\n */\n\nWS.prototype.check = function () {\n  return !!WebSocketImpl && !('__initialize' in WebSocketImpl && this.name === WS.prototype.name);\n};\n","// browser shim for xmlhttprequest module\n\nvar hasCORS = require('has-cors');\n\nmodule.exports = function (opts) {\n  var xdomain = opts.xdomain;\n\n  // scheme must be same when usign XDomainRequest\n  // http://blogs.msdn.com/b/ieinternals/archive/2010/05/13/xdomainrequest-restrictions-limitations-and-workarounds.aspx\n  var xscheme = opts.xscheme;\n\n  // XDomainRequest has a flow of not sending cookie, therefore it should be disabled as a default.\n  // https://github.com/Automattic/engine.io-client/pull/217\n  var enablesXDR = opts.enablesXDR;\n\n  // XMLHttpRequest can be disabled on IE\n  try {\n    if ('undefined' !== typeof XMLHttpRequest && (!xdomain || hasCORS)) {\n      return new XMLHttpRequest();\n    }\n  } catch (e) { }\n\n  // Use XDomainRequest for IE8 if enablesXDR is true\n  // because loading bar keeps flashing when using jsonp-polling\n  // https://github.com/yujiosaka/socke.io-ie8-loading-example\n  try {\n    if ('undefined' !== typeof XDomainRequest && !xscheme && enablesXDR) {\n      return new XDomainRequest();\n    }\n  } catch (e) { }\n\n  if (!xdomain) {\n    try {\n      return new self[['Active'].concat('Object').join('X')]('Microsoft.XMLHTTP');\n    } catch (e) { }\n  }\n};\n","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  '#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC',\n  '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF',\n  '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC',\n  '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF',\n  '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC',\n  '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033',\n  '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366',\n  '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933',\n  '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC',\n  '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF',\n  '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // Internet Explorer and Edge do not support colors.\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * Active `debug` instances.\n */\nexports.instances = [];\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  var prevTime;\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n  debug.destroy = destroy;\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  exports.instances.push(debug);\n\n  return debug;\n}\n\nfunction destroy () {\n  var index = exports.instances.indexOf(this);\n  if (index !== -1) {\n    exports.instances.splice(index, 1);\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var i;\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n\n  for (i = 0; i < exports.instances.length; i++) {\n    var instance = exports.instances[i];\n    instance.enabled = exports.enabled(instance.namespace);\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  if (name[name.length - 1] === '*') {\n    return true;\n  }\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","/**\n * Module dependencies.\n */\n\nvar keys = require('./keys');\nvar hasBinary = require('has-binary2');\nvar sliceBuffer = require('arraybuffer.slice');\nvar after = require('after');\nvar utf8 = require('./utf8');\n\nvar base64encoder;\nif (typeof ArrayBuffer !== 'undefined') {\n  base64encoder = require('base64-arraybuffer');\n}\n\n/**\n * Check if we are running an android browser. That requires us to use\n * ArrayBuffer with polling transports...\n *\n * http://ghinda.net/jpeg-blob-ajax-android/\n */\n\nvar isAndroid = typeof navigator !== 'undefined' && /Android/i.test(navigator.userAgent);\n\n/**\n * Check if we are running in PhantomJS.\n * Uploading a Blob with PhantomJS does not work correctly, as reported here:\n * https://github.com/ariya/phantomjs/issues/11395\n * @type boolean\n */\nvar isPhantomJS = typeof navigator !== 'undefined' && /PhantomJS/i.test(navigator.userAgent);\n\n/**\n * When true, avoids using Blobs to encode payloads.\n * @type boolean\n */\nvar dontSendBlobs = isAndroid || isPhantomJS;\n\n/**\n * Current protocol version.\n */\n\nexports.protocol = 3;\n\n/**\n * Packet types.\n */\n\nvar packets = exports.packets = {\n    open:     0    // non-ws\n  , close:    1    // non-ws\n  , ping:     2\n  , pong:     3\n  , message:  4\n  , upgrade:  5\n  , noop:     6\n};\n\nvar packetslist = keys(packets);\n\n/**\n * Premade error packet.\n */\n\nvar err = { type: 'error', data: 'parser error' };\n\n/**\n * Create a blob api even for blob builder when vendor prefixes exist\n */\n\nvar Blob = require('blob');\n\n/**\n * Encodes a packet.\n *\n *     <packet type id> [ <data> ]\n *\n * Example:\n *\n *     5hello world\n *     3\n *     4\n *\n * Binary is encoded in an identical principle\n *\n * @api private\n */\n\nexports.encodePacket = function (packet, supportsBinary, utf8encode, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = false;\n  }\n\n  if (typeof utf8encode === 'function') {\n    callback = utf8encode;\n    utf8encode = null;\n  }\n\n  var data = (packet.data === undefined)\n    ? undefined\n    : packet.data.buffer || packet.data;\n\n  if (typeof ArrayBuffer !== 'undefined' && data instanceof ArrayBuffer) {\n    return encodeArrayBuffer(packet, supportsBinary, callback);\n  } else if (typeof Blob !== 'undefined' && data instanceof Blob) {\n    return encodeBlob(packet, supportsBinary, callback);\n  }\n\n  // might be an object with { base64: true, data: dataAsBase64String }\n  if (data && data.base64) {\n    return encodeBase64Object(packet, callback);\n  }\n\n  // Sending data as a utf-8 string\n  var encoded = packets[packet.type];\n\n  // data fragment is optional\n  if (undefined !== packet.data) {\n    encoded += utf8encode ? utf8.encode(String(packet.data), { strict: false }) : String(packet.data);\n  }\n\n  return callback('' + encoded);\n\n};\n\nfunction encodeBase64Object(packet, callback) {\n  // packet data is an object { base64: true, data: dataAsBase64String }\n  var message = 'b' + exports.packets[packet.type] + packet.data.data;\n  return callback(message);\n}\n\n/**\n * Encode packet helpers for binary types\n */\n\nfunction encodeArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var data = packet.data;\n  var contentArray = new Uint8Array(data);\n  var resultBuffer = new Uint8Array(1 + data.byteLength);\n\n  resultBuffer[0] = packets[packet.type];\n  for (var i = 0; i < contentArray.length; i++) {\n    resultBuffer[i+1] = contentArray[i];\n  }\n\n  return callback(resultBuffer.buffer);\n}\n\nfunction encodeBlobAsArrayBuffer(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  var fr = new FileReader();\n  fr.onload = function() {\n    exports.encodePacket({ type: packet.type, data: fr.result }, supportsBinary, true, callback);\n  };\n  return fr.readAsArrayBuffer(packet.data);\n}\n\nfunction encodeBlob(packet, supportsBinary, callback) {\n  if (!supportsBinary) {\n    return exports.encodeBase64Packet(packet, callback);\n  }\n\n  if (dontSendBlobs) {\n    return encodeBlobAsArrayBuffer(packet, supportsBinary, callback);\n  }\n\n  var length = new Uint8Array(1);\n  length[0] = packets[packet.type];\n  var blob = new Blob([length.buffer, packet.data]);\n\n  return callback(blob);\n}\n\n/**\n * Encodes a packet with binary data in a base64 string\n *\n * @param {Object} packet, has `type` and `data`\n * @return {String} base64 encoded message\n */\n\nexports.encodeBase64Packet = function(packet, callback) {\n  var message = 'b' + exports.packets[packet.type];\n  if (typeof Blob !== 'undefined' && packet.data instanceof Blob) {\n    var fr = new FileReader();\n    fr.onload = function() {\n      var b64 = fr.result.split(',')[1];\n      callback(message + b64);\n    };\n    return fr.readAsDataURL(packet.data);\n  }\n\n  var b64data;\n  try {\n    b64data = String.fromCharCode.apply(null, new Uint8Array(packet.data));\n  } catch (e) {\n    // iPhone Safari doesn't let you apply with typed arrays\n    var typed = new Uint8Array(packet.data);\n    var basic = new Array(typed.length);\n    for (var i = 0; i < typed.length; i++) {\n      basic[i] = typed[i];\n    }\n    b64data = String.fromCharCode.apply(null, basic);\n  }\n  message += btoa(b64data);\n  return callback(message);\n};\n\n/**\n * Decodes a packet. Changes format to Blob if requested.\n *\n * @return {Object} with `type` and `data` (if any)\n * @api private\n */\n\nexports.decodePacket = function (data, binaryType, utf8decode) {\n  if (data === undefined) {\n    return err;\n  }\n  // String data\n  if (typeof data === 'string') {\n    if (data.charAt(0) === 'b') {\n      return exports.decodeBase64Packet(data.substr(1), binaryType);\n    }\n\n    if (utf8decode) {\n      data = tryDecode(data);\n      if (data === false) {\n        return err;\n      }\n    }\n    var type = data.charAt(0);\n\n    if (Number(type) != type || !packetslist[type]) {\n      return err;\n    }\n\n    if (data.length > 1) {\n      return { type: packetslist[type], data: data.substring(1) };\n    } else {\n      return { type: packetslist[type] };\n    }\n  }\n\n  var asArray = new Uint8Array(data);\n  var type = asArray[0];\n  var rest = sliceBuffer(data, 1);\n  if (Blob && binaryType === 'blob') {\n    rest = new Blob([rest]);\n  }\n  return { type: packetslist[type], data: rest };\n};\n\nfunction tryDecode(data) {\n  try {\n    data = utf8.decode(data, { strict: false });\n  } catch (e) {\n    return false;\n  }\n  return data;\n}\n\n/**\n * Decodes a packet encoded in a base64 string\n *\n * @param {String} base64 encoded message\n * @return {Object} with `type` and `data` (if any)\n */\n\nexports.decodeBase64Packet = function(msg, binaryType) {\n  var type = packetslist[msg.charAt(0)];\n  if (!base64encoder) {\n    return { type: type, data: { base64: true, data: msg.substr(1) } };\n  }\n\n  var data = base64encoder.decode(msg.substr(1));\n\n  if (binaryType === 'blob' && Blob) {\n    data = new Blob([data]);\n  }\n\n  return { type: type, data: data };\n};\n\n/**\n * Encodes multiple messages (payload).\n *\n *     <length>:data\n *\n * Example:\n *\n *     11:hello world2:hi\n *\n * If any contents are binary, they will be encoded as base64 strings. Base64\n * encoded strings are marked with a b before the length specifier\n *\n * @param {Array} packets\n * @api private\n */\n\nexports.encodePayload = function (packets, supportsBinary, callback) {\n  if (typeof supportsBinary === 'function') {\n    callback = supportsBinary;\n    supportsBinary = null;\n  }\n\n  var isBinary = hasBinary(packets);\n\n  if (supportsBinary && isBinary) {\n    if (Blob && !dontSendBlobs) {\n      return exports.encodePayloadAsBlob(packets, callback);\n    }\n\n    return exports.encodePayloadAsArrayBuffer(packets, callback);\n  }\n\n  if (!packets.length) {\n    return callback('0:');\n  }\n\n  function setLengthHeader(message) {\n    return message.length + ':' + message;\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, !isBinary ? false : supportsBinary, false, function(message) {\n      doneCallback(null, setLengthHeader(message));\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(results.join(''));\n  });\n};\n\n/**\n * Async array map using after\n */\n\nfunction map(ary, each, done) {\n  var result = new Array(ary.length);\n  var next = after(ary.length, done);\n\n  var eachWithIndex = function(i, el, cb) {\n    each(el, function(error, msg) {\n      result[i] = msg;\n      cb(error, result);\n    });\n  };\n\n  for (var i = 0; i < ary.length; i++) {\n    eachWithIndex(i, ary[i], next);\n  }\n}\n\n/*\n * Decodes data when a payload is maybe expected. Possible binary contents are\n * decoded from their base64 representation\n *\n * @param {String} data, callback method\n * @api public\n */\n\nexports.decodePayload = function (data, binaryType, callback) {\n  if (typeof data !== 'string') {\n    return exports.decodePayloadAsBinary(data, binaryType, callback);\n  }\n\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var packet;\n  if (data === '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n  var length = '', n, msg;\n\n  for (var i = 0, l = data.length; i < l; i++) {\n    var chr = data.charAt(i);\n\n    if (chr !== ':') {\n      length += chr;\n      continue;\n    }\n\n    if (length === '' || (length != (n = Number(length)))) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    msg = data.substr(i + 1, n);\n\n    if (length != msg.length) {\n      // parser error - ignoring payload\n      return callback(err, 0, 1);\n    }\n\n    if (msg.length) {\n      packet = exports.decodePacket(msg, binaryType, false);\n\n      if (err.type === packet.type && err.data === packet.data) {\n        // parser error in individual packet - ignoring payload\n        return callback(err, 0, 1);\n      }\n\n      var ret = callback(packet, i + n, l);\n      if (false === ret) return;\n    }\n\n    // advance cursor\n    i += n;\n    length = '';\n  }\n\n  if (length !== '') {\n    // parser error - ignoring payload\n    return callback(err, 0, 1);\n  }\n\n};\n\n/**\n * Encodes multiple messages (payload) as binary.\n *\n * <1 = binary, 0 = string><number from 0-9><number from 0-9>[...]<number\n * 255><data>\n *\n * Example:\n * 1 3 255 1 2 3, if the binary contents are interpreted as 8 bit integers\n *\n * @param {Array} packets\n * @return {ArrayBuffer} encoded payload\n * @api private\n */\n\nexports.encodePayloadAsArrayBuffer = function(packets, callback) {\n  if (!packets.length) {\n    return callback(new ArrayBuffer(0));\n  }\n\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(data) {\n      return doneCallback(null, data);\n    });\n  }\n\n  map(packets, encodeOne, function(err, encodedPackets) {\n    var totalLength = encodedPackets.reduce(function(acc, p) {\n      var len;\n      if (typeof p === 'string'){\n        len = p.length;\n      } else {\n        len = p.byteLength;\n      }\n      return acc + len.toString().length + len + 2; // string/binary identifier + separator = 2\n    }, 0);\n\n    var resultArray = new Uint8Array(totalLength);\n\n    var bufferIndex = 0;\n    encodedPackets.forEach(function(p) {\n      var isString = typeof p === 'string';\n      var ab = p;\n      if (isString) {\n        var view = new Uint8Array(p.length);\n        for (var i = 0; i < p.length; i++) {\n          view[i] = p.charCodeAt(i);\n        }\n        ab = view.buffer;\n      }\n\n      if (isString) { // not true binary\n        resultArray[bufferIndex++] = 0;\n      } else { // true binary\n        resultArray[bufferIndex++] = 1;\n      }\n\n      var lenStr = ab.byteLength.toString();\n      for (var i = 0; i < lenStr.length; i++) {\n        resultArray[bufferIndex++] = parseInt(lenStr[i]);\n      }\n      resultArray[bufferIndex++] = 255;\n\n      var view = new Uint8Array(ab);\n      for (var i = 0; i < view.length; i++) {\n        resultArray[bufferIndex++] = view[i];\n      }\n    });\n\n    return callback(resultArray.buffer);\n  });\n};\n\n/**\n * Encode as Blob\n */\n\nexports.encodePayloadAsBlob = function(packets, callback) {\n  function encodeOne(packet, doneCallback) {\n    exports.encodePacket(packet, true, true, function(encoded) {\n      var binaryIdentifier = new Uint8Array(1);\n      binaryIdentifier[0] = 1;\n      if (typeof encoded === 'string') {\n        var view = new Uint8Array(encoded.length);\n        for (var i = 0; i < encoded.length; i++) {\n          view[i] = encoded.charCodeAt(i);\n        }\n        encoded = view.buffer;\n        binaryIdentifier[0] = 0;\n      }\n\n      var len = (encoded instanceof ArrayBuffer)\n        ? encoded.byteLength\n        : encoded.size;\n\n      var lenStr = len.toString();\n      var lengthAry = new Uint8Array(lenStr.length + 1);\n      for (var i = 0; i < lenStr.length; i++) {\n        lengthAry[i] = parseInt(lenStr[i]);\n      }\n      lengthAry[lenStr.length] = 255;\n\n      if (Blob) {\n        var blob = new Blob([binaryIdentifier.buffer, lengthAry.buffer, encoded]);\n        doneCallback(null, blob);\n      }\n    });\n  }\n\n  map(packets, encodeOne, function(err, results) {\n    return callback(new Blob(results));\n  });\n};\n\n/*\n * Decodes data when a payload is maybe expected. Strings are decoded by\n * interpreting each byte as a key code for entries marked to start with 0. See\n * description of encodePayloadAsBinary\n *\n * @param {ArrayBuffer} data, callback method\n * @api public\n */\n\nexports.decodePayloadAsBinary = function (data, binaryType, callback) {\n  if (typeof binaryType === 'function') {\n    callback = binaryType;\n    binaryType = null;\n  }\n\n  var bufferTail = data;\n  var buffers = [];\n\n  while (bufferTail.byteLength > 0) {\n    var tailArray = new Uint8Array(bufferTail);\n    var isString = tailArray[0] === 0;\n    var msgLength = '';\n\n    for (var i = 1; ; i++) {\n      if (tailArray[i] === 255) break;\n\n      // 310 = char length of Number.MAX_VALUE\n      if (msgLength.length > 310) {\n        return callback(err, 0, 1);\n      }\n\n      msgLength += tailArray[i];\n    }\n\n    bufferTail = sliceBuffer(bufferTail, 2 + msgLength.length);\n    msgLength = parseInt(msgLength);\n\n    var msg = sliceBuffer(bufferTail, 0, msgLength);\n    if (isString) {\n      try {\n        msg = String.fromCharCode.apply(null, new Uint8Array(msg));\n      } catch (e) {\n        // iPhone Safari doesn't let you apply to typed arrays\n        var typed = new Uint8Array(msg);\n        msg = '';\n        for (var i = 0; i < typed.length; i++) {\n          msg += String.fromCharCode(typed[i]);\n        }\n      }\n    }\n\n    buffers.push(msg);\n    bufferTail = sliceBuffer(bufferTail, msgLength);\n  }\n\n  var total = buffers.length;\n  buffers.forEach(function(buffer, i) {\n    callback(exports.decodePacket(buffer, binaryType, true), i, total);\n  });\n};\n","\n/**\n * Gets the keys for an object.\n *\n * @return {Array} keys\n * @api private\n */\n\nmodule.exports = Object.keys || function keys (obj){\n  var arr = [];\n  var has = Object.prototype.hasOwnProperty;\n\n  for (var i in obj) {\n    if (has.call(obj, i)) {\n      arr.push(i);\n    }\n  }\n  return arr;\n};\n","/*! https://mths.be/utf8js v2.1.2 by @mathias */\n\nvar stringFromCharCode = String.fromCharCode;\n\n// Taken from https://mths.be/punycode\nfunction ucs2decode(string) {\n\tvar output = [];\n\tvar counter = 0;\n\tvar length = string.length;\n\tvar value;\n\tvar extra;\n\twhile (counter < length) {\n\t\tvalue = string.charCodeAt(counter++);\n\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t// high surrogate, and there is a next character\n\t\t\textra = string.charCodeAt(counter++);\n\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t} else {\n\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\toutput.push(value);\n\t\t\t\tcounter--;\n\t\t\t}\n\t\t} else {\n\t\t\toutput.push(value);\n\t\t}\n\t}\n\treturn output;\n}\n\n// Taken from https://mths.be/punycode\nfunction ucs2encode(array) {\n\tvar length = array.length;\n\tvar index = -1;\n\tvar value;\n\tvar output = '';\n\twhile (++index < length) {\n\t\tvalue = array[index];\n\t\tif (value > 0xFFFF) {\n\t\t\tvalue -= 0x10000;\n\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t}\n\t\toutput += stringFromCharCode(value);\n\t}\n\treturn output;\n}\n\nfunction checkScalarValue(codePoint, strict) {\n\tif (codePoint >= 0xD800 && codePoint <= 0xDFFF) {\n\t\tif (strict) {\n\t\t\tthrow Error(\n\t\t\t\t'Lone surrogate U+' + codePoint.toString(16).toUpperCase() +\n\t\t\t\t' is not a scalar value'\n\t\t\t);\n\t\t}\n\t\treturn false;\n\t}\n\treturn true;\n}\n/*--------------------------------------------------------------------------*/\n\nfunction createByte(codePoint, shift) {\n\treturn stringFromCharCode(((codePoint >> shift) & 0x3F) | 0x80);\n}\n\nfunction encodeCodePoint(codePoint, strict) {\n\tif ((codePoint & 0xFFFFFF80) == 0) { // 1-byte sequence\n\t\treturn stringFromCharCode(codePoint);\n\t}\n\tvar symbol = '';\n\tif ((codePoint & 0xFFFFF800) == 0) { // 2-byte sequence\n\t\tsymbol = stringFromCharCode(((codePoint >> 6) & 0x1F) | 0xC0);\n\t}\n\telse if ((codePoint & 0xFFFF0000) == 0) { // 3-byte sequence\n\t\tif (!checkScalarValue(codePoint, strict)) {\n\t\t\tcodePoint = 0xFFFD;\n\t\t}\n\t\tsymbol = stringFromCharCode(((codePoint >> 12) & 0x0F) | 0xE0);\n\t\tsymbol += createByte(codePoint, 6);\n\t}\n\telse if ((codePoint & 0xFFE00000) == 0) { // 4-byte sequence\n\t\tsymbol = stringFromCharCode(((codePoint >> 18) & 0x07) | 0xF0);\n\t\tsymbol += createByte(codePoint, 12);\n\t\tsymbol += createByte(codePoint, 6);\n\t}\n\tsymbol += stringFromCharCode((codePoint & 0x3F) | 0x80);\n\treturn symbol;\n}\n\nfunction utf8encode(string, opts) {\n\topts = opts || {};\n\tvar strict = false !== opts.strict;\n\n\tvar codePoints = ucs2decode(string);\n\tvar length = codePoints.length;\n\tvar index = -1;\n\tvar codePoint;\n\tvar byteString = '';\n\twhile (++index < length) {\n\t\tcodePoint = codePoints[index];\n\t\tbyteString += encodeCodePoint(codePoint, strict);\n\t}\n\treturn byteString;\n}\n\n/*--------------------------------------------------------------------------*/\n\nfunction readContinuationByte() {\n\tif (byteIndex >= byteCount) {\n\t\tthrow Error('Invalid byte index');\n\t}\n\n\tvar continuationByte = byteArray[byteIndex] & 0xFF;\n\tbyteIndex++;\n\n\tif ((continuationByte & 0xC0) == 0x80) {\n\t\treturn continuationByte & 0x3F;\n\t}\n\n\t// If we end up here, it’s not a continuation byte\n\tthrow Error('Invalid continuation byte');\n}\n\nfunction decodeSymbol(strict) {\n\tvar byte1;\n\tvar byte2;\n\tvar byte3;\n\tvar byte4;\n\tvar codePoint;\n\n\tif (byteIndex > byteCount) {\n\t\tthrow Error('Invalid byte index');\n\t}\n\n\tif (byteIndex == byteCount) {\n\t\treturn false;\n\t}\n\n\t// Read first byte\n\tbyte1 = byteArray[byteIndex] & 0xFF;\n\tbyteIndex++;\n\n\t// 1-byte sequence (no continuation bytes)\n\tif ((byte1 & 0x80) == 0) {\n\t\treturn byte1;\n\t}\n\n\t// 2-byte sequence\n\tif ((byte1 & 0xE0) == 0xC0) {\n\t\tbyte2 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x1F) << 6) | byte2;\n\t\tif (codePoint >= 0x80) {\n\t\t\treturn codePoint;\n\t\t} else {\n\t\t\tthrow Error('Invalid continuation byte');\n\t\t}\n\t}\n\n\t// 3-byte sequence (may include unpaired surrogates)\n\tif ((byte1 & 0xF0) == 0xE0) {\n\t\tbyte2 = readContinuationByte();\n\t\tbyte3 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x0F) << 12) | (byte2 << 6) | byte3;\n\t\tif (codePoint >= 0x0800) {\n\t\t\treturn checkScalarValue(codePoint, strict) ? codePoint : 0xFFFD;\n\t\t} else {\n\t\t\tthrow Error('Invalid continuation byte');\n\t\t}\n\t}\n\n\t// 4-byte sequence\n\tif ((byte1 & 0xF8) == 0xF0) {\n\t\tbyte2 = readContinuationByte();\n\t\tbyte3 = readContinuationByte();\n\t\tbyte4 = readContinuationByte();\n\t\tcodePoint = ((byte1 & 0x07) << 0x12) | (byte2 << 0x0C) |\n\t\t\t(byte3 << 0x06) | byte4;\n\t\tif (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\treturn codePoint;\n\t\t}\n\t}\n\n\tthrow Error('Invalid UTF-8 detected');\n}\n\nvar byteArray;\nvar byteCount;\nvar byteIndex;\nfunction utf8decode(byteString, opts) {\n\topts = opts || {};\n\tvar strict = false !== opts.strict;\n\n\tbyteArray = ucs2decode(byteString);\n\tbyteCount = byteArray.length;\n\tbyteIndex = 0;\n\tvar codePoints = [];\n\tvar tmp;\n\twhile ((tmp = decodeSymbol(strict)) !== false) {\n\t\tcodePoints.push(tmp);\n\t}\n\treturn ucs2encode(codePoints);\n}\n\nmodule.exports = {\n\tversion: '2.1.2',\n\tencode: utf8encode,\n\tdecode: utf8decode\n};\n","'use strict';\r\n\r\n// Last time updated: 2019-02-20 3:31:29 PM UTC\r\n\r\n// _______________\r\n// getStats v1.2.0\r\n\r\n// Open-Sourced: https://github.com/muaz-khan/getStats\r\n\r\n// --------------------------------------------------\r\n// Muaz Khan     - www.MuazKhan.com\r\n// MIT License   - www.WebRTC-Experiment.com/licence\r\n// --------------------------------------------------\r\n\r\nvar getStats = function(mediaStreamTrack, callback, interval) {\r\n\r\n    var browserFakeUserAgent = 'Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45';\r\n\r\n    (function(that) {\r\n        if (!that) {\r\n            return;\r\n        }\r\n\r\n        if (typeof window !== 'undefined') {\r\n            return;\r\n        }\r\n\r\n        if (typeof global === 'undefined') {\r\n            return;\r\n        }\r\n\r\n        global.navigator = {\r\n            userAgent: browserFakeUserAgent,\r\n            getUserMedia: function() {}\r\n        };\r\n\r\n        if (!global.console) {\r\n            global.console = {};\r\n        }\r\n\r\n        if (typeof global.console.log === 'undefined' || typeof global.console.error === 'undefined') {\r\n            global.console.error = global.console.log = global.console.log || function() {\r\n                console.log(arguments);\r\n            };\r\n        }\r\n\r\n        if (typeof document === 'undefined') {\r\n            /*global document:true */\r\n            that.document = {\r\n                documentElement: {\r\n                    appendChild: function() {\r\n                        return '';\r\n                    }\r\n                }\r\n            };\r\n\r\n            document.createElement = document.captureStream = document.mozCaptureStream = function() {\r\n                var obj = {\r\n                    getContext: function() {\r\n                        return obj;\r\n                    },\r\n                    play: function() {},\r\n                    pause: function() {},\r\n                    drawImage: function() {},\r\n                    toDataURL: function() {\r\n                        return '';\r\n                    }\r\n                };\r\n                return obj;\r\n            };\r\n\r\n            that.HTMLVideoElement = function() {};\r\n        }\r\n\r\n        if (typeof location === 'undefined') {\r\n            /*global location:true */\r\n            that.location = {\r\n                protocol: 'file:',\r\n                href: '',\r\n                hash: ''\r\n            };\r\n        }\r\n\r\n        if (typeof screen === 'undefined') {\r\n            /*global screen:true */\r\n            that.screen = {\r\n                width: 0,\r\n                height: 0\r\n            };\r\n        }\r\n\r\n        if (typeof URL === 'undefined') {\r\n            /*global screen:true */\r\n            that.URL = {\r\n                createObjectURL: function() {\r\n                    return '';\r\n                },\r\n                revokeObjectURL: function() {\r\n                    return '';\r\n                }\r\n            };\r\n        }\r\n\r\n        if (typeof MediaStreamTrack === 'undefined') {\r\n            /*global screen:true */\r\n            that.MediaStreamTrack = function() {};\r\n        }\r\n\r\n        if (typeof RTCPeerConnection === 'undefined') {\r\n            /*global screen:true */\r\n            that.RTCPeerConnection = function() {};\r\n        }\r\n\r\n        /*global window:true */\r\n        that.window = global;\r\n    })(typeof global !== 'undefined' ? global : null);\r\n\r\n    var RTCPeerConnection = window.RTCPeerConnection || window.mozRTCPeerConnection || window.webkitRTCPeerConnection;\r\n\r\n    if (typeof MediaStreamTrack === 'undefined') {\r\n        MediaStreamTrack = {}; // todo?\r\n    }\r\n\r\n    var systemNetworkType = ((navigator.connection || {}).type || 'unknown').toString().toLowerCase();\r\n\r\n    var getStatsResult = {\r\n        encryption: 'sha-256',\r\n        audio: {\r\n            send: {\r\n                tracks: [],\r\n                codecs: [],\r\n                availableBandwidth: 0,\r\n                streams: 0,\r\n                framerateMean: 0,\r\n                bitrateMean: 0\r\n            },\r\n            recv: {\r\n                tracks: [],\r\n                codecs: [],\r\n                availableBandwidth: 0,\r\n                streams: 0,\r\n                framerateMean: 0,\r\n                bitrateMean: 0\r\n            },\r\n            bytesSent: 0,\r\n            bytesReceived: 0,\r\n            latency: 0,\r\n            packetsLost: 0\r\n        },\r\n        video: {\r\n            send: {\r\n                tracks: [],\r\n                codecs: [],\r\n                availableBandwidth: 0,\r\n                streams: 0,\r\n                framerateMean: 0,\r\n                bitrateMean: 0\r\n            },\r\n            recv: {\r\n                tracks: [],\r\n                codecs: [],\r\n                availableBandwidth: 0,\r\n                streams: 0,\r\n                framerateMean: 0,\r\n                bitrateMean: 0\r\n            },\r\n            bytesSent: 0,\r\n            bytesReceived: 0,\r\n            latency: 0,\r\n            packetsLost: 0\r\n        },\r\n        bandwidth: {\r\n            systemBandwidth: 0,\r\n            sentPerSecond: 0,\r\n            encodedPerSecond: 0,\r\n            helper: {\r\n                audioBytesSent: 0,\r\n                videoBytestSent: 0\r\n            },\r\n            speed: 0\r\n        },\r\n        results: {},\r\n        connectionType: {\r\n            systemNetworkType: systemNetworkType,\r\n            systemIpAddress: '192.168.1.2',\r\n            local: {\r\n                candidateType: [],\r\n                transport: [],\r\n                ipAddress: [],\r\n                networkType: []\r\n            },\r\n            remote: {\r\n                candidateType: [],\r\n                transport: [],\r\n                ipAddress: [],\r\n                networkType: []\r\n            }\r\n        },\r\n        resolutions: {\r\n            send: {\r\n                width: 0,\r\n                height: 0\r\n            },\r\n            recv: {\r\n                width: 0,\r\n                height: 0\r\n            }\r\n        },\r\n        internal: {\r\n            audio: {\r\n                send: {},\r\n                recv: {}\r\n            },\r\n            video: {\r\n                send: {},\r\n                recv: {}\r\n            },\r\n            candidates: {}\r\n        },\r\n        nomore: function() {\r\n            nomore = true;\r\n        }\r\n    };\r\n\r\n    var getStatsParser = {\r\n        checkIfOfferer: function(result) {\r\n            if (result.type === 'googLibjingleSession') {\r\n                getStatsResult.isOfferer = result.googInitiator;\r\n            }\r\n        }\r\n    };\r\n\r\n    var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\r\n\r\n    var peer = this;\r\n\r\n    if (!(arguments[0] instanceof RTCPeerConnection)) {\r\n        throw '1st argument is not instance of RTCPeerConnection.';\r\n    }\r\n\r\n    peer = arguments[0];\r\n\r\n    if (arguments[1] instanceof MediaStreamTrack) {\r\n        mediaStreamTrack = arguments[1]; // redundant on non-safari\r\n        callback = arguments[2];\r\n        interval = arguments[3];\r\n    }\r\n\r\n    var nomore = false;\r\n\r\n    function getStatsLooper() {\r\n        getStatsWrapper(function(results) {\r\n            if (!results || !results.forEach) return;\r\n\r\n            results.forEach(function(result) {\r\n                // console.error('result', result);\r\n                Object.keys(getStatsParser).forEach(function(key) {\r\n                    if (typeof getStatsParser[key] === 'function') {\r\n                        try {\r\n                            getStatsParser[key](result);\r\n                        } catch (e) {\r\n                            console.error(e.message, e.stack, e);\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n\r\n            try {\r\n                if (peer.iceConnectionState.search(/failed|closed|disconnected/gi) !== -1) {\r\n                    nomore = true;\r\n                }\r\n            } catch (e) {\r\n                nomore = true;\r\n            }\r\n\r\n            if (nomore === true) {\r\n                if (getStatsResult.datachannel) {\r\n                    getStatsResult.datachannel.state = 'close';\r\n                }\r\n                getStatsResult.ended = true;\r\n            }\r\n\r\n            // allow users to access native results\r\n            getStatsResult.results = results;\r\n\r\n            if (getStatsResult.audio && getStatsResult.video) {\r\n                getStatsResult.bandwidth.speed = (getStatsResult.audio.bytesSent - getStatsResult.bandwidth.helper.audioBytesSent) + (getStatsResult.video.bytesSent - getStatsResult.bandwidth.helper.videoBytesSent);\r\n                getStatsResult.bandwidth.helper.audioBytesSent = getStatsResult.audio.bytesSent;\r\n                getStatsResult.bandwidth.helper.videoBytesSent = getStatsResult.video.bytesSent;\r\n            }\r\n\r\n            callback(getStatsResult);\r\n\r\n            // second argument checks to see, if target-user is still connected.\r\n            if (!nomore) {\r\n                typeof interval != undefined && interval && setTimeout(getStatsLooper, interval || 1000);\r\n            }\r\n        });\r\n    }\r\n\r\n    // a wrapper around getStats which hides the differences (where possible)\r\n    // following code-snippet is taken from somewhere on the github\r\n    function getStatsWrapper(cb) {\r\n        // if !peer or peer.signalingState == 'closed' then return;\r\n\r\n        if (typeof window.InstallTrigger !== 'undefined' || isSafari) { // maybe \"isEdge?\"\r\n            peer.getStats(window.mediaStreamTrack || null).then(function(res) {\r\n                var items = [];\r\n                res.forEach(function(r) {\r\n                    items.push(r);\r\n                });\r\n                cb(items);\r\n            }).catch(cb);\r\n        } else {\r\n            peer.getStats(function(res) {\r\n                var items = [];\r\n                res.result().forEach(function(res) {\r\n                    var item = {};\r\n                    res.names().forEach(function(name) {\r\n                        item[name] = res.stat(name);\r\n                    });\r\n                    item.id = res.id;\r\n                    item.type = res.type;\r\n                    item.timestamp = res.timestamp;\r\n                    items.push(item);\r\n                });\r\n                cb(items);\r\n            });\r\n        }\r\n    };\r\n\r\n    getStatsParser.datachannel = function(result) {\r\n        if (result.type !== 'datachannel') return;\r\n\r\n        getStatsResult.datachannel = {\r\n            state: result.state // open or connecting\r\n        }\r\n    };\r\n\r\n    getStatsParser.googCertificate = function(result) {\r\n        if (result.type == 'googCertificate') {\r\n            getStatsResult.encryption = result.googFingerprintAlgorithm;\r\n        }\r\n\r\n        // Safari-11 or higher\r\n        if (result.type == 'certificate') {\r\n            // todo: is it possible to have different encryption methods for senders and receivers?\r\n            // if yes, then we need to set:\r\n            //    getStatsResult.encryption.local = value;\r\n            //    getStatsResult.encryption.remote = value;\r\n            getStatsResult.encryption = result.fingerprintAlgorithm;\r\n        }\r\n    };\r\n\r\n    getStatsParser.checkAudioTracks = function(result) {\r\n        if (result.mediaType !== 'audio') return;\r\n\r\n        var sendrecvType = result.id.split('_').pop();\r\n        if (result.isRemote === true) {\r\n            sendrecvType = 'recv';\r\n        }\r\n        if (result.isRemote === false) {\r\n            sendrecvType = 'send';\r\n        }\r\n\r\n        if (!sendrecvType) return;\r\n\r\n        if (getStatsResult.audio[sendrecvType].codecs.indexOf(result.googCodecName || 'opus') === -1) {\r\n            getStatsResult.audio[sendrecvType].codecs.push(result.googCodecName || 'opus');\r\n        }\r\n\r\n        if (!!result.bytesSent) {\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal.audio[sendrecvType].prevBytesSent) {\r\n                getStatsResult.internal.audio[sendrecvType].prevBytesSent = result.bytesSent;\r\n            }\r\n\r\n            var bytes = result.bytesSent - getStatsResult.internal.audio[sendrecvType].prevBytesSent;\r\n            getStatsResult.internal.audio[sendrecvType].prevBytesSent = result.bytesSent;\r\n\r\n            kilobytes = bytes / 1024;\r\n            getStatsResult.audio[sendrecvType].availableBandwidth = kilobytes.toFixed(1);\r\n            getStatsResult.audio.bytesSent = kilobytes.toFixed(1);\r\n        }\r\n\r\n        if (!!result.bytesReceived) {\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal.audio[sendrecvType].prevBytesReceived) {\r\n                getStatsResult.internal.audio[sendrecvType].prevBytesReceived = result.bytesReceived;\r\n            }\r\n\r\n            var bytes = result.bytesReceived - getStatsResult.internal.audio[sendrecvType].prevBytesReceived;\r\n            getStatsResult.internal.audio[sendrecvType].prevBytesReceived = result.bytesReceived;\r\n\r\n            kilobytes = bytes / 1024;\r\n\r\n            // getStatsResult.audio[sendrecvType].availableBandwidth = kilobytes.toFixed(1);\r\n            getStatsResult.audio.bytesReceived = kilobytes.toFixed(1);\r\n        }\r\n\r\n        if (result.googTrackId && getStatsResult.audio[sendrecvType].tracks.indexOf(result.googTrackId) === -1) {\r\n            getStatsResult.audio[sendrecvType].tracks.push(result.googTrackId);\r\n        }\r\n\r\n        // calculate latency\r\n        if (!!result.googCurrentDelayMs) {\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal.audio.prevGoogCurrentDelayMs) {\r\n                getStatsResult.internal.audio.prevGoogCurrentDelayMs = result.googCurrentDelayMs;\r\n            }\r\n\r\n            var bytes = result.googCurrentDelayMs - getStatsResult.internal.audio.prevGoogCurrentDelayMs;\r\n            getStatsResult.internal.audio.prevGoogCurrentDelayMs = result.googCurrentDelayMs;\r\n\r\n            getStatsResult.audio.latency = bytes.toFixed(1);\r\n\r\n            if (getStatsResult.audio.latency < 0) {\r\n                getStatsResult.audio.latency = 0;\r\n            }\r\n        }\r\n\r\n        // calculate packetsLost\r\n        if (!!result.packetsLost) {\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal.audio.prevPacketsLost) {\r\n                getStatsResult.internal.audio.prevPacketsLost = result.packetsLost;\r\n            }\r\n\r\n            var bytes = result.packetsLost - getStatsResult.internal.audio.prevPacketsLost;\r\n            getStatsResult.internal.audio.prevPacketsLost = result.packetsLost;\r\n\r\n            getStatsResult.audio.packetsLost = bytes.toFixed(1);\r\n\r\n            if (getStatsResult.audio.packetsLost < 0) {\r\n                getStatsResult.audio.packetsLost = 0;\r\n            }\r\n        }\r\n    };\r\n\r\n    getStatsParser.checkVideoTracks = function(result) {\r\n        if (result.mediaType !== 'video') return;\r\n\r\n        var sendrecvType = result.id.split('_').pop();\r\n        if (result.isRemote === true) {\r\n            sendrecvType = 'recv';\r\n        }\r\n        if (result.isRemote === false) {\r\n            sendrecvType = 'send';\r\n        }\r\n\r\n        if (!sendrecvType) return;\r\n\r\n        if (getStatsResult.video[sendrecvType].codecs.indexOf(result.googCodecName || 'VP8') === -1) {\r\n            getStatsResult.video[sendrecvType].codecs.push(result.googCodecName || 'VP8');\r\n        }\r\n\r\n        if (!!result.bytesSent) {\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal.video[sendrecvType].prevBytesSent) {\r\n                getStatsResult.internal.video[sendrecvType].prevBytesSent = result.bytesSent;\r\n            }\r\n\r\n            var bytes = result.bytesSent - getStatsResult.internal.video[sendrecvType].prevBytesSent;\r\n            getStatsResult.internal.video[sendrecvType].prevBytesSent = result.bytesSent;\r\n\r\n            kilobytes = bytes / 1024;\r\n\r\n            getStatsResult.video[sendrecvType].availableBandwidth = kilobytes.toFixed(1);\r\n            getStatsResult.video.bytesSent = kilobytes.toFixed(1);\r\n        }\r\n\r\n        if (!!result.bytesReceived) {\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal.video[sendrecvType].prevBytesReceived) {\r\n                getStatsResult.internal.video[sendrecvType].prevBytesReceived = result.bytesReceived;\r\n            }\r\n\r\n            var bytes = result.bytesReceived - getStatsResult.internal.video[sendrecvType].prevBytesReceived;\r\n            getStatsResult.internal.video[sendrecvType].prevBytesReceived = result.bytesReceived;\r\n\r\n            kilobytes = bytes / 1024;\r\n            // getStatsResult.video[sendrecvType].availableBandwidth = kilobytes.toFixed(1);\r\n            getStatsResult.video.bytesReceived = kilobytes.toFixed(1);\r\n        }\r\n\r\n        if (result.googFrameHeightReceived && result.googFrameWidthReceived) {\r\n            getStatsResult.resolutions[sendrecvType].width = result.googFrameWidthReceived;\r\n            getStatsResult.resolutions[sendrecvType].height = result.googFrameHeightReceived;\r\n        }\r\n\r\n        if (result.googFrameHeightSent && result.googFrameWidthSent) {\r\n            getStatsResult.resolutions[sendrecvType].width = result.googFrameWidthSent;\r\n            getStatsResult.resolutions[sendrecvType].height = result.googFrameHeightSent;\r\n        }\r\n\r\n        if (result.googTrackId && getStatsResult.video[sendrecvType].tracks.indexOf(result.googTrackId) === -1) {\r\n            getStatsResult.video[sendrecvType].tracks.push(result.googTrackId);\r\n        }\r\n\r\n        if (result.framerateMean) {\r\n            getStatsResult.bandwidth.framerateMean = result.framerateMean;\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal.video[sendrecvType].prevFramerateMean) {\r\n                getStatsResult.internal.video[sendrecvType].prevFramerateMean = result.bitrateMean;\r\n            }\r\n\r\n            var bytes = result.bytesSent - getStatsResult.internal.video[sendrecvType].prevFramerateMean;\r\n            getStatsResult.internal.video[sendrecvType].prevFramerateMean = result.framerateMean;\r\n\r\n            kilobytes = bytes / 1024;\r\n            getStatsResult.video[sendrecvType].framerateMean = bytes.toFixed(1);\r\n        }\r\n\r\n        if (result.bitrateMean) {\r\n            getStatsResult.bandwidth.bitrateMean = result.bitrateMean;\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal.video[sendrecvType].prevBitrateMean) {\r\n                getStatsResult.internal.video[sendrecvType].prevBitrateMean = result.bitrateMean;\r\n            }\r\n\r\n            var bytes = result.bytesSent - getStatsResult.internal.video[sendrecvType].prevBitrateMean;\r\n            getStatsResult.internal.video[sendrecvType].prevBitrateMean = result.bitrateMean;\r\n\r\n            kilobytes = bytes / 1024;\r\n            getStatsResult.video[sendrecvType].bitrateMean = bytes.toFixed(1);\r\n        }\r\n\r\n        // calculate latency\r\n        if (!!result.googCurrentDelayMs) {\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal.video.prevGoogCurrentDelayMs) {\r\n                getStatsResult.internal.video.prevGoogCurrentDelayMs = result.googCurrentDelayMs;\r\n            }\r\n\r\n            var bytes = result.googCurrentDelayMs - getStatsResult.internal.video.prevGoogCurrentDelayMs;\r\n            getStatsResult.internal.video.prevGoogCurrentDelayMs = result.googCurrentDelayMs;\r\n\r\n            getStatsResult.video.latency = bytes.toFixed(1);\r\n\r\n            if (getStatsResult.video.latency < 0) {\r\n                getStatsResult.video.latency = 0;\r\n            }\r\n        }\r\n\r\n        // calculate packetsLost\r\n        if (!!result.packetsLost) {\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal.video.prevPacketsLost) {\r\n                getStatsResult.internal.video.prevPacketsLost = result.packetsLost;\r\n            }\r\n\r\n            var bytes = result.packetsLost - getStatsResult.internal.video.prevPacketsLost;\r\n            getStatsResult.internal.video.prevPacketsLost = result.packetsLost;\r\n\r\n            getStatsResult.video.packetsLost = bytes.toFixed(1);\r\n\r\n            if (getStatsResult.video.packetsLost < 0) {\r\n                getStatsResult.video.packetsLost = 0;\r\n            }\r\n        }\r\n    };\r\n\r\n    getStatsParser.bweforvideo = function(result) {\r\n        if (result.type !== 'VideoBwe') return;\r\n\r\n        getStatsResult.bandwidth.availableSendBandwidth = result.googAvailableSendBandwidth;\r\n\r\n        getStatsResult.bandwidth.googActualEncBitrate = result.googActualEncBitrate;\r\n        getStatsResult.bandwidth.googAvailableSendBandwidth = result.googAvailableSendBandwidth;\r\n        getStatsResult.bandwidth.googAvailableReceiveBandwidth = result.googAvailableReceiveBandwidth;\r\n        getStatsResult.bandwidth.googRetransmitBitrate = result.googRetransmitBitrate;\r\n        getStatsResult.bandwidth.googTargetEncBitrate = result.googTargetEncBitrate;\r\n        getStatsResult.bandwidth.googBucketDelay = result.googBucketDelay;\r\n        getStatsResult.bandwidth.googTransmitBitrate = result.googTransmitBitrate;\r\n    };\r\n\r\n    getStatsParser.candidatePair = function(result) {\r\n        if (result.type !== 'googCandidatePair' && result.type !== 'candidate-pair' && result.type !== 'local-candidate' && result.type !== 'remote-candidate') return;\r\n\r\n        // result.googActiveConnection means either STUN or TURN is used.\r\n\r\n        if (result.googActiveConnection == 'true') {\r\n            // id === 'Conn-audio-1-0'\r\n            // localCandidateId, remoteCandidateId\r\n\r\n            // bytesSent, bytesReceived\r\n\r\n            Object.keys(getStatsResult.internal.candidates).forEach(function(cid) {\r\n                var candidate = getStatsResult.internal.candidates[cid];\r\n                if (candidate.ipAddress.indexOf(result.googLocalAddress) !== -1) {\r\n                    getStatsResult.connectionType.local.candidateType = candidate.candidateType;\r\n                    getStatsResult.connectionType.local.ipAddress = candidate.ipAddress;\r\n                    getStatsResult.connectionType.local.networkType = candidate.networkType;\r\n                    getStatsResult.connectionType.local.transport = candidate.transport;\r\n                }\r\n                if (candidate.ipAddress.indexOf(result.googRemoteAddress) !== -1) {\r\n                    getStatsResult.connectionType.remote.candidateType = candidate.candidateType;\r\n                    getStatsResult.connectionType.remote.ipAddress = candidate.ipAddress;\r\n                    getStatsResult.connectionType.remote.networkType = candidate.networkType;\r\n                    getStatsResult.connectionType.remote.transport = candidate.transport;\r\n                }\r\n            });\r\n\r\n            getStatsResult.connectionType.transport = result.googTransportType;\r\n\r\n            var localCandidate = getStatsResult.internal.candidates[result.localCandidateId];\r\n            if (localCandidate) {\r\n                if (localCandidate.ipAddress) {\r\n                    getStatsResult.connectionType.systemIpAddress = localCandidate.ipAddress;\r\n                }\r\n            }\r\n\r\n            var remoteCandidate = getStatsResult.internal.candidates[result.remoteCandidateId];\r\n            if (remoteCandidate) {\r\n                if (remoteCandidate.ipAddress) {\r\n                    getStatsResult.connectionType.systemIpAddress = remoteCandidate.ipAddress;\r\n                }\r\n            }\r\n        }\r\n\r\n        if (result.type === 'candidate-pair') {\r\n            if (result.selected === true && result.nominated === true && result.state === 'succeeded') {\r\n                // remoteCandidateId, localCandidateId, componentId\r\n                var localCandidate = getStatsResult.internal.candidates[result.remoteCandidateId];\r\n                var remoteCandidate = getStatsResult.internal.candidates[result.remoteCandidateId];\r\n\r\n                // Firefox used above two pairs for connection\r\n            }\r\n        }\r\n\r\n        if (result.type === 'local-candidate') {\r\n            getStatsResult.connectionType.local.candidateType = result.candidateType;\r\n            getStatsResult.connectionType.local.ipAddress = result.ipAddress;\r\n            getStatsResult.connectionType.local.networkType = result.networkType;\r\n            getStatsResult.connectionType.local.transport = result.mozLocalTransport || result.transport;\r\n        }\r\n\r\n        if (result.type === 'remote-candidate') {\r\n            getStatsResult.connectionType.remote.candidateType = result.candidateType;\r\n            getStatsResult.connectionType.remote.ipAddress = result.ipAddress;\r\n            getStatsResult.connectionType.remote.networkType = result.networkType;\r\n            getStatsResult.connectionType.remote.transport = result.mozRemoteTransport || result.transport;\r\n        }\r\n\r\n        if (isSafari) {\r\n            // result.remoteCandidateId\r\n            // todo: below line will always force \"send\" on Safari; find a solution\r\n            var sendrecvType = result.localCandidateId ? 'send' : 'recv';\r\n\r\n            if (!sendrecvType) return;\r\n\r\n            if (!!result.bytesSent) {\r\n                var kilobytes = 0;\r\n                if (!getStatsResult.internal.video[sendrecvType].prevBytesSent) {\r\n                    getStatsResult.internal.video[sendrecvType].prevBytesSent = result.bytesSent;\r\n                }\r\n\r\n                var bytes = result.bytesSent - getStatsResult.internal.video[sendrecvType].prevBytesSent;\r\n                getStatsResult.internal.video[sendrecvType].prevBytesSent = result.bytesSent;\r\n\r\n                kilobytes = bytes / 1024;\r\n\r\n                getStatsResult.video[sendrecvType].availableBandwidth = kilobytes.toFixed(1);\r\n                getStatsResult.video.bytesSent = kilobytes.toFixed(1);\r\n            }\r\n\r\n            if (!!result.bytesReceived) {\r\n                var kilobytes = 0;\r\n                if (!getStatsResult.internal.video[sendrecvType].prevBytesReceived) {\r\n                    getStatsResult.internal.video[sendrecvType].prevBytesReceived = result.bytesReceived;\r\n                }\r\n\r\n                var bytes = result.bytesReceived - getStatsResult.internal.video[sendrecvType].prevBytesReceived;\r\n                getStatsResult.internal.video[sendrecvType].prevBytesReceived = result.bytesReceived;\r\n\r\n                kilobytes = bytes / 1024;\r\n                // getStatsResult.video[sendrecvType].availableBandwidth = kilobytes.toFixed(1);\r\n                getStatsResult.video.bytesReceived = kilobytes.toFixed(1);\r\n            }\r\n\r\n            if (!!result.availableOutgoingBitrate) {\r\n                var kilobytes = 0;\r\n                if (!getStatsResult.internal.video[sendrecvType].prevAvailableOutgoingBitrate) {\r\n                    getStatsResult.internal.video[sendrecvType].prevAvailableOutgoingBitrate = result.availableOutgoingBitrate;\r\n                }\r\n\r\n                var bytes = result.availableOutgoingBitrate - getStatsResult.internal.video[sendrecvType].prevAvailableOutgoingBitrate;\r\n                getStatsResult.internal.video[sendrecvType].prevAvailableOutgoingBitrate = result.availableOutgoingBitrate;\r\n\r\n                kilobytes = bytes / 1024;\r\n                // getStatsResult.video[sendrecvType].availableBandwidth = kilobytes.toFixed(1);\r\n                getStatsResult.video.availableOutgoingBitrate = kilobytes.toFixed(1);\r\n            }\r\n\r\n            if (!!result.availableIncomingBitrate) {\r\n                var kilobytes = 0;\r\n                if (!getStatsResult.internal.video[sendrecvType].prevAvailableIncomingBitrate) {\r\n                    getStatsResult.internal.video[sendrecvType].prevAvailableIncomingBitrate = result.availableIncomingBitrate;\r\n                }\r\n\r\n                var bytes = result.availableIncomingBitrate - getStatsResult.internal.video[sendrecvType].prevAvailableIncomingBitrate;\r\n                getStatsResult.internal.video[sendrecvType].prevAvailableIncomingBitrate = result.availableIncomingBitrate;\r\n\r\n                kilobytes = bytes / 1024;\r\n                // getStatsResult.video[sendrecvType].availableBandwidth = kilobytes.toFixed(1);\r\n                getStatsResult.video.availableIncomingBitrate = kilobytes.toFixed(1);\r\n            }\r\n        }\r\n    };\r\n\r\n    var LOCAL_candidateType = {};\r\n    var LOCAL_transport = {};\r\n    var LOCAL_ipAddress = {};\r\n    var LOCAL_networkType = {};\r\n\r\n    getStatsParser.localcandidate = function(result) {\r\n        if (result.type !== 'localcandidate' && result.type !== 'local-candidate') return;\r\n        if (!result.id) return;\r\n\r\n        if (!LOCAL_candidateType[result.id]) {\r\n            LOCAL_candidateType[result.id] = [];\r\n        }\r\n\r\n        if (!LOCAL_transport[result.id]) {\r\n            LOCAL_transport[result.id] = [];\r\n        }\r\n\r\n        if (!LOCAL_ipAddress[result.id]) {\r\n            LOCAL_ipAddress[result.id] = [];\r\n        }\r\n\r\n        if (!LOCAL_networkType[result.id]) {\r\n            LOCAL_networkType[result.id] = [];\r\n        }\r\n\r\n        if (result.candidateType && LOCAL_candidateType[result.id].indexOf(result.candidateType) === -1) {\r\n            LOCAL_candidateType[result.id].push(result.candidateType);\r\n        }\r\n\r\n        if (result.transport && LOCAL_transport[result.id].indexOf(result.transport) === -1) {\r\n            LOCAL_transport[result.id].push(result.transport);\r\n        }\r\n\r\n        if (result.ipAddress && LOCAL_ipAddress[result.id].indexOf(result.ipAddress + ':' + result.portNumber) === -1) {\r\n            LOCAL_ipAddress[result.id].push(result.ipAddress + ':' + result.portNumber);\r\n        }\r\n\r\n        if (result.networkType && LOCAL_networkType[result.id].indexOf(result.networkType) === -1) {\r\n            LOCAL_networkType[result.id].push(result.networkType);\r\n        }\r\n\r\n        getStatsResult.internal.candidates[result.id] = {\r\n            candidateType: LOCAL_candidateType[result.id],\r\n            ipAddress: LOCAL_ipAddress[result.id],\r\n            portNumber: result.portNumber,\r\n            networkType: LOCAL_networkType[result.id],\r\n            priority: result.priority,\r\n            transport: LOCAL_transport[result.id],\r\n            timestamp: result.timestamp,\r\n            id: result.id,\r\n            type: result.type\r\n        };\r\n\r\n        getStatsResult.connectionType.local.candidateType = LOCAL_candidateType[result.id];\r\n        getStatsResult.connectionType.local.ipAddress = LOCAL_ipAddress[result.id];\r\n        getStatsResult.connectionType.local.networkType = LOCAL_networkType[result.id];\r\n        getStatsResult.connectionType.local.transport = LOCAL_transport[result.id];\r\n    };\r\n\r\n    var REMOTE_candidateType = {};\r\n    var REMOTE_transport = {};\r\n    var REMOTE_ipAddress = {};\r\n    var REMOTE_networkType = {};\r\n\r\n    getStatsParser.remotecandidate = function(result) {\r\n        if (result.type !== 'remotecandidate' && result.type !== 'remote-candidate') return;\r\n        if (!result.id) return;\r\n\r\n        if (!REMOTE_candidateType[result.id]) {\r\n            REMOTE_candidateType[result.id] = [];\r\n        }\r\n\r\n        if (!REMOTE_transport[result.id]) {\r\n            REMOTE_transport[result.id] = [];\r\n        }\r\n\r\n        if (!REMOTE_ipAddress[result.id]) {\r\n            REMOTE_ipAddress[result.id] = [];\r\n        }\r\n\r\n        if (!REMOTE_networkType[result.id]) {\r\n            REMOTE_networkType[result.id] = [];\r\n        }\r\n\r\n        if (result.candidateType && REMOTE_candidateType[result.id].indexOf(result.candidateType) === -1) {\r\n            REMOTE_candidateType[result.id].push(result.candidateType);\r\n        }\r\n\r\n        if (result.transport && REMOTE_transport[result.id].indexOf(result.transport) === -1) {\r\n            REMOTE_transport[result.id].push(result.transport);\r\n        }\r\n\r\n        if (result.ipAddress && REMOTE_ipAddress[result.id].indexOf(result.ipAddress + ':' + result.portNumber) === -1) {\r\n            REMOTE_ipAddress[result.id].push(result.ipAddress + ':' + result.portNumber);\r\n        }\r\n\r\n        if (result.networkType && REMOTE_networkType[result.id].indexOf(result.networkType) === -1) {\r\n            REMOTE_networkType[result.id].push(result.networkType);\r\n        }\r\n\r\n        getStatsResult.internal.candidates[result.id] = {\r\n            candidateType: REMOTE_candidateType[result.id],\r\n            ipAddress: REMOTE_ipAddress[result.id],\r\n            portNumber: result.portNumber,\r\n            networkType: REMOTE_networkType[result.id],\r\n            priority: result.priority,\r\n            transport: REMOTE_transport[result.id],\r\n            timestamp: result.timestamp,\r\n            id: result.id,\r\n            type: result.type\r\n        };\r\n\r\n        getStatsResult.connectionType.remote.candidateType = REMOTE_candidateType[result.id];\r\n        getStatsResult.connectionType.remote.ipAddress = REMOTE_ipAddress[result.id];\r\n        getStatsResult.connectionType.remote.networkType = REMOTE_networkType[result.id];\r\n        getStatsResult.connectionType.remote.transport = REMOTE_transport[result.id];\r\n    };\r\n\r\n    getStatsParser.dataSentReceived = function(result) {\r\n        if (!result.googCodecName || (result.mediaType !== 'video' && result.mediaType !== 'audio')) return;\r\n\r\n        if (!!result.bytesSent) {\r\n            getStatsResult[result.mediaType].bytesSent = parseInt(result.bytesSent);\r\n        }\r\n\r\n        if (!!result.bytesReceived) {\r\n            getStatsResult[result.mediaType].bytesReceived = parseInt(result.bytesReceived);\r\n        }\r\n    };\r\n\r\n    getStatsParser.inboundrtp = function(result) {\r\n        if (!isSafari) return;\r\n        if (result.type !== 'inbound-rtp') return;\r\n\r\n        var mediaType = result.mediaType || 'audio';\r\n        var sendrecvType = result.isRemote ? 'recv' : 'send';\r\n\r\n        if (!sendrecvType) return;\r\n\r\n        if (!!result.bytesSent) {\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal[mediaType][sendrecvType].prevBytesSent) {\r\n                getStatsResult.internal[mediaType][sendrecvType].prevBytesSent = result.bytesSent;\r\n            }\r\n\r\n            var bytes = result.bytesSent - getStatsResult.internal[mediaType][sendrecvType].prevBytesSent;\r\n            getStatsResult.internal[mediaType][sendrecvType].prevBytesSent = result.bytesSent;\r\n\r\n            kilobytes = bytes / 1024;\r\n\r\n            getStatsResult[mediaType][sendrecvType].availableBandwidth = kilobytes.toFixed(1);\r\n            getStatsResult[mediaType].bytesSent = kilobytes.toFixed(1);\r\n        }\r\n\r\n        if (!!result.bytesReceived) {\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal[mediaType][sendrecvType].prevBytesReceived) {\r\n                getStatsResult.internal[mediaType][sendrecvType].prevBytesReceived = result.bytesReceived;\r\n            }\r\n\r\n            var bytes = result.bytesReceived - getStatsResult.internal[mediaType][sendrecvType].prevBytesReceived;\r\n            getStatsResult.internal[mediaType][sendrecvType].prevBytesReceived = result.bytesReceived;\r\n\r\n            kilobytes = bytes / 1024;\r\n            // getStatsResult[mediaType][sendrecvType].availableBandwidth = kilobytes.toFixed(1);\r\n            getStatsResult[mediaType].bytesReceived = kilobytes.toFixed(1);\r\n        }\r\n    };\r\n\r\n    getStatsParser.outboundrtp = function(result) {\r\n        if (!isSafari) return;\r\n        if (result.type !== 'outbound-rtp') return;\r\n\r\n        var mediaType = result.mediaType || 'audio';\r\n        var sendrecvType = result.isRemote ? 'recv' : 'send';\r\n\r\n        if (!sendrecvType) return;\r\n\r\n        if (!!result.bytesSent) {\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal[mediaType][sendrecvType].prevBytesSent) {\r\n                getStatsResult.internal[mediaType][sendrecvType].prevBytesSent = result.bytesSent;\r\n            }\r\n\r\n            var bytes = result.bytesSent - getStatsResult.internal[mediaType][sendrecvType].prevBytesSent;\r\n            getStatsResult.internal[mediaType][sendrecvType].prevBytesSent = result.bytesSent;\r\n\r\n            kilobytes = bytes / 1024;\r\n\r\n            getStatsResult[mediaType][sendrecvType].availableBandwidth = kilobytes.toFixed(1);\r\n            getStatsResult[mediaType].bytesSent = kilobytes.toFixed(1);\r\n        }\r\n\r\n        if (!!result.bytesReceived) {\r\n            var kilobytes = 0;\r\n            if (!getStatsResult.internal[mediaType][sendrecvType].prevBytesReceived) {\r\n                getStatsResult.internal[mediaType][sendrecvType].prevBytesReceived = result.bytesReceived;\r\n            }\r\n\r\n            var bytes = result.bytesReceived - getStatsResult.internal[mediaType][sendrecvType].prevBytesReceived;\r\n            getStatsResult.internal[mediaType][sendrecvType].prevBytesReceived = result.bytesReceived;\r\n\r\n            kilobytes = bytes / 1024;\r\n            // getStatsResult[mediaType][sendrecvType].availableBandwidth = kilobytes.toFixed(1);\r\n            getStatsResult[mediaType].bytesReceived = kilobytes.toFixed(1);\r\n        }\r\n    };\r\n\r\n    getStatsParser.track = function(result) {\r\n        if (!isSafari) return;\r\n        if (result.type !== 'track') return;\r\n\r\n        var sendrecvType = result.remoteSource === true ? 'send' : 'recv';\r\n\r\n        if (result.frameWidth && result.frameHeight) {\r\n            getStatsResult.resolutions[sendrecvType].width = result.frameWidth;\r\n            getStatsResult.resolutions[sendrecvType].height = result.frameHeight;\r\n        }\r\n\r\n        // framesSent, framesReceived\r\n    };\r\n\r\n    var SSRC = {\r\n        audio: {\r\n            send: [],\r\n            recv: []\r\n        },\r\n        video: {\r\n            send: [],\r\n            recv: []\r\n        }\r\n    };\r\n\r\n    getStatsParser.ssrc = function(result) {\r\n        if (!result.googCodecName || (result.mediaType !== 'video' && result.mediaType !== 'audio')) return;\r\n        if (result.type !== 'ssrc') return;\r\n        var sendrecvType = result.id.split('_').pop();\r\n\r\n        if (SSRC[result.mediaType][sendrecvType].indexOf(result.ssrc) === -1) {\r\n            SSRC[result.mediaType][sendrecvType].push(result.ssrc)\r\n        }\r\n\r\n        getStatsResult[result.mediaType][sendrecvType].streams = SSRC[result.mediaType][sendrecvType].length;\r\n    };\r\n\r\n    getStatsLooper();\r\n\r\n};\r\n\r\nif (typeof module !== 'undefined' /* && !!module.exports*/ ) {\r\n    module.exports = getStats;\r\n}\r\n\r\nif (typeof define === 'function' && define.amd) {\r\n    define('getStats', [], function() {\r\n        return getStats;\r\n    });\r\n}\n","/* global Blob File */\n\n/*\n * Module requirements.\n */\n\nvar isArray = require('isarray');\n\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof Blob === 'function' ||\n                        typeof Blob !== 'undefined' && toString.call(Blob) === '[object BlobConstructor]';\nvar withNativeFile = typeof File === 'function' ||\n                        typeof File !== 'undefined' && toString.call(File) === '[object FileConstructor]';\n\n/**\n * Module exports.\n */\n\nmodule.exports = hasBinary;\n\n/**\n * Checks for binary data.\n *\n * Supports Buffer, ArrayBuffer, Blob and File.\n *\n * @param {Object} anything\n * @api public\n */\n\nfunction hasBinary (obj) {\n  if (!obj || typeof obj !== 'object') {\n    return false;\n  }\n\n  if (isArray(obj)) {\n    for (var i = 0, l = obj.length; i < l; i++) {\n      if (hasBinary(obj[i])) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  if ((typeof Buffer === 'function' && Buffer.isBuffer && Buffer.isBuffer(obj)) ||\n    (typeof ArrayBuffer === 'function' && obj instanceof ArrayBuffer) ||\n    (withNativeBlob && obj instanceof Blob) ||\n    (withNativeFile && obj instanceof File)\n  ) {\n    return true;\n  }\n\n  // see: https://github.com/Automattic/has-binary/pull/4\n  if (obj.toJSON && typeof obj.toJSON === 'function' && arguments.length === 1) {\n    return hasBinary(obj.toJSON(), true);\n  }\n\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key) && hasBinary(obj[key])) {\n      return true;\n    }\n  }\n\n  return false;\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","\n/**\n * Module exports.\n *\n * Logic borrowed from Modernizr:\n *\n *   - https://github.com/Modernizr/Modernizr/blob/master/feature-detects/cors.js\n */\n\ntry {\n  module.exports = typeof XMLHttpRequest !== 'undefined' &&\n    'withCredentials' in new XMLHttpRequest();\n} catch (err) {\n  // if XMLHttp support is disabled in IE then it will throw\n  // when trying to create\n  module.exports = false;\n}\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","\nvar indexOf = [].indexOf;\n\nmodule.exports = function(arr, obj){\n  if (indexOf) return arr.indexOf(obj);\n  for (var i = 0; i < arr.length; ++i) {\n    if (arr[i] === obj) return i;\n  }\n  return -1;\n};","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  if (ms >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (ms >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (ms >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (ms >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  return plural(ms, d, 'day') ||\n    plural(ms, h, 'hour') ||\n    plural(ms, m, 'minute') ||\n    plural(ms, s, 'second') ||\n    ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, n, name) {\n  if (ms < n) {\n    return;\n  }\n  if (ms < n * 1.5) {\n    return Math.floor(ms / n) + ' ' + name;\n  }\n  return Math.ceil(ms / n) + ' ' + name + 's';\n}\n","/**\r\n * Compiles a querystring\r\n * Returns string representation of the object\r\n *\r\n * @param {Object}\r\n * @api private\r\n */\r\n\r\nexports.encode = function (obj) {\r\n  var str = '';\r\n\r\n  for (var i in obj) {\r\n    if (obj.hasOwnProperty(i)) {\r\n      if (str.length) str += '&';\r\n      str += encodeURIComponent(i) + '=' + encodeURIComponent(obj[i]);\r\n    }\r\n  }\r\n\r\n  return str;\r\n};\r\n\r\n/**\r\n * Parses a simple querystring into an object\r\n *\r\n * @param {String} qs\r\n * @api private\r\n */\r\n\r\nexports.decode = function(qs){\r\n  var qry = {};\r\n  var pairs = qs.split('&');\r\n  for (var i = 0, l = pairs.length; i < l; i++) {\r\n    var pair = pairs[i].split('=');\r\n    qry[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1]);\r\n  }\r\n  return qry;\r\n};\r\n","/**\r\n * Parses an URI\r\n *\r\n * @author Steven Levithan <stevenlevithan.com> (MIT license)\r\n * @api private\r\n */\r\n\r\nvar re = /^(?:(?![^:@]+:[^:@\\/]*@)(http|https|ws|wss):\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\r\n\r\nvar parts = [\r\n    'source', 'protocol', 'authority', 'userInfo', 'user', 'password', 'host', 'port', 'relative', 'path', 'directory', 'file', 'query', 'anchor'\r\n];\r\n\r\nmodule.exports = function parseuri(str) {\r\n    var src = str,\r\n        b = str.indexOf('['),\r\n        e = str.indexOf(']');\r\n\r\n    if (b != -1 && e != -1) {\r\n        str = str.substring(0, b) + str.substring(b, e).replace(/:/g, ';') + str.substring(e, str.length);\r\n    }\r\n\r\n    var m = re.exec(str || ''),\r\n        uri = {},\r\n        i = 14;\r\n\r\n    while (i--) {\r\n        uri[parts[i]] = m[i] || '';\r\n    }\r\n\r\n    if (b != -1 && e != -1) {\r\n        uri.source = src;\r\n        uri.host = uri.host.substring(1, uri.host.length - 1).replace(/;/g, ':');\r\n        uri.authority = uri.authority.replace('[', '').replace(']', '').replace(/;/g, ':');\r\n        uri.ipv6uri = true;\r\n    }\r\n\r\n    return uri;\r\n};\r\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nvar SDPUtils = require('sdp');\n\nfunction fixStatsType(stat) {\n  return {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  }[stat.type] || stat.type;\n}\n\nfunction writeMediaSection(transceiver, caps, type, stream, dtlsRole) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n      transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n      transceiver.dtlsTransport.getLocalParameters(),\n      type === 'offer' ? 'actpass' : dtlsRole || 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    var trackId = transceiver.rtpSender._initialTrackId ||\n        transceiver.rtpSender.track.id;\n    transceiver.rtpSender._initialTrackId = trackId;\n    // spec.\n    var msid = 'msid:' + (stream ? stream.id : '-') + ' ' +\n        trackId + '\\r\\n';\n    sdp += 'a=' + msid;\n    // for Chrome. Legacy should no longer be required.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n\n    // RTX\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n}\n\n// Edge does not like\n// 1) stun: filtered after 14393 unless ?transport=udp is present\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\nfunction filterIceServers(iceServers, edgeVersion) {\n  var hasTurn = false;\n  iceServers = JSON.parse(JSON.stringify(iceServers));\n  return iceServers.filter(function(server) {\n    if (server && (server.urls || server.url)) {\n      var urls = server.urls || server.url;\n      if (server.url && !server.urls) {\n        console.warn('RTCIceServer.url is deprecated! Use urls instead.');\n      }\n      var isString = typeof urls === 'string';\n      if (isString) {\n        urls = [urls];\n      }\n      urls = urls.filter(function(url) {\n        var validTurn = url.indexOf('turn:') === 0 &&\n            url.indexOf('transport=udp') !== -1 &&\n            url.indexOf('turn:[') === -1 &&\n            !hasTurn;\n\n        if (validTurn) {\n          hasTurn = true;\n          return true;\n        }\n        return url.indexOf('stun:') === 0 && edgeVersion >= 14393 &&\n            url.indexOf('?transport=udp') === -1;\n      });\n\n      delete server.url;\n      server.urls = isString ? urls[0] : urls;\n      return !!urls.length;\n    }\n  });\n}\n\n// Determines the intersection of local and remote capabilities.\nfunction getCommonCapabilities(localCapabilities, remoteCapabilities) {\n  var commonCapabilities = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: []\n  };\n\n  var findCodecByPayloadType = function(pt, codecs) {\n    pt = parseInt(pt, 10);\n    for (var i = 0; i < codecs.length; i++) {\n      if (codecs[i].payloadType === pt ||\n          codecs[i].preferredPayloadType === pt) {\n        return codecs[i];\n      }\n    }\n  };\n\n  var rtxCapabilityMatches = function(lRtx, rRtx, lCodecs, rCodecs) {\n    var lCodec = findCodecByPayloadType(lRtx.parameters.apt, lCodecs);\n    var rCodec = findCodecByPayloadType(rRtx.parameters.apt, rCodecs);\n    return lCodec && rCodec &&\n        lCodec.name.toLowerCase() === rCodec.name.toLowerCase();\n  };\n\n  localCapabilities.codecs.forEach(function(lCodec) {\n    for (var i = 0; i < remoteCapabilities.codecs.length; i++) {\n      var rCodec = remoteCapabilities.codecs[i];\n      if (lCodec.name.toLowerCase() === rCodec.name.toLowerCase() &&\n          lCodec.clockRate === rCodec.clockRate) {\n        if (lCodec.name.toLowerCase() === 'rtx' &&\n            lCodec.parameters && rCodec.parameters.apt) {\n          // for RTX we need to find the local rtx that has a apt\n          // which points to the same local codec as the remote one.\n          if (!rtxCapabilityMatches(lCodec, rCodec,\n              localCapabilities.codecs, remoteCapabilities.codecs)) {\n            continue;\n          }\n        }\n        rCodec = JSON.parse(JSON.stringify(rCodec)); // deepcopy\n        // number of channels is the highest common number of channels\n        rCodec.numChannels = Math.min(lCodec.numChannels,\n            rCodec.numChannels);\n        // push rCodec so we reply with offerer payload type\n        commonCapabilities.codecs.push(rCodec);\n\n        // determine common feedback mechanisms\n        rCodec.rtcpFeedback = rCodec.rtcpFeedback.filter(function(fb) {\n          for (var j = 0; j < lCodec.rtcpFeedback.length; j++) {\n            if (lCodec.rtcpFeedback[j].type === fb.type &&\n                lCodec.rtcpFeedback[j].parameter === fb.parameter) {\n              return true;\n            }\n          }\n          return false;\n        });\n        // FIXME: also need to determine .parameters\n        //  see https://github.com/openpeer/ortc/issues/569\n        break;\n      }\n    }\n  });\n\n  localCapabilities.headerExtensions.forEach(function(lHeaderExtension) {\n    for (var i = 0; i < remoteCapabilities.headerExtensions.length;\n         i++) {\n      var rHeaderExtension = remoteCapabilities.headerExtensions[i];\n      if (lHeaderExtension.uri === rHeaderExtension.uri) {\n        commonCapabilities.headerExtensions.push(rHeaderExtension);\n        break;\n      }\n    }\n  });\n\n  // FIXME: fecMechanisms\n  return commonCapabilities;\n}\n\n// is action=setLocalDescription with type allowed in signalingState\nfunction isActionAllowedInSignalingState(action, type, signalingState) {\n  return {\n    offer: {\n      setLocalDescription: ['stable', 'have-local-offer'],\n      setRemoteDescription: ['stable', 'have-remote-offer']\n    },\n    answer: {\n      setLocalDescription: ['have-remote-offer', 'have-local-pranswer'],\n      setRemoteDescription: ['have-local-offer', 'have-remote-pranswer']\n    }\n  }[type][action].indexOf(signalingState) !== -1;\n}\n\nfunction maybeAddCandidate(iceTransport, candidate) {\n  // Edge's internal representation adds some fields therefore\n  // not all fieldѕ are taken into account.\n  var alreadyAdded = iceTransport.getRemoteCandidates()\n      .find(function(remoteCandidate) {\n        return candidate.foundation === remoteCandidate.foundation &&\n            candidate.ip === remoteCandidate.ip &&\n            candidate.port === remoteCandidate.port &&\n            candidate.priority === remoteCandidate.priority &&\n            candidate.protocol === remoteCandidate.protocol &&\n            candidate.type === remoteCandidate.type;\n      });\n  if (!alreadyAdded) {\n    iceTransport.addRemoteCandidate(candidate);\n  }\n  return !alreadyAdded;\n}\n\n\nfunction makeError(name, description) {\n  var e = new Error(description);\n  e.name = name;\n  // legacy error codes from https://heycam.github.io/webidl/#idl-DOMException-error-names\n  e.code = {\n    NotSupportedError: 9,\n    InvalidStateError: 11,\n    InvalidAccessError: 15,\n    TypeError: undefined,\n    OperationError: undefined\n  }[name];\n  return e;\n}\n\nmodule.exports = function(window, edgeVersion) {\n  // https://w3c.github.io/mediacapture-main/#mediastream\n  // Helper function to add the track to the stream and\n  // dispatch the event ourselves.\n  function addTrackToStreamAndFireEvent(track, stream) {\n    stream.addTrack(track);\n    stream.dispatchEvent(new window.MediaStreamTrackEvent('addtrack',\n        {track: track}));\n  }\n\n  function removeTrackFromStreamAndFireEvent(track, stream) {\n    stream.removeTrack(track);\n    stream.dispatchEvent(new window.MediaStreamTrackEvent('removetrack',\n        {track: track}));\n  }\n\n  function fireAddTrack(pc, track, receiver, streams) {\n    var trackEvent = new Event('track');\n    trackEvent.track = track;\n    trackEvent.receiver = receiver;\n    trackEvent.transceiver = {receiver: receiver};\n    trackEvent.streams = streams;\n    window.setTimeout(function() {\n      pc._dispatchEvent('track', trackEvent);\n    });\n  }\n\n  var RTCPeerConnection = function(config) {\n    var pc = this;\n\n    var _eventTarget = document.createDocumentFragment();\n    ['addEventListener', 'removeEventListener', 'dispatchEvent']\n        .forEach(function(method) {\n          pc[method] = _eventTarget[method].bind(_eventTarget);\n        });\n\n    this.canTrickleIceCandidates = null;\n\n    this.needNegotiation = false;\n\n    this.localStreams = [];\n    this.remoteStreams = [];\n\n    this._localDescription = null;\n    this._remoteDescription = null;\n\n    this.signalingState = 'stable';\n    this.iceConnectionState = 'new';\n    this.connectionState = 'new';\n    this.iceGatheringState = 'new';\n\n    config = JSON.parse(JSON.stringify(config || {}));\n\n    this.usingBundle = config.bundlePolicy === 'max-bundle';\n    if (config.rtcpMuxPolicy === 'negotiate') {\n      throw(makeError('NotSupportedError',\n          'rtcpMuxPolicy \\'negotiate\\' is not supported'));\n    } else if (!config.rtcpMuxPolicy) {\n      config.rtcpMuxPolicy = 'require';\n    }\n\n    switch (config.iceTransportPolicy) {\n      case 'all':\n      case 'relay':\n        break;\n      default:\n        config.iceTransportPolicy = 'all';\n        break;\n    }\n\n    switch (config.bundlePolicy) {\n      case 'balanced':\n      case 'max-compat':\n      case 'max-bundle':\n        break;\n      default:\n        config.bundlePolicy = 'balanced';\n        break;\n    }\n\n    config.iceServers = filterIceServers(config.iceServers || [], edgeVersion);\n\n    this._iceGatherers = [];\n    if (config.iceCandidatePoolSize) {\n      for (var i = config.iceCandidatePoolSize; i > 0; i--) {\n        this._iceGatherers.push(new window.RTCIceGatherer({\n          iceServers: config.iceServers,\n          gatherPolicy: config.iceTransportPolicy\n        }));\n      }\n    } else {\n      config.iceCandidatePoolSize = 0;\n    }\n\n    this._config = config;\n\n    // per-track iceGathers, iceTransports, dtlsTransports, rtpSenders, ...\n    // everything that is needed to describe a SDP m-line.\n    this.transceivers = [];\n\n    this._sdpSessionId = SDPUtils.generateSessionId();\n    this._sdpSessionVersion = 0;\n\n    this._dtlsRole = undefined; // role for a=setup to use in answers.\n\n    this._isClosed = false;\n  };\n\n  Object.defineProperty(RTCPeerConnection.prototype, 'localDescription', {\n    configurable: true,\n    get: function() {\n      return this._localDescription;\n    }\n  });\n  Object.defineProperty(RTCPeerConnection.prototype, 'remoteDescription', {\n    configurable: true,\n    get: function() {\n      return this._remoteDescription;\n    }\n  });\n\n  // set up event handlers on prototype\n  RTCPeerConnection.prototype.onicecandidate = null;\n  RTCPeerConnection.prototype.onaddstream = null;\n  RTCPeerConnection.prototype.ontrack = null;\n  RTCPeerConnection.prototype.onremovestream = null;\n  RTCPeerConnection.prototype.onsignalingstatechange = null;\n  RTCPeerConnection.prototype.oniceconnectionstatechange = null;\n  RTCPeerConnection.prototype.onconnectionstatechange = null;\n  RTCPeerConnection.prototype.onicegatheringstatechange = null;\n  RTCPeerConnection.prototype.onnegotiationneeded = null;\n  RTCPeerConnection.prototype.ondatachannel = null;\n\n  RTCPeerConnection.prototype._dispatchEvent = function(name, event) {\n    if (this._isClosed) {\n      return;\n    }\n    this.dispatchEvent(event);\n    if (typeof this['on' + name] === 'function') {\n      this['on' + name](event);\n    }\n  };\n\n  RTCPeerConnection.prototype._emitGatheringStateChange = function() {\n    var event = new Event('icegatheringstatechange');\n    this._dispatchEvent('icegatheringstatechange', event);\n  };\n\n  RTCPeerConnection.prototype.getConfiguration = function() {\n    return this._config;\n  };\n\n  RTCPeerConnection.prototype.getLocalStreams = function() {\n    return this.localStreams;\n  };\n\n  RTCPeerConnection.prototype.getRemoteStreams = function() {\n    return this.remoteStreams;\n  };\n\n  // internal helper to create a transceiver object.\n  // (which is not yet the same as the WebRTC 1.0 transceiver)\n  RTCPeerConnection.prototype._createTransceiver = function(kind, doNotAdd) {\n    var hasBundleTransport = this.transceivers.length > 0;\n    var transceiver = {\n      track: null,\n      iceGatherer: null,\n      iceTransport: null,\n      dtlsTransport: null,\n      localCapabilities: null,\n      remoteCapabilities: null,\n      rtpSender: null,\n      rtpReceiver: null,\n      kind: kind,\n      mid: null,\n      sendEncodingParameters: null,\n      recvEncodingParameters: null,\n      stream: null,\n      associatedRemoteMediaStreams: [],\n      wantReceive: true\n    };\n    if (this.usingBundle && hasBundleTransport) {\n      transceiver.iceTransport = this.transceivers[0].iceTransport;\n      transceiver.dtlsTransport = this.transceivers[0].dtlsTransport;\n    } else {\n      var transports = this._createIceAndDtlsTransports();\n      transceiver.iceTransport = transports.iceTransport;\n      transceiver.dtlsTransport = transports.dtlsTransport;\n    }\n    if (!doNotAdd) {\n      this.transceivers.push(transceiver);\n    }\n    return transceiver;\n  };\n\n  RTCPeerConnection.prototype.addTrack = function(track, stream) {\n    if (this._isClosed) {\n      throw makeError('InvalidStateError',\n          'Attempted to call addTrack on a closed peerconnection.');\n    }\n\n    var alreadyExists = this.transceivers.find(function(s) {\n      return s.track === track;\n    });\n\n    if (alreadyExists) {\n      throw makeError('InvalidAccessError', 'Track already exists.');\n    }\n\n    var transceiver;\n    for (var i = 0; i < this.transceivers.length; i++) {\n      if (!this.transceivers[i].track &&\n          this.transceivers[i].kind === track.kind) {\n        transceiver = this.transceivers[i];\n      }\n    }\n    if (!transceiver) {\n      transceiver = this._createTransceiver(track.kind);\n    }\n\n    this._maybeFireNegotiationNeeded();\n\n    if (this.localStreams.indexOf(stream) === -1) {\n      this.localStreams.push(stream);\n    }\n\n    transceiver.track = track;\n    transceiver.stream = stream;\n    transceiver.rtpSender = new window.RTCRtpSender(track,\n        transceiver.dtlsTransport);\n    return transceiver.rtpSender;\n  };\n\n  RTCPeerConnection.prototype.addStream = function(stream) {\n    var pc = this;\n    if (edgeVersion >= 15025) {\n      stream.getTracks().forEach(function(track) {\n        pc.addTrack(track, stream);\n      });\n    } else {\n      // Clone is necessary for local demos mostly, attaching directly\n      // to two different senders does not work (build 10547).\n      // Fixed in 15025 (or earlier)\n      var clonedStream = stream.clone();\n      stream.getTracks().forEach(function(track, idx) {\n        var clonedTrack = clonedStream.getTracks()[idx];\n        track.addEventListener('enabled', function(event) {\n          clonedTrack.enabled = event.enabled;\n        });\n      });\n      clonedStream.getTracks().forEach(function(track) {\n        pc.addTrack(track, clonedStream);\n      });\n    }\n  };\n\n  RTCPeerConnection.prototype.removeTrack = function(sender) {\n    if (this._isClosed) {\n      throw makeError('InvalidStateError',\n          'Attempted to call removeTrack on a closed peerconnection.');\n    }\n\n    if (!(sender instanceof window.RTCRtpSender)) {\n      throw new TypeError('Argument 1 of RTCPeerConnection.removeTrack ' +\n          'does not implement interface RTCRtpSender.');\n    }\n\n    var transceiver = this.transceivers.find(function(t) {\n      return t.rtpSender === sender;\n    });\n\n    if (!transceiver) {\n      throw makeError('InvalidAccessError',\n          'Sender was not created by this connection.');\n    }\n    var stream = transceiver.stream;\n\n    transceiver.rtpSender.stop();\n    transceiver.rtpSender = null;\n    transceiver.track = null;\n    transceiver.stream = null;\n\n    // remove the stream from the set of local streams\n    var localStreams = this.transceivers.map(function(t) {\n      return t.stream;\n    });\n    if (localStreams.indexOf(stream) === -1 &&\n        this.localStreams.indexOf(stream) > -1) {\n      this.localStreams.splice(this.localStreams.indexOf(stream), 1);\n    }\n\n    this._maybeFireNegotiationNeeded();\n  };\n\n  RTCPeerConnection.prototype.removeStream = function(stream) {\n    var pc = this;\n    stream.getTracks().forEach(function(track) {\n      var sender = pc.getSenders().find(function(s) {\n        return s.track === track;\n      });\n      if (sender) {\n        pc.removeTrack(sender);\n      }\n    });\n  };\n\n  RTCPeerConnection.prototype.getSenders = function() {\n    return this.transceivers.filter(function(transceiver) {\n      return !!transceiver.rtpSender;\n    })\n    .map(function(transceiver) {\n      return transceiver.rtpSender;\n    });\n  };\n\n  RTCPeerConnection.prototype.getReceivers = function() {\n    return this.transceivers.filter(function(transceiver) {\n      return !!transceiver.rtpReceiver;\n    })\n    .map(function(transceiver) {\n      return transceiver.rtpReceiver;\n    });\n  };\n\n\n  RTCPeerConnection.prototype._createIceGatherer = function(sdpMLineIndex,\n      usingBundle) {\n    var pc = this;\n    if (usingBundle && sdpMLineIndex > 0) {\n      return this.transceivers[0].iceGatherer;\n    } else if (this._iceGatherers.length) {\n      return this._iceGatherers.shift();\n    }\n    var iceGatherer = new window.RTCIceGatherer({\n      iceServers: this._config.iceServers,\n      gatherPolicy: this._config.iceTransportPolicy\n    });\n    Object.defineProperty(iceGatherer, 'state',\n        {value: 'new', writable: true}\n    );\n\n    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = [];\n    this.transceivers[sdpMLineIndex].bufferCandidates = function(event) {\n      var end = !event.candidate || Object.keys(event.candidate).length === 0;\n      // polyfill since RTCIceGatherer.state is not implemented in\n      // Edge 10547 yet.\n      iceGatherer.state = end ? 'completed' : 'gathering';\n      if (pc.transceivers[sdpMLineIndex].bufferedCandidateEvents !== null) {\n        pc.transceivers[sdpMLineIndex].bufferedCandidateEvents.push(event);\n      }\n    };\n    iceGatherer.addEventListener('localcandidate',\n      this.transceivers[sdpMLineIndex].bufferCandidates);\n    return iceGatherer;\n  };\n\n  // start gathering from an RTCIceGatherer.\n  RTCPeerConnection.prototype._gather = function(mid, sdpMLineIndex) {\n    var pc = this;\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n    if (iceGatherer.onlocalcandidate) {\n      return;\n    }\n    var bufferedCandidateEvents =\n      this.transceivers[sdpMLineIndex].bufferedCandidateEvents;\n    this.transceivers[sdpMLineIndex].bufferedCandidateEvents = null;\n    iceGatherer.removeEventListener('localcandidate',\n      this.transceivers[sdpMLineIndex].bufferCandidates);\n    iceGatherer.onlocalcandidate = function(evt) {\n      if (pc.usingBundle && sdpMLineIndex > 0) {\n        // if we know that we use bundle we can drop candidates with\n        // ѕdpMLineIndex > 0. If we don't do this then our state gets\n        // confused since we dispose the extra ice gatherer.\n        return;\n      }\n      var event = new Event('icecandidate');\n      event.candidate = {sdpMid: mid, sdpMLineIndex: sdpMLineIndex};\n\n      var cand = evt.candidate;\n      // Edge emits an empty object for RTCIceCandidateComplete‥\n      var end = !cand || Object.keys(cand).length === 0;\n      if (end) {\n        // polyfill since RTCIceGatherer.state is not implemented in\n        // Edge 10547 yet.\n        if (iceGatherer.state === 'new' || iceGatherer.state === 'gathering') {\n          iceGatherer.state = 'completed';\n        }\n      } else {\n        if (iceGatherer.state === 'new') {\n          iceGatherer.state = 'gathering';\n        }\n        // RTCIceCandidate doesn't have a component, needs to be added\n        cand.component = 1;\n        // also the usernameFragment. TODO: update SDP to take both variants.\n        cand.ufrag = iceGatherer.getLocalParameters().usernameFragment;\n\n        var serializedCandidate = SDPUtils.writeCandidate(cand);\n        event.candidate = Object.assign(event.candidate,\n            SDPUtils.parseCandidate(serializedCandidate));\n\n        event.candidate.candidate = serializedCandidate;\n        event.candidate.toJSON = function() {\n          return {\n            candidate: event.candidate.candidate,\n            sdpMid: event.candidate.sdpMid,\n            sdpMLineIndex: event.candidate.sdpMLineIndex,\n            usernameFragment: event.candidate.usernameFragment\n          };\n        };\n      }\n\n      // update local description.\n      var sections = SDPUtils.getMediaSections(pc._localDescription.sdp);\n      if (!end) {\n        sections[event.candidate.sdpMLineIndex] +=\n            'a=' + event.candidate.candidate + '\\r\\n';\n      } else {\n        sections[event.candidate.sdpMLineIndex] +=\n            'a=end-of-candidates\\r\\n';\n      }\n      pc._localDescription.sdp =\n          SDPUtils.getDescription(pc._localDescription.sdp) +\n          sections.join('');\n      var complete = pc.transceivers.every(function(transceiver) {\n        return transceiver.iceGatherer &&\n            transceiver.iceGatherer.state === 'completed';\n      });\n\n      if (pc.iceGatheringState !== 'gathering') {\n        pc.iceGatheringState = 'gathering';\n        pc._emitGatheringStateChange();\n      }\n\n      // Emit candidate. Also emit null candidate when all gatherers are\n      // complete.\n      if (!end) {\n        pc._dispatchEvent('icecandidate', event);\n      }\n      if (complete) {\n        pc._dispatchEvent('icecandidate', new Event('icecandidate'));\n        pc.iceGatheringState = 'complete';\n        pc._emitGatheringStateChange();\n      }\n    };\n\n    // emit already gathered candidates.\n    window.setTimeout(function() {\n      bufferedCandidateEvents.forEach(function(e) {\n        iceGatherer.onlocalcandidate(e);\n      });\n    }, 0);\n  };\n\n  // Create ICE transport and DTLS transport.\n  RTCPeerConnection.prototype._createIceAndDtlsTransports = function() {\n    var pc = this;\n    var iceTransport = new window.RTCIceTransport(null);\n    iceTransport.onicestatechange = function() {\n      pc._updateIceConnectionState();\n      pc._updateConnectionState();\n    };\n\n    var dtlsTransport = new window.RTCDtlsTransport(iceTransport);\n    dtlsTransport.ondtlsstatechange = function() {\n      pc._updateConnectionState();\n    };\n    dtlsTransport.onerror = function() {\n      // onerror does not set state to failed by itself.\n      Object.defineProperty(dtlsTransport, 'state',\n          {value: 'failed', writable: true});\n      pc._updateConnectionState();\n    };\n\n    return {\n      iceTransport: iceTransport,\n      dtlsTransport: dtlsTransport\n    };\n  };\n\n  // Destroy ICE gatherer, ICE transport and DTLS transport.\n  // Without triggering the callbacks.\n  RTCPeerConnection.prototype._disposeIceAndDtlsTransports = function(\n      sdpMLineIndex) {\n    var iceGatherer = this.transceivers[sdpMLineIndex].iceGatherer;\n    if (iceGatherer) {\n      delete iceGatherer.onlocalcandidate;\n      delete this.transceivers[sdpMLineIndex].iceGatherer;\n    }\n    var iceTransport = this.transceivers[sdpMLineIndex].iceTransport;\n    if (iceTransport) {\n      delete iceTransport.onicestatechange;\n      delete this.transceivers[sdpMLineIndex].iceTransport;\n    }\n    var dtlsTransport = this.transceivers[sdpMLineIndex].dtlsTransport;\n    if (dtlsTransport) {\n      delete dtlsTransport.ondtlsstatechange;\n      delete dtlsTransport.onerror;\n      delete this.transceivers[sdpMLineIndex].dtlsTransport;\n    }\n  };\n\n  // Start the RTP Sender and Receiver for a transceiver.\n  RTCPeerConnection.prototype._transceive = function(transceiver,\n      send, recv) {\n    var params = getCommonCapabilities(transceiver.localCapabilities,\n        transceiver.remoteCapabilities);\n    if (send && transceiver.rtpSender) {\n      params.encodings = transceiver.sendEncodingParameters;\n      params.rtcp = {\n        cname: SDPUtils.localCName,\n        compound: transceiver.rtcpParameters.compound\n      };\n      if (transceiver.recvEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.recvEncodingParameters[0].ssrc;\n      }\n      transceiver.rtpSender.send(params);\n    }\n    if (recv && transceiver.rtpReceiver && params.codecs.length > 0) {\n      // remove RTX field in Edge 14942\n      if (transceiver.kind === 'video'\n          && transceiver.recvEncodingParameters\n          && edgeVersion < 15019) {\n        transceiver.recvEncodingParameters.forEach(function(p) {\n          delete p.rtx;\n        });\n      }\n      if (transceiver.recvEncodingParameters.length) {\n        params.encodings = transceiver.recvEncodingParameters;\n      } else {\n        params.encodings = [{}];\n      }\n      params.rtcp = {\n        compound: transceiver.rtcpParameters.compound\n      };\n      if (transceiver.rtcpParameters.cname) {\n        params.rtcp.cname = transceiver.rtcpParameters.cname;\n      }\n      if (transceiver.sendEncodingParameters.length) {\n        params.rtcp.ssrc = transceiver.sendEncodingParameters[0].ssrc;\n      }\n      transceiver.rtpReceiver.receive(params);\n    }\n  };\n\n  RTCPeerConnection.prototype.setLocalDescription = function(description) {\n    var pc = this;\n\n    // Note: pranswer is not supported.\n    if (['offer', 'answer'].indexOf(description.type) === -1) {\n      return Promise.reject(makeError('TypeError',\n          'Unsupported type \"' + description.type + '\"'));\n    }\n\n    if (!isActionAllowedInSignalingState('setLocalDescription',\n        description.type, pc.signalingState) || pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not set local ' + description.type +\n          ' in state ' + pc.signalingState));\n    }\n\n    var sections;\n    var sessionpart;\n    if (description.type === 'offer') {\n      // VERY limited support for SDP munging. Limited to:\n      // * changing the order of codecs\n      sections = SDPUtils.splitSections(description.sdp);\n      sessionpart = sections.shift();\n      sections.forEach(function(mediaSection, sdpMLineIndex) {\n        var caps = SDPUtils.parseRtpParameters(mediaSection);\n        pc.transceivers[sdpMLineIndex].localCapabilities = caps;\n      });\n\n      pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n        pc._gather(transceiver.mid, sdpMLineIndex);\n      });\n    } else if (description.type === 'answer') {\n      sections = SDPUtils.splitSections(pc._remoteDescription.sdp);\n      sessionpart = sections.shift();\n      var isIceLite = SDPUtils.matchPrefix(sessionpart,\n          'a=ice-lite').length > 0;\n      sections.forEach(function(mediaSection, sdpMLineIndex) {\n        var transceiver = pc.transceivers[sdpMLineIndex];\n        var iceGatherer = transceiver.iceGatherer;\n        var iceTransport = transceiver.iceTransport;\n        var dtlsTransport = transceiver.dtlsTransport;\n        var localCapabilities = transceiver.localCapabilities;\n        var remoteCapabilities = transceiver.remoteCapabilities;\n\n        // treat bundle-only as not-rejected.\n        var rejected = SDPUtils.isRejected(mediaSection) &&\n            SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n\n        if (!rejected && !transceiver.rejected) {\n          var remoteIceParameters = SDPUtils.getIceParameters(\n              mediaSection, sessionpart);\n          var remoteDtlsParameters = SDPUtils.getDtlsParameters(\n              mediaSection, sessionpart);\n          if (isIceLite) {\n            remoteDtlsParameters.role = 'server';\n          }\n\n          if (!pc.usingBundle || sdpMLineIndex === 0) {\n            pc._gather(transceiver.mid, sdpMLineIndex);\n            if (iceTransport.state === 'new') {\n              iceTransport.start(iceGatherer, remoteIceParameters,\n                  isIceLite ? 'controlling' : 'controlled');\n            }\n            if (dtlsTransport.state === 'new') {\n              dtlsTransport.start(remoteDtlsParameters);\n            }\n          }\n\n          // Calculate intersection of capabilities.\n          var params = getCommonCapabilities(localCapabilities,\n              remoteCapabilities);\n\n          // Start the RTCRtpSender. The RTCRtpReceiver for this\n          // transceiver has already been started in setRemoteDescription.\n          pc._transceive(transceiver,\n              params.codecs.length > 0,\n              false);\n        }\n      });\n    }\n\n    pc._localDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n    if (description.type === 'offer') {\n      pc._updateSignalingState('have-local-offer');\n    } else {\n      pc._updateSignalingState('stable');\n    }\n\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.setRemoteDescription = function(description) {\n    var pc = this;\n\n    // Note: pranswer is not supported.\n    if (['offer', 'answer'].indexOf(description.type) === -1) {\n      return Promise.reject(makeError('TypeError',\n          'Unsupported type \"' + description.type + '\"'));\n    }\n\n    if (!isActionAllowedInSignalingState('setRemoteDescription',\n        description.type, pc.signalingState) || pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not set remote ' + description.type +\n          ' in state ' + pc.signalingState));\n    }\n\n    var streams = {};\n    pc.remoteStreams.forEach(function(stream) {\n      streams[stream.id] = stream;\n    });\n    var receiverList = [];\n    var sections = SDPUtils.splitSections(description.sdp);\n    var sessionpart = sections.shift();\n    var isIceLite = SDPUtils.matchPrefix(sessionpart,\n        'a=ice-lite').length > 0;\n    var usingBundle = SDPUtils.matchPrefix(sessionpart,\n        'a=group:BUNDLE ').length > 0;\n    pc.usingBundle = usingBundle;\n    var iceOptions = SDPUtils.matchPrefix(sessionpart,\n        'a=ice-options:')[0];\n    if (iceOptions) {\n      pc.canTrickleIceCandidates = iceOptions.substr(14).split(' ')\n          .indexOf('trickle') >= 0;\n    } else {\n      pc.canTrickleIceCandidates = false;\n    }\n\n    sections.forEach(function(mediaSection, sdpMLineIndex) {\n      var lines = SDPUtils.splitLines(mediaSection);\n      var kind = SDPUtils.getKind(mediaSection);\n      // treat bundle-only as not-rejected.\n      var rejected = SDPUtils.isRejected(mediaSection) &&\n          SDPUtils.matchPrefix(mediaSection, 'a=bundle-only').length === 0;\n      var protocol = lines[0].substr(2).split(' ')[2];\n\n      var direction = SDPUtils.getDirection(mediaSection, sessionpart);\n      var remoteMsid = SDPUtils.parseMsid(mediaSection);\n\n      var mid = SDPUtils.getMid(mediaSection) || SDPUtils.generateIdentifier();\n\n      // Reject datachannels which are not implemented yet.\n      if (rejected || (kind === 'application' && (protocol === 'DTLS/SCTP' ||\n          protocol === 'UDP/DTLS/SCTP'))) {\n        // TODO: this is dangerous in the case where a non-rejected m-line\n        //     becomes rejected.\n        pc.transceivers[sdpMLineIndex] = {\n          mid: mid,\n          kind: kind,\n          protocol: protocol,\n          rejected: true\n        };\n        return;\n      }\n\n      if (!rejected && pc.transceivers[sdpMLineIndex] &&\n          pc.transceivers[sdpMLineIndex].rejected) {\n        // recycle a rejected transceiver.\n        pc.transceivers[sdpMLineIndex] = pc._createTransceiver(kind, true);\n      }\n\n      var transceiver;\n      var iceGatherer;\n      var iceTransport;\n      var dtlsTransport;\n      var rtpReceiver;\n      var sendEncodingParameters;\n      var recvEncodingParameters;\n      var localCapabilities;\n\n      var track;\n      // FIXME: ensure the mediaSection has rtcp-mux set.\n      var remoteCapabilities = SDPUtils.parseRtpParameters(mediaSection);\n      var remoteIceParameters;\n      var remoteDtlsParameters;\n      if (!rejected) {\n        remoteIceParameters = SDPUtils.getIceParameters(mediaSection,\n            sessionpart);\n        remoteDtlsParameters = SDPUtils.getDtlsParameters(mediaSection,\n            sessionpart);\n        remoteDtlsParameters.role = 'client';\n      }\n      recvEncodingParameters =\n          SDPUtils.parseRtpEncodingParameters(mediaSection);\n\n      var rtcpParameters = SDPUtils.parseRtcpParameters(mediaSection);\n\n      var isComplete = SDPUtils.matchPrefix(mediaSection,\n          'a=end-of-candidates', sessionpart).length > 0;\n      var cands = SDPUtils.matchPrefix(mediaSection, 'a=candidate:')\n          .map(function(cand) {\n            return SDPUtils.parseCandidate(cand);\n          })\n          .filter(function(cand) {\n            return cand.component === 1;\n          });\n\n      // Check if we can use BUNDLE and dispose transports.\n      if ((description.type === 'offer' || description.type === 'answer') &&\n          !rejected && usingBundle && sdpMLineIndex > 0 &&\n          pc.transceivers[sdpMLineIndex]) {\n        pc._disposeIceAndDtlsTransports(sdpMLineIndex);\n        pc.transceivers[sdpMLineIndex].iceGatherer =\n            pc.transceivers[0].iceGatherer;\n        pc.transceivers[sdpMLineIndex].iceTransport =\n            pc.transceivers[0].iceTransport;\n        pc.transceivers[sdpMLineIndex].dtlsTransport =\n            pc.transceivers[0].dtlsTransport;\n        if (pc.transceivers[sdpMLineIndex].rtpSender) {\n          pc.transceivers[sdpMLineIndex].rtpSender.setTransport(\n              pc.transceivers[0].dtlsTransport);\n        }\n        if (pc.transceivers[sdpMLineIndex].rtpReceiver) {\n          pc.transceivers[sdpMLineIndex].rtpReceiver.setTransport(\n              pc.transceivers[0].dtlsTransport);\n        }\n      }\n      if (description.type === 'offer' && !rejected) {\n        transceiver = pc.transceivers[sdpMLineIndex] ||\n            pc._createTransceiver(kind);\n        transceiver.mid = mid;\n\n        if (!transceiver.iceGatherer) {\n          transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n              usingBundle);\n        }\n\n        if (cands.length && transceiver.iceTransport.state === 'new') {\n          if (isComplete && (!usingBundle || sdpMLineIndex === 0)) {\n            transceiver.iceTransport.setRemoteCandidates(cands);\n          } else {\n            cands.forEach(function(candidate) {\n              maybeAddCandidate(transceiver.iceTransport, candidate);\n            });\n          }\n        }\n\n        localCapabilities = window.RTCRtpReceiver.getCapabilities(kind);\n\n        // filter RTX until additional stuff needed for RTX is implemented\n        // in adapter.js\n        if (edgeVersion < 15019) {\n          localCapabilities.codecs = localCapabilities.codecs.filter(\n              function(codec) {\n                return codec.name !== 'rtx';\n              });\n        }\n\n        sendEncodingParameters = transceiver.sendEncodingParameters || [{\n          ssrc: (2 * sdpMLineIndex + 2) * 1001\n        }];\n\n        // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n        var isNewTrack = false;\n        if (direction === 'sendrecv' || direction === 'sendonly') {\n          isNewTrack = !transceiver.rtpReceiver;\n          rtpReceiver = transceiver.rtpReceiver ||\n              new window.RTCRtpReceiver(transceiver.dtlsTransport, kind);\n\n          if (isNewTrack) {\n            var stream;\n            track = rtpReceiver.track;\n            // FIXME: does not work with Plan B.\n            if (remoteMsid && remoteMsid.stream === '-') {\n              // no-op. a stream id of '-' means: no associated stream.\n            } else if (remoteMsid) {\n              if (!streams[remoteMsid.stream]) {\n                streams[remoteMsid.stream] = new window.MediaStream();\n                Object.defineProperty(streams[remoteMsid.stream], 'id', {\n                  get: function() {\n                    return remoteMsid.stream;\n                  }\n                });\n              }\n              Object.defineProperty(track, 'id', {\n                get: function() {\n                  return remoteMsid.track;\n                }\n              });\n              stream = streams[remoteMsid.stream];\n            } else {\n              if (!streams.default) {\n                streams.default = new window.MediaStream();\n              }\n              stream = streams.default;\n            }\n            if (stream) {\n              addTrackToStreamAndFireEvent(track, stream);\n              transceiver.associatedRemoteMediaStreams.push(stream);\n            }\n            receiverList.push([track, rtpReceiver, stream]);\n          }\n        } else if (transceiver.rtpReceiver && transceiver.rtpReceiver.track) {\n          transceiver.associatedRemoteMediaStreams.forEach(function(s) {\n            var nativeTrack = s.getTracks().find(function(t) {\n              return t.id === transceiver.rtpReceiver.track.id;\n            });\n            if (nativeTrack) {\n              removeTrackFromStreamAndFireEvent(nativeTrack, s);\n            }\n          });\n          transceiver.associatedRemoteMediaStreams = [];\n        }\n\n        transceiver.localCapabilities = localCapabilities;\n        transceiver.remoteCapabilities = remoteCapabilities;\n        transceiver.rtpReceiver = rtpReceiver;\n        transceiver.rtcpParameters = rtcpParameters;\n        transceiver.sendEncodingParameters = sendEncodingParameters;\n        transceiver.recvEncodingParameters = recvEncodingParameters;\n\n        // Start the RTCRtpReceiver now. The RTPSender is started in\n        // setLocalDescription.\n        pc._transceive(pc.transceivers[sdpMLineIndex],\n            false,\n            isNewTrack);\n      } else if (description.type === 'answer' && !rejected) {\n        transceiver = pc.transceivers[sdpMLineIndex];\n        iceGatherer = transceiver.iceGatherer;\n        iceTransport = transceiver.iceTransport;\n        dtlsTransport = transceiver.dtlsTransport;\n        rtpReceiver = transceiver.rtpReceiver;\n        sendEncodingParameters = transceiver.sendEncodingParameters;\n        localCapabilities = transceiver.localCapabilities;\n\n        pc.transceivers[sdpMLineIndex].recvEncodingParameters =\n            recvEncodingParameters;\n        pc.transceivers[sdpMLineIndex].remoteCapabilities =\n            remoteCapabilities;\n        pc.transceivers[sdpMLineIndex].rtcpParameters = rtcpParameters;\n\n        if (cands.length && iceTransport.state === 'new') {\n          if ((isIceLite || isComplete) &&\n              (!usingBundle || sdpMLineIndex === 0)) {\n            iceTransport.setRemoteCandidates(cands);\n          } else {\n            cands.forEach(function(candidate) {\n              maybeAddCandidate(transceiver.iceTransport, candidate);\n            });\n          }\n        }\n\n        if (!usingBundle || sdpMLineIndex === 0) {\n          if (iceTransport.state === 'new') {\n            iceTransport.start(iceGatherer, remoteIceParameters,\n                'controlling');\n          }\n          if (dtlsTransport.state === 'new') {\n            dtlsTransport.start(remoteDtlsParameters);\n          }\n        }\n\n        // If the offer contained RTX but the answer did not,\n        // remove RTX from sendEncodingParameters.\n        var commonCapabilities = getCommonCapabilities(\n          transceiver.localCapabilities,\n          transceiver.remoteCapabilities);\n\n        var hasRtx = commonCapabilities.codecs.filter(function(c) {\n          return c.name.toLowerCase() === 'rtx';\n        }).length;\n        if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n          delete transceiver.sendEncodingParameters[0].rtx;\n        }\n\n        pc._transceive(transceiver,\n            direction === 'sendrecv' || direction === 'recvonly',\n            direction === 'sendrecv' || direction === 'sendonly');\n\n        // TODO: rewrite to use http://w3c.github.io/webrtc-pc/#set-associated-remote-streams\n        if (rtpReceiver &&\n            (direction === 'sendrecv' || direction === 'sendonly')) {\n          track = rtpReceiver.track;\n          if (remoteMsid) {\n            if (!streams[remoteMsid.stream]) {\n              streams[remoteMsid.stream] = new window.MediaStream();\n            }\n            addTrackToStreamAndFireEvent(track, streams[remoteMsid.stream]);\n            receiverList.push([track, rtpReceiver, streams[remoteMsid.stream]]);\n          } else {\n            if (!streams.default) {\n              streams.default = new window.MediaStream();\n            }\n            addTrackToStreamAndFireEvent(track, streams.default);\n            receiverList.push([track, rtpReceiver, streams.default]);\n          }\n        } else {\n          // FIXME: actually the receiver should be created later.\n          delete transceiver.rtpReceiver;\n        }\n      }\n    });\n\n    if (pc._dtlsRole === undefined) {\n      pc._dtlsRole = description.type === 'offer' ? 'active' : 'passive';\n    }\n\n    pc._remoteDescription = {\n      type: description.type,\n      sdp: description.sdp\n    };\n    if (description.type === 'offer') {\n      pc._updateSignalingState('have-remote-offer');\n    } else {\n      pc._updateSignalingState('stable');\n    }\n    Object.keys(streams).forEach(function(sid) {\n      var stream = streams[sid];\n      if (stream.getTracks().length) {\n        if (pc.remoteStreams.indexOf(stream) === -1) {\n          pc.remoteStreams.push(stream);\n          var event = new Event('addstream');\n          event.stream = stream;\n          window.setTimeout(function() {\n            pc._dispatchEvent('addstream', event);\n          });\n        }\n\n        receiverList.forEach(function(item) {\n          var track = item[0];\n          var receiver = item[1];\n          if (stream.id !== item[2].id) {\n            return;\n          }\n          fireAddTrack(pc, track, receiver, [stream]);\n        });\n      }\n    });\n    receiverList.forEach(function(item) {\n      if (item[2]) {\n        return;\n      }\n      fireAddTrack(pc, item[0], item[1], []);\n    });\n\n    // check whether addIceCandidate({}) was called within four seconds after\n    // setRemoteDescription.\n    window.setTimeout(function() {\n      if (!(pc && pc.transceivers)) {\n        return;\n      }\n      pc.transceivers.forEach(function(transceiver) {\n        if (transceiver.iceTransport &&\n            transceiver.iceTransport.state === 'new' &&\n            transceiver.iceTransport.getRemoteCandidates().length > 0) {\n          console.warn('Timeout for addRemoteCandidate. Consider sending ' +\n              'an end-of-candidates notification');\n          transceiver.iceTransport.addRemoteCandidate({});\n        }\n      });\n    }, 4000);\n\n    return Promise.resolve();\n  };\n\n  RTCPeerConnection.prototype.close = function() {\n    this.transceivers.forEach(function(transceiver) {\n      /* not yet\n      if (transceiver.iceGatherer) {\n        transceiver.iceGatherer.close();\n      }\n      */\n      if (transceiver.iceTransport) {\n        transceiver.iceTransport.stop();\n      }\n      if (transceiver.dtlsTransport) {\n        transceiver.dtlsTransport.stop();\n      }\n      if (transceiver.rtpSender) {\n        transceiver.rtpSender.stop();\n      }\n      if (transceiver.rtpReceiver) {\n        transceiver.rtpReceiver.stop();\n      }\n    });\n    // FIXME: clean up tracks, local streams, remote streams, etc\n    this._isClosed = true;\n    this._updateSignalingState('closed');\n  };\n\n  // Update the signaling state.\n  RTCPeerConnection.prototype._updateSignalingState = function(newState) {\n    this.signalingState = newState;\n    var event = new Event('signalingstatechange');\n    this._dispatchEvent('signalingstatechange', event);\n  };\n\n  // Determine whether to fire the negotiationneeded event.\n  RTCPeerConnection.prototype._maybeFireNegotiationNeeded = function() {\n    var pc = this;\n    if (this.signalingState !== 'stable' || this.needNegotiation === true) {\n      return;\n    }\n    this.needNegotiation = true;\n    window.setTimeout(function() {\n      if (pc.needNegotiation) {\n        pc.needNegotiation = false;\n        var event = new Event('negotiationneeded');\n        pc._dispatchEvent('negotiationneeded', event);\n      }\n    }, 0);\n  };\n\n  // Update the ice connection state.\n  RTCPeerConnection.prototype._updateIceConnectionState = function() {\n    var newState;\n    var states = {\n      'new': 0,\n      closed: 0,\n      checking: 0,\n      connected: 0,\n      completed: 0,\n      disconnected: 0,\n      failed: 0\n    };\n    this.transceivers.forEach(function(transceiver) {\n      if (transceiver.iceTransport && !transceiver.rejected) {\n        states[transceiver.iceTransport.state]++;\n      }\n    });\n\n    newState = 'new';\n    if (states.failed > 0) {\n      newState = 'failed';\n    } else if (states.checking > 0) {\n      newState = 'checking';\n    } else if (states.disconnected > 0) {\n      newState = 'disconnected';\n    } else if (states.new > 0) {\n      newState = 'new';\n    } else if (states.connected > 0) {\n      newState = 'connected';\n    } else if (states.completed > 0) {\n      newState = 'completed';\n    }\n\n    if (newState !== this.iceConnectionState) {\n      this.iceConnectionState = newState;\n      var event = new Event('iceconnectionstatechange');\n      this._dispatchEvent('iceconnectionstatechange', event);\n    }\n  };\n\n  // Update the connection state.\n  RTCPeerConnection.prototype._updateConnectionState = function() {\n    var newState;\n    var states = {\n      'new': 0,\n      closed: 0,\n      connecting: 0,\n      connected: 0,\n      completed: 0,\n      disconnected: 0,\n      failed: 0\n    };\n    this.transceivers.forEach(function(transceiver) {\n      if (transceiver.iceTransport && transceiver.dtlsTransport &&\n          !transceiver.rejected) {\n        states[transceiver.iceTransport.state]++;\n        states[transceiver.dtlsTransport.state]++;\n      }\n    });\n    // ICETransport.completed and connected are the same for this purpose.\n    states.connected += states.completed;\n\n    newState = 'new';\n    if (states.failed > 0) {\n      newState = 'failed';\n    } else if (states.connecting > 0) {\n      newState = 'connecting';\n    } else if (states.disconnected > 0) {\n      newState = 'disconnected';\n    } else if (states.new > 0) {\n      newState = 'new';\n    } else if (states.connected > 0) {\n      newState = 'connected';\n    }\n\n    if (newState !== this.connectionState) {\n      this.connectionState = newState;\n      var event = new Event('connectionstatechange');\n      this._dispatchEvent('connectionstatechange', event);\n    }\n  };\n\n  RTCPeerConnection.prototype.createOffer = function() {\n    var pc = this;\n\n    if (pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createOffer after close'));\n    }\n\n    var numAudioTracks = pc.transceivers.filter(function(t) {\n      return t.kind === 'audio';\n    }).length;\n    var numVideoTracks = pc.transceivers.filter(function(t) {\n      return t.kind === 'video';\n    }).length;\n\n    // Determine number of audio and video tracks we need to send/recv.\n    var offerOptions = arguments[0];\n    if (offerOptions) {\n      // Reject Chrome legacy constraints.\n      if (offerOptions.mandatory || offerOptions.optional) {\n        throw new TypeError(\n            'Legacy mandatory/optional constraints not supported.');\n      }\n      if (offerOptions.offerToReceiveAudio !== undefined) {\n        if (offerOptions.offerToReceiveAudio === true) {\n          numAudioTracks = 1;\n        } else if (offerOptions.offerToReceiveAudio === false) {\n          numAudioTracks = 0;\n        } else {\n          numAudioTracks = offerOptions.offerToReceiveAudio;\n        }\n      }\n      if (offerOptions.offerToReceiveVideo !== undefined) {\n        if (offerOptions.offerToReceiveVideo === true) {\n          numVideoTracks = 1;\n        } else if (offerOptions.offerToReceiveVideo === false) {\n          numVideoTracks = 0;\n        } else {\n          numVideoTracks = offerOptions.offerToReceiveVideo;\n        }\n      }\n    }\n\n    pc.transceivers.forEach(function(transceiver) {\n      if (transceiver.kind === 'audio') {\n        numAudioTracks--;\n        if (numAudioTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      } else if (transceiver.kind === 'video') {\n        numVideoTracks--;\n        if (numVideoTracks < 0) {\n          transceiver.wantReceive = false;\n        }\n      }\n    });\n\n    // Create M-lines for recvonly streams.\n    while (numAudioTracks > 0 || numVideoTracks > 0) {\n      if (numAudioTracks > 0) {\n        pc._createTransceiver('audio');\n        numAudioTracks--;\n      }\n      if (numVideoTracks > 0) {\n        pc._createTransceiver('video');\n        numVideoTracks--;\n      }\n    }\n\n    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n        pc._sdpSessionVersion++);\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      // For each track, create an ice gatherer, ice transport,\n      // dtls transport, potentially rtpsender and rtpreceiver.\n      var track = transceiver.track;\n      var kind = transceiver.kind;\n      var mid = transceiver.mid || SDPUtils.generateIdentifier();\n      transceiver.mid = mid;\n\n      if (!transceiver.iceGatherer) {\n        transceiver.iceGatherer = pc._createIceGatherer(sdpMLineIndex,\n            pc.usingBundle);\n      }\n\n      var localCapabilities = window.RTCRtpSender.getCapabilities(kind);\n      // filter RTX until additional stuff needed for RTX is implemented\n      // in adapter.js\n      if (edgeVersion < 15019) {\n        localCapabilities.codecs = localCapabilities.codecs.filter(\n            function(codec) {\n              return codec.name !== 'rtx';\n            });\n      }\n      localCapabilities.codecs.forEach(function(codec) {\n        // work around https://bugs.chromium.org/p/webrtc/issues/detail?id=6552\n        // by adding level-asymmetry-allowed=1\n        if (codec.name === 'H264' &&\n            codec.parameters['level-asymmetry-allowed'] === undefined) {\n          codec.parameters['level-asymmetry-allowed'] = '1';\n        }\n\n        // for subsequent offers, we might have to re-use the payload\n        // type of the last offer.\n        if (transceiver.remoteCapabilities &&\n            transceiver.remoteCapabilities.codecs) {\n          transceiver.remoteCapabilities.codecs.forEach(function(remoteCodec) {\n            if (codec.name.toLowerCase() === remoteCodec.name.toLowerCase() &&\n                codec.clockRate === remoteCodec.clockRate) {\n              codec.preferredPayloadType = remoteCodec.payloadType;\n            }\n          });\n        }\n      });\n      localCapabilities.headerExtensions.forEach(function(hdrExt) {\n        var remoteExtensions = transceiver.remoteCapabilities &&\n            transceiver.remoteCapabilities.headerExtensions || [];\n        remoteExtensions.forEach(function(rHdrExt) {\n          if (hdrExt.uri === rHdrExt.uri) {\n            hdrExt.id = rHdrExt.id;\n          }\n        });\n      });\n\n      // generate an ssrc now, to be used later in rtpSender.send\n      var sendEncodingParameters = transceiver.sendEncodingParameters || [{\n        ssrc: (2 * sdpMLineIndex + 1) * 1001\n      }];\n      if (track) {\n        // add RTX\n        if (edgeVersion >= 15019 && kind === 'video' &&\n            !sendEncodingParameters[0].rtx) {\n          sendEncodingParameters[0].rtx = {\n            ssrc: sendEncodingParameters[0].ssrc + 1\n          };\n        }\n      }\n\n      if (transceiver.wantReceive) {\n        transceiver.rtpReceiver = new window.RTCRtpReceiver(\n            transceiver.dtlsTransport, kind);\n      }\n\n      transceiver.localCapabilities = localCapabilities;\n      transceiver.sendEncodingParameters = sendEncodingParameters;\n    });\n\n    // always offer BUNDLE and dispose on return if not supported.\n    if (pc._config.bundlePolicy !== 'max-compat') {\n      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n    sdp += 'a=ice-options:trickle\\r\\n';\n\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      sdp += writeMediaSection(transceiver, transceiver.localCapabilities,\n          'offer', transceiver.stream, pc._dtlsRole);\n      sdp += 'a=rtcp-rsize\\r\\n';\n\n      if (transceiver.iceGatherer && pc.iceGatheringState !== 'new' &&\n          (sdpMLineIndex === 0 || !pc.usingBundle)) {\n        transceiver.iceGatherer.getLocalCandidates().forEach(function(cand) {\n          cand.component = 1;\n          sdp += 'a=' + SDPUtils.writeCandidate(cand) + '\\r\\n';\n        });\n\n        if (transceiver.iceGatherer.state === 'completed') {\n          sdp += 'a=end-of-candidates\\r\\n';\n        }\n      }\n    });\n\n    var desc = new window.RTCSessionDescription({\n      type: 'offer',\n      sdp: sdp\n    });\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.createAnswer = function() {\n    var pc = this;\n\n    if (pc._isClosed) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createAnswer after close'));\n    }\n\n    if (!(pc.signalingState === 'have-remote-offer' ||\n        pc.signalingState === 'have-local-pranswer')) {\n      return Promise.reject(makeError('InvalidStateError',\n          'Can not call createAnswer in signalingState ' + pc.signalingState));\n    }\n\n    var sdp = SDPUtils.writeSessionBoilerplate(pc._sdpSessionId,\n        pc._sdpSessionVersion++);\n    if (pc.usingBundle) {\n      sdp += 'a=group:BUNDLE ' + pc.transceivers.map(function(t) {\n        return t.mid;\n      }).join(' ') + '\\r\\n';\n    }\n    sdp += 'a=ice-options:trickle\\r\\n';\n\n    var mediaSectionsInOffer = SDPUtils.getMediaSections(\n        pc._remoteDescription.sdp).length;\n    pc.transceivers.forEach(function(transceiver, sdpMLineIndex) {\n      if (sdpMLineIndex + 1 > mediaSectionsInOffer) {\n        return;\n      }\n      if (transceiver.rejected) {\n        if (transceiver.kind === 'application') {\n          if (transceiver.protocol === 'DTLS/SCTP') { // legacy fmt\n            sdp += 'm=application 0 DTLS/SCTP 5000\\r\\n';\n          } else {\n            sdp += 'm=application 0 ' + transceiver.protocol +\n                ' webrtc-datachannel\\r\\n';\n          }\n        } else if (transceiver.kind === 'audio') {\n          sdp += 'm=audio 0 UDP/TLS/RTP/SAVPF 0\\r\\n' +\n              'a=rtpmap:0 PCMU/8000\\r\\n';\n        } else if (transceiver.kind === 'video') {\n          sdp += 'm=video 0 UDP/TLS/RTP/SAVPF 120\\r\\n' +\n              'a=rtpmap:120 VP8/90000\\r\\n';\n        }\n        sdp += 'c=IN IP4 0.0.0.0\\r\\n' +\n            'a=inactive\\r\\n' +\n            'a=mid:' + transceiver.mid + '\\r\\n';\n        return;\n      }\n\n      // FIXME: look at direction.\n      if (transceiver.stream) {\n        var localTrack;\n        if (transceiver.kind === 'audio') {\n          localTrack = transceiver.stream.getAudioTracks()[0];\n        } else if (transceiver.kind === 'video') {\n          localTrack = transceiver.stream.getVideoTracks()[0];\n        }\n        if (localTrack) {\n          // add RTX\n          if (edgeVersion >= 15019 && transceiver.kind === 'video' &&\n              !transceiver.sendEncodingParameters[0].rtx) {\n            transceiver.sendEncodingParameters[0].rtx = {\n              ssrc: transceiver.sendEncodingParameters[0].ssrc + 1\n            };\n          }\n        }\n      }\n\n      // Calculate intersection of capabilities.\n      var commonCapabilities = getCommonCapabilities(\n          transceiver.localCapabilities,\n          transceiver.remoteCapabilities);\n\n      var hasRtx = commonCapabilities.codecs.filter(function(c) {\n        return c.name.toLowerCase() === 'rtx';\n      }).length;\n      if (!hasRtx && transceiver.sendEncodingParameters[0].rtx) {\n        delete transceiver.sendEncodingParameters[0].rtx;\n      }\n\n      sdp += writeMediaSection(transceiver, commonCapabilities,\n          'answer', transceiver.stream, pc._dtlsRole);\n      if (transceiver.rtcpParameters &&\n          transceiver.rtcpParameters.reducedSize) {\n        sdp += 'a=rtcp-rsize\\r\\n';\n      }\n    });\n\n    var desc = new window.RTCSessionDescription({\n      type: 'answer',\n      sdp: sdp\n    });\n    return Promise.resolve(desc);\n  };\n\n  RTCPeerConnection.prototype.addIceCandidate = function(candidate) {\n    var pc = this;\n    var sections;\n    if (candidate && !(candidate.sdpMLineIndex !== undefined ||\n        candidate.sdpMid)) {\n      return Promise.reject(new TypeError('sdpMLineIndex or sdpMid required'));\n    }\n\n    // TODO: needs to go into ops queue.\n    return new Promise(function(resolve, reject) {\n      if (!pc._remoteDescription) {\n        return reject(makeError('InvalidStateError',\n            'Can not add ICE candidate without a remote description'));\n      } else if (!candidate || candidate.candidate === '') {\n        for (var j = 0; j < pc.transceivers.length; j++) {\n          if (pc.transceivers[j].rejected) {\n            continue;\n          }\n          pc.transceivers[j].iceTransport.addRemoteCandidate({});\n          sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);\n          sections[j] += 'a=end-of-candidates\\r\\n';\n          pc._remoteDescription.sdp =\n              SDPUtils.getDescription(pc._remoteDescription.sdp) +\n              sections.join('');\n          if (pc.usingBundle) {\n            break;\n          }\n        }\n      } else {\n        var sdpMLineIndex = candidate.sdpMLineIndex;\n        if (candidate.sdpMid) {\n          for (var i = 0; i < pc.transceivers.length; i++) {\n            if (pc.transceivers[i].mid === candidate.sdpMid) {\n              sdpMLineIndex = i;\n              break;\n            }\n          }\n        }\n        var transceiver = pc.transceivers[sdpMLineIndex];\n        if (transceiver) {\n          if (transceiver.rejected) {\n            return resolve();\n          }\n          var cand = Object.keys(candidate.candidate).length > 0 ?\n              SDPUtils.parseCandidate(candidate.candidate) : {};\n          // Ignore Chrome's invalid candidates since Edge does not like them.\n          if (cand.protocol === 'tcp' && (cand.port === 0 || cand.port === 9)) {\n            return resolve();\n          }\n          // Ignore RTCP candidates, we assume RTCP-MUX.\n          if (cand.component && cand.component !== 1) {\n            return resolve();\n          }\n          // when using bundle, avoid adding candidates to the wrong\n          // ice transport. And avoid adding candidates added in the SDP.\n          if (sdpMLineIndex === 0 || (sdpMLineIndex > 0 &&\n              transceiver.iceTransport !== pc.transceivers[0].iceTransport)) {\n            if (!maybeAddCandidate(transceiver.iceTransport, cand)) {\n              return reject(makeError('OperationError',\n                  'Can not add ICE candidate'));\n            }\n          }\n\n          // update the remoteDescription.\n          var candidateString = candidate.candidate.trim();\n          if (candidateString.indexOf('a=') === 0) {\n            candidateString = candidateString.substr(2);\n          }\n          sections = SDPUtils.getMediaSections(pc._remoteDescription.sdp);\n          sections[sdpMLineIndex] += 'a=' +\n              (cand.type ? candidateString : 'end-of-candidates')\n              + '\\r\\n';\n          pc._remoteDescription.sdp =\n              SDPUtils.getDescription(pc._remoteDescription.sdp) +\n              sections.join('');\n        } else {\n          return reject(makeError('OperationError',\n              'Can not add ICE candidate'));\n        }\n      }\n      resolve();\n    });\n  };\n\n  RTCPeerConnection.prototype.getStats = function(selector) {\n    if (selector && selector instanceof window.MediaStreamTrack) {\n      var senderOrReceiver = null;\n      this.transceivers.forEach(function(transceiver) {\n        if (transceiver.rtpSender &&\n            transceiver.rtpSender.track === selector) {\n          senderOrReceiver = transceiver.rtpSender;\n        } else if (transceiver.rtpReceiver &&\n            transceiver.rtpReceiver.track === selector) {\n          senderOrReceiver = transceiver.rtpReceiver;\n        }\n      });\n      if (!senderOrReceiver) {\n        throw makeError('InvalidAccessError', 'Invalid selector.');\n      }\n      return senderOrReceiver.getStats();\n    }\n\n    var promises = [];\n    this.transceivers.forEach(function(transceiver) {\n      ['rtpSender', 'rtpReceiver', 'iceGatherer', 'iceTransport',\n          'dtlsTransport'].forEach(function(method) {\n            if (transceiver[method]) {\n              promises.push(transceiver[method].getStats());\n            }\n          });\n    });\n    return Promise.all(promises).then(function(allStats) {\n      var results = new Map();\n      allStats.forEach(function(stats) {\n        stats.forEach(function(stat) {\n          results.set(stat.id, stat);\n        });\n      });\n      return results;\n    });\n  };\n\n  // fix low-level stat names and return Map instead of object.\n  var ortcObjects = ['RTCRtpSender', 'RTCRtpReceiver', 'RTCIceGatherer',\n    'RTCIceTransport', 'RTCDtlsTransport'];\n  ortcObjects.forEach(function(ortcObjectName) {\n    var obj = window[ortcObjectName];\n    if (obj && obj.prototype && obj.prototype.getStats) {\n      var nativeGetstats = obj.prototype.getStats;\n      obj.prototype.getStats = function() {\n        return nativeGetstats.apply(this)\n        .then(function(nativeStats) {\n          var mapStats = new Map();\n          Object.keys(nativeStats).forEach(function(id) {\n            nativeStats[id].type = fixStatsType(nativeStats[id]);\n            mapStats.set(id, nativeStats[id]);\n          });\n          return mapStats;\n        });\n      };\n    }\n  });\n\n  // legacy callback shims. Should be moved to adapter.js some days.\n  var methods = ['createOffer', 'createAnswer'];\n  methods.forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[0] === 'function' ||\n          typeof args[1] === 'function') { // legacy\n        return nativeMethod.apply(this, [arguments[2]])\n        .then(function(description) {\n          if (typeof args[0] === 'function') {\n            args[0].apply(null, [description]);\n          }\n        }, function(error) {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null, [error]);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  methods = ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate'];\n  methods.forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[1] === 'function' ||\n          typeof args[2] === 'function') { // legacy\n        return nativeMethod.apply(this, arguments)\n        .then(function() {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null);\n          }\n        }, function(error) {\n          if (typeof args[2] === 'function') {\n            args[2].apply(null, [error]);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  // getStats is special. It doesn't have a spec legacy method yet we support\n  // getStats(something, cb) without error callbacks.\n  ['getStats'].forEach(function(method) {\n    var nativeMethod = RTCPeerConnection.prototype[method];\n    RTCPeerConnection.prototype[method] = function() {\n      var args = arguments;\n      if (typeof args[1] === 'function') {\n        return nativeMethod.apply(this, arguments)\n        .then(function() {\n          if (typeof args[1] === 'function') {\n            args[1].apply(null);\n          }\n        });\n      }\n      return nativeMethod.apply(this, arguments);\n    };\n  });\n\n  return RTCPeerConnection;\n};\n"," /* eslint-env node */\n'use strict';\n\n// SDP helpers.\nvar SDPUtils = {};\n\n// Generate an alphanumeric identifier for cname or mids.\n// TODO: use UUIDs instead? https://gist.github.com/jed/982883\nSDPUtils.generateIdentifier = function() {\n  return Math.random().toString(36).substr(2, 10);\n};\n\n// The RTCP CNAME used by all peerconnections from the same JS.\nSDPUtils.localCName = SDPUtils.generateIdentifier();\n\n// Splits SDP into lines, dealing with both CRLF and LF.\nSDPUtils.splitLines = function(blob) {\n  return blob.trim().split('\\n').map(function(line) {\n    return line.trim();\n  });\n};\n// Splits SDP into sessionpart and mediasections. Ensures CRLF.\nSDPUtils.splitSections = function(blob) {\n  var parts = blob.split('\\nm=');\n  return parts.map(function(part, index) {\n    return (index > 0 ? 'm=' + part : part).trim() + '\\r\\n';\n  });\n};\n\n// returns the session description.\nSDPUtils.getDescription = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  return sections && sections[0];\n};\n\n// returns the individual media sections.\nSDPUtils.getMediaSections = function(blob) {\n  var sections = SDPUtils.splitSections(blob);\n  sections.shift();\n  return sections;\n};\n\n// Returns lines that start with a certain prefix.\nSDPUtils.matchPrefix = function(blob, prefix) {\n  return SDPUtils.splitLines(blob).filter(function(line) {\n    return line.indexOf(prefix) === 0;\n  });\n};\n\n// Parses an ICE candidate line. Sample input:\n// candidate:702786350 2 udp 41819902 8.8.8.8 60769 typ relay raddr 8.8.8.8\n// rport 55996\"\nSDPUtils.parseCandidate = function(line) {\n  var parts;\n  // Parse both variants.\n  if (line.indexOf('a=candidate:') === 0) {\n    parts = line.substring(12).split(' ');\n  } else {\n    parts = line.substring(10).split(' ');\n  }\n\n  var candidate = {\n    foundation: parts[0],\n    component: parseInt(parts[1], 10),\n    protocol: parts[2].toLowerCase(),\n    priority: parseInt(parts[3], 10),\n    ip: parts[4],\n    address: parts[4], // address is an alias for ip.\n    port: parseInt(parts[5], 10),\n    // skip parts[6] == 'typ'\n    type: parts[7]\n  };\n\n  for (var i = 8; i < parts.length; i += 2) {\n    switch (parts[i]) {\n      case 'raddr':\n        candidate.relatedAddress = parts[i + 1];\n        break;\n      case 'rport':\n        candidate.relatedPort = parseInt(parts[i + 1], 10);\n        break;\n      case 'tcptype':\n        candidate.tcpType = parts[i + 1];\n        break;\n      case 'ufrag':\n        candidate.ufrag = parts[i + 1]; // for backward compability.\n        candidate.usernameFragment = parts[i + 1];\n        break;\n      default: // extension handling, in particular ufrag\n        candidate[parts[i]] = parts[i + 1];\n        break;\n    }\n  }\n  return candidate;\n};\n\n// Translates a candidate object into SDP candidate attribute.\nSDPUtils.writeCandidate = function(candidate) {\n  var sdp = [];\n  sdp.push(candidate.foundation);\n  sdp.push(candidate.component);\n  sdp.push(candidate.protocol.toUpperCase());\n  sdp.push(candidate.priority);\n  sdp.push(candidate.address || candidate.ip);\n  sdp.push(candidate.port);\n\n  var type = candidate.type;\n  sdp.push('typ');\n  sdp.push(type);\n  if (type !== 'host' && candidate.relatedAddress &&\n      candidate.relatedPort) {\n    sdp.push('raddr');\n    sdp.push(candidate.relatedAddress);\n    sdp.push('rport');\n    sdp.push(candidate.relatedPort);\n  }\n  if (candidate.tcpType && candidate.protocol.toLowerCase() === 'tcp') {\n    sdp.push('tcptype');\n    sdp.push(candidate.tcpType);\n  }\n  if (candidate.usernameFragment || candidate.ufrag) {\n    sdp.push('ufrag');\n    sdp.push(candidate.usernameFragment || candidate.ufrag);\n  }\n  return 'candidate:' + sdp.join(' ');\n};\n\n// Parses an ice-options line, returns an array of option tags.\n// a=ice-options:foo bar\nSDPUtils.parseIceOptions = function(line) {\n  return line.substr(14).split(' ');\n};\n\n// Parses an rtpmap line, returns RTCRtpCoddecParameters. Sample input:\n// a=rtpmap:111 opus/48000/2\nSDPUtils.parseRtpMap = function(line) {\n  var parts = line.substr(9).split(' ');\n  var parsed = {\n    payloadType: parseInt(parts.shift(), 10) // was: id\n  };\n\n  parts = parts[0].split('/');\n\n  parsed.name = parts[0];\n  parsed.clockRate = parseInt(parts[1], 10); // was: clockrate\n  parsed.channels = parts.length === 3 ? parseInt(parts[2], 10) : 1;\n  // legacy alias, got renamed back to channels in ORTC.\n  parsed.numChannels = parsed.channels;\n  return parsed;\n};\n\n// Generate an a=rtpmap line from RTCRtpCodecCapability or\n// RTCRtpCodecParameters.\nSDPUtils.writeRtpMap = function(codec) {\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  var channels = codec.channels || codec.numChannels || 1;\n  return 'a=rtpmap:' + pt + ' ' + codec.name + '/' + codec.clockRate +\n      (channels !== 1 ? '/' + channels : '') + '\\r\\n';\n};\n\n// Parses an a=extmap line (headerextension from RFC 5285). Sample input:\n// a=extmap:2 urn:ietf:params:rtp-hdrext:toffset\n// a=extmap:2/sendonly urn:ietf:params:rtp-hdrext:toffset\nSDPUtils.parseExtmap = function(line) {\n  var parts = line.substr(9).split(' ');\n  return {\n    id: parseInt(parts[0], 10),\n    direction: parts[0].indexOf('/') > 0 ? parts[0].split('/')[1] : 'sendrecv',\n    uri: parts[1]\n  };\n};\n\n// Generates a=extmap line from RTCRtpHeaderExtensionParameters or\n// RTCRtpHeaderExtension.\nSDPUtils.writeExtmap = function(headerExtension) {\n  return 'a=extmap:' + (headerExtension.id || headerExtension.preferredId) +\n      (headerExtension.direction && headerExtension.direction !== 'sendrecv'\n          ? '/' + headerExtension.direction\n          : '') +\n      ' ' + headerExtension.uri + '\\r\\n';\n};\n\n// Parses an ftmp line, returns dictionary. Sample input:\n// a=fmtp:96 vbr=on;cng=on\n// Also deals with vbr=on; cng=on\nSDPUtils.parseFmtp = function(line) {\n  var parsed = {};\n  var kv;\n  var parts = line.substr(line.indexOf(' ') + 1).split(';');\n  for (var j = 0; j < parts.length; j++) {\n    kv = parts[j].trim().split('=');\n    parsed[kv[0].trim()] = kv[1];\n  }\n  return parsed;\n};\n\n// Generates an a=ftmp line from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeFmtp = function(codec) {\n  var line = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.parameters && Object.keys(codec.parameters).length) {\n    var params = [];\n    Object.keys(codec.parameters).forEach(function(param) {\n      if (codec.parameters[param]) {\n        params.push(param + '=' + codec.parameters[param]);\n      } else {\n        params.push(param);\n      }\n    });\n    line += 'a=fmtp:' + pt + ' ' + params.join(';') + '\\r\\n';\n  }\n  return line;\n};\n\n// Parses an rtcp-fb line, returns RTCPRtcpFeedback object. Sample input:\n// a=rtcp-fb:98 nack rpsi\nSDPUtils.parseRtcpFb = function(line) {\n  var parts = line.substr(line.indexOf(' ') + 1).split(' ');\n  return {\n    type: parts.shift(),\n    parameter: parts.join(' ')\n  };\n};\n// Generate a=rtcp-fb lines from RTCRtpCodecCapability or RTCRtpCodecParameters.\nSDPUtils.writeRtcpFb = function(codec) {\n  var lines = '';\n  var pt = codec.payloadType;\n  if (codec.preferredPayloadType !== undefined) {\n    pt = codec.preferredPayloadType;\n  }\n  if (codec.rtcpFeedback && codec.rtcpFeedback.length) {\n    // FIXME: special handling for trr-int?\n    codec.rtcpFeedback.forEach(function(fb) {\n      lines += 'a=rtcp-fb:' + pt + ' ' + fb.type +\n      (fb.parameter && fb.parameter.length ? ' ' + fb.parameter : '') +\n          '\\r\\n';\n    });\n  }\n  return lines;\n};\n\n// Parses an RFC 5576 ssrc media attribute. Sample input:\n// a=ssrc:3735928559 cname:something\nSDPUtils.parseSsrcMedia = function(line) {\n  var sp = line.indexOf(' ');\n  var parts = {\n    ssrc: parseInt(line.substr(7, sp - 7), 10)\n  };\n  var colon = line.indexOf(':', sp);\n  if (colon > -1) {\n    parts.attribute = line.substr(sp + 1, colon - sp - 1);\n    parts.value = line.substr(colon + 1);\n  } else {\n    parts.attribute = line.substr(sp + 1);\n  }\n  return parts;\n};\n\nSDPUtils.parseSsrcGroup = function(line) {\n  var parts = line.substr(13).split(' ');\n  return {\n    semantics: parts.shift(),\n    ssrcs: parts.map(function(ssrc) {\n      return parseInt(ssrc, 10);\n    })\n  };\n};\n\n// Extracts the MID (RFC 5888) from a media section.\n// returns the MID or undefined if no mid line was found.\nSDPUtils.getMid = function(mediaSection) {\n  var mid = SDPUtils.matchPrefix(mediaSection, 'a=mid:')[0];\n  if (mid) {\n    return mid.substr(6);\n  }\n};\n\nSDPUtils.parseFingerprint = function(line) {\n  var parts = line.substr(14).split(' ');\n  return {\n    algorithm: parts[0].toLowerCase(), // algorithm is case-sensitive in Edge.\n    value: parts[1]\n  };\n};\n\n// Extracts DTLS parameters from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the fingerprint line as input. See also getIceParameters.\nSDPUtils.getDtlsParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.matchPrefix(mediaSection + sessionpart,\n      'a=fingerprint:');\n  // Note: a=setup line is ignored since we use the 'auto' role.\n  // Note2: 'algorithm' is not case sensitive except in Edge.\n  return {\n    role: 'auto',\n    fingerprints: lines.map(SDPUtils.parseFingerprint)\n  };\n};\n\n// Serializes DTLS parameters to SDP.\nSDPUtils.writeDtlsParameters = function(params, setupType) {\n  var sdp = 'a=setup:' + setupType + '\\r\\n';\n  params.fingerprints.forEach(function(fp) {\n    sdp += 'a=fingerprint:' + fp.algorithm + ' ' + fp.value + '\\r\\n';\n  });\n  return sdp;\n};\n// Parses ICE information from SDP media section or sessionpart.\n// FIXME: for consistency with other functions this should only\n//   get the ice-ufrag and ice-pwd lines as input.\nSDPUtils.getIceParameters = function(mediaSection, sessionpart) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  // Search in session part, too.\n  lines = lines.concat(SDPUtils.splitLines(sessionpart));\n  var iceParameters = {\n    usernameFragment: lines.filter(function(line) {\n      return line.indexOf('a=ice-ufrag:') === 0;\n    })[0].substr(12),\n    password: lines.filter(function(line) {\n      return line.indexOf('a=ice-pwd:') === 0;\n    })[0].substr(10)\n  };\n  return iceParameters;\n};\n\n// Serializes ICE parameters to SDP.\nSDPUtils.writeIceParameters = function(params) {\n  return 'a=ice-ufrag:' + params.usernameFragment + '\\r\\n' +\n      'a=ice-pwd:' + params.password + '\\r\\n';\n};\n\n// Parses the SDP media section and returns RTCRtpParameters.\nSDPUtils.parseRtpParameters = function(mediaSection) {\n  var description = {\n    codecs: [],\n    headerExtensions: [],\n    fecMechanisms: [],\n    rtcp: []\n  };\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  for (var i = 3; i < mline.length; i++) { // find all codecs from mline[3..]\n    var pt = mline[i];\n    var rtpmapline = SDPUtils.matchPrefix(\n        mediaSection, 'a=rtpmap:' + pt + ' ')[0];\n    if (rtpmapline) {\n      var codec = SDPUtils.parseRtpMap(rtpmapline);\n      var fmtps = SDPUtils.matchPrefix(\n          mediaSection, 'a=fmtp:' + pt + ' ');\n      // Only the first a=fmtp:<pt> is considered.\n      codec.parameters = fmtps.length ? SDPUtils.parseFmtp(fmtps[0]) : {};\n      codec.rtcpFeedback = SDPUtils.matchPrefix(\n          mediaSection, 'a=rtcp-fb:' + pt + ' ')\n        .map(SDPUtils.parseRtcpFb);\n      description.codecs.push(codec);\n      // parse FEC mechanisms from rtpmap lines.\n      switch (codec.name.toUpperCase()) {\n        case 'RED':\n        case 'ULPFEC':\n          description.fecMechanisms.push(codec.name.toUpperCase());\n          break;\n        default: // only RED and ULPFEC are recognized as FEC mechanisms.\n          break;\n      }\n    }\n  }\n  SDPUtils.matchPrefix(mediaSection, 'a=extmap:').forEach(function(line) {\n    description.headerExtensions.push(SDPUtils.parseExtmap(line));\n  });\n  // FIXME: parse rtcp.\n  return description;\n};\n\n// Generates parts of the SDP media section describing the capabilities /\n// parameters.\nSDPUtils.writeRtpDescription = function(kind, caps) {\n  var sdp = '';\n\n  // Build the mline.\n  sdp += 'm=' + kind + ' ';\n  sdp += caps.codecs.length > 0 ? '9' : '0'; // reject if no codecs.\n  sdp += ' UDP/TLS/RTP/SAVPF ';\n  sdp += caps.codecs.map(function(codec) {\n    if (codec.preferredPayloadType !== undefined) {\n      return codec.preferredPayloadType;\n    }\n    return codec.payloadType;\n  }).join(' ') + '\\r\\n';\n\n  sdp += 'c=IN IP4 0.0.0.0\\r\\n';\n  sdp += 'a=rtcp:9 IN IP4 0.0.0.0\\r\\n';\n\n  // Add a=rtpmap lines for each codec. Also fmtp and rtcp-fb.\n  caps.codecs.forEach(function(codec) {\n    sdp += SDPUtils.writeRtpMap(codec);\n    sdp += SDPUtils.writeFmtp(codec);\n    sdp += SDPUtils.writeRtcpFb(codec);\n  });\n  var maxptime = 0;\n  caps.codecs.forEach(function(codec) {\n    if (codec.maxptime > maxptime) {\n      maxptime = codec.maxptime;\n    }\n  });\n  if (maxptime > 0) {\n    sdp += 'a=maxptime:' + maxptime + '\\r\\n';\n  }\n  sdp += 'a=rtcp-mux\\r\\n';\n\n  if (caps.headerExtensions) {\n    caps.headerExtensions.forEach(function(extension) {\n      sdp += SDPUtils.writeExtmap(extension);\n    });\n  }\n  // FIXME: write fecMechanisms.\n  return sdp;\n};\n\n// Parses the SDP media section and returns an array of\n// RTCRtpEncodingParameters.\nSDPUtils.parseRtpEncodingParameters = function(mediaSection) {\n  var encodingParameters = [];\n  var description = SDPUtils.parseRtpParameters(mediaSection);\n  var hasRed = description.fecMechanisms.indexOf('RED') !== -1;\n  var hasUlpfec = description.fecMechanisms.indexOf('ULPFEC') !== -1;\n\n  // filter a=ssrc:... cname:, ignore PlanB-msid\n  var ssrcs = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n  .map(function(line) {\n    return SDPUtils.parseSsrcMedia(line);\n  })\n  .filter(function(parts) {\n    return parts.attribute === 'cname';\n  });\n  var primarySsrc = ssrcs.length > 0 && ssrcs[0].ssrc;\n  var secondarySsrc;\n\n  var flows = SDPUtils.matchPrefix(mediaSection, 'a=ssrc-group:FID')\n  .map(function(line) {\n    var parts = line.substr(17).split(' ');\n    return parts.map(function(part) {\n      return parseInt(part, 10);\n    });\n  });\n  if (flows.length > 0 && flows[0].length > 1 && flows[0][0] === primarySsrc) {\n    secondarySsrc = flows[0][1];\n  }\n\n  description.codecs.forEach(function(codec) {\n    if (codec.name.toUpperCase() === 'RTX' && codec.parameters.apt) {\n      var encParam = {\n        ssrc: primarySsrc,\n        codecPayloadType: parseInt(codec.parameters.apt, 10)\n      };\n      if (primarySsrc && secondarySsrc) {\n        encParam.rtx = {ssrc: secondarySsrc};\n      }\n      encodingParameters.push(encParam);\n      if (hasRed) {\n        encParam = JSON.parse(JSON.stringify(encParam));\n        encParam.fec = {\n          ssrc: primarySsrc,\n          mechanism: hasUlpfec ? 'red+ulpfec' : 'red'\n        };\n        encodingParameters.push(encParam);\n      }\n    }\n  });\n  if (encodingParameters.length === 0 && primarySsrc) {\n    encodingParameters.push({\n      ssrc: primarySsrc\n    });\n  }\n\n  // we support both b=AS and b=TIAS but interpret AS as TIAS.\n  var bandwidth = SDPUtils.matchPrefix(mediaSection, 'b=');\n  if (bandwidth.length) {\n    if (bandwidth[0].indexOf('b=TIAS:') === 0) {\n      bandwidth = parseInt(bandwidth[0].substr(7), 10);\n    } else if (bandwidth[0].indexOf('b=AS:') === 0) {\n      // use formula from JSEP to convert b=AS to TIAS value.\n      bandwidth = parseInt(bandwidth[0].substr(5), 10) * 1000 * 0.95\n          - (50 * 40 * 8);\n    } else {\n      bandwidth = undefined;\n    }\n    encodingParameters.forEach(function(params) {\n      params.maxBitrate = bandwidth;\n    });\n  }\n  return encodingParameters;\n};\n\n// parses http://draft.ortc.org/#rtcrtcpparameters*\nSDPUtils.parseRtcpParameters = function(mediaSection) {\n  var rtcpParameters = {};\n\n  // Gets the first SSRC. Note tha with RTX there might be multiple\n  // SSRCs.\n  var remoteSsrc = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n      .map(function(line) {\n        return SDPUtils.parseSsrcMedia(line);\n      })\n      .filter(function(obj) {\n        return obj.attribute === 'cname';\n      })[0];\n  if (remoteSsrc) {\n    rtcpParameters.cname = remoteSsrc.value;\n    rtcpParameters.ssrc = remoteSsrc.ssrc;\n  }\n\n  // Edge uses the compound attribute instead of reducedSize\n  // compound is !reducedSize\n  var rsize = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-rsize');\n  rtcpParameters.reducedSize = rsize.length > 0;\n  rtcpParameters.compound = rsize.length === 0;\n\n  // parses the rtcp-mux attrіbute.\n  // Note that Edge does not support unmuxed RTCP.\n  var mux = SDPUtils.matchPrefix(mediaSection, 'a=rtcp-mux');\n  rtcpParameters.mux = mux.length > 0;\n\n  return rtcpParameters;\n};\n\n// parses either a=msid: or a=ssrc:... msid lines and returns\n// the id of the MediaStream and MediaStreamTrack.\nSDPUtils.parseMsid = function(mediaSection) {\n  var parts;\n  var spec = SDPUtils.matchPrefix(mediaSection, 'a=msid:');\n  if (spec.length === 1) {\n    parts = spec[0].substr(7).split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n  var planB = SDPUtils.matchPrefix(mediaSection, 'a=ssrc:')\n  .map(function(line) {\n    return SDPUtils.parseSsrcMedia(line);\n  })\n  .filter(function(msidParts) {\n    return msidParts.attribute === 'msid';\n  });\n  if (planB.length > 0) {\n    parts = planB[0].value.split(' ');\n    return {stream: parts[0], track: parts[1]};\n  }\n};\n\n// Generate a session ID for SDP.\n// https://tools.ietf.org/html/draft-ietf-rtcweb-jsep-20#section-5.2.1\n// recommends using a cryptographically random +ve 64-bit value\n// but right now this should be acceptable and within the right range\nSDPUtils.generateSessionId = function() {\n  return Math.random().toString().substr(2, 21);\n};\n\n// Write boilder plate for start of SDP\n// sessId argument is optional - if not supplied it will\n// be generated randomly\n// sessVersion is optional and defaults to 2\n// sessUser is optional and defaults to 'thisisadapterortc'\nSDPUtils.writeSessionBoilerplate = function(sessId, sessVer, sessUser) {\n  var sessionId;\n  var version = sessVer !== undefined ? sessVer : 2;\n  if (sessId) {\n    sessionId = sessId;\n  } else {\n    sessionId = SDPUtils.generateSessionId();\n  }\n  var user = sessUser || 'thisisadapterortc';\n  // FIXME: sess-id should be an NTP timestamp.\n  return 'v=0\\r\\n' +\n      'o=' + user + ' ' + sessionId + ' ' + version +\n        ' IN IP4 127.0.0.1\\r\\n' +\n      's=-\\r\\n' +\n      't=0 0\\r\\n';\n};\n\nSDPUtils.writeMediaSection = function(transceiver, caps, type, stream) {\n  var sdp = SDPUtils.writeRtpDescription(transceiver.kind, caps);\n\n  // Map ICE parameters (ufrag, pwd) to SDP.\n  sdp += SDPUtils.writeIceParameters(\n      transceiver.iceGatherer.getLocalParameters());\n\n  // Map DTLS parameters to SDP.\n  sdp += SDPUtils.writeDtlsParameters(\n      transceiver.dtlsTransport.getLocalParameters(),\n      type === 'offer' ? 'actpass' : 'active');\n\n  sdp += 'a=mid:' + transceiver.mid + '\\r\\n';\n\n  if (transceiver.direction) {\n    sdp += 'a=' + transceiver.direction + '\\r\\n';\n  } else if (transceiver.rtpSender && transceiver.rtpReceiver) {\n    sdp += 'a=sendrecv\\r\\n';\n  } else if (transceiver.rtpSender) {\n    sdp += 'a=sendonly\\r\\n';\n  } else if (transceiver.rtpReceiver) {\n    sdp += 'a=recvonly\\r\\n';\n  } else {\n    sdp += 'a=inactive\\r\\n';\n  }\n\n  if (transceiver.rtpSender) {\n    // spec.\n    var msid = 'msid:' + stream.id + ' ' +\n        transceiver.rtpSender.track.id + '\\r\\n';\n    sdp += 'a=' + msid;\n\n    // for Chrome.\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n        ' ' + msid;\n    if (transceiver.sendEncodingParameters[0].rtx) {\n      sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n          ' ' + msid;\n      sdp += 'a=ssrc-group:FID ' +\n          transceiver.sendEncodingParameters[0].ssrc + ' ' +\n          transceiver.sendEncodingParameters[0].rtx.ssrc +\n          '\\r\\n';\n    }\n  }\n  // FIXME: this should be written by writeRtpDescription.\n  sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].ssrc +\n      ' cname:' + SDPUtils.localCName + '\\r\\n';\n  if (transceiver.rtpSender && transceiver.sendEncodingParameters[0].rtx) {\n    sdp += 'a=ssrc:' + transceiver.sendEncodingParameters[0].rtx.ssrc +\n        ' cname:' + SDPUtils.localCName + '\\r\\n';\n  }\n  return sdp;\n};\n\n// Gets the direction from the mediaSection or the sessionpart.\nSDPUtils.getDirection = function(mediaSection, sessionpart) {\n  // Look for sendrecv, sendonly, recvonly, inactive, default to sendrecv.\n  var lines = SDPUtils.splitLines(mediaSection);\n  for (var i = 0; i < lines.length; i++) {\n    switch (lines[i]) {\n      case 'a=sendrecv':\n      case 'a=sendonly':\n      case 'a=recvonly':\n      case 'a=inactive':\n        return lines[i].substr(2);\n      default:\n        // FIXME: What should happen here?\n    }\n  }\n  if (sessionpart) {\n    return SDPUtils.getDirection(sessionpart);\n  }\n  return 'sendrecv';\n};\n\nSDPUtils.getKind = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var mline = lines[0].split(' ');\n  return mline[0].substr(2);\n};\n\nSDPUtils.isRejected = function(mediaSection) {\n  return mediaSection.split(' ', 2)[1] === '0';\n};\n\nSDPUtils.parseMLine = function(mediaSection) {\n  var lines = SDPUtils.splitLines(mediaSection);\n  var parts = lines[0].substr(2).split(' ');\n  return {\n    kind: parts[0],\n    port: parseInt(parts[1], 10),\n    protocol: parts[2],\n    fmt: parts.slice(3).join(' ')\n  };\n};\n\nSDPUtils.parseOLine = function(mediaSection) {\n  var line = SDPUtils.matchPrefix(mediaSection, 'o=')[0];\n  var parts = line.substr(2).split(' ');\n  return {\n    username: parts[0],\n    sessionId: parts[1],\n    sessionVersion: parseInt(parts[2], 10),\n    netType: parts[3],\n    addressType: parts[4],\n    address: parts[5]\n  };\n};\n\n// a very naive interpretation of a valid SDP.\nSDPUtils.isValidSDP = function(blob) {\n  if (typeof blob !== 'string' || blob.length === 0) {\n    return false;\n  }\n  var lines = SDPUtils.splitLines(blob);\n  for (var i = 0; i < lines.length; i++) {\n    if (lines[i].length < 2 || lines[i].charAt(1) !== '=') {\n      return false;\n    }\n    // TODO: check the modifier a bit more.\n  }\n  return true;\n};\n\n// Expose public methods.\nif (typeof module === 'object') {\n  module.exports = SDPUtils;\n}\n","\n/**\n * Module dependencies.\n */\n\nvar url = require('./url');\nvar parser = require('socket.io-parser');\nvar Manager = require('./manager');\nvar debug = require('debug')('socket.io-client');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = lookup;\n\n/**\n * Managers cache.\n */\n\nvar cache = exports.managers = {};\n\n/**\n * Looks up an existing `Manager` for multiplexing.\n * If the user summons:\n *\n *   `io('http://localhost/a');`\n *   `io('http://localhost/b');`\n *\n * We reuse the existing instance based on same scheme/port/host,\n * and we initialize sockets for each namespace.\n *\n * @api public\n */\n\nfunction lookup (uri, opts) {\n  if (typeof uri === 'object') {\n    opts = uri;\n    uri = undefined;\n  }\n\n  opts = opts || {};\n\n  var parsed = url(uri);\n  var source = parsed.source;\n  var id = parsed.id;\n  var path = parsed.path;\n  var sameNamespace = cache[id] && path in cache[id].nsps;\n  var newConnection = opts.forceNew || opts['force new connection'] ||\n                      false === opts.multiplex || sameNamespace;\n\n  var io;\n\n  if (newConnection) {\n    debug('ignoring socket cache for %s', source);\n    io = Manager(source, opts);\n  } else {\n    if (!cache[id]) {\n      debug('new io instance for %s', source);\n      cache[id] = Manager(source, opts);\n    }\n    io = cache[id];\n  }\n  if (parsed.query && !opts.query) {\n    opts.query = parsed.query;\n  }\n  return io.socket(parsed.path, opts);\n}\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = parser.protocol;\n\n/**\n * `connect`.\n *\n * @param {String} uri\n * @api public\n */\n\nexports.connect = lookup;\n\n/**\n * Expose constructors for standalone build.\n *\n * @api public\n */\n\nexports.Manager = require('./manager');\nexports.Socket = require('./socket');\n","\n/**\n * Module dependencies.\n */\n\nvar eio = require('engine.io-client');\nvar Socket = require('./socket');\nvar Emitter = require('component-emitter');\nvar parser = require('socket.io-parser');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:manager');\nvar indexOf = require('indexof');\nvar Backoff = require('backo2');\n\n/**\n * IE6+ hasOwnProperty\n */\n\nvar has = Object.prototype.hasOwnProperty;\n\n/**\n * Module exports\n */\n\nmodule.exports = Manager;\n\n/**\n * `Manager` constructor.\n *\n * @param {String} engine instance or engine uri/opts\n * @param {Object} options\n * @api public\n */\n\nfunction Manager (uri, opts) {\n  if (!(this instanceof Manager)) return new Manager(uri, opts);\n  if (uri && ('object' === typeof uri)) {\n    opts = uri;\n    uri = undefined;\n  }\n  opts = opts || {};\n\n  opts.path = opts.path || '/socket.io';\n  this.nsps = {};\n  this.subs = [];\n  this.opts = opts;\n  this.reconnection(opts.reconnection !== false);\n  this.reconnectionAttempts(opts.reconnectionAttempts || Infinity);\n  this.reconnectionDelay(opts.reconnectionDelay || 1000);\n  this.reconnectionDelayMax(opts.reconnectionDelayMax || 5000);\n  this.randomizationFactor(opts.randomizationFactor || 0.5);\n  this.backoff = new Backoff({\n    min: this.reconnectionDelay(),\n    max: this.reconnectionDelayMax(),\n    jitter: this.randomizationFactor()\n  });\n  this.timeout(null == opts.timeout ? 20000 : opts.timeout);\n  this.readyState = 'closed';\n  this.uri = uri;\n  this.connecting = [];\n  this.lastPing = null;\n  this.encoding = false;\n  this.packetBuffer = [];\n  var _parser = opts.parser || parser;\n  this.encoder = new _parser.Encoder();\n  this.decoder = new _parser.Decoder();\n  this.autoConnect = opts.autoConnect !== false;\n  if (this.autoConnect) this.open();\n}\n\n/**\n * Propagate given event to sockets and emit on `this`\n *\n * @api private\n */\n\nManager.prototype.emitAll = function () {\n  this.emit.apply(this, arguments);\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].emit.apply(this.nsps[nsp], arguments);\n    }\n  }\n};\n\n/**\n * Update `socket.id` of all sockets\n *\n * @api private\n */\n\nManager.prototype.updateSocketIds = function () {\n  for (var nsp in this.nsps) {\n    if (has.call(this.nsps, nsp)) {\n      this.nsps[nsp].id = this.generateId(nsp);\n    }\n  }\n};\n\n/**\n * generate `socket.id` for the given `nsp`\n *\n * @param {String} nsp\n * @return {String}\n * @api private\n */\n\nManager.prototype.generateId = function (nsp) {\n  return (nsp === '/' ? '' : (nsp + '#')) + this.engine.id;\n};\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Manager.prototype);\n\n/**\n * Sets the `reconnection` config.\n *\n * @param {Boolean} true/false if it should automatically reconnect\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnection = function (v) {\n  if (!arguments.length) return this._reconnection;\n  this._reconnection = !!v;\n  return this;\n};\n\n/**\n * Sets the reconnection attempts config.\n *\n * @param {Number} max reconnection attempts before giving up\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionAttempts = function (v) {\n  if (!arguments.length) return this._reconnectionAttempts;\n  this._reconnectionAttempts = v;\n  return this;\n};\n\n/**\n * Sets the delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelay = function (v) {\n  if (!arguments.length) return this._reconnectionDelay;\n  this._reconnectionDelay = v;\n  this.backoff && this.backoff.setMin(v);\n  return this;\n};\n\nManager.prototype.randomizationFactor = function (v) {\n  if (!arguments.length) return this._randomizationFactor;\n  this._randomizationFactor = v;\n  this.backoff && this.backoff.setJitter(v);\n  return this;\n};\n\n/**\n * Sets the maximum delay between reconnections.\n *\n * @param {Number} delay\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.reconnectionDelayMax = function (v) {\n  if (!arguments.length) return this._reconnectionDelayMax;\n  this._reconnectionDelayMax = v;\n  this.backoff && this.backoff.setMax(v);\n  return this;\n};\n\n/**\n * Sets the connection timeout. `false` to disable\n *\n * @return {Manager} self or value\n * @api public\n */\n\nManager.prototype.timeout = function (v) {\n  if (!arguments.length) return this._timeout;\n  this._timeout = v;\n  return this;\n};\n\n/**\n * Starts trying to reconnect if reconnection is enabled and we have not\n * started reconnecting yet\n *\n * @api private\n */\n\nManager.prototype.maybeReconnectOnOpen = function () {\n  // Only try to reconnect if it's the first time we're connecting\n  if (!this.reconnecting && this._reconnection && this.backoff.attempts === 0) {\n    // keeps reconnection from firing twice for the same reconnection loop\n    this.reconnect();\n  }\n};\n\n/**\n * Sets the current transport `socket`.\n *\n * @param {Function} optional, callback\n * @return {Manager} self\n * @api public\n */\n\nManager.prototype.open =\nManager.prototype.connect = function (fn, opts) {\n  debug('readyState %s', this.readyState);\n  if (~this.readyState.indexOf('open')) return this;\n\n  debug('opening %s', this.uri);\n  this.engine = eio(this.uri, this.opts);\n  var socket = this.engine;\n  var self = this;\n  this.readyState = 'opening';\n  this.skipReconnect = false;\n\n  // emit `open`\n  var openSub = on(socket, 'open', function () {\n    self.onopen();\n    fn && fn();\n  });\n\n  // emit `connect_error`\n  var errorSub = on(socket, 'error', function (data) {\n    debug('connect_error');\n    self.cleanup();\n    self.readyState = 'closed';\n    self.emitAll('connect_error', data);\n    if (fn) {\n      var err = new Error('Connection error');\n      err.data = data;\n      fn(err);\n    } else {\n      // Only do this if there is no fn to handle the error\n      self.maybeReconnectOnOpen();\n    }\n  });\n\n  // emit `connect_timeout`\n  if (false !== this._timeout) {\n    var timeout = this._timeout;\n    debug('connect attempt will timeout after %d', timeout);\n\n    // set timer\n    var timer = setTimeout(function () {\n      debug('connect attempt timed out after %d', timeout);\n      openSub.destroy();\n      socket.close();\n      socket.emit('error', 'timeout');\n      self.emitAll('connect_timeout', timeout);\n    }, timeout);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n\n  this.subs.push(openSub);\n  this.subs.push(errorSub);\n\n  return this;\n};\n\n/**\n * Called upon transport open.\n *\n * @api private\n */\n\nManager.prototype.onopen = function () {\n  debug('open');\n\n  // clear old subs\n  this.cleanup();\n\n  // mark as open\n  this.readyState = 'open';\n  this.emit('open');\n\n  // add new subs\n  var socket = this.engine;\n  this.subs.push(on(socket, 'data', bind(this, 'ondata')));\n  this.subs.push(on(socket, 'ping', bind(this, 'onping')));\n  this.subs.push(on(socket, 'pong', bind(this, 'onpong')));\n  this.subs.push(on(socket, 'error', bind(this, 'onerror')));\n  this.subs.push(on(socket, 'close', bind(this, 'onclose')));\n  this.subs.push(on(this.decoder, 'decoded', bind(this, 'ondecoded')));\n};\n\n/**\n * Called upon a ping.\n *\n * @api private\n */\n\nManager.prototype.onping = function () {\n  this.lastPing = new Date();\n  this.emitAll('ping');\n};\n\n/**\n * Called upon a packet.\n *\n * @api private\n */\n\nManager.prototype.onpong = function () {\n  this.emitAll('pong', new Date() - this.lastPing);\n};\n\n/**\n * Called with data.\n *\n * @api private\n */\n\nManager.prototype.ondata = function (data) {\n  this.decoder.add(data);\n};\n\n/**\n * Called when parser fully decodes a packet.\n *\n * @api private\n */\n\nManager.prototype.ondecoded = function (packet) {\n  this.emit('packet', packet);\n};\n\n/**\n * Called upon socket error.\n *\n * @api private\n */\n\nManager.prototype.onerror = function (err) {\n  debug('error', err);\n  this.emitAll('error', err);\n};\n\n/**\n * Creates a new socket for the given `nsp`.\n *\n * @return {Socket}\n * @api public\n */\n\nManager.prototype.socket = function (nsp, opts) {\n  var socket = this.nsps[nsp];\n  if (!socket) {\n    socket = new Socket(this, nsp, opts);\n    this.nsps[nsp] = socket;\n    var self = this;\n    socket.on('connecting', onConnecting);\n    socket.on('connect', function () {\n      socket.id = self.generateId(nsp);\n    });\n\n    if (this.autoConnect) {\n      // manually call here since connecting event is fired before listening\n      onConnecting();\n    }\n  }\n\n  function onConnecting () {\n    if (!~indexOf(self.connecting, socket)) {\n      self.connecting.push(socket);\n    }\n  }\n\n  return socket;\n};\n\n/**\n * Called upon a socket close.\n *\n * @param {Socket} socket\n */\n\nManager.prototype.destroy = function (socket) {\n  var index = indexOf(this.connecting, socket);\n  if (~index) this.connecting.splice(index, 1);\n  if (this.connecting.length) return;\n\n  this.close();\n};\n\n/**\n * Writes a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nManager.prototype.packet = function (packet) {\n  debug('writing packet %j', packet);\n  var self = this;\n  if (packet.query && packet.type === 0) packet.nsp += '?' + packet.query;\n\n  if (!self.encoding) {\n    // encode, then write to engine with result\n    self.encoding = true;\n    this.encoder.encode(packet, function (encodedPackets) {\n      for (var i = 0; i < encodedPackets.length; i++) {\n        self.engine.write(encodedPackets[i], packet.options);\n      }\n      self.encoding = false;\n      self.processPacketQueue();\n    });\n  } else { // add packet to the queue\n    self.packetBuffer.push(packet);\n  }\n};\n\n/**\n * If packet buffer is non-empty, begins encoding the\n * next packet in line.\n *\n * @api private\n */\n\nManager.prototype.processPacketQueue = function () {\n  if (this.packetBuffer.length > 0 && !this.encoding) {\n    var pack = this.packetBuffer.shift();\n    this.packet(pack);\n  }\n};\n\n/**\n * Clean up transport subscriptions and packet buffer.\n *\n * @api private\n */\n\nManager.prototype.cleanup = function () {\n  debug('cleanup');\n\n  var subsLength = this.subs.length;\n  for (var i = 0; i < subsLength; i++) {\n    var sub = this.subs.shift();\n    sub.destroy();\n  }\n\n  this.packetBuffer = [];\n  this.encoding = false;\n  this.lastPing = null;\n\n  this.decoder.destroy();\n};\n\n/**\n * Close the current socket.\n *\n * @api private\n */\n\nManager.prototype.close =\nManager.prototype.disconnect = function () {\n  debug('disconnect');\n  this.skipReconnect = true;\n  this.reconnecting = false;\n  if ('opening' === this.readyState) {\n    // `onclose` will not fire because\n    // an open event never happened\n    this.cleanup();\n  }\n  this.backoff.reset();\n  this.readyState = 'closed';\n  if (this.engine) this.engine.close();\n};\n\n/**\n * Called upon engine close.\n *\n * @api private\n */\n\nManager.prototype.onclose = function (reason) {\n  debug('onclose');\n\n  this.cleanup();\n  this.backoff.reset();\n  this.readyState = 'closed';\n  this.emit('close', reason);\n\n  if (this._reconnection && !this.skipReconnect) {\n    this.reconnect();\n  }\n};\n\n/**\n * Attempt a reconnection.\n *\n * @api private\n */\n\nManager.prototype.reconnect = function () {\n  if (this.reconnecting || this.skipReconnect) return this;\n\n  var self = this;\n\n  if (this.backoff.attempts >= this._reconnectionAttempts) {\n    debug('reconnect failed');\n    this.backoff.reset();\n    this.emitAll('reconnect_failed');\n    this.reconnecting = false;\n  } else {\n    var delay = this.backoff.duration();\n    debug('will wait %dms before reconnect attempt', delay);\n\n    this.reconnecting = true;\n    var timer = setTimeout(function () {\n      if (self.skipReconnect) return;\n\n      debug('attempting reconnect');\n      self.emitAll('reconnect_attempt', self.backoff.attempts);\n      self.emitAll('reconnecting', self.backoff.attempts);\n\n      // check again for the case socket closed in above events\n      if (self.skipReconnect) return;\n\n      self.open(function (err) {\n        if (err) {\n          debug('reconnect attempt error');\n          self.reconnecting = false;\n          self.reconnect();\n          self.emitAll('reconnect_error', err.data);\n        } else {\n          debug('reconnect success');\n          self.onreconnect();\n        }\n      });\n    }, delay);\n\n    this.subs.push({\n      destroy: function () {\n        clearTimeout(timer);\n      }\n    });\n  }\n};\n\n/**\n * Called upon successful reconnect.\n *\n * @api private\n */\n\nManager.prototype.onreconnect = function () {\n  var attempt = this.backoff.attempts;\n  this.reconnecting = false;\n  this.backoff.reset();\n  this.updateSocketIds();\n  this.emitAll('reconnect', attempt);\n};\n","\n/**\n * Module exports.\n */\n\nmodule.exports = on;\n\n/**\n * Helper for subscriptions.\n *\n * @param {Object|EventEmitter} obj with `Emitter` mixin or `EventEmitter`\n * @param {String} event name\n * @param {Function} callback\n * @api public\n */\n\nfunction on (obj, ev, fn) {\n  obj.on(ev, fn);\n  return {\n    destroy: function () {\n      obj.removeListener(ev, fn);\n    }\n  };\n}\n","\n/**\n * Module dependencies.\n */\n\nvar parser = require('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar toArray = require('to-array');\nvar on = require('./on');\nvar bind = require('component-bind');\nvar debug = require('debug')('socket.io-client:socket');\nvar parseqs = require('parseqs');\nvar hasBin = require('has-binary2');\n\n/**\n * Module exports.\n */\n\nmodule.exports = exports = Socket;\n\n/**\n * Internal events (blacklisted).\n * These events can't be emitted by the user.\n *\n * @api private\n */\n\nvar events = {\n  connect: 1,\n  connect_error: 1,\n  connect_timeout: 1,\n  connecting: 1,\n  disconnect: 1,\n  error: 1,\n  reconnect: 1,\n  reconnect_attempt: 1,\n  reconnect_failed: 1,\n  reconnect_error: 1,\n  reconnecting: 1,\n  ping: 1,\n  pong: 1\n};\n\n/**\n * Shortcut to `Emitter#emit`.\n */\n\nvar emit = Emitter.prototype.emit;\n\n/**\n * `Socket` constructor.\n *\n * @api public\n */\n\nfunction Socket (io, nsp, opts) {\n  this.io = io;\n  this.nsp = nsp;\n  this.json = this; // compat\n  this.ids = 0;\n  this.acks = {};\n  this.receiveBuffer = [];\n  this.sendBuffer = [];\n  this.connected = false;\n  this.disconnected = true;\n  this.flags = {};\n  if (opts && opts.query) {\n    this.query = opts.query;\n  }\n  if (this.io.autoConnect) this.open();\n}\n\n/**\n * Mix in `Emitter`.\n */\n\nEmitter(Socket.prototype);\n\n/**\n * Subscribe to open, close and packet events\n *\n * @api private\n */\n\nSocket.prototype.subEvents = function () {\n  if (this.subs) return;\n\n  var io = this.io;\n  this.subs = [\n    on(io, 'open', bind(this, 'onopen')),\n    on(io, 'packet', bind(this, 'onpacket')),\n    on(io, 'close', bind(this, 'onclose'))\n  ];\n};\n\n/**\n * \"Opens\" the socket.\n *\n * @api public\n */\n\nSocket.prototype.open =\nSocket.prototype.connect = function () {\n  if (this.connected) return this;\n\n  this.subEvents();\n  this.io.open(); // ensure open\n  if ('open' === this.io.readyState) this.onopen();\n  this.emit('connecting');\n  return this;\n};\n\n/**\n * Sends a `message` event.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.send = function () {\n  var args = toArray(arguments);\n  args.unshift('message');\n  this.emit.apply(this, args);\n  return this;\n};\n\n/**\n * Override `emit`.\n * If the event is in `events`, it's emitted normally.\n *\n * @param {String} event name\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.emit = function (ev) {\n  if (events.hasOwnProperty(ev)) {\n    emit.apply(this, arguments);\n    return this;\n  }\n\n  var args = toArray(arguments);\n  var packet = {\n    type: (this.flags.binary !== undefined ? this.flags.binary : hasBin(args)) ? parser.BINARY_EVENT : parser.EVENT,\n    data: args\n  };\n\n  packet.options = {};\n  packet.options.compress = !this.flags || false !== this.flags.compress;\n\n  // event ack callback\n  if ('function' === typeof args[args.length - 1]) {\n    debug('emitting packet with ack id %d', this.ids);\n    this.acks[this.ids] = args.pop();\n    packet.id = this.ids++;\n  }\n\n  if (this.connected) {\n    this.packet(packet);\n  } else {\n    this.sendBuffer.push(packet);\n  }\n\n  this.flags = {};\n\n  return this;\n};\n\n/**\n * Sends a packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.packet = function (packet) {\n  packet.nsp = this.nsp;\n  this.io.packet(packet);\n};\n\n/**\n * Called upon engine `open`.\n *\n * @api private\n */\n\nSocket.prototype.onopen = function () {\n  debug('transport is open - connecting');\n\n  // write connect packet if necessary\n  if ('/' !== this.nsp) {\n    if (this.query) {\n      var query = typeof this.query === 'object' ? parseqs.encode(this.query) : this.query;\n      debug('sending connect packet with query %s', query);\n      this.packet({type: parser.CONNECT, query: query});\n    } else {\n      this.packet({type: parser.CONNECT});\n    }\n  }\n};\n\n/**\n * Called upon engine `close`.\n *\n * @param {String} reason\n * @api private\n */\n\nSocket.prototype.onclose = function (reason) {\n  debug('close (%s)', reason);\n  this.connected = false;\n  this.disconnected = true;\n  delete this.id;\n  this.emit('disconnect', reason);\n};\n\n/**\n * Called with socket packet.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onpacket = function (packet) {\n  var sameNamespace = packet.nsp === this.nsp;\n  var rootNamespaceError = packet.type === parser.ERROR && packet.nsp === '/';\n\n  if (!sameNamespace && !rootNamespaceError) return;\n\n  switch (packet.type) {\n    case parser.CONNECT:\n      this.onconnect();\n      break;\n\n    case parser.EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.BINARY_EVENT:\n      this.onevent(packet);\n      break;\n\n    case parser.ACK:\n      this.onack(packet);\n      break;\n\n    case parser.BINARY_ACK:\n      this.onack(packet);\n      break;\n\n    case parser.DISCONNECT:\n      this.ondisconnect();\n      break;\n\n    case parser.ERROR:\n      this.emit('error', packet.data);\n      break;\n  }\n};\n\n/**\n * Called upon a server event.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onevent = function (packet) {\n  var args = packet.data || [];\n  debug('emitting event %j', args);\n\n  if (null != packet.id) {\n    debug('attaching ack callback to event');\n    args.push(this.ack(packet.id));\n  }\n\n  if (this.connected) {\n    emit.apply(this, args);\n  } else {\n    this.receiveBuffer.push(args);\n  }\n};\n\n/**\n * Produces an ack callback to emit with an event.\n *\n * @api private\n */\n\nSocket.prototype.ack = function (id) {\n  var self = this;\n  var sent = false;\n  return function () {\n    // prevent double callbacks\n    if (sent) return;\n    sent = true;\n    var args = toArray(arguments);\n    debug('sending ack %j', args);\n\n    self.packet({\n      type: hasBin(args) ? parser.BINARY_ACK : parser.ACK,\n      id: id,\n      data: args\n    });\n  };\n};\n\n/**\n * Called upon a server acknowlegement.\n *\n * @param {Object} packet\n * @api private\n */\n\nSocket.prototype.onack = function (packet) {\n  var ack = this.acks[packet.id];\n  if ('function' === typeof ack) {\n    debug('calling ack %s with %j', packet.id, packet.data);\n    ack.apply(this, packet.data);\n    delete this.acks[packet.id];\n  } else {\n    debug('bad ack %s', packet.id);\n  }\n};\n\n/**\n * Called upon server connect.\n *\n * @api private\n */\n\nSocket.prototype.onconnect = function () {\n  this.connected = true;\n  this.disconnected = false;\n  this.emit('connect');\n  this.emitBuffered();\n};\n\n/**\n * Emit buffered events (received and emitted).\n *\n * @api private\n */\n\nSocket.prototype.emitBuffered = function () {\n  var i;\n  for (i = 0; i < this.receiveBuffer.length; i++) {\n    emit.apply(this, this.receiveBuffer[i]);\n  }\n  this.receiveBuffer = [];\n\n  for (i = 0; i < this.sendBuffer.length; i++) {\n    this.packet(this.sendBuffer[i]);\n  }\n  this.sendBuffer = [];\n};\n\n/**\n * Called upon server disconnect.\n *\n * @api private\n */\n\nSocket.prototype.ondisconnect = function () {\n  debug('server disconnect (%s)', this.nsp);\n  this.destroy();\n  this.onclose('io server disconnect');\n};\n\n/**\n * Called upon forced client/server side disconnections,\n * this method ensures the manager stops tracking us and\n * that reconnections don't get triggered for this.\n *\n * @api private.\n */\n\nSocket.prototype.destroy = function () {\n  if (this.subs) {\n    // clean subscriptions to avoid reconnections\n    for (var i = 0; i < this.subs.length; i++) {\n      this.subs[i].destroy();\n    }\n    this.subs = null;\n  }\n\n  this.io.destroy(this);\n};\n\n/**\n * Disconnects the socket manually.\n *\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.close =\nSocket.prototype.disconnect = function () {\n  if (this.connected) {\n    debug('performing disconnect (%s)', this.nsp);\n    this.packet({ type: parser.DISCONNECT });\n  }\n\n  // remove socket from pool\n  this.destroy();\n\n  if (this.connected) {\n    // fire events\n    this.onclose('io client disconnect');\n  }\n  return this;\n};\n\n/**\n * Sets the compress flag.\n *\n * @param {Boolean} if `true`, compresses the sending data\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.compress = function (compress) {\n  this.flags.compress = compress;\n  return this;\n};\n\n/**\n * Sets the binary flag\n *\n * @param {Boolean} whether the emitted data contains binary\n * @return {Socket} self\n * @api public\n */\n\nSocket.prototype.binary = function (binary) {\n  this.flags.binary = binary;\n  return this;\n};\n","\n/**\n * Module dependencies.\n */\n\nvar parseuri = require('parseuri');\nvar debug = require('debug')('socket.io-client:url');\n\n/**\n * Module exports.\n */\n\nmodule.exports = url;\n\n/**\n * URL parser.\n *\n * @param {String} url\n * @param {Object} An object meant to mimic window.location.\n *                 Defaults to window.location.\n * @api public\n */\n\nfunction url (uri, loc) {\n  var obj = uri;\n\n  // default to window.location\n  loc = loc || (typeof location !== 'undefined' && location);\n  if (null == uri) uri = loc.protocol + '//' + loc.host;\n\n  // relative path support\n  if ('string' === typeof uri) {\n    if ('/' === uri.charAt(0)) {\n      if ('/' === uri.charAt(1)) {\n        uri = loc.protocol + uri;\n      } else {\n        uri = loc.host + uri;\n      }\n    }\n\n    if (!/^(https?|wss?):\\/\\//.test(uri)) {\n      debug('protocol-less url %s', uri);\n      if ('undefined' !== typeof loc) {\n        uri = loc.protocol + '//' + uri;\n      } else {\n        uri = 'https://' + uri;\n      }\n    }\n\n    // parse\n    debug('parse %s', uri);\n    obj = parseuri(uri);\n  }\n\n  // make sure we treat `localhost:80` and `localhost` equally\n  if (!obj.port) {\n    if (/^(http|ws)$/.test(obj.protocol)) {\n      obj.port = '80';\n    } else if (/^(http|ws)s$/.test(obj.protocol)) {\n      obj.port = '443';\n    }\n  }\n\n  obj.path = obj.path || '/';\n\n  var ipv6 = obj.host.indexOf(':') !== -1;\n  var host = ipv6 ? '[' + obj.host + ']' : obj.host;\n\n  // define unique id\n  obj.id = obj.protocol + '://' + host + ':' + obj.port;\n  // define href\n  obj.href = obj.protocol + '://' + host + (loc && loc.port === obj.port ? '' : (':' + obj.port));\n\n  return obj;\n}\n","/**\n * This is the web browser implementation of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = require('./debug');\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = 'undefined' != typeof chrome\n               && 'undefined' != typeof chrome.storage\n                  ? chrome.storage.local\n                  : localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n  '#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC',\n  '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF',\n  '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC',\n  '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF',\n  '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC',\n  '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033',\n  '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366',\n  '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933',\n  '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC',\n  '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF',\n  '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && window.process.type === 'renderer') {\n    return true;\n  }\n\n  // Internet Explorer and Edge do not support colors.\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  }\n\n  // is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n  return (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n    // is firebug? http://stackoverflow.com/a/398120/376773\n    (typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n    // is firefox >= v31?\n    // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n    // double check webkit in userAgent just in case we are in a worker\n    (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nexports.formatters.j = function(v) {\n  try {\n    return JSON.stringify(v);\n  } catch (err) {\n    return '[UnexpectedJSONParseError]: ' + err.message;\n  }\n};\n\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n  var useColors = this.useColors;\n\n  args[0] = (useColors ? '%c' : '')\n    + this.namespace\n    + (useColors ? ' %c' : ' ')\n    + args[0]\n    + (useColors ? '%c ' : ' ')\n    + '+' + exports.humanize(this.diff);\n\n  if (!useColors) return;\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit')\n\n  // the final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function(match) {\n    if ('%%' === match) return;\n    index++;\n    if ('%c' === match) {\n      // we only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n\n  args.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\nfunction log() {\n  // this hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return 'object' === typeof console\n    && console.log\n    && Function.prototype.apply.call(console.log, console, arguments);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\nfunction save(namespaces) {\n  try {\n    if (null == namespaces) {\n      exports.storage.removeItem('debug');\n    } else {\n      exports.storage.debug = namespaces;\n    }\n  } catch(e) {}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\nfunction load() {\n  var r;\n  try {\n    r = exports.storage.debug;\n  } catch(e) {}\n\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n\n/**\n * Enable namespaces listed in `localStorage.debug` initially.\n */\n\nexports.enable(load());\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n  try {\n    return window.localStorage;\n  } catch (e) {}\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n *\n * Expose `debug()` as the module.\n */\n\nexports = module.exports = createDebug.debug = createDebug['default'] = createDebug;\nexports.coerce = coerce;\nexports.disable = disable;\nexports.enable = enable;\nexports.enabled = enabled;\nexports.humanize = require('ms');\n\n/**\n * Active `debug` instances.\n */\nexports.instances = [];\n\n/**\n * The currently active debug mode names, and names to skip.\n */\n\nexports.names = [];\nexports.skips = [];\n\n/**\n * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n *\n * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n */\n\nexports.formatters = {};\n\n/**\n * Select a color.\n * @param {String} namespace\n * @return {Number}\n * @api private\n */\n\nfunction selectColor(namespace) {\n  var hash = 0, i;\n\n  for (i in namespace) {\n    hash  = ((hash << 5) - hash) + namespace.charCodeAt(i);\n    hash |= 0; // Convert to 32bit integer\n  }\n\n  return exports.colors[Math.abs(hash) % exports.colors.length];\n}\n\n/**\n * Create a debugger with the given `namespace`.\n *\n * @param {String} namespace\n * @return {Function}\n * @api public\n */\n\nfunction createDebug(namespace) {\n\n  var prevTime;\n\n  function debug() {\n    // disabled?\n    if (!debug.enabled) return;\n\n    var self = debug;\n\n    // set `diff` timestamp\n    var curr = +new Date();\n    var ms = curr - (prevTime || curr);\n    self.diff = ms;\n    self.prev = prevTime;\n    self.curr = curr;\n    prevTime = curr;\n\n    // turn the `arguments` into a proper Array\n    var args = new Array(arguments.length);\n    for (var i = 0; i < args.length; i++) {\n      args[i] = arguments[i];\n    }\n\n    args[0] = exports.coerce(args[0]);\n\n    if ('string' !== typeof args[0]) {\n      // anything else let's inspect with %O\n      args.unshift('%O');\n    }\n\n    // apply any `formatters` transformations\n    var index = 0;\n    args[0] = args[0].replace(/%([a-zA-Z%])/g, function(match, format) {\n      // if we encounter an escaped % then don't increase the array index\n      if (match === '%%') return match;\n      index++;\n      var formatter = exports.formatters[format];\n      if ('function' === typeof formatter) {\n        var val = args[index];\n        match = formatter.call(self, val);\n\n        // now we need to remove `args[index]` since it's inlined in the `format`\n        args.splice(index, 1);\n        index--;\n      }\n      return match;\n    });\n\n    // apply env-specific formatting (colors, etc.)\n    exports.formatArgs.call(self, args);\n\n    var logFn = debug.log || exports.log || console.log.bind(console);\n    logFn.apply(self, args);\n  }\n\n  debug.namespace = namespace;\n  debug.enabled = exports.enabled(namespace);\n  debug.useColors = exports.useColors();\n  debug.color = selectColor(namespace);\n  debug.destroy = destroy;\n\n  // env-specific initialization logic for debug instances\n  if ('function' === typeof exports.init) {\n    exports.init(debug);\n  }\n\n  exports.instances.push(debug);\n\n  return debug;\n}\n\nfunction destroy () {\n  var index = exports.instances.indexOf(this);\n  if (index !== -1) {\n    exports.instances.splice(index, 1);\n    return true;\n  } else {\n    return false;\n  }\n}\n\n/**\n * Enables a debug mode by namespaces. This can include modes\n * separated by a colon and wildcards.\n *\n * @param {String} namespaces\n * @api public\n */\n\nfunction enable(namespaces) {\n  exports.save(namespaces);\n\n  exports.names = [];\n  exports.skips = [];\n\n  var i;\n  var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n  var len = split.length;\n\n  for (i = 0; i < len; i++) {\n    if (!split[i]) continue; // ignore empty strings\n    namespaces = split[i].replace(/\\*/g, '.*?');\n    if (namespaces[0] === '-') {\n      exports.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n    } else {\n      exports.names.push(new RegExp('^' + namespaces + '$'));\n    }\n  }\n\n  for (i = 0; i < exports.instances.length; i++) {\n    var instance = exports.instances[i];\n    instance.enabled = exports.enabled(instance.namespace);\n  }\n}\n\n/**\n * Disable debug output.\n *\n * @api public\n */\n\nfunction disable() {\n  exports.enable('');\n}\n\n/**\n * Returns true if the given mode name is enabled, false otherwise.\n *\n * @param {String} name\n * @return {Boolean}\n * @api public\n */\n\nfunction enabled(name) {\n  if (name[name.length - 1] === '*') {\n    return true;\n  }\n  var i, len;\n  for (i = 0, len = exports.skips.length; i < len; i++) {\n    if (exports.skips[i].test(name)) {\n      return false;\n    }\n  }\n  for (i = 0, len = exports.names.length; i < len; i++) {\n    if (exports.names[i].test(name)) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Coerce `val`.\n *\n * @param {Mixed} val\n * @return {Mixed}\n * @api private\n */\n\nfunction coerce(val) {\n  if (val instanceof Error) return val.stack || val.message;\n  return val;\n}\n","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","/*global Blob,File*/\n\n/**\n * Module requirements\n */\n\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\nvar toString = Object.prototype.toString;\nvar withNativeBlob = typeof Blob === 'function' || (typeof Blob !== 'undefined' && toString.call(Blob) === '[object BlobConstructor]');\nvar withNativeFile = typeof File === 'function' || (typeof File !== 'undefined' && toString.call(File) === '[object FileConstructor]');\n\n/**\n * Replaces every Buffer | ArrayBuffer in packet with a numbered placeholder.\n * Anything with blobs or files should be fed through removeBlobs before coming\n * here.\n *\n * @param {Object} packet - socket.io event packet\n * @return {Object} with deconstructed packet and list of buffers\n * @api public\n */\n\nexports.deconstructPacket = function(packet) {\n  var buffers = [];\n  var packetData = packet.data;\n  var pack = packet;\n  pack.data = _deconstructPacket(packetData, buffers);\n  pack.attachments = buffers.length; // number of binary 'attachments'\n  return {packet: pack, buffers: buffers};\n};\n\nfunction _deconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (isBuf(data)) {\n    var placeholder = { _placeholder: true, num: buffers.length };\n    buffers.push(data);\n    return placeholder;\n  } else if (isArray(data)) {\n    var newData = new Array(data.length);\n    for (var i = 0; i < data.length; i++) {\n      newData[i] = _deconstructPacket(data[i], buffers);\n    }\n    return newData;\n  } else if (typeof data === 'object' && !(data instanceof Date)) {\n    var newData = {};\n    for (var key in data) {\n      newData[key] = _deconstructPacket(data[key], buffers);\n    }\n    return newData;\n  }\n  return data;\n}\n\n/**\n * Reconstructs a binary packet from its placeholder packet and buffers\n *\n * @param {Object} packet - event packet with placeholders\n * @param {Array} buffers - binary buffers to put in placeholder positions\n * @return {Object} reconstructed packet\n * @api public\n */\n\nexports.reconstructPacket = function(packet, buffers) {\n  packet.data = _reconstructPacket(packet.data, buffers);\n  packet.attachments = undefined; // no longer useful\n  return packet;\n};\n\nfunction _reconstructPacket(data, buffers) {\n  if (!data) return data;\n\n  if (data && data._placeholder) {\n    return buffers[data.num]; // appropriate buffer (should be natural order anyway)\n  } else if (isArray(data)) {\n    for (var i = 0; i < data.length; i++) {\n      data[i] = _reconstructPacket(data[i], buffers);\n    }\n  } else if (typeof data === 'object') {\n    for (var key in data) {\n      data[key] = _reconstructPacket(data[key], buffers);\n    }\n  }\n\n  return data;\n}\n\n/**\n * Asynchronously removes Blobs or Files from data via\n * FileReader's readAsArrayBuffer method. Used before encoding\n * data as msgpack. Calls callback with the blobless data.\n *\n * @param {Object} data\n * @param {Function} callback\n * @api private\n */\n\nexports.removeBlobs = function(data, callback) {\n  function _removeBlobs(obj, curKey, containingObject) {\n    if (!obj) return obj;\n\n    // convert any blob\n    if ((withNativeBlob && obj instanceof Blob) ||\n        (withNativeFile && obj instanceof File)) {\n      pendingBlobs++;\n\n      // async filereader\n      var fileReader = new FileReader();\n      fileReader.onload = function() { // this.result == arraybuffer\n        if (containingObject) {\n          containingObject[curKey] = this.result;\n        }\n        else {\n          bloblessData = this.result;\n        }\n\n        // if nothing pending its callback time\n        if(! --pendingBlobs) {\n          callback(bloblessData);\n        }\n      };\n\n      fileReader.readAsArrayBuffer(obj); // blob -> arraybuffer\n    } else if (isArray(obj)) { // handle array\n      for (var i = 0; i < obj.length; i++) {\n        _removeBlobs(obj[i], i, obj);\n      }\n    } else if (typeof obj === 'object' && !isBuf(obj)) { // and object\n      for (var key in obj) {\n        _removeBlobs(obj[key], key, obj);\n      }\n    }\n  }\n\n  var pendingBlobs = 0;\n  var bloblessData = data;\n  _removeBlobs(bloblessData);\n  if (!pendingBlobs) {\n    callback(bloblessData);\n  }\n};\n","\n/**\n * Module dependencies.\n */\n\nvar debug = require('debug')('socket.io-parser');\nvar Emitter = require('component-emitter');\nvar binary = require('./binary');\nvar isArray = require('isarray');\nvar isBuf = require('./is-buffer');\n\n/**\n * Protocol version.\n *\n * @api public\n */\n\nexports.protocol = 4;\n\n/**\n * Packet types.\n *\n * @api public\n */\n\nexports.types = [\n  'CONNECT',\n  'DISCONNECT',\n  'EVENT',\n  'ACK',\n  'ERROR',\n  'BINARY_EVENT',\n  'BINARY_ACK'\n];\n\n/**\n * Packet type `connect`.\n *\n * @api public\n */\n\nexports.CONNECT = 0;\n\n/**\n * Packet type `disconnect`.\n *\n * @api public\n */\n\nexports.DISCONNECT = 1;\n\n/**\n * Packet type `event`.\n *\n * @api public\n */\n\nexports.EVENT = 2;\n\n/**\n * Packet type `ack`.\n *\n * @api public\n */\n\nexports.ACK = 3;\n\n/**\n * Packet type `error`.\n *\n * @api public\n */\n\nexports.ERROR = 4;\n\n/**\n * Packet type 'binary event'\n *\n * @api public\n */\n\nexports.BINARY_EVENT = 5;\n\n/**\n * Packet type `binary ack`. For acks with binary arguments.\n *\n * @api public\n */\n\nexports.BINARY_ACK = 6;\n\n/**\n * Encoder constructor.\n *\n * @api public\n */\n\nexports.Encoder = Encoder;\n\n/**\n * Decoder constructor.\n *\n * @api public\n */\n\nexports.Decoder = Decoder;\n\n/**\n * A socket.io Encoder instance\n *\n * @api public\n */\n\nfunction Encoder() {}\n\nvar ERROR_PACKET = exports.ERROR + '\"encode error\"';\n\n/**\n * Encode a packet as a single string if non-binary, or as a\n * buffer sequence, depending on packet type.\n *\n * @param {Object} obj - packet object\n * @param {Function} callback - function to handle encodings (likely engine.write)\n * @return Calls callback with Array of encodings\n * @api public\n */\n\nEncoder.prototype.encode = function(obj, callback){\n  debug('encoding packet %j', obj);\n\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    encodeAsBinary(obj, callback);\n  } else {\n    var encoding = encodeAsString(obj);\n    callback([encoding]);\n  }\n};\n\n/**\n * Encode packet as string.\n *\n * @param {Object} packet\n * @return {String} encoded\n * @api private\n */\n\nfunction encodeAsString(obj) {\n\n  // first is type\n  var str = '' + obj.type;\n\n  // attachments if we have them\n  if (exports.BINARY_EVENT === obj.type || exports.BINARY_ACK === obj.type) {\n    str += obj.attachments + '-';\n  }\n\n  // if we have a namespace other than `/`\n  // we append it followed by a comma `,`\n  if (obj.nsp && '/' !== obj.nsp) {\n    str += obj.nsp + ',';\n  }\n\n  // immediately followed by the id\n  if (null != obj.id) {\n    str += obj.id;\n  }\n\n  // json data\n  if (null != obj.data) {\n    var payload = tryStringify(obj.data);\n    if (payload !== false) {\n      str += payload;\n    } else {\n      return ERROR_PACKET;\n    }\n  }\n\n  debug('encoded %j as %s', obj, str);\n  return str;\n}\n\nfunction tryStringify(str) {\n  try {\n    return JSON.stringify(str);\n  } catch(e){\n    return false;\n  }\n}\n\n/**\n * Encode packet as 'buffer sequence' by removing blobs, and\n * deconstructing packet into object with placeholders and\n * a list of buffers.\n *\n * @param {Object} packet\n * @return {Buffer} encoded\n * @api private\n */\n\nfunction encodeAsBinary(obj, callback) {\n\n  function writeEncoding(bloblessData) {\n    var deconstruction = binary.deconstructPacket(bloblessData);\n    var pack = encodeAsString(deconstruction.packet);\n    var buffers = deconstruction.buffers;\n\n    buffers.unshift(pack); // add packet info to beginning of data list\n    callback(buffers); // write all the buffers\n  }\n\n  binary.removeBlobs(obj, writeEncoding);\n}\n\n/**\n * A socket.io Decoder instance\n *\n * @return {Object} decoder\n * @api public\n */\n\nfunction Decoder() {\n  this.reconstructor = null;\n}\n\n/**\n * Mix in `Emitter` with Decoder.\n */\n\nEmitter(Decoder.prototype);\n\n/**\n * Decodes an encoded packet string into packet JSON.\n *\n * @param {String} obj - encoded packet\n * @return {Object} packet\n * @api public\n */\n\nDecoder.prototype.add = function(obj) {\n  var packet;\n  if (typeof obj === 'string') {\n    packet = decodeString(obj);\n    if (exports.BINARY_EVENT === packet.type || exports.BINARY_ACK === packet.type) { // binary packet's json\n      this.reconstructor = new BinaryReconstructor(packet);\n\n      // no attachments, labeled binary but no binary data to follow\n      if (this.reconstructor.reconPack.attachments === 0) {\n        this.emit('decoded', packet);\n      }\n    } else { // non-binary full packet\n      this.emit('decoded', packet);\n    }\n  } else if (isBuf(obj) || obj.base64) { // raw binary data\n    if (!this.reconstructor) {\n      throw new Error('got binary data when not reconstructing a packet');\n    } else {\n      packet = this.reconstructor.takeBinaryData(obj);\n      if (packet) { // received final buffer\n        this.reconstructor = null;\n        this.emit('decoded', packet);\n      }\n    }\n  } else {\n    throw new Error('Unknown type: ' + obj);\n  }\n};\n\n/**\n * Decode a packet String (JSON data)\n *\n * @param {String} str\n * @return {Object} packet\n * @api private\n */\n\nfunction decodeString(str) {\n  var i = 0;\n  // look up type\n  var p = {\n    type: Number(str.charAt(0))\n  };\n\n  if (null == exports.types[p.type]) {\n    return error('unknown packet type ' + p.type);\n  }\n\n  // look up attachments if type binary\n  if (exports.BINARY_EVENT === p.type || exports.BINARY_ACK === p.type) {\n    var buf = '';\n    while (str.charAt(++i) !== '-') {\n      buf += str.charAt(i);\n      if (i == str.length) break;\n    }\n    if (buf != Number(buf) || str.charAt(i) !== '-') {\n      throw new Error('Illegal attachments');\n    }\n    p.attachments = Number(buf);\n  }\n\n  // look up namespace (if any)\n  if ('/' === str.charAt(i + 1)) {\n    p.nsp = '';\n    while (++i) {\n      var c = str.charAt(i);\n      if (',' === c) break;\n      p.nsp += c;\n      if (i === str.length) break;\n    }\n  } else {\n    p.nsp = '/';\n  }\n\n  // look up id\n  var next = str.charAt(i + 1);\n  if ('' !== next && Number(next) == next) {\n    p.id = '';\n    while (++i) {\n      var c = str.charAt(i);\n      if (null == c || Number(c) != c) {\n        --i;\n        break;\n      }\n      p.id += str.charAt(i);\n      if (i === str.length) break;\n    }\n    p.id = Number(p.id);\n  }\n\n  // look up json data\n  if (str.charAt(++i)) {\n    var payload = tryParse(str.substr(i));\n    var isPayloadValid = payload !== false && (p.type === exports.ERROR || isArray(payload));\n    if (isPayloadValid) {\n      p.data = payload;\n    } else {\n      return error('invalid payload');\n    }\n  }\n\n  debug('decoded %s as %j', str, p);\n  return p;\n}\n\nfunction tryParse(str) {\n  try {\n    return JSON.parse(str);\n  } catch(e){\n    return false;\n  }\n}\n\n/**\n * Deallocates a parser's resources\n *\n * @api public\n */\n\nDecoder.prototype.destroy = function() {\n  if (this.reconstructor) {\n    this.reconstructor.finishedReconstruction();\n  }\n};\n\n/**\n * A manager of a binary event's 'buffer sequence'. Should\n * be constructed whenever a packet of type BINARY_EVENT is\n * decoded.\n *\n * @param {Object} packet\n * @return {BinaryReconstructor} initialized reconstructor\n * @api private\n */\n\nfunction BinaryReconstructor(packet) {\n  this.reconPack = packet;\n  this.buffers = [];\n}\n\n/**\n * Method to be called when binary data received from connection\n * after a BINARY_EVENT packet.\n *\n * @param {Buffer | ArrayBuffer} binData - the raw binary data received\n * @return {null | Object} returns null if more binary data is expected or\n *   a reconstructed packet object if all buffers have been received.\n * @api private\n */\n\nBinaryReconstructor.prototype.takeBinaryData = function(binData) {\n  this.buffers.push(binData);\n  if (this.buffers.length === this.reconPack.attachments) { // done with buffer list\n    var packet = binary.reconstructPacket(this.reconPack, this.buffers);\n    this.finishedReconstruction();\n    return packet;\n  }\n  return null;\n};\n\n/**\n * Cleans up binary packet reconstruction variables.\n *\n * @api private\n */\n\nBinaryReconstructor.prototype.finishedReconstruction = function() {\n  this.reconPack = null;\n  this.buffers = [];\n};\n\nfunction error(msg) {\n  return {\n    type: exports.ERROR,\n    data: 'parser error: ' + msg\n  };\n}\n","\nmodule.exports = isBuf;\n\nvar withNativeBuffer = typeof Buffer === 'function' && typeof Buffer.isBuffer === 'function';\nvar withNativeArrayBuffer = typeof ArrayBuffer === 'function';\n\nvar isView = function (obj) {\n  return typeof ArrayBuffer.isView === 'function' ? ArrayBuffer.isView(obj) : (obj.buffer instanceof ArrayBuffer);\n};\n\n/**\n * Returns true if obj is a buffer or an arraybuffer.\n *\n * @api private\n */\n\nfunction isBuf(obj) {\n  return (withNativeBuffer && Buffer.isBuffer(obj)) ||\n          (withNativeArrayBuffer && (obj instanceof ArrayBuffer || isView(obj)));\n}\n","module.exports = toArray\n\nfunction toArray(list, index) {\n    var array = []\n\n    index = index || 0\n\n    for (var i = index || 0; i < list.length; i++) {\n        array[i - index] = list[i]\n    }\n\n    return array\n}\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n\n'use strict';\n\nimport {adapterFactory} from './adapter_factory.js';\n\nconst adapter = adapterFactory({window});\nexport default adapter;\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\nimport * as utils from './utils';\n\n  // Browser shims.\nimport * as chromeShim from './chrome/chrome_shim';\nimport * as edgeShim from './edge/edge_shim';\nimport * as firefoxShim from './firefox/firefox_shim';\nimport * as safariShim from './safari/safari_shim';\nimport * as commonShim from './common_shim';\n\n// Shimming starts here.\nexport function adapterFactory({window} = {}, options = {\n  shimChrome: true,\n  shimFirefox: true,\n  shimEdge: true,\n  shimSafari: true,\n}) {\n  // Utils.\n  const logging = utils.log;\n  const browserDetails = utils.detectBrowser(window);\n\n  const adapter = {\n    browserDetails,\n    commonShim,\n    extractVersion: utils.extractVersion,\n    disableLog: utils.disableLog,\n    disableWarnings: utils.disableWarnings\n  };\n\n  // Shim browser if found.\n  switch (browserDetails.browser) {\n    case 'chrome':\n      if (!chromeShim || !chromeShim.shimPeerConnection ||\n          !options.shimChrome) {\n        logging('Chrome shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming chrome.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = chromeShim;\n\n      chromeShim.shimGetUserMedia(window);\n      chromeShim.shimMediaStream(window);\n      chromeShim.shimPeerConnection(window);\n      chromeShim.shimOnTrack(window);\n      chromeShim.shimAddTrackRemoveTrack(window);\n      chromeShim.shimGetSendersWithDtmf(window);\n      chromeShim.shimSenderReceiverGetStats(window);\n      chromeShim.fixNegotiationNeeded(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimConnectionState(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      commonShim.removeAllowExtmapMixed(window);\n      break;\n    case 'firefox':\n      if (!firefoxShim || !firefoxShim.shimPeerConnection ||\n          !options.shimFirefox) {\n        logging('Firefox shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming firefox.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = firefoxShim;\n\n      firefoxShim.shimGetUserMedia(window);\n      firefoxShim.shimPeerConnection(window);\n      firefoxShim.shimOnTrack(window);\n      firefoxShim.shimRemoveStream(window);\n      firefoxShim.shimSenderGetStats(window);\n      firefoxShim.shimReceiverGetStats(window);\n      firefoxShim.shimRTCDataChannel(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimConnectionState(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n    case 'edge':\n      if (!edgeShim || !edgeShim.shimPeerConnection || !options.shimEdge) {\n        logging('MS edge shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming edge.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = edgeShim;\n\n      edgeShim.shimGetUserMedia(window);\n      edgeShim.shimGetDisplayMedia(window);\n      edgeShim.shimPeerConnection(window);\n      edgeShim.shimReplaceTrack(window);\n\n      // the edge shim implements the full RTCIceCandidate object.\n\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n    case 'safari':\n      if (!safariShim || !options.shimSafari) {\n        logging('Safari shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming safari.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = safariShim;\n\n      safariShim.shimRTCIceServerUrls(window);\n      safariShim.shimCreateOfferLegacy(window);\n      safariShim.shimCallbacksAPI(window);\n      safariShim.shimLocalStreamsAPI(window);\n      safariShim.shimRemoteStreamsAPI(window);\n      safariShim.shimTrackEventTransceiver(window);\n      safariShim.shimGetUserMedia(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      commonShim.removeAllowExtmapMixed(window);\n      break;\n    default:\n      logging('Unsupported browser!');\n      break;\n  }\n\n  return adapter;\n}\n","\n/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\nimport * as utils from '../utils.js';\n\n/* iterates the stats graph recursively. */\nfunction walkStats(stats, base, resultSet) {\n  if (!base || resultSet.has(base.id)) {\n    return;\n  }\n  resultSet.set(base.id, base);\n  Object.keys(base).forEach(name => {\n    if (name.endsWith('Id')) {\n      walkStats(stats, stats.get(base[name]), resultSet);\n    } else if (name.endsWith('Ids')) {\n      base[name].forEach(id => {\n        walkStats(stats, stats.get(id), resultSet);\n      });\n    }\n  });\n}\n\n/* filter getStats for a sender/receiver track. */\nfunction filterStats(result, track, outbound) {\n  const streamStatsType = outbound ? 'outbound-rtp' : 'inbound-rtp';\n  const filteredResult = new Map();\n  if (track === null) {\n    return filteredResult;\n  }\n  const trackStats = [];\n  result.forEach(value => {\n    if (value.type === 'track' &&\n        value.trackIdentifier === track.id) {\n      trackStats.push(value);\n    }\n  });\n  trackStats.forEach(trackStat => {\n    result.forEach(stats => {\n      if (stats.type === streamStatsType && stats.trackId === trackStat.id) {\n        walkStats(result, stats, filteredResult);\n      }\n    });\n  });\n  return filteredResult;\n}\n\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimMediaStream(window) {\n  window.MediaStream = window.MediaStream || window.webkitMediaStream;\n}\n\nexport function shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCPeerConnection && !('ontrack' in\n      window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'ontrack', {\n      get() {\n        return this._ontrack;\n      },\n      set(f) {\n        if (this._ontrack) {\n          this.removeEventListener('track', this._ontrack);\n        }\n        this.addEventListener('track', this._ontrack = f);\n      },\n      enumerable: true,\n      configurable: true\n    });\n    const origSetRemoteDescription =\n        window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription = function() {\n      if (!this._ontrackpoly) {\n        this._ontrackpoly = (e) => {\n          // onaddstream does not fire when a track is added to an existing\n          // stream. But stream.onaddtrack is implemented so we use that.\n          e.stream.addEventListener('addtrack', te => {\n            let receiver;\n            if (window.RTCPeerConnection.prototype.getReceivers) {\n              receiver = this.getReceivers()\n                .find(r => r.track && r.track.id === te.track.id);\n            } else {\n              receiver = {track: te.track};\n            }\n\n            const event = new Event('track');\n            event.track = te.track;\n            event.receiver = receiver;\n            event.transceiver = {receiver};\n            event.streams = [e.stream];\n            this.dispatchEvent(event);\n          });\n          e.stream.getTracks().forEach(track => {\n            let receiver;\n            if (window.RTCPeerConnection.prototype.getReceivers) {\n              receiver = this.getReceivers()\n                .find(r => r.track && r.track.id === track.id);\n            } else {\n              receiver = {track};\n            }\n            const event = new Event('track');\n            event.track = track;\n            event.receiver = receiver;\n            event.transceiver = {receiver};\n            event.streams = [e.stream];\n            this.dispatchEvent(event);\n          });\n        };\n        this.addEventListener('addstream', this._ontrackpoly);\n      }\n      return origSetRemoteDescription.apply(this, arguments);\n    };\n  } else {\n    // even if RTCRtpTransceiver is in window, it is only used and\n    // emitted in unified-plan. Unfortunately this means we need\n    // to unconditionally wrap the event.\n    utils.wrapPeerConnectionEvent(window, 'track', e => {\n      if (!e.transceiver) {\n        Object.defineProperty(e, 'transceiver',\n          {value: {receiver: e.receiver}});\n      }\n      return e;\n    });\n  }\n}\n\nexport function shimGetSendersWithDtmf(window) {\n  // Overrides addTrack/removeTrack, depends on shimAddTrackRemoveTrack.\n  if (typeof window === 'object' && window.RTCPeerConnection &&\n      !('getSenders' in window.RTCPeerConnection.prototype) &&\n      'createDTMFSender' in window.RTCPeerConnection.prototype) {\n    const shimSenderWithDtmf = function(pc, track) {\n      return {\n        track,\n        get dtmf() {\n          if (this._dtmf === undefined) {\n            if (track.kind === 'audio') {\n              this._dtmf = pc.createDTMFSender(track);\n            } else {\n              this._dtmf = null;\n            }\n          }\n          return this._dtmf;\n        },\n        _pc: pc\n      };\n    };\n\n    // augment addTrack when getSenders is not available.\n    if (!window.RTCPeerConnection.prototype.getSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function() {\n        this._senders = this._senders || [];\n        return this._senders.slice(); // return a copy of the internal state.\n      };\n      const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n      window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n        let sender = origAddTrack.apply(this, arguments);\n        if (!sender) {\n          sender = shimSenderWithDtmf(this, track);\n          this._senders.push(sender);\n        }\n        return sender;\n      };\n\n      const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n      window.RTCPeerConnection.prototype.removeTrack = function(sender) {\n        origRemoveTrack.apply(this, arguments);\n        const idx = this._senders.indexOf(sender);\n        if (idx !== -1) {\n          this._senders.splice(idx, 1);\n        }\n      };\n    }\n    const origAddStream = window.RTCPeerConnection.prototype.addStream;\n    window.RTCPeerConnection.prototype.addStream = function(stream) {\n      this._senders = this._senders || [];\n      origAddStream.apply(this, [stream]);\n      stream.getTracks().forEach(track => {\n        this._senders.push(shimSenderWithDtmf(this, track));\n      });\n    };\n\n    const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n    window.RTCPeerConnection.prototype.removeStream = function(stream) {\n      this._senders = this._senders || [];\n      origRemoveStream.apply(this, [stream]);\n\n      stream.getTracks().forEach(track => {\n        const sender = this._senders.find(s => s.track === track);\n        if (sender) { // remove sender\n          this._senders.splice(this._senders.indexOf(sender), 1);\n        }\n      });\n    };\n  } else if (typeof window === 'object' && window.RTCPeerConnection &&\n             'getSenders' in window.RTCPeerConnection.prototype &&\n             'createDTMFSender' in window.RTCPeerConnection.prototype &&\n             window.RTCRtpSender &&\n             !('dtmf' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    window.RTCPeerConnection.prototype.getSenders = function() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get() {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = this._pc.createDTMFSender(this.track);\n          } else {\n            this._dtmf = null;\n          }\n        }\n        return this._dtmf;\n      }\n    });\n  }\n}\n\nexport function shimSenderReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender && window.RTCRtpReceiver)) {\n    return;\n  }\n\n  // shim sender stats.\n  if (!('getStats' in window.RTCRtpSender.prototype)) {\n    const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n    if (origGetSenders) {\n      window.RTCPeerConnection.prototype.getSenders = function() {\n        const senders = origGetSenders.apply(this, []);\n        senders.forEach(sender => sender._pc = this);\n        return senders;\n      };\n    }\n\n    const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n    if (origAddTrack) {\n      window.RTCPeerConnection.prototype.addTrack = function() {\n        const sender = origAddTrack.apply(this, arguments);\n        sender._pc = this;\n        return sender;\n      };\n    }\n    window.RTCRtpSender.prototype.getStats = function() {\n      const sender = this;\n      return this._pc.getStats().then(result =>\n        /* Note: this will include stats of all senders that\n         *   send a track with the same id as sender.track as\n         *   it is not possible to identify the RTCRtpSender.\n         */\n        filterStats(result, sender.track, true));\n    };\n  }\n\n  // shim receiver stats.\n  if (!('getStats' in window.RTCRtpReceiver.prototype)) {\n    const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n    if (origGetReceivers) {\n      window.RTCPeerConnection.prototype.getReceivers = function() {\n        const receivers = origGetReceivers.apply(this, []);\n        receivers.forEach(receiver => receiver._pc = this);\n        return receivers;\n      };\n    }\n    utils.wrapPeerConnectionEvent(window, 'track', e => {\n      e.receiver._pc = e.srcElement;\n      return e;\n    });\n    window.RTCRtpReceiver.prototype.getStats = function() {\n      const receiver = this;\n      return this._pc.getStats().then(result =>\n        filterStats(result, receiver.track, false));\n    };\n  }\n\n  if (!('getStats' in window.RTCRtpSender.prototype &&\n      'getStats' in window.RTCRtpReceiver.prototype)) {\n    return;\n  }\n\n  // shim RTCPeerConnection.getStats(track).\n  const origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function() {\n    if (arguments.length > 0 &&\n        arguments[0] instanceof window.MediaStreamTrack) {\n      const track = arguments[0];\n      let sender;\n      let receiver;\n      let err;\n      this.getSenders().forEach(s => {\n        if (s.track === track) {\n          if (sender) {\n            err = true;\n          } else {\n            sender = s;\n          }\n        }\n      });\n      this.getReceivers().forEach(r => {\n        if (r.track === track) {\n          if (receiver) {\n            err = true;\n          } else {\n            receiver = r;\n          }\n        }\n        return r.track === track;\n      });\n      if (err || (sender && receiver)) {\n        return Promise.reject(new DOMException(\n          'There are more than one sender or receiver for the track.',\n          'InvalidAccessError'));\n      } else if (sender) {\n        return sender.getStats();\n      } else if (receiver) {\n        return receiver.getStats();\n      }\n      return Promise.reject(new DOMException(\n        'There is no sender or receiver for the track.',\n        'InvalidAccessError'));\n    }\n    return origGetStats.apply(this, arguments);\n  };\n}\n\nexport function shimAddTrackRemoveTrackWithNative(window) {\n  // shim addTrack/removeTrack with native variants in order to make\n  // the interactions with legacy getLocalStreams behave as in other browsers.\n  // Keeps a mapping stream.id => [stream, rtpsenders...]\n  window.RTCPeerConnection.prototype.getLocalStreams = function() {\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n    return Object.keys(this._shimmedLocalStreams)\n      .map(streamId => this._shimmedLocalStreams[streamId][0]);\n  };\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n    if (!stream) {\n      return origAddTrack.apply(this, arguments);\n    }\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n    const sender = origAddTrack.apply(this, arguments);\n    if (!this._shimmedLocalStreams[stream.id]) {\n      this._shimmedLocalStreams[stream.id] = [stream, sender];\n    } else if (this._shimmedLocalStreams[stream.id].indexOf(sender) === -1) {\n      this._shimmedLocalStreams[stream.id].push(sender);\n    }\n    return sender;\n  };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function(stream) {\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n    });\n    const existingSenders = this.getSenders();\n    origAddStream.apply(this, arguments);\n    const newSenders = this.getSenders()\n      .filter(newSender => existingSenders.indexOf(newSender) === -1);\n    this._shimmedLocalStreams[stream.id] = [stream].concat(newSenders);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream = function(stream) {\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n    delete this._shimmedLocalStreams[stream.id];\n    return origRemoveStream.apply(this, arguments);\n  };\n\n  const origRemoveTrack = window.RTCPeerConnection.prototype.removeTrack;\n  window.RTCPeerConnection.prototype.removeTrack = function(sender) {\n    this._shimmedLocalStreams = this._shimmedLocalStreams || {};\n    if (sender) {\n      Object.keys(this._shimmedLocalStreams).forEach(streamId => {\n        const idx = this._shimmedLocalStreams[streamId].indexOf(sender);\n        if (idx !== -1) {\n          this._shimmedLocalStreams[streamId].splice(idx, 1);\n        }\n        if (this._shimmedLocalStreams[streamId].length === 1) {\n          delete this._shimmedLocalStreams[streamId];\n        }\n      });\n    }\n    return origRemoveTrack.apply(this, arguments);\n  };\n}\n\nexport function shimAddTrackRemoveTrack(window) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  const browserDetails = utils.detectBrowser(window);\n  // shim addTrack and removeTrack.\n  if (window.RTCPeerConnection.prototype.addTrack &&\n      browserDetails.version >= 65) {\n    return shimAddTrackRemoveTrackWithNative(window);\n  }\n\n  // also shim pc.getLocalStreams when addTrack is shimmed\n  // to return the original streams.\n  const origGetLocalStreams = window.RTCPeerConnection.prototype\n      .getLocalStreams;\n  window.RTCPeerConnection.prototype.getLocalStreams = function() {\n    const nativeStreams = origGetLocalStreams.apply(this);\n    this._reverseStreams = this._reverseStreams || {};\n    return nativeStreams.map(stream => this._reverseStreams[stream.id]);\n  };\n\n  const origAddStream = window.RTCPeerConnection.prototype.addStream;\n  window.RTCPeerConnection.prototype.addStream = function(stream) {\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n\n    stream.getTracks().forEach(track => {\n      const alreadyExists = this.getSenders().find(s => s.track === track);\n      if (alreadyExists) {\n        throw new DOMException('Track already exists.',\n            'InvalidAccessError');\n      }\n    });\n    // Add identity mapping for consistency with addTrack.\n    // Unless this is being used with a stream from addTrack.\n    if (!this._reverseStreams[stream.id]) {\n      const newStream = new window.MediaStream(stream.getTracks());\n      this._streams[stream.id] = newStream;\n      this._reverseStreams[newStream.id] = stream;\n      stream = newStream;\n    }\n    origAddStream.apply(this, [stream]);\n  };\n\n  const origRemoveStream = window.RTCPeerConnection.prototype.removeStream;\n  window.RTCPeerConnection.prototype.removeStream = function(stream) {\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n\n    origRemoveStream.apply(this, [(this._streams[stream.id] || stream)]);\n    delete this._reverseStreams[(this._streams[stream.id] ?\n        this._streams[stream.id].id : stream.id)];\n    delete this._streams[stream.id];\n  };\n\n  window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n    if (this.signalingState === 'closed') {\n      throw new DOMException(\n        'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n        'InvalidStateError');\n    }\n    const streams = [].slice.call(arguments, 1);\n    if (streams.length !== 1 ||\n        !streams[0].getTracks().find(t => t === track)) {\n      // this is not fully correct but all we can manage without\n      // [[associated MediaStreams]] internal slot.\n      throw new DOMException(\n        'The adapter.js addTrack polyfill only supports a single ' +\n        ' stream which is associated with the specified track.',\n        'NotSupportedError');\n    }\n\n    const alreadyExists = this.getSenders().find(s => s.track === track);\n    if (alreadyExists) {\n      throw new DOMException('Track already exists.',\n          'InvalidAccessError');\n    }\n\n    this._streams = this._streams || {};\n    this._reverseStreams = this._reverseStreams || {};\n    const oldStream = this._streams[stream.id];\n    if (oldStream) {\n      // this is using odd Chrome behaviour, use with caution:\n      // https://bugs.chromium.org/p/webrtc/issues/detail?id=7815\n      // Note: we rely on the high-level addTrack/dtmf shim to\n      // create the sender with a dtmf sender.\n      oldStream.addTrack(track);\n\n      // Trigger ONN async.\n      Promise.resolve().then(() => {\n        this.dispatchEvent(new Event('negotiationneeded'));\n      });\n    } else {\n      const newStream = new window.MediaStream([track]);\n      this._streams[stream.id] = newStream;\n      this._reverseStreams[newStream.id] = stream;\n      this.addStream(newStream);\n    }\n    return this.getSenders().find(s => s.track === track);\n  };\n\n  // replace the internal stream id with the external one and\n  // vice versa.\n  function replaceInternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(internalStream.id, 'g'),\n          externalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  function replaceExternalStreamId(pc, description) {\n    let sdp = description.sdp;\n    Object.keys(pc._reverseStreams || []).forEach(internalId => {\n      const externalStream = pc._reverseStreams[internalId];\n      const internalStream = pc._streams[externalStream.id];\n      sdp = sdp.replace(new RegExp(externalStream.id, 'g'),\n          internalStream.id);\n    });\n    return new RTCSessionDescription({\n      type: description.type,\n      sdp\n    });\n  }\n  ['createOffer', 'createAnswer'].forEach(function(method) {\n    const nativeMethod = window.RTCPeerConnection.prototype[method];\n    window.RTCPeerConnection.prototype[method] = function() {\n      const args = arguments;\n      const isLegacyCall = arguments.length &&\n          typeof arguments[0] === 'function';\n      if (isLegacyCall) {\n        return nativeMethod.apply(this, [\n          (description) => {\n            const desc = replaceInternalStreamId(this, description);\n            args[0].apply(null, [desc]);\n          },\n          (err) => {\n            if (args[1]) {\n              args[1].apply(null, err);\n            }\n          }, arguments[2]\n        ]);\n      }\n      return nativeMethod.apply(this, arguments)\n      .then(description => replaceInternalStreamId(this, description));\n    };\n  });\n\n  const origSetLocalDescription =\n      window.RTCPeerConnection.prototype.setLocalDescription;\n  window.RTCPeerConnection.prototype.setLocalDescription = function() {\n    if (!arguments.length || !arguments[0].type) {\n      return origSetLocalDescription.apply(this, arguments);\n    }\n    arguments[0] = replaceExternalStreamId(this, arguments[0]);\n    return origSetLocalDescription.apply(this, arguments);\n  };\n\n  // TODO: mangle getStats: https://w3c.github.io/webrtc-stats/#dom-rtcmediastreamstats-streamidentifier\n\n  const origLocalDescription = Object.getOwnPropertyDescriptor(\n      window.RTCPeerConnection.prototype, 'localDescription');\n  Object.defineProperty(window.RTCPeerConnection.prototype,\n      'localDescription', {\n        get() {\n          const description = origLocalDescription.get.apply(this);\n          if (description.type === '') {\n            return description;\n          }\n          return replaceInternalStreamId(this, description);\n        }\n      });\n\n  window.RTCPeerConnection.prototype.removeTrack = function(sender) {\n    if (this.signalingState === 'closed') {\n      throw new DOMException(\n        'The RTCPeerConnection\\'s signalingState is \\'closed\\'.',\n        'InvalidStateError');\n    }\n    // We can not yet check for sender instanceof RTCRtpSender\n    // since we shim RTPSender. So we check if sender._pc is set.\n    if (!sender._pc) {\n      throw new DOMException('Argument 1 of RTCPeerConnection.removeTrack ' +\n          'does not implement interface RTCRtpSender.', 'TypeError');\n    }\n    const isLocal = sender._pc === this;\n    if (!isLocal) {\n      throw new DOMException('Sender was not created by this connection.',\n          'InvalidAccessError');\n    }\n\n    // Search for the native stream the senders track belongs to.\n    this._streams = this._streams || {};\n    let stream;\n    Object.keys(this._streams).forEach(streamid => {\n      const hasTrack = this._streams[streamid].getTracks()\n        .find(track => sender.track === track);\n      if (hasTrack) {\n        stream = this._streams[streamid];\n      }\n    });\n\n    if (stream) {\n      if (stream.getTracks().length === 1) {\n        // if this is the last track of the stream, remove the stream. This\n        // takes care of any shimmed _senders.\n        this.removeStream(this._reverseStreams[stream.id]);\n      } else {\n        // relying on the same odd chrome behaviour as above.\n        stream.removeTrack(sender.track);\n      }\n      this.dispatchEvent(new Event('negotiationneeded'));\n    }\n  };\n}\n\nexport function shimPeerConnection(window) {\n  if (!window.RTCPeerConnection && window.webkitRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.webkitRTCPeerConnection;\n  }\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n\n  const origGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function(selector,\n      successCallback, errorCallback) {\n    const args = arguments;\n\n    // If selector is a function then we are in the old style stats so just\n    // pass back the original getStats format to avoid breaking old users.\n    if (arguments.length > 0 && typeof selector === 'function') {\n      return origGetStats.apply(this, arguments);\n    }\n\n    // When spec-style getStats is supported, return those when called with\n    // either no arguments or the selector argument is null.\n    if (origGetStats.length === 0 && (arguments.length === 0 ||\n        typeof arguments[0] !== 'function')) {\n      return origGetStats.apply(this, []);\n    }\n\n    const fixChromeStats_ = function(response) {\n      const standardReport = {};\n      const reports = response.result();\n      reports.forEach(report => {\n        const standardStats = {\n          id: report.id,\n          timestamp: report.timestamp,\n          type: {\n            localcandidate: 'local-candidate',\n            remotecandidate: 'remote-candidate'\n          }[report.type] || report.type\n        };\n        report.names().forEach(name => {\n          standardStats[name] = report.stat(name);\n        });\n        standardReport[standardStats.id] = standardStats;\n      });\n\n      return standardReport;\n    };\n\n    // shim getStats with maplike support\n    const makeMapStats = function(stats) {\n      return new Map(Object.keys(stats).map(key => [key, stats[key]]));\n    };\n\n    if (arguments.length >= 2) {\n      const successCallbackWrapper_ = function(response) {\n        args[1](makeMapStats(fixChromeStats_(response)));\n      };\n\n      return origGetStats.apply(this, [successCallbackWrapper_,\n        arguments[0]]);\n    }\n\n    // promise-support\n    return new Promise((resolve, reject) => {\n      origGetStats.apply(this, [\n        function(response) {\n          resolve(makeMapStats(fixChromeStats_(response)));\n        }, reject]);\n    }).then(successCallback, errorCallback);\n  };\n\n  // shim implicit creation of RTCSessionDescription/RTCIceCandidate\n  ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n      .forEach(function(method) {\n        const nativeMethod = window.RTCPeerConnection.prototype[method];\n        window.RTCPeerConnection.prototype[method] = function() {\n          arguments[0] = new ((method === 'addIceCandidate') ?\n              window.RTCIceCandidate :\n              window.RTCSessionDescription)(arguments[0]);\n          return nativeMethod.apply(this, arguments);\n        };\n      });\n\n  // support for addIceCandidate(null or undefined)\n  const nativeAddIceCandidate =\n      window.RTCPeerConnection.prototype.addIceCandidate;\n  window.RTCPeerConnection.prototype.addIceCandidate = function() {\n    if (!arguments[0]) {\n      if (arguments[1]) {\n        arguments[1].apply(null);\n      }\n      return Promise.resolve();\n    }\n    return nativeAddIceCandidate.apply(this, arguments);\n  };\n}\n\nexport function fixNegotiationNeeded(window) {\n  utils.wrapPeerConnectionEvent(window, 'negotiationneeded', e => {\n    const pc = e.target;\n    if (pc.signalingState !== 'stable') {\n      return;\n    }\n    return e;\n  });\n}\n","/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\nexport function shimGetDisplayMedia(window, getSourceId) {\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  // getSourceId is a function that returns a promise resolving with\n  // the sourceId of the screen/window/tab to be shared.\n  if (typeof getSourceId !== 'function') {\n    console.error('shimGetDisplayMedia: getSourceId argument is not ' +\n        'a function');\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia = function(constraints) {\n    return getSourceId(constraints)\n      .then(sourceId => {\n        const widthSpecified = constraints.video && constraints.video.width;\n        const heightSpecified = constraints.video && constraints.video.height;\n        const frameRateSpecified = constraints.video &&\n          constraints.video.frameRate;\n        constraints.video = {\n          mandatory: {\n            chromeMediaSource: 'desktop',\n            chromeMediaSourceId: sourceId,\n            maxFrameRate: frameRateSpecified || 3\n          }\n        };\n        if (widthSpecified) {\n          constraints.video.mandatory.maxWidth = widthSpecified;\n        }\n        if (heightSpecified) {\n          constraints.video.mandatory.maxHeight = heightSpecified;\n        }\n        return window.navigator.mediaDevices.getUserMedia(constraints);\n      });\n  };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\nimport * as utils from '../utils.js';\nconst logging = utils.log;\n\nexport function shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  if (!navigator.mediaDevices) {\n    return;\n  }\n\n  const browserDetails = utils.detectBrowser(window);\n\n  const constraintsToChrome_ = function(c) {\n    if (typeof c !== 'object' || c.mandatory || c.optional) {\n      return c;\n    }\n    const cc = {};\n    Object.keys(c).forEach(key => {\n      if (key === 'require' || key === 'advanced' || key === 'mediaSource') {\n        return;\n      }\n      const r = (typeof c[key] === 'object') ? c[key] : {ideal: c[key]};\n      if (r.exact !== undefined && typeof r.exact === 'number') {\n        r.min = r.max = r.exact;\n      }\n      const oldname_ = function(prefix, name) {\n        if (prefix) {\n          return prefix + name.charAt(0).toUpperCase() + name.slice(1);\n        }\n        return (name === 'deviceId') ? 'sourceId' : name;\n      };\n      if (r.ideal !== undefined) {\n        cc.optional = cc.optional || [];\n        let oc = {};\n        if (typeof r.ideal === 'number') {\n          oc[oldname_('min', key)] = r.ideal;\n          cc.optional.push(oc);\n          oc = {};\n          oc[oldname_('max', key)] = r.ideal;\n          cc.optional.push(oc);\n        } else {\n          oc[oldname_('', key)] = r.ideal;\n          cc.optional.push(oc);\n        }\n      }\n      if (r.exact !== undefined && typeof r.exact !== 'number') {\n        cc.mandatory = cc.mandatory || {};\n        cc.mandatory[oldname_('', key)] = r.exact;\n      } else {\n        ['min', 'max'].forEach(mix => {\n          if (r[mix] !== undefined) {\n            cc.mandatory = cc.mandatory || {};\n            cc.mandatory[oldname_(mix, key)] = r[mix];\n          }\n        });\n      }\n    });\n    if (c.advanced) {\n      cc.optional = (cc.optional || []).concat(c.advanced);\n    }\n    return cc;\n  };\n\n  const shimConstraints_ = function(constraints, func) {\n    if (browserDetails.version >= 61) {\n      return func(constraints);\n    }\n    constraints = JSON.parse(JSON.stringify(constraints));\n    if (constraints && typeof constraints.audio === 'object') {\n      const remap = function(obj, a, b) {\n        if (a in obj && !(b in obj)) {\n          obj[b] = obj[a];\n          delete obj[a];\n        }\n      };\n      constraints = JSON.parse(JSON.stringify(constraints));\n      remap(constraints.audio, 'autoGainControl', 'googAutoGainControl');\n      remap(constraints.audio, 'noiseSuppression', 'googNoiseSuppression');\n      constraints.audio = constraintsToChrome_(constraints.audio);\n    }\n    if (constraints && typeof constraints.video === 'object') {\n      // Shim facingMode for mobile & surface pro.\n      let face = constraints.video.facingMode;\n      face = face && ((typeof face === 'object') ? face : {ideal: face});\n      const getSupportedFacingModeLies = browserDetails.version < 66;\n\n      if ((face && (face.exact === 'user' || face.exact === 'environment' ||\n                    face.ideal === 'user' || face.ideal === 'environment')) &&\n          !(navigator.mediaDevices.getSupportedConstraints &&\n            navigator.mediaDevices.getSupportedConstraints().facingMode &&\n            !getSupportedFacingModeLies)) {\n        delete constraints.video.facingMode;\n        let matches;\n        if (face.exact === 'environment' || face.ideal === 'environment') {\n          matches = ['back', 'rear'];\n        } else if (face.exact === 'user' || face.ideal === 'user') {\n          matches = ['front'];\n        }\n        if (matches) {\n          // Look for matches in label, or use last cam for back (typical).\n          return navigator.mediaDevices.enumerateDevices()\n          .then(devices => {\n            devices = devices.filter(d => d.kind === 'videoinput');\n            let dev = devices.find(d => matches.some(match =>\n              d.label.toLowerCase().includes(match)));\n            if (!dev && devices.length && matches.includes('back')) {\n              dev = devices[devices.length - 1]; // more likely the back cam\n            }\n            if (dev) {\n              constraints.video.deviceId = face.exact ? {exact: dev.deviceId} :\n                                                        {ideal: dev.deviceId};\n            }\n            constraints.video = constraintsToChrome_(constraints.video);\n            logging('chrome: ' + JSON.stringify(constraints));\n            return func(constraints);\n          });\n        }\n      }\n      constraints.video = constraintsToChrome_(constraints.video);\n    }\n    logging('chrome: ' + JSON.stringify(constraints));\n    return func(constraints);\n  };\n\n  const shimError_ = function(e) {\n    if (browserDetails.version >= 64) {\n      return e;\n    }\n    return {\n      name: {\n        PermissionDeniedError: 'NotAllowedError',\n        PermissionDismissedError: 'NotAllowedError',\n        InvalidStateError: 'NotAllowedError',\n        DevicesNotFoundError: 'NotFoundError',\n        ConstraintNotSatisfiedError: 'OverconstrainedError',\n        TrackStartError: 'NotReadableError',\n        MediaDeviceFailedDueToShutdown: 'NotAllowedError',\n        MediaDeviceKillSwitchOn: 'NotAllowedError',\n        TabCaptureError: 'AbortError',\n        ScreenCaptureError: 'AbortError',\n        DeviceCaptureError: 'AbortError'\n      }[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint || e.constraintName,\n      toString() {\n        return this.name + (this.message && ': ') + this.message;\n      }\n    };\n  };\n\n  const getUserMedia_ = function(constraints, onSuccess, onError) {\n    shimConstraints_(constraints, c => {\n      navigator.webkitGetUserMedia(c, onSuccess, e => {\n        if (onError) {\n          onError(shimError_(e));\n        }\n      });\n    });\n  };\n  navigator.getUserMedia = getUserMedia_.bind(navigator);\n\n  // Even though Chrome 45 has navigator.mediaDevices and a getUserMedia\n  // function which returns a Promise, it does not accept spec-style\n  // constraints.\n  const origGetUserMedia = navigator.mediaDevices.getUserMedia.\n      bind(navigator.mediaDevices);\n  navigator.mediaDevices.getUserMedia = function(cs) {\n    return shimConstraints_(cs, c => origGetUserMedia(c).then(stream => {\n      if (c.audio && !stream.getAudioTracks().length ||\n          c.video && !stream.getVideoTracks().length) {\n        stream.getTracks().forEach(track => {\n          track.stop();\n        });\n        throw new DOMException('', 'NotFoundError');\n      }\n      return stream;\n    }, e => Promise.reject(shimError_(e))));\n  };\n}\n","/*\n *  Copyright (c) 2017 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport SDPUtils from 'sdp';\nimport * as utils from './utils';\n\nexport function shimRTCIceCandidate(window) {\n  // foundation is arbitrarily chosen as an indicator for full support for\n  // https://w3c.github.io/webrtc-pc/#rtcicecandidate-interface\n  if (!window.RTCIceCandidate || (window.RTCIceCandidate && 'foundation' in\n      window.RTCIceCandidate.prototype)) {\n    return;\n  }\n\n  const NativeRTCIceCandidate = window.RTCIceCandidate;\n  window.RTCIceCandidate = function(args) {\n    // Remove the a= which shouldn't be part of the candidate string.\n    if (typeof args === 'object' && args.candidate &&\n        args.candidate.indexOf('a=') === 0) {\n      args = JSON.parse(JSON.stringify(args));\n      args.candidate = args.candidate.substr(2);\n    }\n\n    if (args.candidate && args.candidate.length) {\n      // Augment the native candidate with the parsed fields.\n      const nativeCandidate = new NativeRTCIceCandidate(args);\n      const parsedCandidate = SDPUtils.parseCandidate(args.candidate);\n      const augmentedCandidate = Object.assign(nativeCandidate,\n          parsedCandidate);\n\n      // Add a serializer that does not serialize the extra attributes.\n      augmentedCandidate.toJSON = function() {\n        return {\n          candidate: augmentedCandidate.candidate,\n          sdpMid: augmentedCandidate.sdpMid,\n          sdpMLineIndex: augmentedCandidate.sdpMLineIndex,\n          usernameFragment: augmentedCandidate.usernameFragment,\n        };\n      };\n      return augmentedCandidate;\n    }\n    return new NativeRTCIceCandidate(args);\n  };\n  window.RTCIceCandidate.prototype = NativeRTCIceCandidate.prototype;\n\n  // Hook up the augmented candidate in onicecandidate and\n  // addEventListener('icecandidate', ...)\n  utils.wrapPeerConnectionEvent(window, 'icecandidate', e => {\n    if (e.candidate) {\n      Object.defineProperty(e, 'candidate', {\n        value: new window.RTCIceCandidate(e.candidate),\n        writable: 'false'\n      });\n    }\n    return e;\n  });\n}\n\nexport function shimMaxMessageSize(window) {\n  if (window.RTCSctpTransport || !window.RTCPeerConnection) {\n    return;\n  }\n  const browserDetails = utils.detectBrowser(window);\n\n  if (!('sctp' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'sctp', {\n      get() {\n        return typeof this._sctp === 'undefined' ? null : this._sctp;\n      }\n    });\n  }\n\n  const sctpInDescription = function(description) {\n    const sections = SDPUtils.splitSections(description.sdp);\n    sections.shift();\n    return sections.some(mediaSection => {\n      const mLine = SDPUtils.parseMLine(mediaSection);\n      return mLine && mLine.kind === 'application'\n          && mLine.protocol.indexOf('SCTP') !== -1;\n    });\n  };\n\n  const getRemoteFirefoxVersion = function(description) {\n    // TODO: Is there a better solution for detecting Firefox?\n    const match = description.sdp.match(/mozilla...THIS_IS_SDPARTA-(\\d+)/);\n    if (match === null || match.length < 2) {\n      return -1;\n    }\n    const version = parseInt(match[1], 10);\n    // Test for NaN (yes, this is ugly)\n    return version !== version ? -1 : version;\n  };\n\n  const getCanSendMaxMessageSize = function(remoteIsFirefox) {\n    // Every implementation we know can send at least 64 KiB.\n    // Note: Although Chrome is technically able to send up to 256 KiB, the\n    //       data does not reach the other peer reliably.\n    //       See: https://bugs.chromium.org/p/webrtc/issues/detail?id=8419\n    let canSendMaxMessageSize = 65536;\n    if (browserDetails.browser === 'firefox') {\n      if (browserDetails.version < 57) {\n        if (remoteIsFirefox === -1) {\n          // FF < 57 will send in 16 KiB chunks using the deprecated PPID\n          // fragmentation.\n          canSendMaxMessageSize = 16384;\n        } else {\n          // However, other FF (and RAWRTC) can reassemble PPID-fragmented\n          // messages. Thus, supporting ~2 GiB when sending.\n          canSendMaxMessageSize = 2147483637;\n        }\n      } else if (browserDetails.version < 60) {\n        // Currently, all FF >= 57 will reset the remote maximum message size\n        // to the default value when a data channel is created at a later\n        // stage. :(\n        // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n        canSendMaxMessageSize =\n          browserDetails.version === 57 ? 65535 : 65536;\n      } else {\n        // FF >= 60 supports sending ~2 GiB\n        canSendMaxMessageSize = 2147483637;\n      }\n    }\n    return canSendMaxMessageSize;\n  };\n\n  const getMaxMessageSize = function(description, remoteIsFirefox) {\n    // Note: 65536 bytes is the default value from the SDP spec. Also,\n    //       every implementation we know supports receiving 65536 bytes.\n    let maxMessageSize = 65536;\n\n    // FF 57 has a slightly incorrect default remote max message size, so\n    // we need to adjust it here to avoid a failure when sending.\n    // See: https://bugzilla.mozilla.org/show_bug.cgi?id=1425697\n    if (browserDetails.browser === 'firefox'\n         && browserDetails.version === 57) {\n      maxMessageSize = 65535;\n    }\n\n    const match = SDPUtils.matchPrefix(description.sdp,\n      'a=max-message-size:');\n    if (match.length > 0) {\n      maxMessageSize = parseInt(match[0].substr(19), 10);\n    } else if (browserDetails.browser === 'firefox' &&\n                remoteIsFirefox !== -1) {\n      // If the maximum message size is not present in the remote SDP and\n      // both local and remote are Firefox, the remote peer can receive\n      // ~2 GiB.\n      maxMessageSize = 2147483637;\n    }\n    return maxMessageSize;\n  };\n\n  const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription = function() {\n    this._sctp = null;\n\n    if (sctpInDescription(arguments[0])) {\n      // Check if the remote is FF.\n      const isFirefox = getRemoteFirefoxVersion(arguments[0]);\n\n      // Get the maximum message size the local peer is capable of sending\n      const canSendMMS = getCanSendMaxMessageSize(isFirefox);\n\n      // Get the maximum message size of the remote peer.\n      const remoteMMS = getMaxMessageSize(arguments[0], isFirefox);\n\n      // Determine final maximum message size\n      let maxMessageSize;\n      if (canSendMMS === 0 && remoteMMS === 0) {\n        maxMessageSize = Number.POSITIVE_INFINITY;\n      } else if (canSendMMS === 0 || remoteMMS === 0) {\n        maxMessageSize = Math.max(canSendMMS, remoteMMS);\n      } else {\n        maxMessageSize = Math.min(canSendMMS, remoteMMS);\n      }\n\n      // Create a dummy RTCSctpTransport object and the 'maxMessageSize'\n      // attribute.\n      const sctp = {};\n      Object.defineProperty(sctp, 'maxMessageSize', {\n        get() {\n          return maxMessageSize;\n        }\n      });\n      this._sctp = sctp;\n    }\n\n    return origSetRemoteDescription.apply(this, arguments);\n  };\n}\n\nexport function shimSendThrowTypeError(window) {\n  if (!(window.RTCPeerConnection &&\n      'createDataChannel' in window.RTCPeerConnection.prototype)) {\n    return;\n  }\n\n  // Note: Although Firefox >= 57 has a native implementation, the maximum\n  //       message size can be reset for all data channels at a later stage.\n  //       See: https://bugzilla.mozilla.org/show_bug.cgi?id=1426831\n\n  function wrapDcSend(dc, pc) {\n    const origDataChannelSend = dc.send;\n    dc.send = function() {\n      const data = arguments[0];\n      const length = data.length || data.size || data.byteLength;\n      if (dc.readyState === 'open' &&\n          pc.sctp && length > pc.sctp.maxMessageSize) {\n        throw new TypeError('Message too large (can send a maximum of ' +\n          pc.sctp.maxMessageSize + ' bytes)');\n      }\n      return origDataChannelSend.apply(dc, arguments);\n    };\n  }\n  const origCreateDataChannel =\n    window.RTCPeerConnection.prototype.createDataChannel;\n  window.RTCPeerConnection.prototype.createDataChannel = function() {\n    const dataChannel = origCreateDataChannel.apply(this, arguments);\n    wrapDcSend(dataChannel, this);\n    return dataChannel;\n  };\n  utils.wrapPeerConnectionEvent(window, 'datachannel', e => {\n    wrapDcSend(e.channel, e.target);\n    return e;\n  });\n}\n\n\n/* shims RTCConnectionState by pretending it is the same as iceConnectionState.\n * See https://bugs.chromium.org/p/webrtc/issues/detail?id=6145#c12\n * for why this is a valid hack in Chrome. In Firefox it is slightly incorrect\n * since DTLS failures would be hidden. See\n * https://bugzilla.mozilla.org/show_bug.cgi?id=1265827\n * for the Firefox tracking bug.\n */\nexport function shimConnectionState(window) {\n  if (!window.RTCPeerConnection ||\n      'connectionState' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  Object.defineProperty(proto, 'connectionState', {\n    get() {\n      return {\n        completed: 'connected',\n        checking: 'connecting'\n      }[this.iceConnectionState] || this.iceConnectionState;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(proto, 'onconnectionstatechange', {\n    get() {\n      return this._onconnectionstatechange || null;\n    },\n    set(cb) {\n      if (this._onconnectionstatechange) {\n        this.removeEventListener('connectionstatechange',\n            this._onconnectionstatechange);\n        delete this._onconnectionstatechange;\n      }\n      if (cb) {\n        this.addEventListener('connectionstatechange',\n            this._onconnectionstatechange = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  ['setLocalDescription', 'setRemoteDescription'].forEach((method) => {\n    const origMethod = proto[method];\n    proto[method] = function() {\n      if (!this._connectionstatechangepoly) {\n        this._connectionstatechangepoly = e => {\n          const pc = e.target;\n          if (pc._lastConnectionState !== pc.connectionState) {\n            pc._lastConnectionState = pc.connectionState;\n            const newEvent = new Event('connectionstatechange', e);\n            pc.dispatchEvent(newEvent);\n          }\n          return e;\n        };\n        this.addEventListener('iceconnectionstatechange',\n          this._connectionstatechangepoly);\n      }\n      return origMethod.apply(this, arguments);\n    };\n  });\n}\n\nexport function removeAllowExtmapMixed(window) {\n  /* remove a=extmap-allow-mixed for Chrome < M71 */\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  const browserDetails = utils.detectBrowser(window);\n  if (browserDetails.browser === 'chrome' && browserDetails.version >= 71) {\n    return;\n  }\n  const nativeSRD = window.RTCPeerConnection.prototype.setRemoteDescription;\n  window.RTCPeerConnection.prototype.setRemoteDescription = function(desc) {\n    if (desc && desc.sdp && desc.sdp.indexOf('\\na=extmap-allow-mixed') !== -1) {\n      desc.sdp = desc.sdp.split('\\n').filter((line) => {\n        return line.trim() !== 'a=extmap-allow-mixed';\n      }).join('\\n');\n    }\n    return nativeSRD.apply(this, arguments);\n  };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\nimport {filterIceServers} from './filtericeservers';\nimport shimRTCPeerConnection from 'rtcpeerconnection-shim';\n\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimPeerConnection(window) {\n  const browserDetails = utils.detectBrowser(window);\n\n  if (window.RTCIceGatherer) {\n    if (!window.RTCIceCandidate) {\n      window.RTCIceCandidate = function(args) {\n        return args;\n      };\n    }\n    if (!window.RTCSessionDescription) {\n      window.RTCSessionDescription = function(args) {\n        return args;\n      };\n    }\n    // this adds an additional event listener to MediaStrackTrack that signals\n    // when a tracks enabled property was changed. Workaround for a bug in\n    // addStream, see below. No longer required in 15025+\n    if (browserDetails.version < 15025) {\n      const origMSTEnabled = Object.getOwnPropertyDescriptor(\n          window.MediaStreamTrack.prototype, 'enabled');\n      Object.defineProperty(window.MediaStreamTrack.prototype, 'enabled', {\n        set(value) {\n          origMSTEnabled.set.call(this, value);\n          const ev = new Event('enabled');\n          ev.enabled = value;\n          this.dispatchEvent(ev);\n        }\n      });\n    }\n  }\n\n  // ORTC defines the DTMF sender a bit different.\n  // https://github.com/w3c/ortc/issues/714\n  if (window.RTCRtpSender && !('dtmf' in window.RTCRtpSender.prototype)) {\n    Object.defineProperty(window.RTCRtpSender.prototype, 'dtmf', {\n      get() {\n        if (this._dtmf === undefined) {\n          if (this.track.kind === 'audio') {\n            this._dtmf = new window.RTCDtmfSender(this);\n          } else if (this.track.kind === 'video') {\n            this._dtmf = null;\n          }\n        }\n        return this._dtmf;\n      }\n    });\n  }\n  // Edge currently only implements the RTCDtmfSender, not the\n  // RTCDTMFSender alias. See http://draft.ortc.org/#rtcdtmfsender2*\n  if (window.RTCDtmfSender && !window.RTCDTMFSender) {\n    window.RTCDTMFSender = window.RTCDtmfSender;\n  }\n\n  const RTCPeerConnectionShim = shimRTCPeerConnection(window,\n      browserDetails.version);\n  window.RTCPeerConnection = function(config) {\n    if (config && config.iceServers) {\n      config.iceServers = filterIceServers(config.iceServers,\n        browserDetails.version);\n      utils.log('ICE servers after filtering:', config.iceServers);\n    }\n    return new RTCPeerConnectionShim(config);\n  };\n  window.RTCPeerConnection.prototype = RTCPeerConnectionShim.prototype;\n}\n\nexport function shimReplaceTrack(window) {\n  // ORTC has replaceTrack -- https://github.com/w3c/ortc/issues/614\n  if (window.RTCRtpSender &&\n      !('replaceTrack' in window.RTCRtpSender.prototype)) {\n    window.RTCRtpSender.prototype.replaceTrack =\n        window.RTCRtpSender.prototype.setTrack;\n  }\n}\n","/*\n *  Copyright (c) 2018 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\n// Edge does not like\n// 1) stun: filtered after 14393 unless ?transport=udp is present\n// 2) turn: that does not have all of turn:host:port?transport=udp\n// 3) turn: with ipv6 addresses\n// 4) turn: occurring muliple times\nexport function filterIceServers(iceServers, edgeVersion) {\n  let hasTurn = false;\n  iceServers = JSON.parse(JSON.stringify(iceServers));\n  return iceServers.filter(server => {\n    if (server && (server.urls || server.url)) {\n      var urls = server.urls || server.url;\n      if (server.url && !server.urls) {\n        utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n      }\n      const isString = typeof urls === 'string';\n      if (isString) {\n        urls = [urls];\n      }\n      urls = urls.filter(url => {\n        // filter STUN unconditionally.\n        if (url.indexOf('stun:') === 0) {\n          return false;\n        }\n\n        const validTurn = url.startsWith('turn') &&\n            !url.startsWith('turn:[') &&\n            url.includes('transport=udp');\n        if (validTurn && !hasTurn) {\n          hasTurn = true;\n          return true;\n        }\n        return validTurn && !hasTurn;\n      });\n\n      delete server.url;\n      server.urls = isString ? urls[0] : urls;\n      return !!urls.length;\n    }\n  });\n}\n","/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nexport function shimGetDisplayMedia(window) {\n  if (!('getDisplayMedia' in window.navigator)) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia =\n    window.navigator.getDisplayMedia.bind(window.navigator.mediaDevices);\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nexport function shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  const shimError_ = function(e) {\n    return {\n      name: {PermissionDeniedError: 'NotAllowedError'}[e.name] || e.name,\n      message: e.message,\n      constraint: e.constraint,\n      toString() {\n        return this.name;\n      }\n    };\n  };\n\n  // getUserMedia error shim.\n  const origGetUserMedia = navigator.mediaDevices.getUserMedia.\n      bind(navigator.mediaDevices);\n  navigator.mediaDevices.getUserMedia = function(c) {\n    return origGetUserMedia(c).catch(e => Promise.reject(shimError_(e)));\n  };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\nexport {shimGetUserMedia} from './getusermedia';\nexport {shimGetDisplayMedia} from './getdisplaymedia';\n\nexport function shimOnTrack(window) {\n  if (typeof window === 'object' && window.RTCTrackEvent &&\n      ('receiver' in window.RTCTrackEvent.prototype) &&\n      !('transceiver' in window.RTCTrackEvent.prototype)) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nexport function shimPeerConnection(window) {\n  const browserDetails = utils.detectBrowser(window);\n\n  if (typeof window !== 'object' ||\n      !(window.RTCPeerConnection || window.mozRTCPeerConnection)) {\n    return; // probably media.peerconnection.enabled=false in about:config\n  }\n  if (!window.RTCPeerConnection && window.mozRTCPeerConnection) {\n    // very basic support for old versions.\n    window.RTCPeerConnection = window.mozRTCPeerConnection;\n  }\n\n  // shim away need for obsolete RTCIceCandidate/RTCSessionDescription.\n  ['setLocalDescription', 'setRemoteDescription', 'addIceCandidate']\n      .forEach(function(method) {\n        const nativeMethod = window.RTCPeerConnection.prototype[method];\n        window.RTCPeerConnection.prototype[method] = function() {\n          arguments[0] = new ((method === 'addIceCandidate') ?\n              window.RTCIceCandidate :\n              window.RTCSessionDescription)(arguments[0]);\n          return nativeMethod.apply(this, arguments);\n        };\n      });\n\n  // support for addIceCandidate(null or undefined)\n  const nativeAddIceCandidate =\n      window.RTCPeerConnection.prototype.addIceCandidate;\n  window.RTCPeerConnection.prototype.addIceCandidate = function() {\n    if (!arguments[0]) {\n      if (arguments[1]) {\n        arguments[1].apply(null);\n      }\n      return Promise.resolve();\n    }\n    return nativeAddIceCandidate.apply(this, arguments);\n  };\n\n  const modernStatsTypes = {\n    inboundrtp: 'inbound-rtp',\n    outboundrtp: 'outbound-rtp',\n    candidatepair: 'candidate-pair',\n    localcandidate: 'local-candidate',\n    remotecandidate: 'remote-candidate'\n  };\n\n  const nativeGetStats = window.RTCPeerConnection.prototype.getStats;\n  window.RTCPeerConnection.prototype.getStats = function(\n    selector,\n    onSucc,\n    onErr\n  ) {\n    return nativeGetStats.apply(this, [selector || null])\n      .then(stats => {\n        if (browserDetails.version < 53 && !onSucc) {\n          // Shim only promise getStats with spec-hyphens in type names\n          // Leave callback version alone; misc old uses of forEach before Map\n          try {\n            stats.forEach(stat => {\n              stat.type = modernStatsTypes[stat.type] || stat.type;\n            });\n          } catch (e) {\n            if (e.name !== 'TypeError') {\n              throw e;\n            }\n            // Avoid TypeError: \"type\" is read-only, in old versions. 34-43ish\n            stats.forEach((stat, i) => {\n              stats.set(i, Object.assign({}, stat, {\n                type: modernStatsTypes[stat.type] || stat.type\n              }));\n            });\n          }\n        }\n        return stats;\n      })\n      .then(onSucc, onErr);\n  };\n}\n\nexport function shimSenderGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpSender.prototype) {\n    return;\n  }\n  const origGetSenders = window.RTCPeerConnection.prototype.getSenders;\n  if (origGetSenders) {\n    window.RTCPeerConnection.prototype.getSenders = function() {\n      const senders = origGetSenders.apply(this, []);\n      senders.forEach(sender => sender._pc = this);\n      return senders;\n    };\n  }\n\n  const origAddTrack = window.RTCPeerConnection.prototype.addTrack;\n  if (origAddTrack) {\n    window.RTCPeerConnection.prototype.addTrack = function() {\n      const sender = origAddTrack.apply(this, arguments);\n      sender._pc = this;\n      return sender;\n    };\n  }\n  window.RTCRtpSender.prototype.getStats = function() {\n    return this.track ? this._pc.getStats(this.track) :\n        Promise.resolve(new Map());\n  };\n}\n\nexport function shimReceiverGetStats(window) {\n  if (!(typeof window === 'object' && window.RTCPeerConnection &&\n      window.RTCRtpSender)) {\n    return;\n  }\n  if (window.RTCRtpSender && 'getStats' in window.RTCRtpReceiver.prototype) {\n    return;\n  }\n  const origGetReceivers = window.RTCPeerConnection.prototype.getReceivers;\n  if (origGetReceivers) {\n    window.RTCPeerConnection.prototype.getReceivers = function() {\n      const receivers = origGetReceivers.apply(this, []);\n      receivers.forEach(receiver => receiver._pc = this);\n      return receivers;\n    };\n  }\n  utils.wrapPeerConnectionEvent(window, 'track', e => {\n    e.receiver._pc = e.srcElement;\n    return e;\n  });\n  window.RTCRtpReceiver.prototype.getStats = function() {\n    return this._pc.getStats(this.track);\n  };\n}\n\nexport function shimRemoveStream(window) {\n  if (!window.RTCPeerConnection ||\n      'removeStream' in window.RTCPeerConnection.prototype) {\n    return;\n  }\n  window.RTCPeerConnection.prototype.removeStream = function(stream) {\n    utils.deprecated('removeStream', 'removeTrack');\n    this.getSenders().forEach(sender => {\n      if (sender.track && stream.getTracks().includes(sender.track)) {\n        this.removeTrack(sender);\n      }\n    });\n  };\n}\n\nexport function shimRTCDataChannel(window) {\n  // rename DataChannel to RTCDataChannel (native fix in FF60):\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=1173851\n  if (window.DataChannel && !window.RTCDataChannel) {\n    window.RTCDataChannel = window.DataChannel;\n  }\n}\n","/*\n *  Copyright (c) 2018 The adapter.js project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nexport function shimGetDisplayMedia(window, preferredMediaSource) {\n  if (window.navigator.mediaDevices &&\n    'getDisplayMedia' in window.navigator.mediaDevices) {\n    return;\n  }\n  if (!(window.navigator.mediaDevices)) {\n    return;\n  }\n  window.navigator.mediaDevices.getDisplayMedia = function(constraints) {\n    if (!(constraints && constraints.video)) {\n      const err = new DOMException('getDisplayMedia without video ' +\n          'constraints is undefined');\n      err.name = 'NotFoundError';\n      // from https://heycam.github.io/webidl/#idl-DOMException-error-names\n      err.code = 8;\n      return Promise.reject(err);\n    }\n    if (constraints.video === true) {\n      constraints.video = {mediaSource: preferredMediaSource};\n    } else {\n      constraints.video.mediaSource = preferredMediaSource;\n    }\n    return window.navigator.mediaDevices.getUserMedia(constraints);\n  };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n/* eslint-env node */\n'use strict';\n\nimport * as utils from '../utils';\n\nexport function shimGetUserMedia(window) {\n  const browserDetails = utils.detectBrowser(window);\n  const navigator = window && window.navigator;\n  const MediaStreamTrack = window && window.MediaStreamTrack;\n\n  navigator.getUserMedia = function(constraints, onSuccess, onError) {\n    // Replace Firefox 44+'s deprecation warning with unprefixed version.\n    utils.deprecated('navigator.getUserMedia',\n        'navigator.mediaDevices.getUserMedia');\n    navigator.mediaDevices.getUserMedia(constraints).then(onSuccess, onError);\n  };\n\n  if (!(browserDetails.version > 55 &&\n      'autoGainControl' in navigator.mediaDevices.getSupportedConstraints())) {\n    const remap = function(obj, a, b) {\n      if (a in obj && !(b in obj)) {\n        obj[b] = obj[a];\n        delete obj[a];\n      }\n    };\n\n    const nativeGetUserMedia = navigator.mediaDevices.getUserMedia.\n        bind(navigator.mediaDevices);\n    navigator.mediaDevices.getUserMedia = function(c) {\n      if (typeof c === 'object' && typeof c.audio === 'object') {\n        c = JSON.parse(JSON.stringify(c));\n        remap(c.audio, 'autoGainControl', 'mozAutoGainControl');\n        remap(c.audio, 'noiseSuppression', 'mozNoiseSuppression');\n      }\n      return nativeGetUserMedia(c);\n    };\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.getSettings) {\n      const nativeGetSettings = MediaStreamTrack.prototype.getSettings;\n      MediaStreamTrack.prototype.getSettings = function() {\n        const obj = nativeGetSettings.apply(this, arguments);\n        remap(obj, 'mozAutoGainControl', 'autoGainControl');\n        remap(obj, 'mozNoiseSuppression', 'noiseSuppression');\n        return obj;\n      };\n    }\n\n    if (MediaStreamTrack && MediaStreamTrack.prototype.applyConstraints) {\n      const nativeApplyConstraints =\n        MediaStreamTrack.prototype.applyConstraints;\n      MediaStreamTrack.prototype.applyConstraints = function(c) {\n        if (this.kind === 'audio' && typeof c === 'object') {\n          c = JSON.parse(JSON.stringify(c));\n          remap(c, 'autoGainControl', 'mozAutoGainControl');\n          remap(c, 'noiseSuppression', 'mozNoiseSuppression');\n        }\n        return nativeApplyConstraints.apply(this, [c]);\n      };\n    }\n  }\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n'use strict';\nimport * as utils from '../utils';\n\nexport function shimLocalStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getLocalStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getLocalStreams = function() {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      return this._localStreams;\n    };\n  }\n  if (!('addStream' in window.RTCPeerConnection.prototype)) {\n    const _addTrack = window.RTCPeerConnection.prototype.addTrack;\n    window.RTCPeerConnection.prototype.addStream = function(stream) {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      if (!this._localStreams.includes(stream)) {\n        this._localStreams.push(stream);\n      }\n      stream.getTracks().forEach(track => _addTrack.call(this, track, stream));\n    };\n\n    window.RTCPeerConnection.prototype.addTrack = function(track, stream) {\n      if (stream) {\n        if (!this._localStreams) {\n          this._localStreams = [stream];\n        } else if (!this._localStreams.includes(stream)) {\n          this._localStreams.push(stream);\n        }\n      }\n      return _addTrack.call(this, track, stream);\n    };\n  }\n  if (!('removeStream' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.removeStream = function(stream) {\n      if (!this._localStreams) {\n        this._localStreams = [];\n      }\n      const index = this._localStreams.indexOf(stream);\n      if (index === -1) {\n        return;\n      }\n      this._localStreams.splice(index, 1);\n      const tracks = stream.getTracks();\n      this.getSenders().forEach(sender => {\n        if (tracks.includes(sender.track)) {\n          this.removeTrack(sender);\n        }\n      });\n    };\n  }\n}\n\nexport function shimRemoteStreamsAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  if (!('getRemoteStreams' in window.RTCPeerConnection.prototype)) {\n    window.RTCPeerConnection.prototype.getRemoteStreams = function() {\n      return this._remoteStreams ? this._remoteStreams : [];\n    };\n  }\n  if (!('onaddstream' in window.RTCPeerConnection.prototype)) {\n    Object.defineProperty(window.RTCPeerConnection.prototype, 'onaddstream', {\n      get() {\n        return this._onaddstream;\n      },\n      set(f) {\n        if (this._onaddstream) {\n          this.removeEventListener('addstream', this._onaddstream);\n          this.removeEventListener('track', this._onaddstreampoly);\n        }\n        this.addEventListener('addstream', this._onaddstream = f);\n        this.addEventListener('track', this._onaddstreampoly = (e) => {\n          e.streams.forEach(stream => {\n            if (!this._remoteStreams) {\n              this._remoteStreams = [];\n            }\n            if (this._remoteStreams.includes(stream)) {\n              return;\n            }\n            this._remoteStreams.push(stream);\n            const event = new Event('addstream');\n            event.stream = stream;\n            this.dispatchEvent(event);\n          });\n        });\n      }\n    });\n    const origSetRemoteDescription =\n      window.RTCPeerConnection.prototype.setRemoteDescription;\n    window.RTCPeerConnection.prototype.setRemoteDescription = function() {\n      const pc = this;\n      if (!this._onaddstreampoly) {\n        this.addEventListener('track', this._onaddstreampoly = function(e) {\n          e.streams.forEach(stream => {\n            if (!pc._remoteStreams) {\n              pc._remoteStreams = [];\n            }\n            if (pc._remoteStreams.indexOf(stream) >= 0) {\n              return;\n            }\n            pc._remoteStreams.push(stream);\n            const event = new Event('addstream');\n            event.stream = stream;\n            pc.dispatchEvent(event);\n          });\n        });\n      }\n      return origSetRemoteDescription.apply(pc, arguments);\n    };\n  }\n}\n\nexport function shimCallbacksAPI(window) {\n  if (typeof window !== 'object' || !window.RTCPeerConnection) {\n    return;\n  }\n  const prototype = window.RTCPeerConnection.prototype;\n  const createOffer = prototype.createOffer;\n  const createAnswer = prototype.createAnswer;\n  const setLocalDescription = prototype.setLocalDescription;\n  const setRemoteDescription = prototype.setRemoteDescription;\n  const addIceCandidate = prototype.addIceCandidate;\n\n  prototype.createOffer = function(successCallback, failureCallback) {\n    const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n    const promise = createOffer.apply(this, [options]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n\n  prototype.createAnswer = function(successCallback, failureCallback) {\n    const options = (arguments.length >= 2) ? arguments[2] : arguments[0];\n    const promise = createAnswer.apply(this, [options]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n\n  let withCallback = function(description, successCallback, failureCallback) {\n    const promise = setLocalDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setLocalDescription = withCallback;\n\n  withCallback = function(description, successCallback, failureCallback) {\n    const promise = setRemoteDescription.apply(this, [description]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.setRemoteDescription = withCallback;\n\n  withCallback = function(candidate, successCallback, failureCallback) {\n    const promise = addIceCandidate.apply(this, [candidate]);\n    if (!failureCallback) {\n      return promise;\n    }\n    promise.then(successCallback, failureCallback);\n    return Promise.resolve();\n  };\n  prototype.addIceCandidate = withCallback;\n}\n\nexport function shimGetUserMedia(window) {\n  const navigator = window && window.navigator;\n\n  if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n    // shim not needed in Safari 12.1\n    const mediaDevices = navigator.mediaDevices;\n    const _getUserMedia = mediaDevices.getUserMedia.bind(mediaDevices);\n    navigator.mediaDevices.getUserMedia = (constraints) => {\n      return _getUserMedia(shimConstraints(constraints));\n    };\n  }\n\n  if (!navigator.getUserMedia && navigator.mediaDevices &&\n    navigator.mediaDevices.getUserMedia) {\n    navigator.getUserMedia = function(constraints, cb, errcb) {\n      navigator.mediaDevices.getUserMedia(constraints)\n      .then(cb, errcb);\n    }.bind(navigator);\n  }\n}\n\nexport function shimConstraints(constraints) {\n  if (constraints && constraints.video !== undefined) {\n    return Object.assign({},\n      constraints,\n      {video: utils.compactObject(constraints.video)}\n    );\n  }\n\n  return constraints;\n}\n\nexport function shimRTCIceServerUrls(window) {\n  // migrate from non-spec RTCIceServer.url to RTCIceServer.urls\n  const OrigPeerConnection = window.RTCPeerConnection;\n  window.RTCPeerConnection = function(pcConfig, pcConstraints) {\n    if (pcConfig && pcConfig.iceServers) {\n      const newIceServers = [];\n      for (let i = 0; i < pcConfig.iceServers.length; i++) {\n        let server = pcConfig.iceServers[i];\n        if (!server.hasOwnProperty('urls') &&\n            server.hasOwnProperty('url')) {\n          utils.deprecated('RTCIceServer.url', 'RTCIceServer.urls');\n          server = JSON.parse(JSON.stringify(server));\n          server.urls = server.url;\n          delete server.url;\n          newIceServers.push(server);\n        } else {\n          newIceServers.push(pcConfig.iceServers[i]);\n        }\n      }\n      pcConfig.iceServers = newIceServers;\n    }\n    return new OrigPeerConnection(pcConfig, pcConstraints);\n  };\n  window.RTCPeerConnection.prototype = OrigPeerConnection.prototype;\n  // wrap static methods. Currently just generateCertificate.\n  if ('generateCertificate' in window.RTCPeerConnection) {\n    Object.defineProperty(window.RTCPeerConnection, 'generateCertificate', {\n      get() {\n        return OrigPeerConnection.generateCertificate;\n      }\n    });\n  }\n}\n\nexport function shimTrackEventTransceiver(window) {\n  // Add event.transceiver member over deprecated event.receiver\n  if (typeof window === 'object' && window.RTCPeerConnection &&\n      ('receiver' in window.RTCTrackEvent.prototype) &&\n      // can't check 'transceiver' in window.RTCTrackEvent.prototype, as it is\n      // defined for some reason even when window.RTCTransceiver is not.\n      !window.RTCTransceiver) {\n    Object.defineProperty(window.RTCTrackEvent.prototype, 'transceiver', {\n      get() {\n        return {receiver: this.receiver};\n      }\n    });\n  }\n}\n\nexport function shimCreateOfferLegacy(window) {\n  const origCreateOffer = window.RTCPeerConnection.prototype.createOffer;\n  window.RTCPeerConnection.prototype.createOffer = function(offerOptions) {\n    if (offerOptions) {\n      if (typeof offerOptions.offerToReceiveAudio !== 'undefined') {\n        // support bit values\n        offerOptions.offerToReceiveAudio = !!offerOptions.offerToReceiveAudio;\n      }\n      const audioTransceiver = this.getTransceivers().find(transceiver =>\n        transceiver.sender.track &&\n        transceiver.sender.track.kind === 'audio');\n      if (offerOptions.offerToReceiveAudio === false && audioTransceiver) {\n        if (audioTransceiver.direction === 'sendrecv') {\n          if (audioTransceiver.setDirection) {\n            audioTransceiver.setDirection('sendonly');\n          } else {\n            audioTransceiver.direction = 'sendonly';\n          }\n        } else if (audioTransceiver.direction === 'recvonly') {\n          if (audioTransceiver.setDirection) {\n            audioTransceiver.setDirection('inactive');\n          } else {\n            audioTransceiver.direction = 'inactive';\n          }\n        }\n      } else if (offerOptions.offerToReceiveAudio === true &&\n          !audioTransceiver) {\n        this.addTransceiver('audio');\n      }\n\n      if (typeof offerOptions.offerToReceiveVideo !== 'undefined') {\n        // support bit values\n        offerOptions.offerToReceiveVideo = !!offerOptions.offerToReceiveVideo;\n      }\n      const videoTransceiver = this.getTransceivers().find(transceiver =>\n        transceiver.sender.track &&\n        transceiver.sender.track.kind === 'video');\n      if (offerOptions.offerToReceiveVideo === false && videoTransceiver) {\n        if (videoTransceiver.direction === 'sendrecv') {\n          if (videoTransceiver.setDirection) {\n            videoTransceiver.setDirection('sendonly');\n          } else {\n            videoTransceiver.direction = 'sendonly';\n          }\n        } else if (videoTransceiver.direction === 'recvonly') {\n          if (videoTransceiver.setDirection) {\n            videoTransceiver.setDirection('inactive');\n          } else {\n            videoTransceiver.direction = 'inactive';\n          }\n        }\n      } else if (offerOptions.offerToReceiveVideo === true &&\n          !videoTransceiver) {\n        this.addTransceiver('video');\n      }\n    }\n    return origCreateOffer.apply(this, arguments);\n  };\n}\n","/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n'use strict';\n\nlet logDisabled_ = true;\nlet deprecationWarnings_ = true;\n\n/**\n * Extract browser version out of the provided user agent string.\n *\n * @param {!string} uastring userAgent string.\n * @param {!string} expr Regular expression used as match criteria.\n * @param {!number} pos position in the version string to be returned.\n * @return {!number} browser version.\n */\nexport function extractVersion(uastring, expr, pos) {\n  const match = uastring.match(expr);\n  return match && match.length >= pos && parseInt(match[pos], 10);\n}\n\n// Wraps the peerconnection event eventNameToWrap in a function\n// which returns the modified event object (or false to prevent\n// the event).\nexport function wrapPeerConnectionEvent(window, eventNameToWrap, wrapper) {\n  if (!window.RTCPeerConnection) {\n    return;\n  }\n  const proto = window.RTCPeerConnection.prototype;\n  const nativeAddEventListener = proto.addEventListener;\n  proto.addEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap) {\n      return nativeAddEventListener.apply(this, arguments);\n    }\n    const wrappedCallback = (e) => {\n      const modifiedEvent = wrapper(e);\n      if (modifiedEvent) {\n        cb(modifiedEvent);\n      }\n    };\n    this._eventMap = this._eventMap || {};\n    this._eventMap[cb] = wrappedCallback;\n    return nativeAddEventListener.apply(this, [nativeEventName,\n      wrappedCallback]);\n  };\n\n  const nativeRemoveEventListener = proto.removeEventListener;\n  proto.removeEventListener = function(nativeEventName, cb) {\n    if (nativeEventName !== eventNameToWrap || !this._eventMap\n        || !this._eventMap[cb]) {\n      return nativeRemoveEventListener.apply(this, arguments);\n    }\n    const unwrappedCb = this._eventMap[cb];\n    delete this._eventMap[cb];\n    return nativeRemoveEventListener.apply(this, [nativeEventName,\n      unwrappedCb]);\n  };\n\n  Object.defineProperty(proto, 'on' + eventNameToWrap, {\n    get() {\n      return this['_on' + eventNameToWrap];\n    },\n    set(cb) {\n      if (this['_on' + eventNameToWrap]) {\n        this.removeEventListener(eventNameToWrap,\n            this['_on' + eventNameToWrap]);\n        delete this['_on' + eventNameToWrap];\n      }\n      if (cb) {\n        this.addEventListener(eventNameToWrap,\n            this['_on' + eventNameToWrap] = cb);\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n}\n\nexport function disableLog(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  logDisabled_ = bool;\n  return (bool) ? 'adapter.js logging disabled' :\n      'adapter.js logging enabled';\n}\n\n/**\n * Disable or enable deprecation warnings\n * @param {!boolean} bool set to true to disable warnings.\n */\nexport function disableWarnings(bool) {\n  if (typeof bool !== 'boolean') {\n    return new Error('Argument type: ' + typeof bool +\n        '. Please use a boolean.');\n  }\n  deprecationWarnings_ = !bool;\n  return 'adapter.js deprecation warnings ' + (bool ? 'disabled' : 'enabled');\n}\n\nexport function log() {\n  if (typeof window === 'object') {\n    if (logDisabled_) {\n      return;\n    }\n    if (typeof console !== 'undefined' && typeof console.log === 'function') {\n      console.log.apply(console, arguments);\n    }\n  }\n}\n\n/**\n * Shows a deprecation warning suggesting the modern and spec-compatible API.\n */\nexport function deprecated(oldMethod, newMethod) {\n  if (!deprecationWarnings_) {\n    return;\n  }\n  console.warn(oldMethod + ' is deprecated, please use ' + newMethod +\n      ' instead.');\n}\n\n/**\n * Browser detector.\n *\n * @return {object} result containing browser and version\n *     properties.\n */\nexport function detectBrowser(window) {\n  const {navigator} = window;\n\n  // Returned result object.\n  const result = {browser: null, version: null};\n\n  // Fail early if it's not a browser\n  if (typeof window === 'undefined' || !window.navigator) {\n    result.browser = 'Not a browser.';\n    return result;\n  }\n\n  if (navigator.mozGetUserMedia) { // Firefox.\n    result.browser = 'firefox';\n    result.version = extractVersion(navigator.userAgent,\n        /Firefox\\/(\\d+)\\./, 1);\n  } else if (navigator.webkitGetUserMedia) {\n    // Chrome, Chromium, Webview, Opera.\n    // Version matches Chrome/WebRTC version.\n    result.browser = 'chrome';\n    result.version = extractVersion(navigator.userAgent,\n        /Chrom(e|ium)\\/(\\d+)\\./, 2);\n  } else if (navigator.mediaDevices &&\n      navigator.userAgent.match(/Edge\\/(\\d+).(\\d+)$/)) { // Edge.\n    result.browser = 'edge';\n    result.version = extractVersion(navigator.userAgent,\n        /Edge\\/(\\d+).(\\d+)$/, 2);\n  } else if (window.RTCPeerConnection &&\n      navigator.userAgent.match(/AppleWebKit\\/(\\d+)\\./)) { // Safari.\n    result.browser = 'safari';\n    result.version = extractVersion(navigator.userAgent,\n        /AppleWebKit\\/(\\d+)\\./, 1);\n  } else { // Default fallthrough: not supported.\n    result.browser = 'Not a supported browser.';\n    return result;\n  }\n\n  return result;\n}\n\n/**\n * Remove all empty objects and undefined values\n * from a nested object -- an enhanced and vanilla version\n * of Lodash's `compact`.\n */\nexport function compactObject(data) {\n  if (typeof data !== 'object') {\n    return data;\n  }\n\n  return Object.keys(data).reduce(function(accumulator, key) {\n    const isObject = typeof data[key] === 'object';\n    const value = isObject ? compactObject(data[key]) : data[key];\n    const isEmptyObject = isObject && !Object.keys(value).length;\n    if (value === undefined || isEmptyObject) {\n      return accumulator;\n    }\n\n    return Object.assign(accumulator, {[key]: value});\n  }, {});\n}\n","'use strict';\n\nvar alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_'.split('')\n  , length = 64\n  , map = {}\n  , seed = 0\n  , i = 0\n  , prev;\n\n/**\n * Return a string representing the specified number.\n *\n * @param {Number} num The number to convert.\n * @returns {String} The string representation of the number.\n * @api public\n */\nfunction encode(num) {\n  var encoded = '';\n\n  do {\n    encoded = alphabet[num % length] + encoded;\n    num = Math.floor(num / length);\n  } while (num > 0);\n\n  return encoded;\n}\n\n/**\n * Return the integer value specified by the given string.\n *\n * @param {String} str The string to convert.\n * @returns {Number} The integer value represented by the string.\n * @api public\n */\nfunction decode(str) {\n  var decoded = 0;\n\n  for (i = 0; i < str.length; i++) {\n    decoded = decoded * length + map[str.charAt(i)];\n  }\n\n  return decoded;\n}\n\n/**\n * Yeast: A tiny growing id generator.\n *\n * @returns {String} A unique id.\n * @api public\n */\nfunction yeast() {\n  var now = encode(+new Date());\n\n  if (now !== prev) return seed = 0, prev = now;\n  return now +'.'+ encode(seed++);\n}\n\n//\n// Map each character to its index.\n//\nfor (; i < length; i++) map[alphabet[i]] = i;\n\n//\n// Expose the `yeast`, `encode` and `decode` functions.\n//\nyeast.encode = encode;\nyeast.decode = decode;\nmodule.exports = yeast;\n","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _webcom = _interopRequireDefault(require(\"webcom/webcom\"));\n\nvar _Browser = _interopRequireDefault(require(\"./definitions/Browser\"));\n\nvar _StreamTypes = _interopRequireDefault(require(\"./definitions/StreamTypes\"));\n\nvar Events = _interopRequireWildcard(require(\"./definitions/Events\"));\n\nvar _Codec = require(\"./definitions/Codec\");\n\nvar _User = _interopRequireDefault(require(\"./core/User\"));\n\nvar _Room = _interopRequireDefault(require(\"./core/Room\"));\n\nvar _Invite = _interopRequireDefault(require(\"./core/Invite\"));\n\nvar DataSync = _interopRequireWildcard(require(\"./core/util/DataSync\"));\n\nvar _cache = _interopRequireDefault(require(\"./core/util/cache\"));\n\nvar Log = _interopRequireWildcard(require(\"./core/util/Log\"));\n\nvar _Media = _interopRequireDefault(require(\"./core/util/Media\"));\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * Entry point for Reach SDK\n * @public\n */\nvar Reach =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Create Reach's data structure where the url points to (might not be the root of your namespace)\n   * @public\n   * @param {string|Webcom} url The url of your namespace or an existing Webcom reference.\n   * @param {Config} [cfg] Reach configuration. You can pass constraints here\n   * @example <caption>Init with the default configuration</caption>\n   * var myReach = new Reach('https://io.datasync.orange.com/base/<my_namespace>');\n   * @example <caption>Init and set constraints for SD video and logLevel to 'info'</caption>\n   * var myReach = new Reach('https://io.datasync.orange.com/base/<my_namespace>', {\n   *  constraints: Reach.media.constraints('SD'),\n   *  logLevel: 'INFO'\n   * });\n   */\n  function Reach(url) {\n    var cfg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n    _classCallCheck(this, Reach);\n\n    // Set shared reference\n    _cache.default.base = url; // Set shared configuration\n\n    _cache.default.config = cfg;\n    /**\n     * List of declared callbacks\n     * @type {{}}\n     * @private\n     */\n\n    this._callbacks = {};\n  }\n  /**\n   * Get versions of SDK and DataModel.\n   * The Schema version can be used to determine compatibility with the Android & iOS SDK.\n   * @return {{sdk: string, schema: string}}\n   */\n\n\n  _createClass(Reach, [{\n    key: \"register\",\n\n    /**\n     * Register & Sign-in as a new user\n     * @param {string} email The email of the user\n     * @param {string} password The password of the user\n     * @param {string} [name] The display name of the user (defaults to email)\n     * @param {boolean} [rememberMe=false] keep user connected ?\n     * @returns {Promise<User>}\n     */\n    value: function register(email, password, name, rememberMe) {\n      var _this = this;\n\n      return _cache.default.base.createUser(email, password).then(function (auth) {\n        if (auth) {\n          return _this.login(email, password, name || email, rememberMe);\n        }\n\n        return null;\n      }).catch(Log.r('Reach~register'));\n    }\n    /**\n     * Sign-in an existing user\n     * @param {string} email The email of the user\n     * @param {string} password The password of the user\n     * @param {string} [name] The name of the user. Defaults to the value in base.\n     * @param {boolean} [rememberMe=false] keep user connected ?\n     * @returns {Promise<User>}\n     */\n\n  }, {\n    key: \"login\",\n    value: function login(email, password, name) {\n      var rememberMe = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n      // Force logout to bypass Webcom bug\n      var p = Promise.resolve();\n\n      if (this.current && this.current.email !== email) {\n        p = this.logout();\n      }\n\n      return p.then(function () {\n        return _cache.default.base.authWithPassword({\n          email: email,\n          password: password,\n          rememberMe: rememberMe\n        });\n      }).then(function (auth) {\n        return _User.default.init(auth, name);\n      }).then(function (u) {\n        _cache.default.user = u;\n        return u;\n      }).catch(Log.r('Reach~login'));\n    }\n    /**\n     * Resume previous session\n     * @returns {Promise<User>}\n     */\n\n  }, {\n    key: \"resume\",\n    value: function resume() {\n      var _this2 = this;\n\n      return new Promise(function (resolve, reject) {\n        // Resume session\n        if (_webcom.default.INTERNAL.PersistentStorage.get('session')) {\n          _cache.default.base.resume(function (error, auth) {\n            if (auth && !_this2.current) {\n              _User.default.init(auth).then(function (u) {\n                _cache.default.user = u;\n                resolve(u);\n              }, reject);\n            }\n          });\n        } else {\n          reject(new Error('No session to resume'));\n        }\n      });\n    }\n    /**\n     * Sign-in an anonymous user\n     * @param {string} name The display name of the user\n     * @returns {Promise<User>}\n     */\n\n  }, {\n    key: \"anonymous\",\n    value: function anonymous(name) {\n      // Force logout to bypass Webcom bug\n      var p = Promise.resolve();\n\n      if (this.current && (!this.current.anonymous || this.current.name !== name)) {\n        p = this.logout();\n      }\n\n      return p.then(function () {\n        return _cache.default.base.authAnonymously();\n      }).then(function (auth) {\n        return _User.default.init(auth, name);\n      }).then(function (u) {\n        _cache.default.user = u;\n        return u;\n      }).catch(Log.r('Reach~anonymous'));\n    }\n    /**\n     * Logout current user\n     * @returns {Promise}\n     */\n\n  }, {\n    key: \"logout\",\n    value: function logout() {\n      var _this3 = this;\n\n      return new Promise(function (resolve, reject) {\n        var p = Promise.resolve();\n\n        if (_this3.current != null) {\n          p = _User.default.disconnect(_this3.current);\n        }\n\n        p.then(function () {\n          Object.keys(_this3._callbacks).forEach(function (event) {\n            return DataSync.off(Events.reach.toPath(event)(_cache.default.user), event);\n          });\n\n          _cache.default.base.logout(function () {\n            _cache.default.user = null;\n            resolve();\n          });\n        }).catch(function (e) {\n          Log.e(e);\n          reject(e);\n        });\n      });\n    }\n    /**\n     * Get the list of registered users\n     * @ignore If your users base is pretty large, this method is impossible.\n     * @param {boolean} [include=false] Include current user in user's list\n     * @return {Promise<User[], Error>}\n     */\n\n  }, {\n    key: \"users\",\n    value: function users(include) {\n      var _this4 = this;\n\n      if (!this.current) {\n        return Promise.reject(new Error('Only an authenticated user can list Users.'));\n      }\n\n      return DataSync.list('users', _User.default).then(function (users) {\n        return !include && users && _this4.current ? users.filter(function (user) {\n          return user.uid !== _this4.current.uid;\n        }) : users;\n      }).catch(Log.r('Reach~users'));\n    }\n    /**\n     * Get the list of rooms\n     * @ignore If your users base is pretty large, this method is impossible.\n     * @return {Promise<Room[], Error>}\n     */\n\n  }, {\n    key: \"rooms\",\n    value: function rooms() {\n      if (!this.current) {\n        return Promise.reject(new Error('Only an authenticated user can list Rooms.'));\n      }\n\n      return DataSync.list('rooms', _Room.default).catch(Log.r('Reach~rooms'));\n    }\n    /**\n     * Get the list of invites\n     * @return {Promise<Invite[], Error>}\n     */\n\n  }, {\n    key: \"invites\",\n    value: function invites() {\n      if (!this.current) {\n        return Promise.reject(new Error('Cannot list invites without a User being logged in.'));\n      }\n\n      return DataSync.list(\"_/invites/\".concat(this.current.uid), _Invite.default).catch(Log.r('Reach~invites'));\n    }\n    /**\n     * Register a callback for a specific event\n     * @param {string} event The event name ({@link Events/Reach}). Can be:\n     * - USER_ADDED\n     * - USER_CHANGED\n     * - USER_REMOVED\n     * - ROOM_ADDED\n     * - ROOM_CHANGED\n     * - ROOM_REMOVED\n     * - INVITE_ADDED\n     * - INVITE_CHANGED\n     * @param {function} callback The callback for the event,\n     * the arguments depends on the type of event:\n     * - USER_*: callback({@link User} u)\n     * - ROOM_*: callback({@link Room} r)\n     * - INVITE_*: callback({@link Invite} i)\n     * @param {Webcom/api.Query~cancelCallback} [cancelCallback] The error callback for the event,\n     * takes an Error as only argument\n     */\n\n  }, {\n    key: \"on\",\n    value: function on(event, callback, cancelCallback) {\n      var path = Events.reach.toPath(event)(_cache.default.user);\n\n      if (path) {\n        var Cls = Events.reach.toClass(event);\n\n        var cb = function cb(snapData) {\n          var d = Cls ? new Cls(snapData) : null;\n          Log.i(\"Reach~on(\".concat(event, \")\"), d);\n          callback(d);\n        };\n\n        DataSync.on(path, event, cb, cancelCallback);\n\n        if (!this._callbacks[event]) {\n          this._callbacks[event] = [];\n        }\n\n        this._callbacks[event].push(cb);\n      }\n    }\n    /**\n     * Create a new room\n     * @param {string} [name] The room name\n     * @param {object} [extra] Extra informations\n     * @param {boolean} [publicRoom=false] Indicates public room\n     * @returns {Promise<Room>}\n     */\n\n  }, {\n    key: \"createRoom\",\n    value: function createRoom(name, extra) {\n      var publicRoom = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      if (!this.current) {\n        return Promise.reject(new Error('Cannot create a Room without a User being logged in.'));\n      }\n\n      return _Room.default.create(name, extra, publicRoom);\n    }\n    /**\n     * Get a list of all opened {@link PeerConnection}s\n     * @return {*}\n     */\n\n  }, {\n    key: \"getRoom\",\n\n    /**\n     * Get a {@link Room} from its `uid`\n     * @param {string} uid The room's UID\n     * @returns {Promise.<Room>}\n     */\n    value: function getRoom(uid) {\n      return _Room.default.get(uid);\n    }\n    /**\n     * Get a {@link User} from its `uid`\n     * @param {string} uid The user's UID\n     * @returns {Promise.<User>}\n     */\n\n  }, {\n    key: \"getUser\",\n    value: function getUser(uid) {\n      return _User.default.get(uid);\n    }\n  }, {\n    key: \"base\",\n\n    /**\n     * DataSync reference\n     * @type {Webcom}\n     */\n    get: function get() {\n      return _cache.default.base;\n    }\n    /**\n     * The configuration\n     * @type {Config}\n     */\n\n  }, {\n    key: \"config\",\n    get: function get() {\n      return _cache.default.config;\n    }\n    /**\n     * The connected User\n     * @type {User}\n     */\n\n  }, {\n    key: \"current\",\n    get: function get() {\n      return _cache.default.user;\n    }\n  }, {\n    key: \"peerConnections\",\n    get: function get() {\n      return _cache.default.peerConnections.stacks;\n    }\n  }], [{\n    key: \"version\",\n    get: function get() {\n      return {\n        sdk: SDK_VERSION,\n        schema: SCHEMA_VERSION\n      }; // eslint-disable-line no-undef\n    }\n    /**\n     * The supported stream types\n     * @returns {StreamTypes}\n     */\n\n  }, {\n    key: \"types\",\n    get: function get() {\n      return _StreamTypes.default;\n    }\n    /**\n     * The supported events\n     * @return {{\n        room: Events/Room,\n        reach: Events/Reach,\n        stream: Events/Stream,\n        invite: Events/Invite,\n        local: Events/Local\n       }}\n     */\n\n  }, {\n    key: \"events\",\n    get: function get() {\n      return {\n        room: Events.room,\n        reach: Events.reach,\n        stream: Events.stream,\n        invite: Events.invite,\n        local: Events.local\n      };\n    }\n    /**\n     * The browser's details\n     * @return {Browser}\n     */\n\n  }, {\n    key: \"browser\",\n    get: function get() {\n      return _Browser.default;\n    }\n    /**\n     * Media utility functions\n     * @return {Media}\n     */\n\n  }, {\n    key: \"media\",\n    get: function get() {\n      return _Media.default;\n    }\n    /**\n     * The codec presets to use when setting {@link Config#preferredAudioCodec}\n     * or {@link Config#preferredVideoCodec}\n     * @return {{audio: Codec/audio, video: Codec/video}}\n     */\n\n  }, {\n    key: \"codecs\",\n    get: function get() {\n      return {\n        audio: _Codec.audio,\n        video: _Codec.video\n      };\n    }\n  }]);\n\n  return Reach;\n}();\n\nexports.default = Reach;\nmodule.exports = Reach;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _Media = _interopRequireDefault(require(\"./util/Media\"));\n\nvar DataSync = _interopRequireWildcard(require(\"./util/DataSync\"));\n\nvar Log = _interopRequireWildcard(require(\"./util/Log\"));\n\nvar _cache = _interopRequireDefault(require(\"./util/cache\"));\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nvar _flattenServers = function _flattenServers(servers) {\n  var _ref;\n\n  var _expand = servers.map(function (server) {\n    var username = server.username,\n        credential = server.credential,\n        urls = server.urls,\n        url = server.url;\n    var uris = urls || url;\n\n    if (typeof uris !== 'string') {\n      return uris.map(function (uri) {\n        return {\n          username: username,\n          credential: credential,\n          urls: uri\n        };\n      });\n    }\n\n    return [server];\n  });\n\n  return (_ref = []).concat.apply(_ref, _toConsumableArray(_expand));\n};\n/**\n * The Reach configuration object\n * @class Config\n */\n\n\nvar Config =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Create configuration\n   * @access protected\n   * @param obj\n   */\n  function Config(obj) {\n    var _this = this;\n\n    _classCallCheck(this, Config);\n\n    /**\n     * The default media constraints. These can be overridden when subscribing to a stream.\n     * @type {MediaStreamConstraints}\n     */\n    this.constraints = null;\n    /**\n     * The id/element dom element that will hold the local video/audio element\n     * @type {string|Element}\n     */\n\n    this.localStreamContainer = null;\n    /**\n     * The id/element dom element that will hold the remote video/audio element\n     * @type {string|Element}\n     */\n\n    this.remoteStreamContainer = null;\n    /**\n     * The preferred video Codec. Takes a RegExp matching the codec name and sample rate.\n     * Predefined values can be found in {@link Codec/video}\n     * @type {RegExp}\n     * @example <caption>Prefer VP9</caption>\n     * var myReach = new Reach('https://io.datasync.orange.com/base/<my_namespace>', {\n     *  preferredVideoCodec: Reach.codecs.video.VP9\n     * });\n     */\n\n    this.preferredVideoCodec = null;\n    /**\n     * The preferred audio Codec. Takes a RegExp matching the codec name and sample rate.\n     * Predefined values can be found in {@link Codec/audio}\n     * @type {RegExp}\n     * @example <caption>Prefer opus</caption>\n     * var myReach = new Reach('https://io.datasync.orange.com/base/<my_namespace>', {\n     *  preferredAudioCodec: Reach.codecs.audio.OPUS\n     * });\n     */\n\n    this.preferredAudioCodec = null; // Populate with default values\n\n    this.reset(); // Populate with data\n\n    this.assign(obj); // Read ICE servers from server\n\n    DataSync.get('_/ice').then(function (snapData) {\n      if (snapData) {\n        _this.iceServers = snapData.val();\n        Log.i('ICEServers', _this.iceServers.length > 0 ? _this.iceServers : 'None');\n      }\n    }, function (e) {\n      return Log.d('ICEServers', e);\n    }); // TODO #Feat: Add boolean prop to request permission on start,\n    // sdpEditor (for user defined SDP modifications)\n  }\n  /**\n   * Assign new conf values\n   * @access protected\n   * @param {object} obj the new conf values\n   */\n\n\n  _createClass(Config, [{\n    key: \"assign\",\n    value: function assign(obj) {\n      var _this2 = this;\n\n      Object.keys(obj || {}).forEach(function (key) {\n        _this2[key] = obj[key];\n      });\n    }\n    /**\n     * The log level (DEBUG, INFO, WARN, ERROR)\n     * @type {string}\n     */\n\n  }, {\n    key: \"reset\",\n\n    /**\n     * Resets configuration to default values\n     * @protected\n     */\n    value: function reset() {\n      this.assign({\n        constraints: _Media.default.constraints(),\n        logLevel: 'ERROR'\n      });\n    }\n  }, {\n    key: \"logLevel\",\n    set: function set(level) {\n      _cache.default.logLevel = level;\n    }\n    /**\n     * The log level (DEBUG, INFO, WARN, ERROR)\n     * @returns {string}\n     */\n    ,\n    get: function get() {\n      return _cache.default.logLevel;\n    }\n    /**\n     * List of TURN/STUN servers to use for ICE.\n     * This list will be merged with the ICE servers declared in the namespace (**_/ice**).\n     * @type {ICEServer[]}\n     */\n\n  }, {\n    key: \"iceServers\",\n    set: function set(servers) {\n      Log.d('Config~set~iceServers', servers);\n\n      if (servers) {\n        if (!this._iceServers) {\n          /**\n           * @ignore\n           */\n          this._iceServers = [].concat(servers || []);\n        } else {\n          // flatten existing\n          var _currentServers = _flattenServers(this._iceServers); // flatten new\n\n\n          var _newServers = _flattenServers(servers); // Add only the missing servers\n\n\n          _newServers.forEach(function (newServer) {\n            if (!_currentServers.some(function (server) {\n              return server.urls === newServer.urls && server.username === newServer.username && server.credential === newServer.credential;\n            })) {\n              _currentServers.push(newServer);\n            }\n          }); // Re-group by username/credential\n\n\n          this._iceServers = _currentServers.reduce(function (previous, current) {\n            var username = current.username,\n                credential = current.credential,\n                urls = current.urls;\n            var idx = previous.findIndex(function (s) {\n              return s.username === username && s.credential === credential;\n            });\n\n            if (idx >= 0) {\n              previous[idx].urls.push(urls);\n            } else {\n              previous.push({\n                username: username,\n                credential: credential,\n                urls: [urls]\n              });\n            }\n\n            return previous;\n          }, []);\n        }\n      }\n    }\n    /**\n     * List of TURN/STUN servers to use for ICE.\n     * This list will be merged with the ICE servers declared in the namespace (**_/ice**).\n     * @type {ICEServer[]}\n     */\n    ,\n    get: function get() {\n      return this._iceServers || [{\n        username: 'admin',\n        credential: 'webcom1234',\n        urls: ['turns:turn1.webcom.orange.com:443', 'turn:turn1.webcom.orange.com:443?transport=tcp', 'turn:turn1.webcom.orange.com:3478?transport=tcp']\n      }];\n    }\n  }, {\n    key: \"stats\",\n    set: function set(stats) {\n      this._stats = Object.assign({}, stats);\n    },\n    get: function get() {\n      return this._stats || {};\n    }\n  }]);\n\n  return Config;\n}();\n\nexports.default = Config;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar DataSync = _interopRequireWildcard(require(\"./util/DataSync\"));\n\nvar Log = _interopRequireWildcard(require(\"./util/Log\"));\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * User device\n * @access protected\n */\nvar Device =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Create a device\n   * @param {Webcom/api.DataSnapshot|object} snapData The data snapshot\n   * @access protected\n   */\n  function Device(snapData) {\n    _classCallCheck(this, Device);\n\n    var values = Object.assign({}, snapData.val());\n    /**\n     * Device's unique id\n     * @type string\n     */\n\n    this.uid = snapData.name();\n    /**\n     * Device's OS\n     * @type {string}\n     */\n\n    this.os = values.os;\n    /**\n     * Device's userAgent\n     * @type {string}\n     */\n\n    this.userAgent = values.userAgent;\n    /**\n     * Device's last know status\n     * - CONNECTED\n     * - NOT_CONNECTED\n     * - SLEEPING\n     * @type {string}\n     */\n\n    this.status = values.status;\n    /**\n     * Device's sdk\n     * @type {{reach: string, webcom: string}}\n     */\n\n    this.sdk = values.sdk; // TODO #Feat: Add 'extra' property for unrestricted additional information ?\n  }\n  /**\n   * Get a device by its user uid and its uid\n   * @access private\n   * @param {string} userUid The user's uid\n   * @param {string} deviceUid The device's uid\n   * @returns {Promise<Device, Error>}\n   */\n\n\n  _createClass(Device, null, [{\n    key: \"get\",\n    value: function get(userUid, deviceUid) {\n      // due to the problem of long list, some uid (uid of participant)\n      // can have a : instead of /\n      var newUid = userUid.replace(/:/g, '/');\n      return DataSync.get(\"_/devices/\".concat(newUid, \"/\").concat(deviceUid)).then(function (snapData) {\n        return snapData ? new Device(snapData) : null;\n      }).catch(Log.r('Device#get'));\n    }\n  }]);\n\n  return Device;\n}();\n\nexports.default = Device;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _constants = require(\"./util/constants\");\n\nvar DataSync = _interopRequireWildcard(require(\"./util/DataSync\"));\n\nvar Log = _interopRequireWildcard(require(\"./util/Log\"));\n\nvar _cache = _interopRequireDefault(require(\"./util/cache\"));\n\nvar _Room = _interopRequireDefault(require(\"./Room\"));\n\nvar Events = _interopRequireWildcard(require(\"../definitions/Events\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * Update\n * @param {Invite} invite The invite\n * @param {string} status The new status\n * @param {string} [reason=null] The reason (a message)\n * @param {object} [_ended=null]\n * @access private\n * @returns {Promise<Invite, Error>}\n */\nvar update = function update(invite, status) {\n  var reason = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n  var _ended = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n\n  var values = {\n    status: status,\n    reason: reason,\n    _ended: _ended\n  };\n\n  if (invite.status !== _constants.ONGOING) {\n    return Promise.reject(new Error('This invitation has already been answered'));\n  }\n\n  return DataSync.update(\"_/invites/\".concat(invite.to, \"/\").concat(invite.uid), values).then(function () {\n    Object.keys(values).forEach(function (prop) {\n      invite[prop] = values[prop]; // eslint-disable-line no-param-reassign\n    });\n    return _Room.default.get(invite.room);\n  }).then(function () {\n    return {\n      invite: invite\n    };\n  }).catch(Log.r('Invite_update'));\n};\n/**\n * Invitation\n * @public\n */\n\n\nvar Invite =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Create an invite\n   * @param {Webcom/api.DataSnapshot|object} snapData The data snapshot\n   * @access protected\n   */\n  function Invite(snapData) {\n    _classCallCheck(this, Invite);\n\n    var values = snapData;\n\n    if (snapData && snapData.val && typeof snapData.val === 'function') {\n      values = Object.assign({}, snapData.val(), {\n        uid: snapData.name(),\n        to: snapData.ref().parent().name()\n      });\n    }\n    /**\n     * Invite's unique id\n     * @type string\n     */\n\n\n    this.uid = values.uid;\n    /**\n     * Invite's sender uid\n     * @type {string}\n     */\n\n    this.from = values.from;\n    /**\n     * Invitee's uid\n     * @type {string}\n     */\n\n    this.to = values.to;\n    /**\n     * The id of the room associated to the invite\n     * @type {string}\n     */\n\n    this.room = values.room;\n    /**\n     * The invitation status :\n     * - ONGOING - The receiver has not yet responded to the invitation\n     * - ACCEPTED - The receiver has accepted the invitation\n     * - REJECTED - The receiver has rejected the invitation\n     * - CANCELED - The sender canceled the invitation\n     * @type {string}\n     */\n\n    this.status = values.status;\n    /**\n     * Invite message. This will be either a custom message,\n     * if the status is ONGOING or a reason when status is CANCELED|REJECTED.\n     * @type {string}\n     */\n\n    this.topic = values.topic;\n    /**\n     * Invite creation timestamp\n     * @type {number}\n     */\n\n    this._created = values._created;\n    /**\n     * Invite expiration timestamp\n     * @type {number}\n     */\n\n    this._ended = values._ended;\n    /**\n     * Invite events callbacks\n     * @type {{}}\n     * @private\n     */\n\n    this._callbacks = {};\n  }\n  /**\n   * Is this invitation waiting for a reply ?\n   * @type {boolean}\n   */\n\n\n  _createClass(Invite, [{\n    key: \"cancel\",\n\n    /**\n     * Cancels the invitation. Only the sender can cancel the invitation.\n     * @param {string} [reason] The reason the sender is canceling the invite\n     * @return {Promise<Invite>}\n     */\n    value: function cancel(reason) {\n      return update(this, _constants.CANCELED, reason, DataSync.ts());\n    }\n    /**\n     * Rejects the invitation. Only the receiver can reject the invitation.\n     * @param {string} [reason] The reason the receiver is rejecting the invite\n     * @return {Promise<Invite>}\n     */\n\n  }, {\n    key: \"reject\",\n    value: function reject(reason) {\n      return update(this, _constants.REJECTED, reason, DataSync.ts());\n    }\n    /**\n     * Accept the invitation. Only the receiver can accept the invitation.\n     * @return {Promise<Invite>}\n     */\n\n  }, {\n    key: \"accept\",\n    value: function accept() {\n      return update(this, _constants.ACCEPTED);\n    }\n    /**\n     * Register a callback for a status update\n     * @param {string} status Can be:\n     * - ACCEPTED\n     * - REJECTED\n     * - CANCELED\n     * @param {function} callback\n     */\n\n  }, {\n    key: \"on\",\n    value: function on(status, callback) {\n      var _this = this;\n\n      if (Events.invite.supports(status)) {\n        // Register callback\n        if (!this._callbacks[status]) {\n          this._callbacks[status] = [];\n        }\n\n        this._callbacks[status].push(callback); // Defined listener & subscribe if needed\n\n\n        if (!this._listener) {\n          /**\n           * Invite status update callback\n           * @type {function}\n           * @private\n           */\n          this._listener = function (snapData) {\n            var updated = snapData.val();\n\n            if (updated !== null && updated !== _this.status) {\n              _this.status = updated;\n              (_this._callbacks[updated] || []).forEach(function (cb) {\n                cb(_this);\n              });\n            }\n          };\n\n          DataSync.on(\"_/invites/\".concat(this.to, \"/\").concat(this.uid, \"/status\"), 'value', this._listener.bind(this));\n        }\n      }\n    }\n    /**\n     * Register a callback for all status change events\n     * @param {function} callback\n     */\n\n  }, {\n    key: \"onStatusChange\",\n    value: function onStatusChange(callback) {\n      var _this2 = this;\n\n      [_constants.ACCEPTED, _constants.REJECTED, _constants.CANCELED].forEach(function (event) {\n        _this2.on(event, callback);\n      });\n    }\n    /**\n     * Un-register a callback for a status update\n     * @param {string} [status] Can be:\n     * - ACCEPTED\n     * - REJECTED\n     * - CANCELED\n     * - null This will un-register all callbacks\n     * @param {function} [callback]\n     */\n\n  }, {\n    key: \"off\",\n    value: function off(status, callback) {\n      var _this3 = this;\n\n      if (!status) {\n        this._callbacks = {};\n      } else if (this._callbacks[status]) {\n        if (callback) {\n          var idx = this._callbacks[status].findIndex(function (cb) {\n            return cb === callback;\n          });\n\n          if (idx >= 0) {\n            this._callbacks.splice(idx, 1);\n          }\n        } else {\n          this._callbacks[status] = [];\n        }\n      }\n\n      if (![_constants.CANCELED, _constants.ACCEPTED, _constants.REJECTED].some(function (event) {\n        return _this3._callbacks[event] && _this3._callbacks[event].length > 0;\n      })) {\n        DataSync.off(\"_/invites/\".concat(this.to, \"/\").concat(this.uid, \"/status\"), 'value');\n      }\n    }\n    /**\n     * Un-register a callback for all status change events\n     * @param {function} [callback]\n     */\n\n  }, {\n    key: \"offStatusChange\",\n    value: function offStatusChange(callback) {\n      var _this4 = this;\n\n      if (!callback) {\n        this.off();\n      } else {\n        [_constants.ACCEPTED, _constants.REJECTED, _constants.CANCELED].forEach(function (event) {\n          _this4.off(event, callback);\n        });\n      }\n    }\n    /**\n     * Create the invitation & add the user to the participants list\n     * @access protected\n     * @param {User} invitee The user to invite\n     * @param {Room} room The room to invite the user to\n     * @param {string} [message] A message for the invitee\n     */\n\n  }, {\n    key: \"isOnGoing\",\n    get: function get() {\n      return this.status === _constants.ONGOING;\n    }\n    /**\n     * Was this invitation rejected ?\n     * @type {boolean}\n     */\n\n  }, {\n    key: \"isRejected\",\n    get: function get() {\n      return this.status === _constants.REJECTED;\n    }\n    /**\n     * Was this invitation accepted ?\n     * @type {boolean}\n     */\n\n  }, {\n    key: \"isAccepted\",\n    get: function get() {\n      return this.status === _constants.ACCEPTED;\n    }\n    /**\n     * Was this invitation canceled ?\n     * @type {boolean}\n     */\n\n  }, {\n    key: \"isCanceled\",\n    get: function get() {\n      return this.status === _constants.CANCELED;\n    }\n  }], [{\n    key: \"send\",\n    value: function send(invitee, room) {\n      var message = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n      if (!_cache.default.user) {\n        return Promise.reject(new Error('Only an authenticated user can send an invite.'));\n      }\n\n      var inviteMetaData = {\n        from: _cache.default.user.uid,\n        room: room.uid,\n        status: _constants.ONGOING,\n        _created: DataSync.ts(),\n        topic: message\n      };\n      return DataSync.push(\"_/invites/\".concat(invitee.uid), inviteMetaData).then(function (inviteRef) {\n        var inviteId = inviteRef.name();\n        return new Invite(Object.assign({\n          uid: inviteId,\n          to: invitee.uid\n        }, inviteMetaData));\n      }).catch(Log.r('Invite#send'));\n    }\n  }]);\n\n  return Invite;\n}();\n\nexports.default = Invite;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar DataSync = _interopRequireWildcard(require(\"./util/DataSync\"));\n\nvar Log = _interopRequireWildcard(require(\"./util/Log\"));\n\nvar _cache = _interopRequireDefault(require(\"./util/cache\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * Instant Message\n * @public\n */\nvar Message =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Create a message\n   * @param {Webcom/api.DataSnapshot|Object} snapData The data snapshot\n   * @param {string} roomId The message's room id\n   * @access protected\n   */\n  function Message(snapData, roomId) {\n    _classCallCheck(this, Message);\n\n    var values = Object.assign({}, snapData.val());\n    /**\n     * The message unique id\n     * @type {string}\n     */\n\n    this.uid = snapData.name();\n    /**\n     * The room uid\n     * @type {string}\n     */\n\n    this.roomId = roomId;\n    /**\n     * The message\n     * @type {string}\n     */\n\n    this.text = values.text;\n    /**\n     * The message sender\n     * @type {string}\n     */\n\n    this.from = values.from;\n    /**\n     * Joined date\n     * @type {number}\n     */\n\n    this._created = values._created;\n  }\n  /**\n   * Edit the text message. Only the sender or moderator/owner of the room can edit a message.\n   * @param {string} newText The new message\n   * @returns {Promise<Message>}\n   */\n\n\n  _createClass(Message, [{\n    key: \"edit\",\n    value: function edit(newText) {\n      var _this = this;\n\n      return DataSync.update(\"/rooms/\".concat(this.roomId, \"/messages/\").concat(this.uid), {\n        text: newText\n      }).then(function () {\n        _this.text = newText;\n        return _this;\n      }).catch(Log.r('Message~edit'));\n    }\n    /**\n     * Remove the text message. Only the sender or moderator/owner of the room can remove a message.\n     * @returns {Promise}\n     */\n\n  }, {\n    key: \"remove\",\n    value: function remove() {\n      return DataSync.remove(\"/rooms/\".concat(this.roomId, \"/messages/\").concat(this.uid)).catch(Log.r('Message~remove'));\n    }\n    /**\n     *\n     * @param {Room} room The room to send the message to\n     * @param {string} text The message\n     * @return {Promise<Message>}\n     */\n\n  }], [{\n    key: \"send\",\n    value: function send(room, text) {\n      if (!_cache.default.user) {\n        return Promise.reject(new Error('Cannot send a message to the Room without a User being logged in.'));\n      }\n\n      var data = {\n        from: _cache.default.user.uid,\n        _created: DataSync.ts(),\n        text: text\n      };\n      return DataSync.push(\"_/rooms/\".concat(room.uid, \"/messages\"), data).then(function (pushRef) {\n        return DataSync.get(\"_/rooms/\".concat(room.uid, \"/messages/\").concat(pushRef.name()));\n      }).then(function (snapData) {\n        return new Message(snapData, room.uid);\n      }).catch(Log.r('Message#send'));\n    }\n  }]);\n\n  return Message;\n}();\n\nexports.default = Message;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\n * {@link Room} participant\n * @public\n */\nvar Participant =\n/**\n * Create a participant\n * @param {Webcom/api.DataSnapshot|Object} snapData The data snapshot\n * @access protected\n */\nfunction Participant(snapData) {\n  _classCallCheck(this, Participant);\n\n  var values = Object.assign({}, snapData.val());\n  /**\n   * The participant unique id\n   * @type {string}\n   */\n\n  this.uid = snapData.name();\n  /**\n   * The Participant's role. Can be:\n   * - OWNER: the owner/creator of the {@link Room}\n   * - MODERATOR: a participant with {@link Room} management Rights\n   * - NONE: basic participant\n   * @type {string}\n   */\n\n  this.role = values.role;\n  /**\n   * The participant status Can be:\n   * - NOT_CONNECTED: the participant did not accept the invitation yet and/or did not\n   * join the {@link Room} yet\n   * - CONNECTED: the participant is in the {@link Room}\n   * - WAS_CONNECTED: the participant left the {@link Room}\n   * @type {string}\n   */\n\n  this.status = values.status;\n  /**\n   * Joined date\n   * @type {number}\n   */\n\n  this._joined = values._joined;\n  /**\n   * Participant's userAgent\n   * @type {string}\n   */\n\n  this.userAgent = values.userAgent;\n};\n\nexports.default = Participant;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _constants = require(\"./util/constants\");\n\nvar DataSync = _interopRequireWildcard(require(\"./util/DataSync\"));\n\nvar _cache = _interopRequireDefault(require(\"./util/cache\"));\n\nvar _Participant = _interopRequireDefault(require(\"./Participant\"));\n\nvar _Message = _interopRequireDefault(require(\"./Message\"));\n\nvar _Local = _interopRequireDefault(require(\"./stream/Local\"));\n\nvar _Invite = _interopRequireDefault(require(\"./Invite\"));\n\nvar Events = _interopRequireWildcard(require(\"../definitions/Events\"));\n\nvar Log = _interopRequireWildcard(require(\"./util/Log\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar _joinRoom = function _joinRoom(room, role) {\n  var uid = _cache.default.user.uid.split('/').join(':');\n\n  if (room.status !== _constants.CLOSED) {\n    var participant = {\n      status: _constants.CONNECTED,\n      userAgent: _cache.default.userAgent,\n      _joined: DataSync.ts()\n    };\n\n    if (role) {\n      participant.role = role;\n    }\n\n    Log.w('Room#join', [participant, \"_/rooms/\".concat(room.uid, \"/participants/\").concat(uid)]);\n    return DataSync // .update(`_/rooms/${room.uid}/participants/${cache.user.uid}`, participant)\n    .update(\"_/rooms/\".concat(room.uid, \"/participants/\").concat(uid), participant).then(function () {\n      return room;\n    });\n    /* .then(() => {\n      DataSync\n        .onDisconnect(`_/rooms/${room.uid}/participants/${shortUserId}/status`)\n        .set(WAS_CONNECTED);\n      return room;\n    }); */\n  }\n\n  return Promise.reject(new Error('can\\'t join a close room'));\n};\n/**\n * Room information\n * @access public\n */\n\n\nvar Room =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Create a room\n   * @param {Webcom/api.DataSnapshot|Object} snapData The data snapshot\n   * @access protected\n   */\n  function Room(snapData, roomUid) {\n    _classCallCheck(this, Room);\n\n    var values = snapData;\n\n    if (snapData && snapData.val && typeof snapData.val === 'function') {\n      // values = Object.assign({}, snapData.val(), {uid: snapData.name()});\n      values = Object.assign({}, snapData.val(), {\n        uid: roomUid\n      });\n    }\n    /**\n     * The room unique id\n     * @type {string}\n     */\n\n\n    this.uid = values.uid;\n    /**\n     * The room name\n     * @type {string}\n     */\n\n    this.name = values.name;\n    /**\n     * The local stream of the room\n     * @type {Local}\n     */\n\n    this.localStream = {};\n    /**\n     * The room owner uid\n     * @type {string}\n     */\n\n    this.owner = values.owner;\n    /**\n     * The room status:\n     * - OPENED\n     * - CLOSED\n     * @type {string}\n     */\n\n    this.status = values.status;\n    /**\n     * Indicates that the room is public so all users can join\n     * @type {boolean}\n     */\n\n    this._public = !!values._public;\n    /**\n     * Additional room informations\n     * @type {Object}\n     */\n\n    this.extra = values.extra;\n    /**\n     * List of declared callbacks\n     * @type {Object}\n     */\n\n    this._callbacks = {};\n  }\n  /**\n   * Get the list of participants.\n   * This will only work if the user is either a participant or the owner of the room.\n   * @returns {Promise<Participant[], Error>}\n   */\n\n\n  _createClass(Room, [{\n    key: \"participants\",\n    value: function participants() {\n      return DataSync.list(\"_/rooms/\".concat(this.uid, \"/participants\"), _Participant.default, this.uid);\n    }\n    /**\n     * Get the list of messages.\n     * This will only work if the user is either a participant or the owner of the room.\n     * @return {Promise<Message[], Error>}\n     */\n\n  }, {\n    key: \"messages\",\n    value: function messages() {\n      return DataSync.list(\"_/rooms/\".concat(this.uid, \"/messages\"), _Message.default, this.uid);\n    }\n    /**\n     * Get the list of streams\n     * @returns {Promise}\n     * @access private\n     */\n\n  }, {\n    key: \"_streams\",\n    value: function _streams(localStreams) {\n      var _this = this;\n\n      if (!_cache.default.user) {\n        return Promise.reject(new Error('Only an authenticated user can list a Room\\'s streams.'));\n      }\n\n      return DataSync.get(\"_/rooms/\".concat(this.uid, \"/streams\")).then(function (snapData) {\n        var values = snapData.val();\n        Log.d('Rooms~_streams', values);\n\n        if (values) {\n          return Object.keys(values).map(function (key) {\n            return Object.assign({\n              uid: key,\n              roomId: _this.uid\n            }, values[key]);\n          });\n        }\n\n        return [];\n      }).then(function (streams) {\n        return streams.filter(function (stream) {\n          return localStreams === (stream.device === _cache.default.device && stream.from === _cache.default.user.uid);\n        });\n      }).then(function (streams) {\n        return streams.map(_cache.default.streams[\"get\".concat(localStreams ? 'Shared' : 'Remote')].bind(_cache.default.streams));\n      }).then(function (streams) {\n        return streams.filter(function (stream) {\n          return stream !== null;\n        });\n      });\n    }\n    /**\n     * Get the list of locally published streams.\n     * The streams published with another device won't be visible here\n     * This will only work if the user is either a participant or the owner of the room.\n     * @return {Promise<Local[], Error>}\n     */\n\n  }, {\n    key: \"localStreams\",\n    value: function localStreams() {\n      return this._streams(true).catch(Log.r('Room~localStreams'));\n    }\n    /**\n     * Get the list of remotely published streams.\n     * This will only work if the user is either a participant or the owner of the room.\n     * @return {Promise<Remote[], Error>}\n     */\n\n  }, {\n    key: \"remoteStreams\",\n    value: function remoteStreams() {\n      return this._streams(false).catch(Log.r('Room~remoteStreams'));\n    }\n    /**\n     * Invite users to the room.\n     * This will only work if the current User is the owner or a moderator of this Room.\n     * This will create the invitation and add the user to the participants list.\n     * @param {User[]} users the users to invite\n     * @param {string} [role='NONE'] the role of the invitee\n     * @param {string} [message] a message to add to the invite\n     * @return {Promise<{room: Room, invites: Invite[]}, Error>}\n     */\n\n  }, {\n    key: \"invite\",\n    value: function invite(users) {\n      var _this2 = this;\n\n      var role = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _constants.NONE;\n      var message = arguments.length > 2 ? arguments[2] : undefined;\n\n      var _path = function _path(user) {\n        return \"_/rooms/\".concat(_this2.uid, \"/participants/\").concat(user.uid);\n      };\n\n      var _data = {\n        status: _constants.NOT_CONNECTED,\n        role: role || _constants.NONE\n      }; // Add users as participant so they can join the room\n\n      return Promise.all(users.map(function (user) {\n        return DataSync.set(_path(user), _data);\n      })) // Send invites\n      .then(function () {\n        return Promise.all(users.map(function (user) {\n          return _Invite.default.send(user, _this2, message);\n        }));\n      }).then(function (invites) {\n        var removeParticipant = function removeParticipant(invite) {\n          return DataSync.remove(\"_/rooms/\".concat(invite.room, \"/participants/\").concat(invite.to));\n        };\n\n        invites.forEach(function (invite) {\n          invite.on(_constants.REJECTED, removeParticipant);\n          invite.on(_constants.CANCELED, removeParticipant);\n        });\n        return {\n          room: _this2,\n          invites: invites\n        };\n      }).catch(function (e) {\n        Log.e('Room~invite', e);\n        users.forEach(function (user) {\n          return DataSync.remove(\"_/rooms/\".concat(_this2.uid, \"/participants/\").concat(user.uid));\n        });\n        return Promise.reject(e);\n      });\n    }\n    /**\n     * Register a callback for a specific event\n     * @param {string} event The event name ({@link Events/Room}):\n     * - PARTICIPANT_ADDED: a participant is added to the room\n     * - PARTICIPANT_CHANGED: a participant changes his status (join)\n     * - PARTICIPANT_REMOVED: a participant leave the room\n     * - MESSAGE_ADDED: new instant message\n     * - MESSAGE_CHANGED: an existing message has been modified (moderation)\n     * - MESSAGE_REMOVED: a message has been removed (moderation)\n     * - STREAM_PUBLISHED: a participant published a new Stream\n     * - STREAM_CHANGED: a participant changes his published Stream (moderation, type, mute...)\n     * - STREAM_UNPUBLISHED: a participant stops the publication of his Stream\n     * @param {function} callback\n     * The callback for the event, the arguments depends on the type of event:\n     * - PARTICIPANT_* : callback({@link Participant} p [, Error e])\n     * - MESSAGE_* : callback({@link Message} m [, Error e])\n     * - STREAM_* : callback({@link Remote} s [, Error e])\n     * @param {Webcom/api.Query~cancelCallback} cancelCallback The error callback for the event,\n     * takes an Error as only argument\n     */\n\n  }, {\n    key: \"on\",\n    value: function on(event, callback, cancelCallback) {\n      var _this3 = this;\n\n      var path = Events.room.toPath(event)(this);\n      var Obj = Events.room.toClass(event);\n\n      if (path && Obj) {\n        var typedCallback = function typedCallback(snapData) {\n          if (!/^STREAM_/i.test(event) || !snapData) {\n            // if(/^MESSAGE_/i.test(event) || !snapData) {\n            Log.i(\"Room~on(\".concat(event, \")\"), snapData ? new Obj(snapData) : null);\n            callback(snapData ? new Obj(snapData) : null);\n          } else if (_cache.default.user) {\n            var streamData = Object.assign({\n              uid: snapData.name(),\n              roomId: _this3.uid\n            }, snapData.val());\n\n            if (streamData.from !== _cache.default.user.uid || streamData.device !== _cache.default.device) {\n              var remoteStream = _cache.default.streams.getRemote(streamData);\n\n              Log.i(\"Room~on(\".concat(event, \")\"), remoteStream);\n              callback(remoteStream);\n            }\n          }\n        };\n\n        DataSync.on(path, event, typedCallback, cancelCallback);\n\n        if (!this._callbacks[event]) {\n          this._callbacks[event] = [];\n        }\n\n        this._callbacks[event].push(typedCallback);\n      }\n    }\n    /**\n     * Send an instant message\n     * @param {string} message The message to send\n     * @return {Promise<Message>}\n     */\n\n  }, {\n    key: \"sendMessage\",\n    value: function sendMessage(message) {\n      return _Message.default.send(this, message);\n    }\n    /**\n     * Publish a local stream\n     * @param {string} type The stream type, see {@link StreamTypes} for possible values\n     * @param {Element} [localStreamContainer] The element the stream is attached to.\n     * Can be null if already specified in {@link Config}.\n     * @param {MediaStreamConstraints} [constraints] The stream constraints.\n     * If not defined, the constraints defined in {@link Config} will be used.\n     * @returns {Promise<Local, Error>}\n     */\n\n  }, {\n    key: \"share\",\n    value: function share(type, localStreamContainer, constraints) {\n      Log.i('Room~share', {\n        type: type,\n        localStreamContainer: localStreamContainer,\n        constraints: constraints\n      }); // return Local.share(this.uid, type, localStreamContainer, constraints);\n\n      return _Local.default.getLocalVideo(this.uid, type, localStreamContainer, constraints).then(function (stream) {\n        return stream.publish(stream);\n      });\n    }\n    /**\n     * get a local stream in video tag\n     * @param {string} type The stream type, see {@link StreamTypes} for possible values\n     * @param {Element} [localStreamContainer] The element the stream is attached to.\n     * Can be null if already specified in {@link Config}.\n     * @param {MediaStreamConstraints} [constraints] The stream constraints.\n     * If not defined, the constraints defined in {@link Config} will be used.\n     * @returns {Promise<Local, Error>}\n     */\n\n  }, {\n    key: \"getLocalVideo\",\n    value: function getLocalVideo(type, localStreamContainer, constraints) {\n      var _this4 = this;\n\n      Log.i('Room~getLocalVideo', {\n        type: type,\n        localStreamContainer: localStreamContainer,\n        constraints: constraints\n      });\n      return _Local.default.getLocalVideo(this.uid, type, localStreamContainer, constraints).then(function (localStream) {\n        _this4.localStream = localStream;\n        return localStream;\n      });\n    }\n    /**\n     * publish a local stream\n     * @returns {Local}\n     */\n\n  }, {\n    key: \"publish\",\n    value: function publish() {\n      Log.i('Room~publish Local');\n      return this.localStream.publish(this.localStream);\n    }\n    /**\n     * Join the room. Sets the connected status of the current participant to CONNECTED.\n     * @return {Promise}\n     */\n\n  }, {\n    key: \"join\",\n    value: function join() {\n      Log.i('Room~join', this);\n\n      if (!_cache.default.user) {\n        return Promise.reject(new Error('Only an authenticated user can join a Room.'));\n      }\n\n      return _joinRoom(this).catch(Log.r('Room~join'));\n    }\n    /**\n     * Leave the room. Sets the connected status of the current participant to WAS_CONNECTED,\n     * deletes medias and callbacks, closes WebRTC stacks in use.\n     * @return {Promise}\n     */\n\n  }, {\n    key: \"leave\",\n    value: function leave() {\n      var _this5 = this;\n\n      if (!_cache.default.user) {\n        return Promise.reject(new Error('Only an authenticated user can leave a Room.'));\n      }\n\n      Log.i('Room~leave', this); // Cancel onDisconnect\n\n      var uid = _cache.default.user.uid.split('/').join(':');\n\n      DataSync.onDisconnect(\"_/rooms/\".concat(this.uid, \"/participants/\").concat(uid, \"/status\")).cancel(); // Disconnect user's callbacks\n\n      Object.keys(this._callbacks).forEach(function (event) {\n        DataSync.off(Events.room.toPath(event)(_this5), event);\n      }); // Unpublish all published local streams\n\n      this.localStreams().then(function (localStreams) {\n        return localStreams.forEach(function (localStream) {\n          return localStream.close();\n        });\n      }); // Unsubscribe all remote streams\n\n      this.remoteStreams().then(function (remoteStreams) {\n        return remoteStreams.forEach(function (remoteStream) {\n          return remoteStream.unSubscribe();\n        });\n      }); // Update status\n\n      return DataSync.set(\"_/rooms/\".concat(this.uid, \"/participants/\").concat(uid, \"/status\"), _constants.WAS_CONNECTED) // return DataSync.set(`_/rooms/${this.uid}/participants/${shortUserId}/status`, WAS_CONNECTED)\n      .catch(Log.r('Room~leave'));\n    }\n    /**\n     * Leaves & close the Room. Only the owner/moderator can close a room.\n     * @return {Promise}\n     */\n\n  }, {\n    key: \"close\",\n    value: function close() {\n      var _this6 = this;\n\n      Log.i('Room~close', this);\n      this.status = _constants.CLOSED;\n      return this.leave().then(function () {\n        return DataSync.update(\"rooms/\".concat(_this6.uid), {\n          status: _constants.CLOSED,\n          _closed: DataSync.ts()\n        });\n      }).then(function () {\n        return DataSync.remove(\"_/rooms/\".concat(_this6.uid));\n      }).catch(Log.r('Room~close'));\n    }\n    /**\n     * Create a room\n     * @access protected\n     * @param {String} [name] The room name\n     * @param {object} [extra=null] Extra informations\n     * @param {boolean} [publicRoom=false] Indicates public room\n     * @returns {Promise<Room, Error>}\n     */\n\n  }], [{\n    key: \"create\",\n    value: function create(name) {\n      var extra = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var publicRoom = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      if (!_cache.default.user) {\n        return Promise.reject(new Error('Only an authenticated user can create a Room.'));\n      }\n\n      var roomMetaData = {\n        owner: _cache.default.user.uid,\n        _public: publicRoom,\n        name: name || \"\".concat(_cache.default.user.name, \"-\").concat(Date.now())\n      };\n      var roomFullMetaData = Object.assign({\n        status: _constants.OPENED,\n        _created: DataSync.ts(),\n        extra: extra\n      }, roomMetaData);\n      var room = null; // Create public room infos\n      // return DataSync.push('rooms', roomFullMetaData)\n\n      var id1 = Math.floor(Math.random() * 1000);\n      var id2 = Math.floor(Math.random() * 1000);\n      return DataSync.push(\"rooms/\".concat(id1, \"/\").concat(id2), roomFullMetaData) // Create private room infos\n      .then(function (roomRef) {\n        room = new Room(Object.assign({\n          uid: \"\".concat(id1, \"/\").concat(id2, \"/\").concat(roomRef.name())\n        }, roomFullMetaData));\n        _cache.default.room = roomFullMetaData;\n        return DataSync.update(\"_/rooms/\".concat(room.uid, \"/meta\"), roomMetaData);\n      }) // Join the room\n      .then(function () {\n        return _joinRoom(room, _constants.OWNER);\n      }).catch(Log.r('Room#create'));\n    }\n    /**\n     * Get a {@link Room} from its `uid`\n     * @access protected\n     * @param uid\n     * @returns {Promise.<Room>}\n     */\n\n  }, {\n    key: \"get\",\n    value: function get(uid) {\n      return DataSync.get(\"rooms/\".concat(uid)).then(function (snapData) {\n        if (snapData.val()) {\n          return new Room(snapData, uid);\n        }\n\n        return null;\n      });\n    }\n  }]);\n\n  return Room;\n}();\n\nexports.default = Room;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _webcom = _interopRequireDefault(require(\"webcom/webcom\"));\n\nvar DataSync = _interopRequireWildcard(require(\"./util/DataSync\"));\n\nvar _cache = _interopRequireDefault(require(\"./util/cache\"));\n\nvar Log = _interopRequireWildcard(require(\"./util/Log\"));\n\nvar _Room = _interopRequireDefault(require(\"./Room\"));\n\nvar _Device = _interopRequireDefault(require(\"./Device\"));\n\nvar _constants = require(\"./util/constants\");\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar initializing = false;\n/**\n * User informations\n * @public\n */\n\nvar User =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Create a user\n   * @param {Webcom/api.DataSnapshot|object} snapData The data snapshot\n   * @access protected\n   */\n  function User(snapData, userId) {\n    _classCallCheck(this, User);\n\n    var values = Object.assign({}, snapData.val());\n    /**\n     * User's unique id\n     * @type {string}\n     */\n    // this.uid = snapData.name();\n\n    this.uid = userId;\n    /**\n     * User's display name\n     * @type {string}\n     */\n\n    this.name = values.name;\n    /**\n     * User's status\n     * @type {string}\n     */\n\n    this.status = values.status;\n    /**\n     * User's last know connection ts\n     * @type {number}\n     */\n\n    this.lastSeen = values.lastSeen;\n    /**\n     * Indicates if the user is an anonymous user\n     * @type {boolean}\n     */\n\n    this.anonymous = /^anonymous/.test(values.provider); // TODO #Feat: Add 'extra' property for unrestricted additional information ?\n  }\n  /**\n   * Invite a user directly. This will create a new Room, log you in it & invite the user.\n   * @param {string} [message] a message to add to the invite\n   * @return {Promise<{room: Room, invite: Invite}, Error>}\n   */\n\n\n  _createClass(User, [{\n    key: \"invite\",\n    value: function invite(message) {\n      var _this = this;\n\n      if (!_cache.default.user) {\n        return Promise.reject(new Error('Only an authenticated user can invite another User.'));\n      }\n\n      return _Room.default.create(\"\".concat(_cache.default.user.uid, \"-\").concat(this.uid)).then(function (room) {\n        return room.invite([_this], null, message);\n      }).then(function (data) {\n        return {\n          room: data.room,\n          invite: data.invites[0]\n        };\n      }).catch(Log.r('User~invite'));\n    }\n    /**\n     * List Users's devices. Only for current user.\n     * @access protected\n     * @return {Promise<Device[], Error>}\n     */\n\n  }, {\n    key: \"devices\",\n    value: function devices() {\n      return DataSync.list(\"_/devices/\".concat(this.uid), _Device.default);\n    }\n    /**\n     * Init the current user\n     * @access protected\n     * @param {json} auth The user's identity (webcom JSON structure)\n     * @param {string} [name] The user's display name\n     * @returns {Promise<User, Error>}\n     */\n\n  }], [{\n    key: \"init\",\n    value: function init(auth, name) {\n      var id1 = Math.floor(Math.random() * 1000);\n      var id2 = Math.floor(Math.random() * 1000);\n      var uid = \"\".concat(id1, \"/\").concat(id2, \"/\").concat(auth.uid);\n      var userUid = \"\".concat(id1, \":\").concat(id2, \":\").concat(auth.uid); // const uid = auth.uid;\n\n      if (!initializing) {\n        initializing = true;\n        var d = {\n          status: _constants.CONNECTED,\n          lastSeen: DataSync.ts(),\n          provider: auth.provider\n        };\n\n        if (name) {\n          Object.assign(d, {\n            name: name\n          });\n        }\n\n        var deviceId = _webcom.default.INTERNAL.PersistentStorage.get(uid);\n\n        return DataSync.update(\"users/\".concat(uid), d) // Register current device\n        .then(function () {\n          var deviceMetadata = {\n            status: _constants.CONNECTED,\n            sdk: {\n              reach: SDK_VERSION,\n              // eslint-disable-line no-undef\n              webcom: _webcom.default.SDK_VERSION\n            },\n            userAgent: navigator.userAgent\n          };\n          _cache.default.userAgent = deviceMetadata.userAgent;\n\n          if (deviceId) {\n            return DataSync.update(\"_/devices/\".concat(uid, \"/\").concat(deviceId), deviceMetadata);\n          }\n\n          return DataSync.push(\"_/devices/\".concat(uid), deviceMetadata);\n        }) // Save device\n        .then(function (deviceRef) {\n          if (!deviceId) {\n            deviceId = deviceRef.name();\n\n            _webcom.default.INTERNAL.PersistentStorage.set(uid, deviceId);\n          }\n\n          _cache.default.device = deviceId;\n        }) // Add onDisconnect actions\n        .then(function () {\n          // Disconnect device\n          DataSync.onDisconnect(\"_/devices/\".concat(uid, \"/\").concat(deviceId, \"/status\")).set(_constants.NOT_CONNECTED); // Update user status\n\n          DataSync.onDisconnect(\"users/\".concat(uid)).update({\n            status: _constants.NOT_CONNECTED,\n            lastSeen: DataSync.ts()\n          });\n        }) // Get user\n        // .then(() => User.get(uid))\n        .then(function () {\n          return User.get(userUid);\n        }).then(function (user) {\n          initializing = false;\n          return user;\n        }).catch(function (e) {\n          Log.e(e);\n          initializing = false;\n          return Promise.reject(e);\n        });\n      } // return User.get(uid);\n\n\n      return User.get(userUid);\n    }\n    /**\n     * Disconnect the current user\n     * @access protected\n     * @param {User} user The current user\n     * @returns {Promise}\n     */\n\n  }, {\n    key: \"disconnect\",\n    value: function disconnect(user) {\n      // Cancel onDisconnect\n      // due to the problem of long list, uids have a : instead of /\n      var userUid = user.uid.replace(/:/g, '/'); // DataSync.onDisconnect(`_/devices/${user.uid}/${cache.device}/status`).cancel();\n      // DataSync.onDisconnect(`users/${user.uid}`).cancel();\n\n      DataSync.onDisconnect(\"_/devices/\".concat(userUid, \"/\").concat(_cache.default.device, \"/status\")).cancel();\n      DataSync.onDisconnect(\"users/\".concat(userUid)).cancel();\n\n      if (user.anonymous) {\n        return DataSync.remove(\"_/devices/\".concat(userUid)).then(function () {\n          return DataSync.get(\"_/invites/\".concat(userUid));\n        }).then(function (invites) {\n          var inviteIds = [];\n          invites.forEach(function (invite) {\n            inviteIds.push(invite.name());\n          });\n          return Promise.all(inviteIds.map(function (inviteId) {\n            return DataSync.remove(\"_/invites/\".concat(userUid, \"/\").concat(inviteId));\n          }));\n        }) // TODO refactor data model for invites so we can delete _/invites/${user.uid}\n        // .then(() => DataSync.remove(`_/invites/${user.uid}`))\n        .then(function () {\n          return DataSync.remove(\"users/\".concat(userUid));\n        }).then(function () {\n          _webcom.default.INTERNAL.PersistentStorage.remove(userUid);\n        }).catch(Log.r('User#anonymous_disconnect'));\n      }\n\n      return DataSync.set(\"_/devices/\".concat(userUid, \"/\").concat(_cache.default.device, \"/status\"), _constants.NOT_CONNECTED).then(function () {\n        return DataSync.get(\"_/devices/\".concat(userUid));\n      }).then(function (devices) {\n        // Only change user's status if no other device connected\n        var hasConnectedDevices = devices.forEach(function (device) {\n          return new RegExp(\"^\".concat(_constants.CONNECTED, \"$\")).test(device.val().status);\n        });\n\n        if (!hasConnectedDevices) {\n          return DataSync.update(\"users/\".concat(userUid), {\n            status: _constants.NOT_CONNECTED\n          });\n        }\n\n        return true;\n      }).catch(Log.r('User#disconnect'));\n    }\n    /**\n     * Get a user by its uid\n     * @access private\n     * @param {string} uid The user's uid\n     * @returns {Promise<User, Error>}\n     */\n\n  }, {\n    key: \"get\",\n    value: function get(uid) {\n      // due to the problem of long list, uids have a : instead of /\n      var userUid = uid.replace(/:/g, '/');\n      return DataSync.get(\"users/\".concat(userUid)) // .then(snapData => snapData ? new User(snapData, newUid) : null)\n      .then(function (snapData) {\n        return snapData ? new User(snapData, uid) : null;\n      }).catch(Log.r('User#get'));\n    }\n  }]);\n\n  return User;\n}();\n\nexports.default = User;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar StreamTypes = _interopRequireWildcard(require(\"../../definitions/StreamTypes\"));\n\nvar Log = _interopRequireWildcard(require(\"../util/Log\"));\n\nvar _cache = _interopRequireDefault(require(\"../util/cache\"));\n\nvar DataSync = _interopRequireWildcard(require(\"../util/DataSync\"));\n\nvar _Media = _interopRequireDefault(require(\"../util/Media\"));\n\nvar _constants = require(\"../util/constants\");\n\nvar Events = _interopRequireWildcard(require(\"../../definitions/Events\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar _facingModes = [_Media.default.facingMode.USER, _Media.default.facingMode.ENVIRONMENT];\n\nvar _getConstraintValue = function _getConstraintValue(constraints, prop) {\n  return constraints[prop].exact || constraints[prop].ideal || constraints[prop];\n};\n/* eslint-disable no-param-reassign */\n\n\nvar _setConstrainValue = function _setConstrainValue(constraints, prop, other, value) {\n  constraints[prop] = {\n    exact: value\n  };\n  delete constraints[other];\n};\n/* eslint-enable no-param-reassign */\n\n/**\n * The local stream\n */\n\n\nvar Local =\n/*#__PURE__*/\nfunction () {\n  /**\n   * @access protected\n   * @param {object} values\n   */\n  function Local(values) {\n    _classCallCheck(this, Local);\n\n    /**\n     * The uid of the room the stream is published in\n     * @type {string}\n     */\n    this.roomId = values.roomId;\n    /**\n     * The uid of this stream\n     * @type {string}\n     */\n\n    this.uid = values.uid;\n    /**\n     * The type of the stream\n     * @type {string}\n     */\n\n    this.type = values.type;\n    /**\n     * Indicates if a track is muted\n     * @type {{audio: boolean, video: boolean}}\n     */\n\n    this.muted = Object.assign({\n      audio: false,\n      video: false\n    }, values.muted);\n    /**\n     * The local DOM container element where the {@link Local~media} is displayed\n     * @type {Element}\n     */\n\n    this.container = values.container || _cache.default.config.localStreamContainer;\n    /**\n     * The local DOM media element where the {@link Local~media} is displayed\n     * @type {Element}\n     */\n\n    this.node = null;\n    /**\n     * List of the PeerConnections associated to this local stream\n     * @type {PeerConnection[]}\n     */\n\n    this.peerConnections = [];\n    /**\n     * Local stream status\n     * @type {string}\n     */\n\n    this.status = _constants.NONE;\n    /**\n     * is the video is loaded int the local DOM media element\n     * @type {boolean}\n     */\n\n    this.isVideoLoaded = false;\n    /**\n     * @access private\n     * @type {{audio: string, video: string}}\n     */\n\n    this._inputs = {}; // Set constraints\n\n    this.constraints = values.constraints;\n    /**\n     * List of callbacks for Local\n     * @type object\n     * @private\n     */\n\n    this._callbacks = {};\n  }\n  /**\n   * Register a callback for a specific event\n   * @param {string} event The event name ({@link Events/Stream})\n   * @param {function} callback The callback for the event\n   */\n\n\n  _createClass(Local, [{\n    key: \"on\",\n    value: function on(event, callback) {\n      if (Events.local.supports(event)) {\n        if (!this._callbacks[event]) {\n          this._callbacks[event] = [];\n        }\n\n        this._callbacks[event].push(callback);\n      }\n    }\n    /**\n     * Register a callback for a specific event\n     * @param {string} [event] The event name ({@link Events/Stream})\n     * @param {function} [callback] The callback for the event\n     */\n\n  }, {\n    key: \"off\",\n    value: function off(event, callback) {\n      if (!event) {\n        this._callbacks = {};\n      } else if (Events.local.supports(event)) {\n        if (!callback) {\n          this._callbacks[event] = [];\n        } else {\n          this._callbacks[event] = this._callbacks[event].filter(function (cb) {\n            return cb !== callback;\n          });\n        }\n      }\n    }\n    /**\n     * The Media Constraints. (defaults to global config)\n     * @param {MediaConstraints} constraints\n     */\n\n  }, {\n    key: \"updateConstraints\",\n\n    /**\n     * Updates the stream constraints and retrieve the new MediaStream\n     * @param constraints\n     * @returns {*|Promise.<TResult>}\n     */\n    value: function updateConstraints(constraints) {\n      var _this = this;\n\n      Log.d('Local~updateConstraints', constraints);\n      this.constraints = constraints;\n      return navigator.mediaDevices.getUserMedia(this.constraints).catch(function (e) {\n        (_this._callbacks[Events.local.WEBRTC_ERROR] || []).forEach(function (cb) {\n          return cb(e);\n        });\n        return e;\n      }).then(function (media) {\n        ['audio', 'video'].forEach(function (kind) {\n          var constraintsValue = _this.constraints[kind];\n\n          if (constraintsValue) {\n            if (constraintsValue.deviceId || constraintsValue.facingMode) {\n              _this._inputs[kind] = _getConstraintValue(constraintsValue, constraintsValue.facingMode ? 'facingMode' : 'deviceId');\n            }\n          }\n        });\n        _this.media = media;\n      });\n    }\n    /**\n     * The associated MediaStream\n     * @type {MediaStream}\n     */\n\n  }, {\n    key: \"mute\",\n\n    /**\n     * Mute a track of a Stream\n     * @param {string} [track=AUDIO] The track to mute. (AUDIO, VIDEO, AUDIO_VIDEO)\n     * @param {boolean} [state=true] true for mute & false for un-mute\n     * @example <caption>mute video</caption>\n     * stream.mute(Reach.t.VIDEO)\n     * @example <caption>mute audio</caption>\n     * stream.mute(Reach.t.AUDIO)\n     * // or\n     * stream.mute()\n     */\n    value: function mute() {\n      var track = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : StreamTypes.AUDIO;\n      var state = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      Log.d('mute', track, state);\n      var _this$muted = this.muted,\n          audio = _this$muted.audio,\n          video = _this$muted.video;\n      var tracks;\n\n      switch (track) {\n        case StreamTypes.AUDIO:\n          audio = state;\n          tracks = this.media.getAudioTracks();\n          break;\n\n        case StreamTypes.VIDEO:\n        case StreamTypes.SCREEN_SHARING:\n          video = state;\n          tracks = this.media.getVideoTracks();\n          break;\n\n        case StreamTypes.AUDIO_VIDEO:\n          audio = state;\n          video = state;\n          tracks = this.media.getTracks();\n          break;\n\n        default:\n          break;\n      } // Mute media tracks\n\n\n      tracks.forEach(function (track) {\n        // eslint-disable-line no-shadow\n        track.enabled = !state; // eslint-disable-line no-param-reassign\n      }); // Signal subscribers\n\n      this.muted = {\n        audio: audio,\n        video: video\n      };\n      DataSync.set(\"_/rooms/\".concat(this.roomId, \"/streams/\").concat(this.uid, \"/muted\"), this.muted);\n    }\n    /**\n     * Un-mute a track of a Stream\n     * @param {string} [track=AUDIO] The track to mute. (AUDIO, VIDEO, AUDIO_VIDEO)\n     * @example <caption>Un-mute video</caption>\n     * stream.unMute(Reach.t.VIDEO)\n     * @example <caption>Un-mute audio</caption>\n     * stream.unMute(Reach.t.AUDIO)\n     * // or\n     * stream.unMute()\n     */\n\n  }, {\n    key: \"unMute\",\n    value: function unMute(track) {\n      this.mute(track, false);\n    }\n    /**\n     * Removes stream for published list, closes associated\n     * PeerConnections and stops current MediaStream\n     * @returns {Promise}\n     */\n\n  }, {\n    key: \"close\",\n    value: function close() {\n      if (!~[_constants.CLOSED, _constants.CLOSING].indexOf(this.status)) {\n        // eslint-disable-line no-bitwise\n        this.status = _constants.CLOSING; // Stop listening to Subscribers\n\n        var path = \"_/rooms/\".concat(this.roomId, \"/subscribers/\").concat(this.uid);\n        DataSync.off(path, 'child_added');\n        DataSync.off(path, 'child_removed'); // Cancel onDisconnects\n\n        DataSync.onDisconnect(\"_/rooms/\".concat(this.roomId, \"/streams/\").concat(this.uid)).cancel();\n        DataSync.onDisconnect(\"_/rooms/\".concat(this.roomId, \"/subscribers/\").concat(this.uid)).cancel(); // Remove subscribers\n\n        DataSync.remove(path); // Remove stream\n\n        DataSync.remove(\"_/rooms/\".concat(this.roomId, \"/streams/\").concat(this.uid));\n        this.media = null; // Close\n\n        this.status = _constants.CLOSED;\n      }\n\n      return Promise.resolve(this.status);\n    }\n    /**\n     * Switch video input device\n     * @param {string} [deviceId] A video input device Id or the `facingMode` value\n     * @returns {Promise<Local, Error>}\n     */\n\n  }, {\n    key: \"switchCamera\",\n    value: function switchCamera(deviceId) {\n      return this._switchDevice(StreamTypes.VIDEO, deviceId);\n    }\n    /**\n     * Switch audio input device\n     * @param {string} [deviceId] A audio input device Id\n     * @returns {Promise<Local, Error>}\n     */\n\n  }, {\n    key: \"switchMicrophone\",\n    value: function switchMicrophone(deviceId) {\n      return this._switchDevice(StreamTypes.AUDIO, deviceId);\n    }\n    /**\n     * Switch input device\n     * @access private\n     * @param {string} kind The kind of device to switch\n     * @param {string} [deviceId] An input device id\n     * @returns {Promise<Local, Error>}\n     */\n\n  }, {\n    key: \"_switchDevice\",\n    value: function _switchDevice(kind, deviceId) {\n      var _this2 = this;\n\n      Log.d('Local~_switchDevice', kind, deviceId);\n\n      if (this.media.getTracks().some(function (track) {\n        return track.kind === kind;\n      })) {\n        var next = Promise.resolve(deviceId);\n\n        var currentModeIdx = _facingModes.indexOf(this._inputs[kind]);\n\n        if (!deviceId && !!~currentModeIdx) {\n          // eslint-disable-line no-bitwise\n          // Loop facingModes\n          next = Promise.resolve(_facingModes[(currentModeIdx + 1) % _facingModes.length]);\n        } else if (!~_facingModes.indexOf(deviceId)) {\n          // eslint-disable-line no-bitwise\n          // Loop deviceIds\n          next = _Media.default.devices().then(function (d) {\n            // devices IDs\n            var devices = d[\"\".concat(kind, \"input\")].map(function (mediaDevice) {\n              return mediaDevice.deviceId;\n            }); // Sort to ensure same order\n\n            devices.sort(); // New device\n\n            var nextDevice = deviceId;\n\n            if (deviceId && !devices.some(function (device) {\n              return device === deviceId;\n            })) {\n              return Promise.reject(new Error(\"Unknown \".concat(kind, \" device\")));\n            }\n\n            if (!deviceId && devices.length > 1) {\n              var idx = _this2._inputs[kind] ? devices.findIndex(function (v) {\n                return v === _this2._inputs[kind];\n              }, _this2) : 0;\n              nextDevice = devices[++idx % devices.length]; // eslint-disable-line no-plusplus\n            }\n\n            return nextDevice;\n          });\n        } else {\n          next = Promise.resolve(deviceId);\n        }\n\n        return next.then(function (device) {\n          // eslint-disable-line consistent-return\n          if (_this2._inputs[kind] !== device) {\n            // Update video streams\n            _this2._inputs[kind] = device; // Stop tracks\n\n            _this2.media.getTracks().forEach(function (track) {\n              return track.stop();\n            }); // Update constraints\n\n\n            var constraints = Object.assign({}, _this2.constraints);\n            var props = ['facingMode', 'deviceId'];\n\n            if (!~_facingModes.indexOf(device)) {\n              // eslint-disable-line no-bitwise\n              props = props.reverse();\n            }\n\n            _setConstrainValue(constraints[kind], props[0], props[1], device);\n\n            Log.d('Local~_switchDevice', kind, constraints);\n            return _this2.updateConstraints(constraints);\n          }\n        }).then(function () {\n          return _this2;\n        });\n      }\n\n      return Promise.reject(new Error(\"Current stream does not contain a \".concat(kind, \" track\")));\n    }\n    /**\n     * Publish a local stream\n     * @access protected\n     * @param {string} roomId The room Id\n     * @param {string} type The stream type, see {@link StreamTypes} for possible values\n     * @param {?Element} container The element the stream is attached to.\n     * @param {?MediaStreamConstraints} [constraints] The stream constraints.\n     * If not defined the constraints defined in ReachConfig will be used.\n     * @returns {Promise<Local, Error>}\n     */\n\n    /* static share(roomId, type, container, constraints) {\n      if (!cache.user) {\n        return Promise.reject(new Error('Only an authenticated user can share a stream.'));\n      }\n      const streamMetaData = {\n        from: cache.user.uid,\n        device: cache.device,\n        type\n      };\n        const sharedStream = new Local(Object.assign({ roomId, constraints, container },\n        streamMetaData));\n      Log.d('Local~share', { sharedStream });\n      return navigator.mediaDevices.getUserMedia(sharedStream.constraints)\n        .then((media) => {\n          sharedStream.media = media;\n        })\n        // Got MediaStream, publish it\n        .then(() => DataSync.push(`_/rooms/${roomId}/streams`, streamMetaData))\n        .then((streamRef) => {\n          sharedStream.uid = streamRef.name();\n          if (/video/i.test(sharedStream.type)) {\n            if (sharedStream.isVideoLoaded) {\n              const streamSize = {\n                height: sharedStream.node.videoHeight,\n                width: sharedStream.node.videoWidth,\n              };\n              streamRef.update(streamSize);\n            } else {\n              sharedStream.node.onloadeddata = function () { // eslint-disable-line func-names\n                const streamSize = {\n                  height: sharedStream.node.videoHeight,\n                  width: sharedStream.node.videoWidth,\n                };\n                streamRef.update(streamSize);\n              };\n            }\n          }\n          if (/video/i.test(sharedStream.type)) {\n            window.addEventListener('resize', (() => {\n              if (sharedStream.node != null) {\n                const streamSize = {\n                  height: sharedStream.node.videoHeight,\n                  width: sharedStream.node.videoWidth,\n                };\n                streamRef.update(streamSize);\n              }\n            }));\n          }\n          // Save sharedStream\n          cache.streams.shared[sharedStream.uid] = sharedStream;\n          // Remove shared stream on Disconnect\n          DataSync.onDisconnect(`_/rooms/${roomId}/streams/${sharedStream.uid}`).remove();\n          // Remove shared stream on Disconnect\n          DataSync.onDisconnect(`_/rooms/${roomId}/subscribers/${sharedStream.uid}`).remove();\n          // Start listening to subscribers\n          const\n            path = `_/rooms/${sharedStream.roomId}/subscribers/${sharedStream.uid}`;\n            const value = snapData => Object.assign({ device: snapData.name() }, snapData.val() || {});\n          DataSync.on(path, 'child_added',\n            (snapData) => {\n              const subscriber = value(snapData);\n              Log.d('Local~subscribed', subscriber);\n              cache.peerConnections.offer(sharedStream, subscriber)\n                .then((pc) => {\n                  (this._callbacks[Events.local.SUBSCRIBED] || [])\n                    .forEach(cb => cb(sharedStream, subscriber));\n                  return sharedStream.peerConnections.push(pc);\n                });\n            },\n            Log.e.bind(Log));\n          DataSync.on(path, 'child_removed',\n            (snapData) => {\n              const subscriber = value(snapData);\n              Log.d('Local~un-subscribed', subscriber);\n              const closedPC = cache.peerConnections.close(sharedStream.uid, subscriber.device);\n              sharedStream.peerConnections = sharedStream.peerConnections\n                .filter(pc => pc !== closedPC);\n            },\n            Log.e.bind(Log));\n          Log.d('Local~shared', { sharedStream });\n          return sharedStream;\n        });\n    } */\n\n    /**\n     * Get a local stream\n     * @access protected\n     * @param {string} roomId The room Id\n     * @param {string} type The stream type, see {@link StreamTypes} for possible values\n     * @param {?Element} container The element the stream is attached to.\n     * @param {?MediaStreamConstraints} [constraints] The stream constraints.\n     * If not defined the constraints defined in ReachConfig will be used.\n     * @returns {Promise<Local, Error>}\n     */\n\n  }, {\n    key: \"publish\",\n\n    /**\n     * Publish a local stream\n     * @access protected\n     * @returns {Local}\n     */\n    value: function publish(sharedStream) {\n      var _this3 = this;\n\n      Log.d('Local~publish');\n      var roomId = sharedStream.roomId;\n      return DataSync.push(\"_/rooms/\".concat(roomId, \"/streams\"), sharedStream.streamMetaData).then(function (streamRef) {\n        sharedStream.uid = streamRef.name(); // eslint-disable-line no-param-reassign\n\n        if (sharedStream.isVideoLoaded) {\n          var streamSize = {\n            height: sharedStream.node.videoHeight,\n            width: sharedStream.node.videoWidth\n          };\n          streamRef.update(streamSize);\n        } else {\n          sharedStream.node.onloadeddata = function () {\n            // eslint-disable-line\n            var streamSize = {\n              height: sharedStream.node.videoHeight,\n              width: sharedStream.node.videoWidth\n            };\n            streamRef.update(streamSize);\n          };\n        }\n\n        window.addEventListener('resize', function () {\n          if (sharedStream.node != null) {\n            var _streamSize = {\n              height: sharedStream.node.videoHeight,\n              width: sharedStream.node.videoWidth\n            };\n            streamRef.update(_streamSize);\n          }\n        }); // Save sharedStream\n\n        _cache.default.streams.shared[sharedStream.uid] = sharedStream; // Remove shared stream on Disconnect\n\n        DataSync.onDisconnect(\"_/rooms/\".concat(roomId, \"/streams/\").concat(sharedStream.uid)).remove(); // Remove shared stream on Disconnect\n\n        DataSync.onDisconnect(\"_/rooms/\".concat(roomId, \"/subscribers/\").concat(sharedStream.uid)).remove(); // Start listening to subscribers\n\n        var path = \"_/rooms/\".concat(sharedStream.roomId, \"/subscribers/\").concat(sharedStream.uid);\n\n        var value = function value(snapData) {\n          return Object.assign({\n            device: snapData.name()\n          }, snapData.val() || {});\n        };\n\n        DataSync.on(path, 'child_added', function (snapData) {\n          var subscriber = value(snapData);\n          Log.d('Local~subscribed', subscriber);\n\n          _cache.default.peerConnections.offer(sharedStream, subscriber, _this3._callbacks[Events.local.WEBRTC_ERROR]).then(function (pc) {\n            (_this3._callbacks[Events.local.SUBSCRIBED] || []).forEach(function (cb) {\n              return cb(sharedStream, subscriber);\n            });\n            return sharedStream.peerConnections.push(pc);\n          });\n        }, Log.e.bind(Log), _this3);\n        DataSync.on(path, 'child_removed', function (snapData) {\n          var subscriber = value(snapData);\n          Log.d('Local~un-subscribed', subscriber);\n\n          var closedPC = _cache.default.peerConnections.close(sharedStream.uid, subscriber.device);\n          /* eslint-disable no-param-reassign */\n\n\n          sharedStream.peerConnections = sharedStream.peerConnections.filter(function (pc) {\n            return pc !== closedPC;\n          });\n          /* eslint-enable no-param-reassign */\n        }, Log.e.bind(Log));\n        Log.d('Local~shared', {\n          sharedStream: sharedStream\n        });\n        return sharedStream;\n      });\n    }\n  }, {\n    key: \"constraints\",\n    set: function set(constraints) {\n      var _this4 = this;\n\n      var values = constraints || _cache.default.config.constraints;\n\n      var defaultConstraints = _Media.default.constraints();\n\n      ['audio', 'video'].forEach(function (type) {\n        if (!~_this4.type.indexOf(type)) {\n          // eslint-disable-line no-bitwise\n          values[type] = false;\n        } else if (!values[type]) {\n          values[type] = defaultConstraints[type];\n        }\n\n        if (values[type].deviceId || values[type].facingMode) {\n          _this4._inputs[type] = _getConstraintValue(values[type], values[type].facingMode ? 'facingMode' : 'deviceId');\n        }\n      });\n      Log.d('Local~set#contraints', values);\n      /**\n       * @ignore\n       */\n\n      this._constraints = values;\n    }\n    /**\n     * The Media Constraints. (defaults to global config)\n     * @type {MediaConstraints}\n     */\n    ,\n    get: function get() {\n      return this._constraints;\n    }\n  }, {\n    key: \"media\",\n    set: function set(mediaStream) {\n      var _this5 = this;\n\n      if (mediaStream) {\n        if (!(mediaStream instanceof MediaStream)) {\n          throw new Error('The media MUST be a MediaStream');\n        }\n\n        var checkDevices = {};\n        mediaStream.getTracks().forEach(function (track) {\n          // Reset mute\n          track.enabled = !_this5.muted[track.kind]; // eslint-disable-line no-param-reassign\n          // Get device label\n\n          if (!_this5._inputs[track.kind]) {\n            checkDevices[track.kind] = track.label;\n          }\n        }); // Try to get deviceId from label\n\n        if (Object.keys(checkDevices).length) {\n          _Media.default.devices().then(function (devices) {\n            Object.keys(checkDevices).forEach(function (kind) {\n              if (devices[\"\".concat(kind, \"input\")]) {\n                var deviceIds = devices[\"\".concat(kind, \"input\")].filter(function (device) {\n                  return device.label.length && device.label === checkDevices[kind];\n                });\n\n                if (deviceIds.length === 1 && !_this5._inputs[kind]) {\n                  _this5._inputs[kind] = deviceIds[0].deviceId;\n                }\n\n                if (deviceIds.length === 0 && devices[\"\".concat(kind, \"input\")][0].label === '' && !_this5._inputs[kind]) {\n                  // from a webview, the label is not delivered\n                  _this5._inputs[kind] = devices[\"\".concat(kind, \"input\")][0].deviceId;\n                }\n              }\n            });\n          });\n        } // Display\n\n\n        this.node = _Media.default.attachStream(mediaStream, this.container, this.node, 0);\n\n        this.node.onloadeddata = function () {\n          _this5.isVideoLoaded = true;\n        };\n\n        this.status = _constants.CONNECTED;\n        Log.d('Local~set media', {\n          mediaStream: mediaStream\n        }, this.node); // Renegotiate\n\n        this.peerConnections.forEach(function (peerConnection) {\n          return peerConnection.renegotiate(_this5._media, mediaStream);\n        });\n      } else if (this.media && !mediaStream) {\n        // Remove node\n        this.node.srcObject = null;\n        this.container.removeChild(this.node);\n        this.node = null; // Stop stream\n\n        this.media.getTracks().forEach(function (track) {\n          return track.stop();\n        }); // Close PeerConnections\n\n        this.peerConnections.forEach(function (peerConnection) {\n          return peerConnection.close();\n        });\n      } // Save\n\n      /**\n       * @ignore\n       */\n\n\n      this._media = mediaStream;\n    }\n    /**\n     * The associated MediaStream\n     * @type {MediaStream}\n     */\n    ,\n    get: function get() {\n      return this._media;\n    }\n  }], [{\n    key: \"getLocalVideo\",\n    value: function getLocalVideo(roomId, type, container, constraints) {\n      if (!_cache.default.user) {\n        return Promise.reject(new Error('Only an authenticated user can share a stream.'));\n      }\n\n      var streamMetaData = {\n        from: _cache.default.user.uid,\n        device: _cache.default.device,\n        userAgent: _cache.default.userAgent,\n        type: type\n      };\n      var sharedStream = new Local(Object.assign({\n        roomId: roomId,\n        constraints: constraints,\n        container: container\n      }, streamMetaData));\n      sharedStream.streamMetaData = streamMetaData;\n      Log.d('Local~getLocalVideo', {\n        sharedStream: sharedStream\n      });\n      return navigator.mediaDevices.getUserMedia(sharedStream.constraints).then(function (media) {\n        sharedStream.media = media;\n        return sharedStream;\n      });\n    }\n  }]);\n\n  return Local;\n}();\n\nexports.default = Local;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _cache = _interopRequireDefault(require(\"../util/cache\"));\n\nvar DataSync = _interopRequireWildcard(require(\"../util/DataSync\"));\n\nvar Log = _interopRequireWildcard(require(\"../util/Log\"));\n\nvar Events = _interopRequireWildcard(require(\"../../definitions/Events\"));\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * A published Stream\n * @public\n */\nvar Remote =\n/*#__PURE__*/\nfunction () {\n  /**\n   * @access protected\n   * @param {object} values\n   */\n  function Remote(values) {\n    _classCallCheck(this, Remote);\n\n    Log.d('Remote~new', values);\n    /**\n     * The uid of the room the stream is published in\n     * @type {string}\n     */\n\n    this.roomId = values.roomId;\n    /**\n     * The uid of this stream\n     * @type {string}\n     */\n\n    this.uid = values.uid;\n    /**\n     * The uid of the publisher of the stream\n     * @type {string}\n     */\n\n    this.from = values.from;\n    /**\n     * The type of the stream\n     * @type {string}\n     */\n\n    this.type = values.type;\n    /**\n     * @type {string}\n     */\n\n    this.device = values.device;\n    /**\n     * the user agent of the publisher of the stream\n     * @type {string}\n     */\n\n    this.userAgent = values.userAgent;\n    /**\n     * @type {string}\n     */\n\n    this.height = values.height;\n    /**\n     * @type {string}\n     */\n\n    this.width = values.width;\n    /**\n     * The local DOM container element where the {@link Local~media} is displayed\n     * @type {Element}\n     */\n\n    this.container = _cache.default.config.remoteStreamContainer;\n    /**\n     * @type {{audio: boolean, video: boolean}}\n     */\n\n    this.muted = Object.assign({\n      audio: false,\n      video: false\n    }, values.muted);\n    /**\n     * List of callbacks for mute status change\n     * @type {{MUTE: function[]}}\n     * @private\n     */\n\n    this._callbacks = {};\n    /**\n     * PeerConnections associated to this remote stream\n     * @type {PeerConnection}\n     */\n\n    this.peerConnection = null;\n  }\n  /**\n   * DOM element where the MediaStream is displayed\n   * @returns {Element}\n   */\n\n\n  _createClass(Remote, [{\n    key: \"subscribe\",\n\n    /**\n     * Subscribe to the stream\n     * @param {Element} [remoteStreamContainer] The element the stream is attached to.\n     * Can be null if already specified in ReachConfig.\n     * @returns {Promise}\n     */\n    value: function subscribe(remoteStreamContainer) {\n      var _this = this;\n\n      if (!_cache.default.user) {\n        return Promise.reject(new Error('Only an authenticated user can subscribe to a Room\\'s stream.'));\n      } // TODO: Test if not already subscribed ?\n\n\n      this.container = remoteStreamContainer || _cache.default.config.remoteStreamContainer;\n      Log.d('Remote~subscribe', this.container);\n      return _cache.default.peerConnections.answer(this, this.container, this._callbacks[Events.stream.WEBRTC_ERROR]).then(function (pc) {\n        _this.peerConnection = pc;\n      }).then(function () {\n        return DataSync.update(\"_/rooms/\".concat(_this.roomId, \"/subscribers/\").concat(_this.uid, \"/\").concat(_cache.default.device), {\n          to: _cache.default.user.uid,\n          _created: DataSync.ts()\n        });\n      }).then(function () {\n        DataSync.onDisconnect(\"_/rooms/\".concat(_this.roomId, \"/subscribers/\").concat(_this.uid, \"/\").concat(_cache.default.device)).remove();\n        var subscribed = false;\n        DataSync.on(\"_/rooms/\".concat(_this.roomId, \"/streams/\").concat(_this.uid), 'value', function (snapData) {\n          var values = snapData.val();\n          Log.d('Remote~updated', values);\n\n          if (values) {\n            // Update type\n            _this.type = values.type; // update stream size\n\n            var width = values.width,\n                height = values.height;\n\n            if ((height || width) && (height !== _this.height || width !== _this.height)) {\n              _this.height = values.height;\n              _this.width = values.width;\n              Log.w(_this._callbacks[Events.stream.SIZE]);\n              (_this._callbacks[Events.stream.SIZE] || []).forEach(function (cb) {\n                return cb(_this.height, _this.width);\n              });\n            } // Update mute status\n\n\n            var muted = values.muted;\n\n            if (muted && (muted.audio !== _this.muted.audio || muted.video !== _this.muted.video)) {\n              _this.muted = muted;\n              Log.w(_this._callbacks[Events.stream.MUTE]);\n              (_this._callbacks[Events.stream.MUTE] || []).forEach(function (cb) {\n                return cb(_this.muted);\n              });\n            }\n\n            subscribed = true;\n          } else if (subscribed) {\n            Log.i('Remote#removed', _this);\n\n            _this._close(true);\n          }\n        });\n      }).catch(Log.r('Remote~subscribe'));\n    }\n    /**\n     * Unsubscribe from the stream\n     * @returns {Promise}\n     */\n\n  }, {\n    key: \"unSubscribe\",\n    value: function unSubscribe() {\n      return this._close(false);\n    }\n    /**\n     * Close the remote Stream\n     * @param {boolean} remote Close is initiated by publisher\n     * @returns {*}\n     * @private\n     */\n\n  }, {\n    key: \"_close\",\n    value: function _close(remote) {\n      // Cancel onDisconnect\n      DataSync.onDisconnect(\"_/rooms/\".concat(this.roomId, \"/subscribers/\").concat(this.uid, \"/\").concat(_cache.default.device)).cancel(); // Stop listening to stream modifications\n\n      DataSync.off(\"_/rooms/\".concat(this.roomId, \"/streams/\").concat(this.uid), 'value'); // Un-subscribe\n\n      if (!remote) {\n        DataSync.remove(\"_/rooms/\".concat(this.roomId, \"/subscribers/\").concat(this.uid, \"/\").concat(_cache.default.device));\n      } // Close PeerConnection\n\n\n      return Promise.resolve(_cache.default.peerConnections.close(this.uid, this.device));\n    }\n    /**\n     * Register a callback for a specific event\n     * @param {string} event The event name ({@link Events/Stream})\n     * @param {function} callback The callback for the event\n     */\n\n  }, {\n    key: \"on\",\n    value: function on(event, callback) {\n      if (Events.stream.supports(event)) {\n        if (!this._callbacks[event]) {\n          this._callbacks[event] = [];\n        }\n\n        this._callbacks[event].push(callback);\n      }\n    }\n    /**\n     * Register a callback for a specific event\n     * @param {string} [event] The event name ({@link Events/Stream})\n     * @param {function} [callback] The callback for the event\n     */\n\n  }, {\n    key: \"off\",\n    value: function off(event, callback) {\n      if (!event) {\n        this._callbacks = {};\n      } else if (Events.stream.supports(event)) {\n        if (!callback) {\n          this._callbacks[event] = [];\n        } else {\n          this._callbacks[event] = this._callbacks[event].filter(function (cb) {\n            return cb !== callback;\n          });\n        }\n      }\n    }\n    /**\n     * @access protected\n     * @param {object} values\n     */\n\n  }, {\n    key: \"update\",\n    value: function update(values) {\n      var _this2 = this;\n\n      Object.keys(values).forEach(function (key) {\n        _this2[key] = values[key];\n      });\n    }\n  }, {\n    key: \"node\",\n    get: function get() {\n      return this.peerConnection ? this.peerConnection.node : null;\n    }\n  }]);\n\n  return Remote;\n}();\n\nexports.default = Remote;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _Remote = _interopRequireDefault(require(\"./Remote\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * @access protected\n */\nvar StreamManager =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Constructor\n   * @access protected\n   */\n  function StreamManager() {\n    _classCallCheck(this, StreamManager);\n\n    /**\n     * Shared local streams\n     * @type {{*: Local}}\n     */\n    this.shared = {};\n    /**\n     * Subscribed remote streams\n     * @type {{*: Remote}}\n     */\n\n    this.remote = {};\n  }\n  /**\n   * Get a Remote stream reference\n   * @param {object} streamData\n   * @returns {Remote}\n   */\n\n\n  _createClass(StreamManager, [{\n    key: \"getRemote\",\n    value: function getRemote(streamData) {\n      var remoteStream = this.remote[streamData.uid];\n\n      if (remoteStream) {\n        remoteStream.update(streamData);\n      } else {\n        remoteStream = new _Remote.default(streamData);\n        this.remote[streamData.uid] = remoteStream;\n      }\n\n      return remoteStream;\n    }\n    /**\n     * Get a Remote stream reference\n     * @param {object} streamData\n     * @returns {Remote}\n     */\n\n  }, {\n    key: \"getShared\",\n    value: function getShared(streamData) {\n      // TODO: If it does not exists locally as it should, maybe we should remove it ?\n      return this.shared[streamData.uid];\n    }\n  }]);\n\n  return StreamManager;\n}();\n\nexports.default = StreamManager;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.ts = exports.onDisconnect = exports.off = exports.on = exports.list = exports.get = exports.once = exports.remove = exports.update = exports.push = exports.set = exports.eventType = void 0;\n\nvar _cache = _interopRequireDefault(require(\"./cache\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _construct(Parent, args, Class) { if (isNativeReflectConstruct()) { _construct = Reflect.construct; } else { _construct = function _construct(Parent, args, Class) { var a = [null]; a.push.apply(a, args); var Constructor = Function.bind.apply(Parent, a); var instance = new Constructor(); if (Class) _setPrototypeOf(instance, Class.prototype); return instance; }; } return _construct.apply(null, arguments); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n/**\n * Get the event string for Webcom from Reach events\n * @access protected\n * @param {string} event A Reach event\n * @return {string}\n */\nvar eventType = function eventType(event) {\n  var evt;\n\n  if (/_ADDED$/i.test(event) || /_PUBLISHED$/.test(event)) {\n    evt = 'added';\n  } else if (/_CHANGED$/.test(event) || /_REFRESHED$/.test(event)) {\n    evt = 'changed';\n  } else if (/_REMOVED$/.test(event) || /_UNPUBLISHED$/.test(event)) {\n    evt = 'removed';\n  }\n\n  return evt ? \"child_\".concat(evt) : event;\n};\n/**\n * Write method\n * @param {string} method Write method (set,update)\n * @param {string} path The path to set\n * @param {object} data The data to set\n * @ignore\n */\n\n\nexports.eventType = eventType;\n\nvar _write = function _write(method, path, data) {\n  return new Promise(function (resolve, reject) {\n    _cache.default.base.child(path)[method](data, function (error) {\n      return error ? reject(error) : resolve();\n    });\n  });\n};\n/**\n * {@link Webcom#set} as a {@link Promise}\n * @access protected\n * @param {string} path The path to set\n * @param {object} data The data to set\n * @return {Promise<*, Error>}\n */\n\n\nvar set = _write.bind(undefined, 'set');\n/**\n * {@link Webcom#push} as a {@link Promise}\n * @access protected\n * @param {string} path The path to push\n * @param {object} data The data to push\n * @return {Promise<Webcom, Error>}\n */\n\n\nexports.set = set;\n\nvar push = function push(path, data) {\n  return new Promise(function (resolve, reject) {\n    var pushRef = _cache.default.base.child(path).push(data, function (error) {\n      return error ? reject(error) : resolve(pushRef);\n    });\n  });\n};\n/**\n * {@link Webcom#update} as a {@link Promise}\n * @access protected\n * @param {string} path The path to update\n * @param {object} data The data to update\n * @return {Promise<*, Error>}\n */\n\n\nexports.push = push;\n\nvar update = _write.bind(undefined, 'update');\n/**\n * {@link Webcom#remove} as a {@link Promise}\n * @access protected\n * @param {string} path The path to remove\n * @return {Promise<*, Error>}\n */\n\n\nexports.update = update;\n\nvar remove = function remove(path) {\n  return new Promise(function (resolve, reject) {\n    _cache.default.base.child(path).remove(function (error) {\n      return error ? reject(error) : resolve();\n    });\n  });\n};\n/**\n * {@link Webcom#once} shortcut as a {@link Promise}\n * @access protected\n * @param {string} path The path\n * @param {string} event The event\n * @returns {Promise<Webcom/api.DataSnapshot, Error>}\n */\n\n\nexports.remove = remove;\n\nvar once = function once(path, event) {\n  return new Promise(function (resolve, reject) {\n    _cache.default.base.child(path).once(eventType(event), resolve, reject);\n  });\n};\n/**\n * {@link Webcom#once}('value') as a {@link Promise}\n * @access protected\n * @param {string} path The path to get\n * @return {Promise<Webcom/api.DataSnapshot, Error>}\n */\n\n\nexports.once = once;\n\nvar get = function get(path) {\n  return once(path, 'value');\n};\n/**\n * List values as a {@link Promise}\n * @access protected\n * @param {string} path The path to get\n * @param {function} Type The type of the object to list\n * @param params Additional constructor parameters\n * @return {Promise<Object[], Error>}\n */\n\n\nexports.get = get;\n\nvar list = function list(path, Type) {\n  for (var _len = arguments.length, params = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    params[_key - 2] = arguments[_key];\n  }\n\n  return get(path).then(function (snapData) {\n    if (snapData) {\n      var values = [];\n      snapData.forEach(function (snapChild) {\n        values.push(_construct(Type, [snapChild].concat(params)));\n      });\n      return values;\n    }\n\n    return [];\n  });\n};\n/**\n * {@link Webcom#on} shortcut\n * @access protected\n * @param {string} path The path\n * @param {string} event The event\n * @param {Webcom/api.Query~queryCallback|function} queryCallback The callback\n * @param {Webcom/api.Query~cancelCallback|function} [cancelCallback] The callback\n */\n\n\nexports.list = list;\n\nvar on = function on(path, event, queryCallback, cancelCallback) {\n  _cache.default.base.child(path).on(eventType(event), queryCallback, cancelCallback);\n};\n/**\n * {@link Webcom#off} shortcut\n * @access protected\n * @param {string} path The path\n * @param {string} event The event\n * @param {function} [callback] The callback\n * @param {object} context The execution context\n */\n\n\nexports.on = on;\n\nvar off = function off(path, event, callback) {\n  _cache.default.base.child(path).off(eventType(event), callback);\n};\n/**\n * {@link Webcom#onDisconnect} shortcut\n * @access protected\n * @param {string} path The path\n * @return {Webcom/api.OnDisconnect}\n */\n\n\nexports.off = off;\n\nvar onDisconnect = function onDisconnect(path) {\n  return _cache.default.base.child(path).onDisconnect();\n};\n/**\n * Timestamp value\n * @access protected\n * @type {function}\n */\n// export const ts = () => Webcom.ServerValue.TIMESTAMP;\n\n\nexports.onDisconnect = onDisconnect;\n\nvar ts = function ts() {\n  return Date.now();\n}; // HACK #DataSync: Rollback when TIMESTAMP works again (server-side bug with security rules)\n\n\nexports.ts = ts;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.r = exports.e = exports.w = exports.i = exports.d = void 0;\n\nvar _cache = _interopRequireDefault(require(\"./cache\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/**\n * List of possible log levels\n * @access private\n * @type {string[]}\n */\nvar levels = ['DEBUG', 'INFO', 'WARN', 'ERROR'];\n/**\n * Is log enabled for a specific level\n * @access private\n * @param {string} level The level to test\n * @returns {boolean}\n */\n\nvar isEnabled = function isEnabled(level) {\n  return levels.indexOf(level.toUpperCase()) >= levels.indexOf(_cache.default.logLevel.toUpperCase());\n};\n/**\n * Global Console. (to avoid drop_console...)\n * @access private\n * @type {Console}\n */\n\n\nvar gConsole = global.console;\n/**\n * Shorthand for console call\n * @access private\n * @param {string} method A method of the console object\n * @param {string} level The log level\n * @param {*} messages the log content\n */\n\nvar logger = function logger(method, level) {\n  for (var _len = arguments.length, messages = new Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    messages[_key - 2] = arguments[_key];\n  }\n\n  return isEnabled(level) ? gConsole[method.toLowerCase()].bind(gConsole).apply(void 0, messages) : function () {};\n};\n/**\n * Use a group to log\n * @access private\n * @param {string} level The log level\n * @param {string} message The group title\n * @param {*} items the log content\n */\n\n\nvar group = function group(level, message) {\n  for (var _len2 = arguments.length, items = new Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n    items[_key2 - 2] = arguments[_key2];\n  }\n\n  if (items.length > 0) {\n    logger.bind(undefined, gConsole.group ? 'group' : level, level)(typeof message === 'string' ? message : '');\n    var values = (typeof message !== 'string' ? [message] : []).concat(items);\n\n    if (items.length === 1 && items[0] instanceof Array && typeof items[0].length !== 'undefined') {\n      values = items[0]; // eslint-disable-line prefer-destructuring\n    }\n\n    values.forEach(function (item) {\n      return logger.bind(undefined, level, level)(item);\n    });\n\n    if (gConsole.groupEnd) {\n      gConsole.groupEnd();\n    }\n  } else {\n    logger.bind(undefined, level, level, message);\n  }\n};\n/**\n * Log debug messages if log level is set to DEBUG.\n * @access protected\n * @see https://developer.mozilla.org/fr/docs/Web/API/Console/log\n */\n\n\nvar d = group.bind(undefined, levels[0]);\n/**\n * Log information messages if log level is set to DEBUG or INFO.\n * @access protected\n * @see https://developer.mozilla.org/fr/docs/Web/API/Console/info\n */\n\nexports.d = d;\nvar i = group.bind(undefined, levels[1]);\n/**\n * Log warning messages if log level is set to DEBUG, INFO or WARN.\n * @access protected\n * @see https://developer.mozilla.org/fr/docs/Web/API/Console/warn\n */\n\nexports.i = i;\nvar w = group.bind(undefined, levels[2]);\n/**\n * Log error messages. Errors are always logged.\n * @access protected\n * @see https://developer.mozilla.org/fr/docs/Web/API/Console/error\n */\n\nexports.w = w;\nvar e = gConsole.error.bind(gConsole);\n/**\n * Promise rejection logger to use with catch\n * @access protected\n * @param {string} message\n * @returns {function}\n */\n\nexports.e = e;\n\nvar r = function r(message) {\n  return function (reason) {\n    d(message, reason);\n    return Promise.reject(reason || message);\n  };\n};\n\nexports.r = r;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar Log = _interopRequireWildcard(require(\"./Log\"));\n\nvar _Reach = _interopRequireDefault(require(\"../../Reach\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * Video resolution presets\n * @access private\n * @type {{UHD: {w: number, h: number, min: string}, FHD: {w: number, h: number, min: string, max: string}, HD: {w: number, h: number, min: string, max: string}, SVGA: {w: number, h: number, min: string, max: string}, SD: {w: number, h: number, min: string, max: string}, VGA: {w: number, h: number, max: string}}}\n */\nvar presets = {\n  UHD: {\n    w: 3840,\n    h: 2160,\n    min: 'HD'\n  },\n  FHD: {\n    w: 1920,\n    h: 1080,\n    min: 'HD',\n    max: 'UHD'\n  },\n  HD: {\n    w: 1280,\n    h: 720,\n    min: 'SD',\n    max: 'FHD'\n  },\n  SVGA: {\n    w: 800,\n    h: 600,\n    min: 'VGA',\n    max: 'HD'\n  },\n  SD: {\n    w: 720,\n    h: 576,\n    min: 'VGA',\n    max: 'HD'\n  },\n  VGA: {\n    w: 640,\n    h: 480,\n    max: 'SVGA'\n  }\n};\n/**\n * Assign deviceId to constraint\n * @param constraint\n * @param deviceId\n * @returns {*}\n */\n\nvar _assignDevice = function _assignDevice(constraint, deviceId) {\n  if (constraint && deviceId) {\n    return Object.assign(/^((user)|(environment))$/i.test(deviceId) ? {\n      facingMode: deviceId\n    } : {\n      deviceId: deviceId\n    }, constraint === true ? {} : constraint);\n  }\n\n  return constraint;\n};\n/**\n * Helpers for MediaDevices and MediaStreamConstraints.\n */\n\n\nvar Media =\n/*#__PURE__*/\nfunction () {\n  function Media() {\n    _classCallCheck(this, Media);\n  }\n\n  _createClass(Media, null, [{\n    key: \"constraints\",\n\n    /**\n     * Helpers to create a MediaStreamConstraints configuration object\n     * @param {boolean|MediaTrackConstraints|string} [videoConstraints='HD'] a boolean, a video constraints object or a preset id (UHD, FHD, HD, SVGA, SD, VGA)\n     * @param {boolean|MediaTrackConstraints} [audioConstraints=true] a boolean or an audio constraints object\n     * @param {string} [type=ideal] type of constraints for video when using a preset (exact,min,max or ideal)\n     * @param {string|object} [videoDeviceId] video input device id or facingMode\n     * @param {string|object} [audioDeviceId] audio input device id\n     * @returns {object}\n     * @throws {Error}\n     *\n     * @example <caption>HD AudioVideo with default devices</caption>\n     * let myConstraints = Reach.media.constraints();\n     * console.log(myConstraints);\n     *\n     * @example <caption>Full HD Video without audio using default devices</caption>\n     * let myConstraints = Reach.media.constraints('FHD', false, 'exact');\n     * console.log(myConstraints);\n     */\n    value: function constraints() {\n      var videoConstraints = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'HD';\n      var audioConstraints = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n      var type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'ideal';\n      var videoDeviceId = arguments.length > 3 ? arguments[3] : undefined;\n      var audioDeviceId = arguments.length > 4 ? arguments[4] : undefined;\n      var video = videoConstraints;\n\n      if (typeof videoConstraints === 'string') {\n        if (presets[videoConstraints.toUpperCase()]) {\n          var preset = presets[videoConstraints.toUpperCase()];\n\n          var dimConstraint = function dimConstraint(dim) {\n            if (/^(min|max|exact)$/.test(type)) {\n              var r = {};\n              r[type] = preset[dim];\n              return r;\n            }\n\n            return {\n              min: preset.min ? presets[preset.min][dim] : preset[dim],\n              ideal: preset[dim],\n              max: preset.max ? presets[preset.max][dim] : preset[dim]\n            };\n          };\n\n          video = {\n            width: dimConstraint('w'),\n            height: dimConstraint('h')\n          };\n        } else {\n          throw new Error('Unknown Video Resolution preset (UHD, FHD, HD, SVGA, SD, VGA)');\n        }\n      }\n\n      video = _assignDevice(video, videoDeviceId);\n\n      var audio = _assignDevice(audioConstraints, audioDeviceId);\n\n      Log.d('Media#constraints', {\n        video: video,\n        audio: audio\n      });\n      return {\n        video: video,\n        audio: audio\n      };\n    }\n    /**\n     * Init stream display node depending on stream type\n     * @param {MediaStream} mediaStream The MediaStream to display\n     * @param {Element} container Container node for streams\n     * @param {Element} previous Previous node for the stream\n     * @param {number} [volume=.7] the default volume\n     * @return {Element}\n     */\n\n  }, {\n    key: \"attachStream\",\n    value: function attachStream(mediaStream, container, previous) {\n      var volume = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0.7;\n      var tagName = '';\n\n      if (mediaStream.getVideoTracks().length > 0) {\n        tagName = 'video';\n      } else if (mediaStream.getAudioTracks().length > 0) {\n        tagName = 'audio';\n      }\n\n      Log.d('Media#attachStream', mediaStream, tagName);\n\n      if (tagName.length > 0) {\n        var _node = previous;\n\n        if (!_node || _node.tagName.toLowerCase() !== tagName) {\n          _node = document.createElement(tagName);\n          _node.autoplay = true; // set these attributes in order to launch the video on IOS\n\n          if (_Reach.default.browser.browser === 'safari') {\n            _node.setAttribute('playsinline', true);\n\n            _node.setAttribute('muted', true);\n          } else {// _node.setAttribute('type','video/mp4');\n          }\n\n          _node.style.borderRadius = '1px';\n        }\n\n        if (container) {\n          if (previous && previous !== _node) {\n            container.replaceChild(_node, previous);\n          } else if (!previous) {\n            container.appendChild(_node);\n          }\n        }\n\n        _node.srcObject = mediaStream;\n        /* _node.addEventListener('play', (event) => {\n          Log.d(`video.onplay = ${event.type}`);\n          _node.srcObject.onaddtrack = (track) => {\n            Log.d(`[Local] listener: video.onaddtrack = ${track.label}`); // eslint-disable-line\n          };\n          _node.srcObject.onremovetrack = (track) => {\n            Log.d(`[Local] listener: video.onremovetrack = ${track.label}`); // eslint-disable-line\n          };\n          _node.srcObject.oninactive = () => {\n            Log.d(`[Local] listener: video.oninactive`); // eslint-disable-line\n          };\n          _node.srcObject.onplaying = (event) => {\n            console.debug(`[Local] listener: video.onplaying = ${event.type}`); // eslint-disable-line\n          };\n          _node.srcObject.onstalled = (event) => {\n            console.debug(`[Local] listener: video.onstalled = ${event.type}`); // eslint-disable-line\n          };\n          _node.srcObject.onsuspend = (event) => {\n            console.debug(`[Local] listener: video.onsuspend = ${event.type}`); // eslint-disable-line\n            console.debug(event); // eslint-disable-line\n            console.debug('on passe là');\n          };\n        }); */\n\n        /* _node.onsuspend = (event) => {\n          console.debug(`[Local] listener: video.onsuspend = ${event}`); // eslint-disable-line\n          console.debug(event); // eslint-disable-line\n          /!* console.debug('on est ici');\n                  const tagmuted = _node.muted;\n                  _node.setAttribute('muted',true);\n                  let autoPlayAllowed = true;\n                  const promise = _node.play();\n                  if (promise instanceof Promise) {\n                      promise.then(function(status) {\n                          console.dir(promise);\n                      });\n                      promise.catch(function(error) {\n                          console.error(error.message);\n                          if (error.name === 'NotAllowedError') {\n                              autoPlayAllowed = false;\n                          } else {\n                              // Don't throw the error so that we get to the then\n                              // or throw it but set the autoPlayAllowed to true in here\n                          }\n                      }).then(function() {\n                          if (autoPlayAllowed) {\n                              console.log('autoplay allowed')\n                          } else {\n                              console.log('autoplay NOT allowed')\n                          }\n                      });\n                  } else {\n                      console.log('autoplay unknown')\n                  } *!/\n        }; */\n        // _node.addEventListener('loadeddata', () => Log.d('on a chargé les données'));\n        // _node.addEventListener('error', error => Log.d(`on a une erreur ${error}`));\n        // _node.setAttribute('controls',true);\n        // disabled doesn't seem to be needed\n        // _node.disabled = false;\n\n        _node.volume = volume;\n        return _node;\n      }\n\n      return previous;\n    }\n    /**\n     * List available input devices\n     * @return {Promise<{audioinput: MediaDeviceInfo[], videoinput: MediaDeviceInfo[]}>}\n     *\n     * @example\n     * Reach.media.devices().then(devices => {\n     *  // Video cameras\n     *  console.log(devices.videoinput);\n     *  // Audio mics\n     *  console.log(devices.audioinput);\n     * });\n     */\n\n  }, {\n    key: \"devices\",\n    value: function devices() {\n      return navigator.mediaDevices.enumerateDevices().then(function (devices) {\n        var r = {};\n        devices.forEach(function (device) {\n          if (!r[device.kind]) {\n            r[device.kind] = [];\n          }\n\n          r[device.kind].push(device);\n        });\n        Log.d('Media#devices', r);\n        return r;\n      }).catch(Log.r('Media#devices'));\n    }\n  }, {\n    key: \"facingMode\",\n\n    /**\n     * facingMode values to use with constraints\n     * @returns {{USER: string, ENVIRONMENT: string}}\n     */\n    get: function get() {\n      return {\n        USER: 'user',\n        ENVIRONMENT: 'environment'\n      };\n    }\n  }]);\n\n  return Media;\n}();\n\nexports.default = Media;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _webcom = _interopRequireDefault(require(\"webcom/webcom\"));\n\nvar _Config = _interopRequireDefault(require(\"../Config\"));\n\nvar _StreamManager = _interopRequireDefault(require(\"../stream/StreamManager\"));\n\nvar _PeerConnectionManager = _interopRequireDefault(require(\"../webrtc/PeerConnectionManager\"));\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * singleton\n * @type {CacheManager}\n * @private\n */\nvar _cache = null;\n/**\n * Singleton to handle global references\n * @access protected\n */\n\nvar CacheManager =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Construct singleton\n   * @return {CacheManager}\n   */\n  function CacheManager() {\n    _classCallCheck(this, CacheManager);\n\n    if (!_cache) {\n      _cache = this;\n    }\n\n    return _cache;\n  }\n  /**\n   * The base reference\n   * @param {Webcom} url the reference or its url\n   */\n\n\n  _createClass(CacheManager, [{\n    key: \"base\",\n    set: function set(url) {\n      /**\n       * @ignore\n       */\n      this._base = url instanceof _webcom.default ? url : new _webcom.default(url);\n    }\n    /**\n     * The base reference\n     * @type {Webcom}\n     */\n    ,\n    get: function get() {\n      return this._base;\n    }\n    /**\n     * The connected user\n     * @param {Config} config the connected user\n     */\n\n  }, {\n    key: \"config\",\n    set: function set(config) {\n      if (!this._config) {\n        /**\n         * @ignore\n         */\n        this._config = new _Config.default(config);\n      } else {\n        this._config.assign(config);\n      }\n    }\n    /**\n     * The connected user\n     * @type {Config}\n     */\n    ,\n    get: function get() {\n      if (!this._config) {\n        this._config = new _Config.default();\n      }\n\n      return this._config;\n    }\n    /**\n     * The connected user\n     * @param {User} user the connected user\n     */\n\n  }, {\n    key: \"user\",\n    set: function set(user) {\n      /**\n       * @ignore\n       */\n      this._user = user;\n    }\n    /**\n     * The connected user\n     * @type {User}\n     */\n    ,\n    get: function get() {\n      return this._user;\n    }\n    /**\n     * The current device\n     * @param {string} device the current device\n     */\n\n  }, {\n    key: \"device\",\n    set: function set(device) {\n      /**\n       * @ignore\n       */\n      this._device = device;\n    }\n    /**\n     * The current device\n     * @type {string}\n     */\n    ,\n    get: function get() {\n      return this._device;\n    }\n    /**\n     * The log level (DEBUG, INFO, WARN, ERROR)\n     * @type {string}\n     */\n\n  }, {\n    key: \"logLevel\",\n    set: function set(level) {\n      if (/^DEBUG|INFO|WARN|ERROR$/i.test(level)) {\n        /**\n         * @ignore\n         */\n        this._logLevel = level;\n      } else if (level) {\n        throw new Error('Unsupported log level (DEBUG, INFO, WARN, ERROR)');\n      }\n    }\n    /**\n     * The log level (DEBUG, INFO, WARN, ERROR)\n     * @returns {string}\n     */\n    ,\n    get: function get() {\n      return this._logLevel || 'ERROR';\n    }\n    /**\n     * Streams manager\n     * @returns {StreamManager}\n     */\n\n  }, {\n    key: \"streams\",\n    get: function get() {\n      if (!this._streams) {\n        /**\n         * @ignore\n         */\n        this._streams = new _StreamManager.default();\n      }\n\n      return this._streams;\n    }\n    /**\n     * PeerConnections manager\n     * @returns {PeerConnectionManager}\n     */\n\n  }, {\n    key: \"peerConnections\",\n    get: function get() {\n      if (!this._peerConnections) {\n        /**\n         * @ignore\n         */\n        this._peerConnections = new _PeerConnectionManager.default();\n      }\n\n      return this._peerConnections;\n    }\n    /**\n     *\n     * @param room\n     */\n\n  }, {\n    key: \"room\",\n    set: function set(room) {\n      this._room = room;\n    }\n    /**\n     *\n     * @returns {*}\n     */\n    ,\n    get: function get() {\n      return this._room;\n    }\n  }]);\n\n  return CacheManager;\n}();\n/**\n * The singleton instance\n * @ignore\n * @type {CacheManager}\n */\n\n\nvar cache = new CacheManager();\n/**\n * Singleton for shared references\n * @access protected\n */\n\nvar _default = cache;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.CANCELED = exports.REJECTED = exports.ACCEPTED = exports.ONGOING = exports.NONE = exports.PARTICIPANT = exports.MODERATOR = exports.OWNER = exports.WAS_CONNECTED = exports.NOT_CONNECTED = exports.CONNECTED = exports.CLOSING = exports.CLOSED = exports.OPENED = void 0;\n\n/**\n * OPENED\n * @access protected\n * @type {string}\n */\nvar OPENED = 'OPENED';\n/**\n * CLOSED\n * @access protected\n * @type {string}\n */\n\nexports.OPENED = OPENED;\nvar CLOSED = 'CLOSED';\n/**\n * CLOSING\n * @access protected\n * @type {string}\n */\n\nexports.CLOSED = CLOSED;\nvar CLOSING = 'CLOSING';\n/**\n * CONNECTED\n * @access protected\n * @type {string}\n */\n\nexports.CLOSING = CLOSING;\nvar CONNECTED = 'CONNECTED';\n/**\n * NOT_CONNECTED\n * @access protected\n * @type {string}\n */\n\nexports.CONNECTED = CONNECTED;\nvar NOT_CONNECTED = 'NOT_CONNECTED';\n/**\n * WAS_CONNECTED\n * @access protected\n * @type {string}\n */\n\nexports.NOT_CONNECTED = NOT_CONNECTED;\nvar WAS_CONNECTED = 'WAS_CONNECTED';\n/**\n * OWNER\n * @access protected\n * @type {string}\n */\n\nexports.WAS_CONNECTED = WAS_CONNECTED;\nvar OWNER = 'OWNER';\n/**\n * MODERATOR\n * @access protected\n * @type {string}\n */\n\nexports.OWNER = OWNER;\nvar MODERATOR = 'MODERATOR';\n/**\n * PARTICIPANT\n * @access protected\n * @type {string}\n */\n\nexports.MODERATOR = MODERATOR;\nvar PARTICIPANT = 'PARTICIPANT';\n/**\n * NONE\n * @access protected\n * @type {string}\n */\n\nexports.PARTICIPANT = PARTICIPANT;\nvar NONE = 'NONE';\n/**\n * Ongoing invitation\n * @access protected\n * @type {string}\n */\n\nexports.NONE = NONE;\nvar ONGOING = 'ONGOING';\n/**\n * Accepted invitation\n * @access protected\n * @type {string}\n */\n\nexports.ONGOING = ONGOING;\nvar ACCEPTED = 'ACCEPTED';\n/**\n * Rejected invitation\n * @access protected\n * @type {string}\n */\n\nexports.ACCEPTED = ACCEPTED;\nvar REJECTED = 'REJECTED';\n/**\n * Canceled invitation\n * @access protected\n * @type {string}\n */\n\nexports.REJECTED = REJECTED;\nvar CANCELED = 'CANCELED';\nexports.CANCELED = CANCELED;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _socket = _interopRequireDefault(require(\"socket.io-client\"));\n\nvar _getstats = _interopRequireDefault(require(\"getstats\"));\n\nvar _cache = _interopRequireDefault(require(\"../util/cache\"));\n\nvar Log = _interopRequireWildcard(require(\"../util/Log\"));\n\nvar _Media = _interopRequireDefault(require(\"../util/Media\"));\n\nvar _Device = _interopRequireDefault(require(\"../Device\"));\n\nvar DataSync = _interopRequireWildcard(require(\"../util/DataSync\"));\n\nvar _constants = require(\"../util/constants\");\n\nrequire(\"core-js/fn/array/find\");\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar DtlsSrtpKeyAgreement = {\n  DtlsSrtpKeyAgreement: true\n};\n\nvar sdpConstraints = function sdpConstraints(receive) {\n  return {\n    OfferToReceiveAudio: receive,\n    OfferToReceiveVideo: receive\n  };\n};\n/**\n * ICE connection status : disconnected\n * @constant\n * @type {string}\n */\n\n\nvar ICE_CONNECTION_STATE_DISCONNECTED = 'disconnected';\n/**\n * ICE connection status : connected\n * @constant\n * @type {string}\n */\n\nvar ICE_CONNECTION_STATE_CONNECTED = 'connected';\n/**\n * ICE connection status : completed\n * @constant\n * @type {string}\n */\n\nvar ICE_CONNECTION_STATE_COMPLETED = 'completed';\n/**\n * ICE connection status : checking\n * @constant\n * @type {string}\n */\n\nvar ICE_CONNECTION_STATE_CHECKING = 'checking';\n/**\n * ICE connection status : closed\n * @constant\n * @type {string}\n */\n\nvar ICE_CONNECTION_STATE_CLOSED = 'closed';\n/**\n * ICE connection status : failed\n * @constant\n * @type {string}\n */\n\nvar ICE_CONNECTION_STATE_FAILED = 'failed';\n/**\n * ICE connection status : another status\n * @constant\n * @type {string}\n */\n\nvar ICE_CONNECTION_STATE_OTHER = 'other';\n/**\n * @ignore\n */\n\nvar _toJSON = function _toJSON(o) {\n  return o.toJSON && typeof o.toJSON === 'function' ? o.toJSON() : o;\n};\n/**\n * The PeerConnection. A PeerConnection will only concern one MediaStream.\n * @class PeerConnection\n */\n\n\nvar PeerConnection =\n/*#__PURE__*/\nfunction () {\n  /**\n   * @access protected\n   * @param {string} stackId The WebRTC stack ID\n   * @param {string} streamId The Stream UID\n   * @param {Remote|{to: string|from: string, device:string}} remote The remote information\n   * @param {boolean} publish Publish or Subscribe ?\n   */\n  function PeerConnection(stackId, streamId, remote, publish) {\n    var _this = this;\n\n    _classCallCheck(this, PeerConnection);\n\n    /**\n     * The stack identifier. Used to identify exchanges between 2 devices\n     * @type {string}\n     */\n    this.stackId = stackId;\n    /**\n     * The stream id. (One stream per RTCPeerConnection)\n     * @type {string}\n     */\n\n    this.streamId = streamId;\n    /**\n     * The remote device\n     * @type {string}\n     */\n\n    this.remote = remote;\n    /**\n     * publish : a created peer connection or a remote one\n     * @type {boolean}\n     */\n\n    this.publish = publish;\n    /**\n     * Path for local signalization\n     * @access private\n     * @type {string}\n     */\n\n    this._localPath = \"_/webrtc/\".concat(this.stackId, \"/\").concat(this.streamId, \"/\").concat(_cache.default.device);\n    /**\n     * Path for local signalization\n     * @access private\n     * @type {string}\n     */\n\n    this._remotePath = \"_/webrtc/\".concat(this.stackId, \"/\").concat(this.streamId, \"/\").concat(this.remote.device);\n    /**\n     * Indicates if the PeerConnection has been established. (Useful for renegotiation).\n     * @type {boolean}\n     */\n\n    this.negotiated = false;\n    /**\n     * The DOM element where the remote MediaStream will be displayed\n     * @type {Element}\n     * @protected\n     */\n\n    this.node = null;\n    /**\n     * The DOM element containg the media element\n     * @type {Element}\n     * @protected\n     */\n\n    this.container = null;\n    /**\n     * The actual RTCPeerConnection\n     * @type {RTCPeerConnection}\n     */\n\n    this.pc = new RTCPeerConnection({\n      iceServers: _cache.default.config.iceServers\n    }, {\n      optional: [DtlsSrtpKeyAgreement],\n      mandatory: sdpConstraints(!publish)\n    }); // Handle ICE candidates\n\n    this.pc.onicecandidate = function (e) {\n      if (!_this.negotiated && e.candidate) {\n        Log.d('PeerConnection~onicecandidate', e.candidate);\n        DataSync.push(\"\".concat(_this._localPath, \"/ice\"), _toJSON(e.candidate));\n      }\n    };\n\n    this.pc.oniceconnectionstatechange = function () {\n      Log.d('PeerConnection~oniceconnectionstatechange', _this.pc);\n      var iceConnectionState = _this.pc.iceConnectionState;\n\n      switch (iceConnectionState) {\n        case ICE_CONNECTION_STATE_CHECKING:\n          // Nothing to do yet\n          break;\n\n        case ICE_CONNECTION_STATE_CONNECTED:\n          _this._attachStream();\n\n          _this._remoteICECandidates(false);\n\n          _this._getStats();\n\n          break;\n\n        case ICE_CONNECTION_STATE_COMPLETED:\n          _this._remoteICECandidates(false);\n\n          break;\n\n        case ICE_CONNECTION_STATE_FAILED:\n          Log.e('PeerConnection~stateFailed', 'Failed PeerConnection');\n          break;\n\n        case ICE_CONNECTION_STATE_DISCONNECTED:\n          Log.e('PeerConnection~stateDisconnected', 'Disconnect PeerConnection');\n          break;\n\n        case ICE_CONNECTION_STATE_CLOSED:\n          Log.d('PeerConnection~stateclosed', 'Close PeerConnection');\n\n          _this.close();\n\n          break;\n\n        default:\n          break;\n      }\n\n      _this.negotiated = _this.negotiated || _this.isConnected;\n    };\n\n    this.pc.onicegatheringstatechange = function () {\n      Log.d('PeerConnection~onicegatheringstatechange', _this.pc.iceGatheringState);\n    };\n    /**\n     * PeerConnection status\n     * @type {string}\n     * @private\n     */\n\n\n    this._status = _constants.OPENED;\n  }\n\n  _createClass(PeerConnection, [{\n    key: \"_getStats\",\n    value: function _getStats() {\n      var _this2 = this;\n\n      Log.d('PeerConnection~getStats', \"enable : \".concat(_cache.default.config.stats.server && _cache.default.config.stats.interval ? \"to \".concat(_cache.default.config.stats.server) : 'false'));\n\n      if (_cache.default.config.stats.server && _cache.default.config.stats.interval) {\n        // this._socket = SocketIO(cache.config.stats.server);\n        (0, _getstats.default)(this.pc, function (result) {\n          _this2.socket.emit('stats', Object.assign({\n            id: _this2.streamId,\n            publish: _this2.publish,\n            room: _cache.default.room.name,\n            ts: new Date(),\n            local: _cache.default.device,\n            remote: _this2.remote.device\n          }, result));\n        }, _cache.default.config.stats.interval);\n      }\n    }\n  }, {\n    key: \"_remoteICECandidates\",\n\n    /**\n     * Toggle ICE Candidates discovery\n     * @access private\n     * @param {boolean} listen Indicates if we should listen to new ICE candidates\n     */\n    value: function _remoteICECandidates(listen) {\n      var _this3 = this;\n\n      var path = \"\".concat(this._remotePath, \"/ice\");\n      var event = 'child_added';\n\n      if (listen) {\n        // don't listen to ice candidates if pc is already up (renegotiation)\n        DataSync.on(path, event, function (snap) {\n          var candidate = snap.val();\n          Log.d('PeerConnection~addIceCandidate', candidate);\n\n          _this3.pc.addIceCandidate(new RTCIceCandidate(candidate));\n        });\n      } else {\n        DataSync.off(path, event);\n      }\n    }\n    /**\n     * Attach the remote MediaStream to a node\n     * @access private\n     */\n\n  }, {\n    key: \"_attachStream\",\n    value: function _attachStream() {\n      if (this.remoteStream && this.isConnected) {\n        this.node = _Media.default.attachStream(this.remoteStream, this.container, this.node);\n        this.node.muted = false;\n      }\n    }\n    /**\n     * The remote MediaStream\n     * @access protected\n     * @type {MediaStream}\n     */\n\n  }, {\n    key: \"answer\",\n\n    /**\n     * Init RTCPeerConnection for subscribers\n     * @access protected\n     * @param htmlElement\n     * @param errorCallbacks\n     * @returns {Promise.<PeerConnection>}\n     */\n    value: function answer(htmlElement) {\n      var _this4 = this;\n\n      var errorCallbacks = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n      Log.i('PeerConnection~answer', {\n        htmlElement: htmlElement,\n        peerConnection: this\n      });\n      this.container = htmlElement;\n\n      if (Object.getOwnPropertyDescriptor(RTCPeerConnection.prototype, 'ontrack')) {\n        this.pc.ontrack = function (e) {\n          Log.d('PeerConnection~ontrack', e.streams[0]);\n          _this4.remoteStream = e.streams[0]; // eslint-disable-line prefer-destructuring\n        };\n      } else {\n        this.pc.onaddstream = function (e) {\n          Log.d('PeerConnection~onaddstream', e.stream);\n          _this4.remoteStream = e.stream;\n        };\n      } // Listen to SDP offer\n\n\n      DataSync.on(\"\".concat(this._remotePath, \"/sdp\"), 'value', function (snap) {\n        var sdpOffer = snap.val(); // Log.d('Offer', sdpOffer);\n\n        if (sdpOffer != null) {\n          Log.d(\"PeerConnection~offered \".concat(sdpOffer.sdp));\n\n          _this4.pc.setRemoteDescription(sdpOffer).catch(function (e) {\n            Log.e('PeerConnection~answer#remoteDescription Error', e);\n            errorCallbacks.forEach(function (cb) {\n              Log.d('PeerConnection~answer#remoteDescription Error callback', e);\n              cb(e);\n            });\n            return e; // cache.peerConnections.close(this.streamId, this.remote.device);\n          }).then(function () {\n            return Log.d('PeerConnection~answer#remoteDescription', _this4.pc.remoteDescription.sdp);\n          }).then(function () {\n            if (/^offer$/.test(_this4.pc.remoteDescription.type)) {\n              return _this4.pc.createAnswer().catch(function (e) {\n                return Log.d.bind(Log, 'PeerConnections~answer#createAnswer', e);\n              });\n            }\n\n            return Promise.reject(new Error('SDP is not an offer'));\n          }).then(function (description) {\n            return _this4._setPreferredCodecs(description);\n          }).then(function (description) {\n            return _this4.pc.setLocalDescription(description);\n          }).catch(function (e) {\n            return Log.d.bind(Log, 'PeerConnections~answer#setLocalDescription', e);\n          }).then(function () {\n            Log.d('PeerConnection~answer#localSDP', _this4.pc.localDescription.sdp);\n\n            _this4._remoteICECandidates(true);\n          }).then(function () {\n            return _this4._sendSdpToRemote();\n          }) // .catch(Log.r('PeerConnection~answser#error'));\n          .catch(function () {\n            // this.close();\n            _cache.default.peerConnections.close(_this4.streamId, _this4.remote.device);\n          });\n        }\n      });\n      return Promise.resolve(this);\n    }\n    /**\n     * Init RTCPeerConnection for publishers\n     * @access protected\n     * @param stream\n     * @param errorCallbacks\n     * @returns {Promise.<PeerConnection>}\n     */\n\n  }, {\n    key: \"offer\",\n    value: function offer(stream) {\n      var _this5 = this;\n\n      var errorCallbacks = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n      Log.i('PeerConnection~offer', {\n        stream: stream,\n        peerConnection: this\n      });\n      var sendTimeout;\n      return new Promise(function (resolve, reject) {\n        _this5.pc.onnegotiationneeded = function () {\n          Log.d('PeerConnection~onnegotiationneeded'); // Debounce send (renegotiation triggers multiple negotiationneeded events)\n\n          if (sendTimeout) {\n            clearTimeout(sendTimeout);\n            sendTimeout = null;\n          }\n\n          sendTimeout = setTimeout(function () {\n            sendTimeout = null;\n\n            _this5._sendOffer().catch(function (e) {\n              Log.d('PeerConnection~offer', e);\n              errorCallbacks.forEach(function (cb) {\n                return cb(e);\n              });\n              reject(e);\n            }).then(function () {\n              resolve(_this5);\n            });\n          }, 20);\n        };\n\n        DataSync.on(\"\".concat(_this5._remotePath, \"/sdp\"), 'value', function (snap) {\n          var sdpAnswer = snap.val();\n\n          if (sdpAnswer != null) {\n            Log.d(\"PeerConnection~offer#answered \".concat(sdpAnswer.sdp));\n\n            _this5.pc.setRemoteDescription(sdpAnswer).catch(function (e) {\n              errorCallbacks.forEach(function (cb) {\n                return cb(e);\n              });\n\n              _cache.default.peerConnections.close(_this5.streamId, _this5.remote.device);\n\n              Log.e.bind(Log, 'PeerConnection~offer#remoteDescription');\n            }).then(function () {\n              Log.d('PeerConnection~offer#remoteDescription', _this5.pc.remoteDescription.sdp);\n\n              _this5._remoteICECandidates(true);\n            });\n          }\n        });\n\n        _this5._alterStream(stream, 'add');\n      });\n    }\n    /**\n     * Send SDP offer to the remote via DataSync\n     * @private\n     */\n\n  }, {\n    key: \"_sendSdpToRemote\",\n    value: function _sendSdpToRemote() {\n      var _this6 = this;\n\n      // Log.d('PeerConnection~_sendSdpToRemote#localSDP', this.pc.localDescription.sdp);\n      var remoteUserId = this.remote.to ? this.remote.to : this.remote.from;\n\n      _Device.default.get(remoteUserId, this.remote.device).then(function (remoteDevice) {\n        var sdpOffer = _this6.pc.localDescription.sdp;\n        var newSdp = sdpOffer;\n        var local = /Chrome\\/([0-9]+)/.exec(navigator.userAgent);\n        var remote = /Chrome\\/([0-9]+)/.exec(remoteDevice.userAgent);\n\n        if (navigator.userAgent.indexOf('Chrome') !== -1 && navigator.userAgent.indexOf('Android') !== -1 && remoteDevice.userAgent.indexOf('Safari') !== -1 && local[1] <= 64) {\n          if (local[1] <= 60) {\n            newSdp = newSdp.replace(/;profile-level-id=([a-z0-9]+)/, '');\n          } else {\n            newSdp = newSdp.replace('42001f', '42e01f');\n          }\n        }\n\n        if (navigator.userAgent.indexOf('Safari') !== -1 && remoteDevice.userAgent.indexOf('Chrome') !== -1 && remoteDevice.userAgent.indexOf('Android') !== -1 && remote[1] <= 64) {\n          if (remote[1] <= 60) {\n            newSdp = newSdp.replace(/;profile-level-id=([a-z0-9]+)/, '');\n          } else {\n            newSdp = newSdp.replace('42e01f', '42001f');\n          }\n        }\n\n        Log.d(\"PeerConnection~_sendSdpToRemote#SDP sent to remote \".concat(newSdp));\n        var descriptionChanged = {\n          sdp: newSdp,\n          type: _this6.pc.localDescription.type\n        };\n        DataSync.update(\"\".concat(_this6._localPath, \"/sdp\"), _toJSON(descriptionChanged));\n      });\n    }\n    /**\n     * Create SDP offer and push it\n     * @returns {Promise}\n     * @private\n     */\n\n  }, {\n    key: \"_sendOffer\",\n    value: function _sendOffer() {\n      var _this7 = this;\n\n      Log.d('PeerConnection~_sendOffer');\n      return this.pc.createOffer().then(function (description) {\n        return _this7._setPreferredCodecs(description);\n      }).then(function (description) {\n        return _this7.pc.setLocalDescription(description);\n      }).then(function () {\n        return Log.d('PeerConnection~_sendOffer#localDescription', _this7.pc.localDescription.sdp);\n      }).then(function () {\n        return _this7._sendSdpToRemote();\n      });\n    }\n    /**\n     * Add/Remove tracks to the PeerConnection stream\n     * @param {MediaStream} stream\n     * @param {string} method\n     * @private\n     */\n\n  }, {\n    key: \"_alterStream\",\n    value: function _alterStream(stream, method) {\n      var _this8 = this;\n\n      if (Object.getOwnPropertyDescriptor(RTCPeerConnection.prototype, \"\".concat(method, \"Track\"))) {\n        if (method === 'add') {\n          stream.getTracks().forEach(function (track) {\n            return _this8.pc[\"\".concat(method, \"Track\")](track, stream);\n          }, this);\n        } else {\n          this.pc.getSenders().forEach(function (sender) {\n            return _this8.pc[\"\".concat(method, \"Track\")](sender);\n          }, this);\n        }\n      } else {\n        this.pc[\"\".concat(method, \"Stream\")](stream);\n      }\n    }\n    /**\n     * Restart SDP negotiation following a MediaStream change\n     * @access protected\n     * @param {MediaStream} oldStream\n     * @param {MediaStream} newStream\n     */\n\n  }, {\n    key: \"renegotiate\",\n    value: function renegotiate(oldStream, newStream) {\n      Log.d('PeerConnection~renegotiate');\n\n      if (Object.getOwnPropertyDescriptor(RTCPeerConnection.prototype, 'getSenders') && 'RTCRtpSender' in window && Object.getOwnPropertyDescriptor(RTCRtpSender.prototype, 'replaceTrack')) {\n        // mozRTCPeerConnection implementation\n        this.pc.getSenders().forEach(function (sender) {\n          var newTracks;\n\n          switch (sender.track.kind) {\n            case 'audio':\n              newTracks = newStream.getAudioTracks();\n              break;\n\n            case 'video':\n              newTracks = newStream.getVideoTracks();\n              break;\n\n            default:\n              newTracks = [];\n          }\n\n          if (newTracks.length) {\n            sender.replaceTrack(newTracks[0]);\n          }\n        });\n\n        this._sendOffer().catch(function (e) {\n          Log.d('PeerConnection~renegotiate', e);\n        });\n      } else {\n        this._alterStream(oldStream, 'remove');\n\n        this._alterStream(newStream, 'add');\n      }\n    }\n    /**\n     * Close the PeerConnection and stop listening to SDP messages\n     * @access protected\n     */\n\n  }, {\n    key: \"close\",\n    value: function close() {\n      var _this9 = this;\n\n      if (this._status === _constants.OPENED) {\n        this._status = _constants.CLOSING; // Stop display\n\n        if (this.node) {\n          if (this.node.stop) {\n            this.node.stop();\n          }\n\n          this.node.srcObject = null;\n          this.container.removeChild(this.node);\n          this.node = null;\n        } // Stop listening to remote ICE candidates\n\n\n        this._remoteICECandidates(false); // Stop listening to SDP messages\n\n\n        DataSync.off(\"\".concat(this._remotePath, \"/sdp\"), 'value'); // Remove data\n\n        DataSync.remove(this._localPath); // Close PeerConnection\n\n        if (this.pc && this.pc.signalingState !== 'closed') {\n          this.pc.onsignalingstatechange = function () {\n            if (_this9.pc.signalingState !== 'closed') {\n              _this9._status = _constants.CLOSED;\n            }\n          };\n\n          this.pc.close();\n        } else {\n          this._status = _constants.CLOSED;\n        }\n      }\n    }\n    /**\n     * Edits the SDP to set the preferred audio/video codec\n     * @access private\n     * @param {RTCSessionDescription} description\n     * The description retrieved by createOffer/createAnswer\n     * @returns {RTCSessionDescription|{sdp: string, type: string}}\n     */\n\n  }, {\n    key: \"_setPreferredCodecs\",\n    value: function _setPreferredCodecs(description) {\n      if (_cache.default.config.preferredVideoCodec || _cache.default.config.preferredAudioCodec) {\n        Log.d('PeerConnection~_setPreferredCodecs', {\n          description: description,\n          config: _cache.default.config\n        });\n        var sdpLines = description.sdp.split(/\\r?\\n/);\n        var medias = {\n          audio: [],\n          video: []\n        };\n        var current = null; // Parse SDP\n\n        sdpLines.forEach(function (sdpLine, i) {\n          if (/^m=/.test(sdpLine)) {\n            // eslint-disable-next-line no-useless-escape\n            var d = /^m=(\\w+)\\s[0-9\\/]+\\s[A-Za-z0-9\\/]+\\s([0-9\\s]+)/.exec(sdpLine);\n            current = {\n              fmt: d[2].split(/\\s/),\n              index: i,\n              codecs: []\n            };\n            medias[d[1]].push(current);\n          } else if (current && /^a=rtpmap:/.test(sdpLine)) {\n            // eslint-disable-next-line no-useless-escape\n            var c = /^a=rtpmap:(\\d+)\\s([a-zA-Z0-9\\-\\/]+)/.exec(sdpLine);\n\n            if (c) {\n              current.codecs.push({\n                id: c[1],\n                name: c[2],\n                index: i\n              });\n            }\n          }\n        });\n        Log.d('PeerConnection~_setPreferredCodecs', medias);\n        var update = false;\n\n        var prefer = function prefer(mediaList, preferedCodec) {\n          mediaList.forEach(function (media) {\n            var selected = media.codecs.find(function (codec) {\n              return preferedCodec.test(codec.name);\n            });\n\n            if (selected) {\n              var fmt = [selected.id].concat(media.fmt.filter(function (ids) {\n                return ids !== selected.id;\n              }));\n              sdpLines[media.index] = sdpLines[media.index].replace(media.fmt.join(' '), fmt.join(' '));\n              update = true;\n            }\n          });\n        };\n\n        if (_cache.default.config.preferredVideoCodec) {\n          prefer(medias.video, _cache.default.config.preferredVideoCodec);\n        }\n\n        if (_cache.default.config.preferredAudioCodec) {\n          prefer(medias.audio, _cache.default.config.preferredAudioCodec);\n        }\n\n        if (update) {\n          Log.d('PeerConnection~_setPreferredCodecs', sdpLines.join('\\r\\n'));\n          return {\n            sdp: sdpLines.join('\\r\\n'),\n            type: description.type\n          };\n        }\n      }\n\n      return description;\n    }\n  }, {\n    key: \"socket\",\n    get: function get() {\n      if (!this._socket) {\n        this._socket = (0, _socket.default)(_cache.default.config.stats.server);\n      }\n\n      return this._socket;\n    }\n  }, {\n    key: \"remoteStream\",\n    set: function set(stream) {\n      /**\n       * @ignore\n       */\n      this._remoteStream = stream;\n\n      this._attachStream();\n    }\n    /**\n     * The remote MediaStream\n     * @type {MediaStream}\n     */\n    ,\n    get: function get() {\n      return this._remoteStream;\n    }\n    /**\n     * Indicates if the PeerConnection is established based on ICE connection state\n     * @returns {boolean}\n     */\n\n  }, {\n    key: \"isConnected\",\n    get: function get() {\n      return this.pc && !!~[// eslint-disable-line no-bitwise\n      ICE_CONNECTION_STATE_CONNECTED, ICE_CONNECTION_STATE_COMPLETED, ICE_CONNECTION_STATE_OTHER].indexOf(this.pc.iceConnectionState);\n    }\n  }]);\n\n  return PeerConnection;\n}();\n\nexports.default = PeerConnection;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _PeerConnection = _interopRequireDefault(require(\"./PeerConnection\"));\n\nvar _cache = _interopRequireDefault(require(\"../util/cache\"));\n\nvar Log = _interopRequireWildcard(require(\"../util/Log\"));\n\nvar DataSync = _interopRequireWildcard(require(\"../util/DataSync\"));\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) { var desc = Object.defineProperty && Object.getOwnPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : {}; if (desc.get || desc.set) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } } newObj.default = obj; return newObj; } }\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nvar getShortStackId = function getShortStackId(id1, id2) {\n  return id1.localeCompare(id2, 'en-us') > 0 ? \"\".concat(id1, \"-\").concat(id2) : \"\".concat(id2, \"-\").concat(id1);\n};\n/* eslint-disable no-bitwise */\n\n\nvar hashCode = function hashCode(str) {\n  return str.split('').reduce(function (prevHash, currVal) {\n    return (prevHash << 5) - prevHash + currVal.charCodeAt(0) | 0;\n  }, 0);\n};\n/* eslint-enable no-bitwise */\n\n\nvar getStackId = function getStackId(deviceId1, deviceId2) {\n  var shortstackId = getShortStackId(deviceId1, deviceId2);\n  var hash = \"\".concat(hashCode(shortstackId));\n  var length = hash.length; // eslint-disable-line\n\n  var id1 = hash.substring(length - 3, length);\n  var id2 = hash.substring(length - 6, length - 3);\n  return \"\".concat(id1, \"/\").concat(id2, \"/\").concat(shortstackId);\n};\n/**\n * @access protected\n */\n\n\nvar PeerConnectionManager =\n/*#__PURE__*/\nfunction () {\n  /**\n   * Constructor\n   * @access protected\n   */\n  function PeerConnectionManager() {\n    _classCallCheck(this, PeerConnectionManager);\n\n    /**\n     * WebRTC stacks\n     * @type {{*: {*: PeerConnection}}}\n     */\n    this.stacks = {};\n  }\n  /**\n   * Get a PeerConnection object for a specific stream\n   * @param {Local|Remote} stream\n   * @param {Remote|{to: string, device:string}} remote\n   * @param {boolean} publish\n   * @return {*}\n   */\n\n\n  _createClass(PeerConnectionManager, [{\n    key: \"getPeerConnection\",\n    value: function getPeerConnection(stream, remote, publish) {\n      var _this = this;\n\n      if (!_cache.default.user) {\n        return Promise.reject(new Error('Only an authenticated user can get a PeerConnection\\'s object.'));\n      }\n\n      var stackId = getStackId(remote.device, _cache.default.device);\n\n      if (this.stacks[stackId] && this.stacks[stackId][stream.uid]) {\n        return Promise.resolve(this.stacks[stackId][stream.uid]);\n      }\n\n      if (!this.stacks[stackId]) {\n        this.stacks[stackId] = {};\n      }\n\n      var userId = _cache.default.user.uid.split('/');\n\n      var shortUserId = userId[2];\n      var shortRemoteTo;\n      var shortRemoteFrom;\n\n      if (remote.to) {\n        var remoteTo = remote.to.split('/');\n        shortRemoteTo = remoteTo[2]; // eslint-disable-line prefer-destructuring\n      } else {\n        var remoteFrom = remote.from.split('/');\n        shortRemoteFrom = remoteFrom[2]; // eslint-disable-line prefer-destructuring\n      }\n\n      var users = {}; // users[cache.user.uid] = true;\n\n      users[shortUserId] = true; // users[remote.from || remote.to] = true;\n\n      users[shortRemoteFrom || shortRemoteTo] = true;\n      return DataSync.update(\"_/webrtc/\".concat(stackId), users).then(function () {\n        return new _PeerConnection.default(stackId, stream.uid, remote, publish);\n      }).then(function (pc) {\n        Log.d('PeerConnectionManager~getPeerConnection', {\n          stackId: stackId,\n          streamId: stream.uid,\n          pc: pc\n        });\n        _this.stacks[stackId][stream.uid] = pc;\n        return pc;\n      }).catch(Log.r('PeerConnectionManager~getPeerConnection'));\n    }\n    /**\n     * Create offer for a stream to a subscriber\n     * @param {Local} localStream\n     * @param {object} subscriber\n     * @param {array} errorCallbacks\n     * @return {Promise.<PeerConnection>}\n     */\n\n  }, {\n    key: \"offer\",\n    value: function offer(localStream, subscriber, errorCallbacks) {\n      Log.d('PeerConnectionManager~offer', {\n        localStream: localStream,\n        subscriber: subscriber\n      });\n      return this.getPeerConnection(localStream, subscriber, true).then(function (pc) {\n        return pc.offer(localStream.media, errorCallbacks);\n      });\n    }\n    /**\n     * Answer to the offer from the publisher\n     * @param {Remote} remoteStream\n     * @param {Element} htmlElement\n     * @param {array} errorCallbacks\n     * @return {*|Promise.<PeerConnection>}\n     */\n\n  }, {\n    key: \"answer\",\n    value: function answer(remoteStream, htmlElement) {\n      var errorCallbacks = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : [];\n      Log.d('PeerConnectionManager~answer', {\n        remoteStream: remoteStream,\n        htmlElement: htmlElement\n      });\n      return this.getPeerConnection(remoteStream, remoteStream, false).then(function (pc) {\n        return pc.answer(htmlElement, errorCallbacks);\n      });\n    }\n    /**\n     * Close a PeerConnection\n     * @param streamId\n     * @param remoteDevice\n     * @return {*}\n     */\n\n  }, {\n    key: \"close\",\n    value: function close(streamId, remoteDevice) {\n      var stackId = getStackId(remoteDevice, _cache.default.device);\n      var pc = this.stacks[stackId] ? this.stacks[stackId][streamId] : null;\n\n      if (pc) {\n        pc.close();\n        DataSync.remove(\"_/webrtc/\".concat(stackId));\n        this.stacks[stackId][streamId] = null;\n        delete this.stacks[stackId][streamId];\n        return pc;\n      }\n\n      return false;\n    }\n  }]);\n\n  return PeerConnectionManager;\n}();\n\nexports.default = PeerConnectionManager;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _webrtcAdapter = _interopRequireDefault(require(\"webrtc-adapter\"));\n\nvar _webcom = _interopRequireDefault(require(\"webcom/webcom\"));\n\nvar _console;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\n/**\n * The current browser's infos\n * @typedef {Object} Browser\n * @property {string} name - current browser's name\n * @property {number} [version] - current browser's version\n * @property {number} [minVersion] - current browser's minimum supported version\n * @property {boolean} compatible - is current browser supported ?\n */\nvar browser = Object.assign({\n  compatible: !/\\s/.test(_webrtcAdapter.default.browserDetails.browser) && (!_webrtcAdapter.default.browserDetails.minVersion || _webrtcAdapter.default.browserDetails.version >= _webrtcAdapter.default.browserDetails.minVersion)\n}, _webrtcAdapter.default.browserDetails);\nvar version = \"Reach v\".concat(SDK_VERSION, \" | Schema \").concat(SCHEMA_VERSION, \" | Webcom v\").concat(_webcom.default.SDK_VERSION); // eslint-disable-line no-undef\n\nvar message = '';\n\nif (browser.version === null) {\n  message = 'Unsupported browser: browser must support WebRTC Peer-to-peer connections to use Reach';\n} else if (browser.minVersion && browser.minVersion > browser.version) {\n  message = \"Unsupported browser: browser is outdated, update to latest version (\".concat(browser.minVersion, \"+)\");\n} else if (!_webrtcAdapter.default.browserShim) {\n  message = 'No shim for your browser. There might a problem with your package.';\n} // Log browser status & SDKs versions on load\n\n\nvar args = [\"\".concat(version, \" \").concat(message)];\n\nif (/^(chrome|firefox)$/.test(browser.browser)) {\n  args = [\"%c \".concat(version, \" %c \").concat(message), \"background: \".concat(browser.compatible ? '#f50' : 'red', \"; color: #fff; font-weight: bold\"), \"color: \".concat(browser.compatible ? 'inherit' : 'red')];\n}\n\n(_console = console).log.apply(_console, _toConsumableArray(args)); // eslint-disable-line no-console\n\n\nvar _default = browser;\nexports.default = _default;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.audio = exports.video = void 0;\n\n/**\n * Video codec presets to use for\n * @typedef {Object} Codec/video\n * @property {RegExp} VP8 VP8 is the only video codec officially supported by WebRTC\n * @property {RegExp} VP9 VP8's successor.\n * @property {RegExp} H264 MPEG-4 part 10. Only Firefox.\n * @property {RegExp} VP10 Suited for UHD video. No support yet\n * @property {RegExp} H265 H.264's successor. No support yet\n */\nvar video = {\n  VP8: /^vp8/i,\n  VP9: /^vp9/i,\n  VP10: /^vp10/i,\n  H264: /^h264/i,\n  H265: /^h265/i\n};\n/**\n * Audio codec presets to use for\n * @typedef {Object} Codec/audio\n * @property {RegExp} OPUS Opus audio codec {@link http://opus-codec.org/}.\n * Only choice for high-quality audio.\n * @property {RegExp} G722 G.722 audio codec\n * @property {RegExp} G711 G.711 audio codec\n * @property {RegExp} ISAC iSAC audio codec. Good for voice data,\n * but not suitable for high-quality audio streams.\n * @property {RegExp} ISAC_16 iSAC audio codec (16kHz)\n * @property {RegExp} ISAC_32 iSAC audio codec (32kHz)\n * @property {RegExp} ILBC iLBC audio codec. For bad channels & low bandwidth.\n * @property {RegExp} ILBC iLBC audio codec. For bad channels & low bandwidth.\n */\n\nexports.video = video;\nvar audio = {\n  OPUS: /^opus/i,\n  G722: /^g722/i,\n  G711: /^g711/i,\n  ISAC: /^isac/i,\n  ISAC_16: /^isac\\/16000/i,\n  ISAC_32: /^isac\\/32000/i,\n  LSAC: /^lsac/i\n};\nexports.audio = audio;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.invite = exports.local = exports.stream = exports.room = exports.reach = void 0;\n\nvar _User = _interopRequireDefault(require(\"../core/User\"));\n\nvar _Room = _interopRequireDefault(require(\"../core/Room\"));\n\nvar _Invite = _interopRequireDefault(require(\"../core/Invite\"));\n\nvar _Participant = _interopRequireDefault(require(\"../core/Participant\"));\n\nvar _Message = _interopRequireDefault(require(\"../core/Message\"));\n\nvar _Remote = _interopRequireDefault(require(\"../core/stream/Remote\"));\n\nvar _constants = require(\"../core/util/constants\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n/**\n * The events supported by {@link Reach#on}\n * @typedef {Object} Events/Reach\n * @property {string} USER_ADDED Fired when a new user is registered\n * @property {string} USER_CHANGED Fired when an existing user logs in or out or changes is status\n * @property {string} USER_REMOVED Fired when a user is unregistered\n * @property {string} ROOM_ADDED Fired when a room is created\n * @property {string} ROOM_CHANGED Fired when a room status is changing\n * @property {string} ROOM_REMOVED Fired when a room is closed definitely\n * @property {string} INVITE_ADDED Fired when an invite is received\n * @property {string} INVITE_CHANGED Fired when an invite status is modified\n */\n\n/**\n * The events supported by {@link Room#on}\n * @typedef {Object} Events/Room\n * @property {string} PARTICIPANT_ADDED Fired when a new participant is added to the room.\n * Does not mean he's connected but that he's invited to\n * @property {string} PARTICIPANT_CHANGED Fired when a participant\n * changes is status (enter/leaves the room)\n * @property {string} PARTICIPANT_REMOVED Fired when a user leaves definitely or is banned\n * @property {string} MESSAGE_ADDED Fired when a new instant message is sent to the room\n * @property {string} MESSAGE_CHANGED Fired when an instant message is edited\n * @property {string} MESSAGE_REMOVED Fired when an instant message is removed\n * @property {string} STREAM_PUBLISHED Fired when a participant publishes a stream\n * @property {string} STREAM_UNPUBLISHED Fired when a participant stops the publishing of his stream\n */\n\n/**\n * The events supported by {@link Invite#on}\n * @typedef {Object} Events/Invite\n * @property {string} ACCEPTED Fired when the invite has been accepted\n * @property {string} REJECTED Fired when the invite has been accepted\n * @property {string} CANCELED Fired when the invite has been canceled\n */\n\n/**\n * The events supported by {@link Remote#on}.\n * @typedef {Object} Events/Stream\n * @property {string} MUTE Fired when the mute status of the stream changes\n * @property {string} SIZE Fired when the size of the stream changes\n * @property {string} WEBRTC_ERROR Fired when an error is raised on webrtc call.\n */\n\n/**\n * The events supported by {@link Local#on}.\n * @typedef {Object} Events/Local\n * @property {string} SUBSCRIBED Fired when the is subcribed by remote\n * @property {string} WEBRTC_ERROR Fired when an error is raised on webrtc call.\n */\n\n/**\n * Path configuration for each event\n * @ignore\n * @type {{}}\n */\nvar paths = {\n  USER: function USER() {\n    return 'users';\n  },\n  ROOM: function ROOM() {\n    return 'rooms';\n  },\n  INVITE: function INVITE(user) {\n    if (!user) {\n      throw new Error('You must be authenticated to list the invites');\n    }\n\n    return \"_/invites/\".concat(user.uid);\n  },\n  PARTICIPANT: function PARTICIPANT(room) {\n    return \"_/rooms/\".concat(room.uid, \"/participants\");\n  },\n  MESSAGE: function MESSAGE(room) {\n    return \"_/rooms/\".concat(room.uid, \"/messages\");\n  },\n  STREAM: function STREAM(room) {\n    return \"_/rooms/\".concat(room.uid, \"/streams\");\n  }\n};\n/**\n * Object type configuration for each event\n * @ignore\n * @type {{}}\n */\n\nvar classes = {\n  USER: _User.default,\n  ROOM: _Room.default,\n  INVITE: _Invite.default,\n  PARTICIPANT: _Participant.default,\n  MESSAGE: _Message.default,\n  STREAM: _Remote.default\n};\n/**\n * Private class to add support test methods\n * @class _Events\n * @ignore\n */\n\nvar _Events =\n/*#__PURE__*/\nfunction () {\n  function _Events(keys) {\n    var _this = this;\n\n    _classCallCheck(this, _Events);\n\n    keys.forEach(function (key) {\n      _this[key] = key;\n    });\n  }\n\n  _createClass(_Events, [{\n    key: \"supports\",\n    value: function supports(event) {\n      if (!event || typeof event !== 'string' || this[event] !== event.toUpperCase()) {\n        throw new Error(\"Unsupported event. Use one of the following: \".concat(JSON.stringify(Object.keys(this))));\n      }\n\n      return true;\n    }\n  }, {\n    key: \"toPath\",\n    value: function toPath(event) {\n      if (this.supports(event)) {\n        return paths[event.toUpperCase().replace(/_.*$/, '')] || function () {\n          return null;\n        };\n      }\n\n      return null;\n    }\n  }, {\n    key: \"toClass\",\n    value: function toClass(event) {\n      if (this.supports(event)) {\n        return classes[event.toUpperCase().replace(/_.*$/, '')];\n      }\n\n      return null;\n    }\n  }]);\n\n  return _Events;\n}();\n/**\n * @ignore\n */\n\n\nvar reach = new _Events(['USER_ADDED', 'USER_CHANGED', 'USER_REMOVED', 'ROOM_ADDED', 'ROOM_CHANGED', 'ROOM_REMOVED', 'INVITE_ADDED', 'INVITE_CHANGED']);\n/**\n * @ignore\n */\n\nexports.reach = reach;\nvar room = new _Events(['MESSAGE_ADDED', 'MESSAGE_CHANGED', 'MESSAGE_REMOVED', 'PARTICIPANT_ADDED', 'PARTICIPANT_CHANGED', 'PARTICIPANT_REMOVED', 'STREAM_PUBLISHED', 'STREAM_UNPUBLISHED']);\n/**\n * @ignore\n */\n\nexports.room = room;\nvar stream = new _Events(['MUTE', 'SIZE', 'WEBRTC_ERROR']);\n/**\n * @ignore\n */\n\nexports.stream = stream;\nvar local = new _Events(['SUBSCRIBED', 'WEBRTC_ERROR']);\n/**\n * @ignore\n */\n\nexports.local = local;\nvar invite = new _Events([_constants.ACCEPTED, _constants.REJECTED, _constants.CANCELED]);\nexports.invite = invite;","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = exports.SCREEN_SHARING = exports.AUDIO_VIDEO = exports.VIDEO = exports.AUDIO = void 0;\n\n/**\n * The available stream types\n * @typedef {Object} StreamTypes\n * @property {string} AUDIO='audio' - Audio communication service\n * @property {string} VIDEO='video' - Video communication service\n * @property {string} AUDIO_VIDEO='audio-video' - Audio and video communication service\n * @property {string} SCREEN_SHARING='screen-sharing' - Screen-sharing communication service\n */\n\n/**\n * Audio communication service\n * @ignore\n * @type {string}\n */\nvar AUDIO = 'audio';\n/**\n * Video communication service\n * @ignore\n * @type {string}\n */\n\nexports.AUDIO = AUDIO;\nvar VIDEO = 'video';\n/**\n * Audio and video communication service\n * @ignore\n * @type {string}\n */\n\nexports.VIDEO = VIDEO;\nvar AUDIO_VIDEO = 'audio-video';\n/**\n * Screen-sharing service\n * @ignore\n * @type {string}\n */\n\nexports.AUDIO_VIDEO = AUDIO_VIDEO;\nvar SCREEN_SHARING = 'screen-sharing';\nexports.SCREEN_SHARING = SCREEN_SHARING;\nvar _default = {\n  AUDIO: AUDIO,\n  VIDEO: VIDEO,\n  AUDIO_VIDEO: AUDIO_VIDEO,\n  SCREEN_SHARING: SCREEN_SHARING\n};\nexports.default = _default;","/* (ignored) */","module.exports = __WEBPACK_EXTERNAL_MODULE_webcom_webcom__;"],"sourceRoot":""}